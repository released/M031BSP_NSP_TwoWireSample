Thu Sep 02 11:49:15 2021







	Macro Assembler  -  Version 1.00.0
		-----------------------------------------------

		Input  Filename : D:\11101465\03_Nuvoton\00_Datasheet\#9_Audio Enhancement\NSP\sample code\NSP playlist project\RINGRING\DemoKit\UIO_SR.asm.app
		Output Filename : D:\11101465\03_Nuvoton\00_Datasheet\#9_Audio Enhancement\NSP\sample code\NSP playlist project\RINGRING\DemoKit\Code_Release\UIO_SR.oc


    1  0000000                   	CHIP	65C02
    2  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\PGM_HEAD.INI.APP"
    3  0000000                   	SYMBOLS
    4  0000000                   	LINKLIST
    5  0000000                   	DEBUG  	ASM
    6  0000000                   	LINEAR	ON
    7  0000000                   	LONGA	OFF
    8  0000000                   	LONGI	OFF
    9  0000000                   
   10  0000000                   ;FOR *.LIC
   11  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SYS_DEF_EQU.INI.APP"
   12  0000000                   	SYMBOLS
   13  0000000                   	LINKLIST
   14  0000000                   	DEBUG  	ASM
   15  0000000                   	LINEAR	ON
   16  0000000                   	LONGA	OFF
   17  0000000                   	LONGI	OFF
   18  0000000                   
   19  0000000                   ;====================================================
   20  0000000                   ;====================================================
   21  0000000                   CHECKSUM_ADDR		EQU 00H
   22  0000000                   CHECKSUM_ADDR1		EQU 01H
   23  0000000                   CHECK_RESULT		EQU	02H
   24  0000000                   CHECKSUM_33TH		EQU 107EH
   25  0000000                   CHECKSUM_34TH		EQU 107FH
   26  0000000                   
   27  0000000                   ;====================================================
   28  0000000                   INT0_PORT	EQU 		01H
   29  0000000                   INT0_TMA	EQU 		02H
   30  0000000                   INT0_RESUME	EQU			04H
   31  0000000                   INT0_INTRF	EQU			08H		
   32  0000000                   INT0_TMG	EQU 		10H
   33  0000000                   INT0_FXF10	EQU 		20H
   34  0000000                   INT0_FXF13	EQU 		40H
   35  0000000                   INT0_FXF15	EQU 		80H
   36  0000000                   
   37  0000000                   INT1_SLD	EQU 		01H
   38  0000000                   INT1_ADC	EQU 		04H
   39  0000000                   INT1_LRCT	EQU 		08H
   40  0000000                   
   41  0000000                   TMA_IR_TX		EQU		80H
   42  0000000                   TMG_TOUCH		EQU		10H
   43  0000000                   
   44  0000000                   SYNF_ABANDON	EQU		01H
   45  0000000                   SYNF_END		EQU		08H
   46  0000000                   SYNF_PCM		EQU		10H





   47  0000000                   SYNF_SILENCE	EQU		20H
   48  0000000                   SYNF_EVENT		EQU		40H
   49  0000000                   SYNF_GAIN		EQU		80H
   50  0000000                   SYNV_VOL_BYPASS	EQU		80H
   51  0000000                   
   52  0000000                   PWMC_BP0_DIV1	EQU		00H
   53  0000000                   PWMC_BP0_DIV2	EQU		01H
   54  0000000                   PWMC_BP0_DIV4	EQU		02H
   55  0000000                   PWMC_BP0_DIV32	EQU		03H
   56  0000000                   PWMC_BP0_DIV64	EQU		04H
   57  0000000                   PWMC_BP0_DIV128	EQU		05H
   58  0000000                   PWMC_BP0_DIV256	EQU		06H
   59  0000000                   PWMC_BP0_DIV512	EQU		07H
   60  0000000                   PWMC_BP1_DIV1	EQU		00H
   61  0000000                   PWMC_BP1_DIV2	EQU		10H
   62  0000000                   PWMC_BP1_DIV4	EQU		20H
   63  0000000                   PWMC_BP1_DIV32	EQU		30H
   64  0000000                   PWMC_BP1_DIV64	EQU		40H
   65  0000000                   PWMC_BP1_DIV128	EQU		50H
   66  0000000                   PWMC_BP1_DIV256	EQU		60H
   67  0000000                   PWMC_BP1_DIV512	EQU		70H
   68  0000000                   
   69  0000000                   ;BP00_PWM	EQU		01H
   70  0000000                   ;BP01_PWM	EQU		02H
   71  0000000                   ;BP02_PWM	EQU		04H
   72  0000000                   ;BP03_PWM	EQU		08H
   73  0000000                   ;BP04_PWM	EQU		10H
   74  0000000                   ;BP05_PWM	EQU		20H
   75  0000000                   ;BP10_PWM	EQU		01H
   76  0000000                   ;BP11_PWM	EQU		02H
   77  0000000                   ;BP12_PWM	EQU		04H
   78  0000000                   
   79  0000000                   RSTF_WDT	EQU		02H
   80  0000000                   
   81  0000000                   WAKEF_PORT	EQU		01H
   82  0000000                   WAKEF_LRC	EQU		02H
   83  0000000                   WAKEF_IRWU	EQU		04H
   84  0000000                   WAKEF_RESETB	EQU		08H
   85  0000000                   WAKEF_LVR	EQU		10H
   86  0000000                   WAKEF_POR	EQU		20H
   87  0000000                   WAKEF_RST_SRC	EQU		80H
   88  0000000                   
   89  0000000                   STOP_FLAG	EQU		5AH
   90  0000000                   WDTC_CLR	EQU		01H
   91  0000000                   
   92  0000000                   LVDC_EN		EQU		01H
   93  0000000                   LDVC_21V	EQU		01H
   94  0000000                   LDVC_24V	EQU		03H
   95  0000000                   LDVC_27V	EQU		05H
   96  0000000                   LDVC_30V	EQU		07H
   97  0000000                   LDVC_33V	EQU		09H
   98  0000000                   LDVC_EXT	EQU		0BH
   99  0000000                   LDVC_DETECT	EQU		80H
  100  0000000                   
  101  0000000                   CAPS_SINK	EQU		08H
  102  0000000                   CAPS_2UA	EQU		00H
  103  0000000                   CAPS_4UA	EQU		10H	





  104  0000000                   CAPS_6UA	EQU		20H
  105  0000000                   CAPS_8UA	EQU		30H
  106  0000000                   CAPS_EN		EQU		40H
  107  0000000                   
  108  0000000                   LRCC_EN		EQU		01H
  109  0000000                   LRCC_IR_WAKEUP	EQU		02H
  110  0000000                   LRCC_IR_DHI	EQU		40H
  111  0000000                   LRCC_IR_RX	EQU		80H
  112  0000000                   
  113  0000000                   IRWD_DIV8	EQU		00H
  114  0000000                   IRWD_DIV32	EQU		01H
  115  0000000                   IRWD_DIV128	EQU		02H
  116  0000000                   IRWD_DIV512	EQU		03H
  117  0000000                   
  118  0000000                   SPIC_EN		EQU		01H
  119  0000000                   SPIC_DIV1	EQU		00H
  120  0000000                   SPIC_DIV2	EQU		20H
  121  0000000                   SPIC_DIV4	EQU		40H
  122  0000000                   SPIC_DIV8	EQU		60H
  123  0000000                   SPIC_DONE	EQU		80H
  124  0000000                   
  125  0000000                   ADRC_EN		EQU		01H
  126  0000000                   ADRC_START	EQU		02H
  127  0000000                   ADRC_BP14	EQU		00H
  128  0000000                   ADRC_BP15	EQU		04H
  129  0000000                   ADRC_BP16	EQU		08H
  130  0000000                   ADRC_BP17	EQU		0CH
  131  0000000                   ADRC_BP14_AN	EQU		10H
  132  0000000                   ADRC_BP15_AN	EQU		24H
  133  0000000                   ADRC_BP16_AN	EQU		48H
  134  0000000                   ADRC_BP17_AN	EQU		8CH
  135  0000000                   
  136  0000000                   LDOEN_EN	EQU		01H
  137  0000000                   
  138  0000000                   ISP_EN				EQU	01H
  139  0000000                   ISP_EN_PP			EQU 02H
  140  0000000                   ISP_EN_USRCFG		EQU 04H
  141  0000000                   ISP_ERR_FLAG		EQU 08H
  142  0000000                   ISP_DONE			EQU 01H
  143  0000000                   ISP_CMD_STAND		EQU	30H
  144  0000000                   ISP_CMD_READ		EQU	00H
  145  0000000                   ISP_CMD_PROGRAM		EQU 21H
  146  0000000                   ISP_CMD_ERASE_PAGE	EQU	22H
  147  0000000                   ISP_CMD_CID			EQU 0BH
  148  0000000                   ISP_CMD_DID			EQU 0CH
  149  0000000                   
  150  0000000                   ; 
  151  0000000                   ;
  152  0000000                   ; |----------------------|
  153  0000000                   ; |         Stack        |
  154  0000000                   ; |----------------------| SHM_RAM_BEGIN
  155  0000000                   ; | HW Engine Shared RAM |  
  156  0000000                   ; |----------------------| RAM_END (SHM_RAM_END)
  157  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  158  0000000                   
  159  0000000                   .IF	 (PARTNO='N589B080').OR.(PARTNO='N589C080').OR.(PARTNO='N589D080').OR.(PARTNO='N589D081')
  160  0000000                   SYS_PQ				EQU (1FH << 1)





  161  0000000                   .ENDIF
  162  0000000                   .IF	 (PARTNO='N589B120').OR.(PARTNO='N589C120').OR.(PARTNO='N589D120').OR.(PARTNO='N589D121')
  163  0000000                   SYS_PQ				EQU (27H << 1)
  164  0000000                   .ENDIF
  165  0000000                   .IF	 (PARTNO='N589A080').OR.(PARTNO='N589B170').OR.(PARTNO='N589C170').OR.(PARTNO='N589D170').OR.(PARTNO='N589D171')
  166  0000000                   SYS_PQ				EQU (2FH << 1)
  167  0000000                   .ENDIF
  168  0000000                   .IF	 (PARTNO='N589A150').OR.(PARTNO='N589B200').OR.(PARTNO='N589C200').OR.(PARTNO='N589D200').OR.(PARTNO='N589D201')
  169  0000000                   SYS_PQ				EQU (3FH << 1)
  170  0000000                   .ENDIF
  171  0000000                   .IF	 (PARTNO='N589A200').OR.(PARTNO='N589B250').OR.(PARTNO='N589C250').OR.(PARTNO='N589D250').OR.(PARTNO='N589D251')
  172  0000000                   SYS_PQ				EQU (4FH << 1)
  173  0000000                   .ENDIF
  174  0000000                   .IF	 (PARTNO='N589A280').OR.(PARTNO='N589B340').OR.(PARTNO='N589C340').OR.(PARTNO='N589D340').OR.(PARTNO='N589D341')
  175  0000000                   SYS_PQ				EQU (5FH << 1)
  176  0000000                   .ENDIF
  177  0000000                   .IF	 (PARTNO='N589D481')
  178  0000000                   SYS_PQ				EQU (7FH << 1)
  179  0000000                   .ENDIF
  180  0000000                   
  181  0000000                   .IF	 (PARTNO='N589A400').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589C480')
  182  0000000                   SYS_PQ				EQU 07FH
  183  0000000                   .ENDIF
  184  0000000                   .IF	 (PARTNO='N589A600').OR.(PARTNO='N589B650').OR.(PARTNO='N589C650').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N')
  185  0000000                   SYS_PQ				EQU 0BFH
  186  0000000                   .ENDIF
  187  0000000                   .IF	 (PARTNO='N589A900').OR.(PARTNO='N589B960').OR.(PARTNO='N589C960').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
  188  0000000                   SYS_PQ				EQU 0FFH
  189  0000000                   .ENDIF
  190  0000000                   
  191  0000000                   RAM_BEGIN		EQU 00H
  192  0000000                   
  193  0000000                   .IF (CHIPSERIES = 'N589A').OR.(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
  194  0000000                   RAM_END			EQU 1FFH
  195  0000000                   .ENDIF
  196  0000000                   
  197  0000000                   .IF (CHIPSERIES = 'N589D')
  198  0000000                   	.IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
  199  0000000                   RAM_END			EQU 17FH
  200  0000000                   	.ENDIF
  201  0000000                   	.IF	(MAINBODY='A960')
  202  0000000                   RAM_END			EQU 1FFH
  203  0000000                   	.ENDIF
  204  0000000                   .ENDIF
  205  0000000                   
  206  0000000                   DPD_RAM_BEGIN	EQU 0F00H		
  207  0000000                   DPD_RAM_END		EQU 0F1FH
  208  0000000                   
  209  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  210  0000000                   
  211  0000000                   ;====================================================
  212  0000000                   ; A340 & D171 & D481 series
  213  0000000                   ;====================================================
  214  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
  215  0000000                   SFR_BASE	EQU 	0F80H
  216  0000000                   
  217  0000000                   INTRF		EQU		0FB8H





  218  0000000                   HWENG		EQU		0FBAH
  219  0000000                   CFGULK		EQU		0FBBH
  220  0000000                   SYSCFG0		EQU		0FBCH
  221  0000000                   SYSCFG1		EQU		0FBDH
  222  0000000                   SYSCFG2		EQU		0FBEH
  223  0000000                   SYSCFG3		EQU		0FBFH
  224  0000000                   SYSCFG4		EQU		0FBCH
  225  0000000                   SYSCFG5		EQU		0FC4H
  226  0000000                   SYSCFG6		EQU		0FB4H
  227  0000000                   SYSCFG7		EQU		0FCCH
  228  0000000                   
  229  0000000                   BP0			EQU		0F80H
  230  0000000                   BP0R		EQU		0F80H
  231  0000000                   BP0D		EQU		0F84H
  232  0000000                   BP0M		EQU		0F88H
  233  0000000                   BP0EN		EQU		0F98H
  234  0000000                   
  235  0000000                   BP1			EQU		0F81H
  236  0000000                   BP1R		EQU		0F81H
  237  0000000                   BP1D		EQU		0F85H
  238  0000000                   BP1M		EQU		0F89H
  239  0000000                   BP1EN		EQU		0F99H
  240  0000000                   
  241  0000000                   ;.IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589A900').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C080').OR.(PARTNO='N589C120').OR.(PARTNO='N589C170').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D080').OR.(PARTNO='N589D120').OR.(PARTNO='N589D170').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  242  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20')
  243  0000000                   BP2			EQU		0F82H
  244  0000000                   BP2R		EQU		0F82H
  245  0000000                   BP2D		EQU		0F86H
  246  0000000                   BP2M		EQU		0F8AH
  247  0000000                   BP2EN		EQU		0F9AH
  248  0000000                   BP2MF0		EQU		0F9EH
  249  0000000                   BP2MF1		EQU		0F9FH
  250  0000000                   ;.ENDIF
  251  0000000                   ;.ENDIF
  252  0000000                   
  253  0000000                   ;.IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  254  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
  255  0000000                   BP3			EQU		0F83H
  256  0000000                   BP3R		EQU		0F83H
  257  0000000                   BP3D		EQU		0F87H
  258  0000000                   BP3M		EQU		0F8BH
  259  0000000                   BP3EN		EQU		0F9BH
  260  0000000                   ;.ENDIF
  261  0000000                   ;.ENDIF
  262  0000000                   
  263  0000000                   TMAC		EQU		0FA0H
  264  0000000                   TMAV		EQU		0FA1H
  265  0000000                   TMAO		EQU		0FA2H
  266  0000000                   
  267  0000000                   TMGC		EQU		0FA9H
  268  0000000                   TMGVL		EQU		0FAAH
  269  0000000                   TMGVH		EQU		0FABH
  270  0000000                   TMGOL		EQU		0FACH
  271  0000000                   TMGOH		EQU		0FADH
  272  0000000                   
  273  0000000                   IEF0		EQU		0F90H
  274  0000000                   EVF0		EQU		0F92H





  275  0000000                   IEF1		EQU		0F91H
  276  0000000                   EVF1		EQU		0F93H
  277  0000000                   
  278  0000000                   PCMH		EQU		0FB5H
  279  0000000                   VOL			EQU		0FB6H
  280  0000000                   CHGC		EQU		0FB7H
  281  0000000                   
  282  0000000                   BANK		EQU		0F8CH
  283  0000000                   WAKEF		EQU		0F8DH
  284  0000000                   RSTF	   	EQU     0F8FH
  285  0000000                   WDTC		EQU		0F96H
  286  0000000                   
  287  0000000                   PWMC		EQU		0FC0H
  288  0000000                   PWM0EN		EQU		0FC2H
  289  0000000                   PWV00		EQU		0FC5H
  290  0000000                   PWV01		EQU		0FC6H
  291  0000000                   PWV02		EQU		0FC7H
  292  0000000                   PWV03		EQU		0FC8H
  293  0000000                   PWV04		EQU		0FC9H
  294  0000000                   PWV05		EQU		0FCAH
  295  0000000                   PWM1EN		EQU		0FC3H
  296  0000000                   PWV10		EQU		0FCDH
  297  0000000                   PWV11		EQU		0FCEH
  298  0000000                   PWV12		EQU		0FCFH
  299  0000000                   
  300  0000000                   PWM_G0_MASK	EQU		0FCH
  301  0000000                   PWM_G1_MASK	EQU		0F3H
  302  0000000                   PWM_G2_MASK	EQU		0CFH
  303  0000000                   PWM_G3_MASK	EQU		03FH
  304  0000000                   PWM_G4_MASK	EQU		0FCH
  305  0000000                   PWM_G5_MASK	EQU		0F3H
  306  0000000                   
  307  0000000                   BP00_PWM	EQU		01H
  308  0000000                   BP01_PWM	EQU		02H
  309  0000000                   BP02_PWM	EQU		04H
  310  0000000                   BP03_PWM	EQU		08H
  311  0000000                   BP04_PWM	EQU		10H
  312  0000000                   BP05_PWM	EQU		20H
  313  0000000                   BP06_PWM	EQU		40H
  314  0000000                   BP07_PWM	EQU		80H
  315  0000000                   BP10_PWM	EQU		01H
  316  0000000                   BP11_PWM	EQU		02H
  317  0000000                   BP12_PWM	EQU		04H
  318  0000000                   BP13_PWM	EQU		08H
  319  0000000                   BP32_PWM	EQU		04H
  320  0000000                   BP33_PWM	EQU		08H
  321  0000000                   BP34_PWM	EQU		10H
  322  0000000                   BP35_PWM	EQU		20H
  323  0000000                   BP36_PWM	EQU		40H
  324  0000000                   BP37_PWM	EQU		80H
  325  0000000                   
  326  0000000                   LDOEN		EQU		0FAFH
  327  0000000                   
  328  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  329  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
  330  0000000                   SPIC		EQU		0FD8H
  331  0000000                   SPIB		EQU		0FD9H





  332  0000000                   SPIBN		EQU		0FDAH
  333  0000000                   .ENDIF
  334  0000000                   .ENDIF
  335  0000000                   
  336  0000000                   .IF (PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  337  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='LQFP48')
  338  0000000                   IRMF0		EQU		0F9DH
  339  0000000                   .ENDIF
  340  0000000                   .ENDIF
  341  0000000                   IRWS		EQU		0FDCH
  342  0000000                   IRWD		EQU		0FDDH
  343  0000000                   IRWSB		EQU		0FDEH
  344  0000000                   
  345  0000000                   CAPS		EQU		0FAEH
  346  0000000                   LVDC		EQU		0F97H
  347  0000000                   
  348  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340')
  349  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28')
  350  0000000                   ADRC		EQU		0FB0H
  351  0000000                   ADR			EQU		0FB2H
  352  0000000                   .ENDIF
  353  0000000                   .ENDIF
  354  0000000                   
  355  0000000                   LRCC		EQU		0FDBH
  356  0000000                   
  357  0000000                   IMAGEP00	EQU		0FE0H
  358  0000000                   IMAGEP01	EQU		0FE1H
  359  0000000                   IMAGEP02	EQU		0FE2H
  360  0000000                   IMAGEP03	EQU		0FE3H
  361  0000000                   IMAGEP10	EQU		0FE4H
  362  0000000                   IMAGEP11	EQU		0FE5H
  363  0000000                   IMAGEP12	EQU		0FE6H
  364  0000000                   IMAGEP13	EQU		0FE7H
  365  0000000                   
  366  0000000                   IMAGEP20	EQU		0FD4H		
  367  0000000                   IMAGEP21	EQU		0FD5H
  368  0000000                   IMAGEP22	EQU		0FD6H
  369  0000000                   IMAGEP23	EQU		0FD7H
  370  0000000                   
  371  0000000                   ISPCON		EQU		0FE8H
  372  0000000                   ISPADR0		EQU		0FE9H
  373  0000000                   ISPADR1		EQU		0FEAH
  374  0000000                   ISPADR2		EQU		0FEBH
  375  0000000                   ISPDAT0		EQU		0FECH
  376  0000000                   ISPDAT1		EQU		0FEDH
  377  0000000                   ISPDAT2		EQU		0FEEH
  378  0000000                   ISPDAT3		EQU		0FEFH
  379  0000000                   ISPCMD		EQU		0FF0H
  380  0000000                   ISPTRG		EQU		0FF1H
  381  0000000                   ISPULK		EQU		0FF2H
  382  0000000                   ISPEPT		EQU		0FF3H
  383  0000000                   ISPULK1		EQU		0FF4H
  384  0000000                   
  385  0000000                   .ENDIF
  386  0000000                   ;====================================================
  387  0000000                   ; A960 series
  388  0000000                   ;====================================================





  389  0000000                   .IF	(MAINBODY='A960')
  390  0000000                   SFR_BASE	EQU 	0F80H
  391  0000000                   
  392  0000000                   INTRF		EQU		0FB8H
  393  0000000                   HWENG		EQU		0FBAH
  394  0000000                   CFGULK		EQU		0FBBH
  395  0000000                   SYSCFG0		EQU		0FBCH
  396  0000000                   SYSCFG1		EQU		0FBDH
  397  0000000                   SYSCFG2		EQU		0FBEH
  398  0000000                   SYSCFG3		EQU		0FBFH
  399  0000000                   SYSCFG4		EQU		0FBCH
  400  0000000                   SYSCFG5		EQU		0FC4H
  401  0000000                   SYSCFG6		EQU		0FB4H
  402  0000000                   SYSCFG7		EQU		0FCCH
  403  0000000                   SYSCFG8		EQU		0FCBH
  404  0000000                   
  405  0000000                   BP0			EQU		0F80H
  406  0000000                   BP0R		EQU		0F80H
  407  0000000                   BP0D		EQU		0F84H
  408  0000000                   BP0M		EQU		0F88H
  409  0000000                   BP0EN		EQU		0F98H
  410  0000000                   
  411  0000000                   BP1			EQU		0F81H
  412  0000000                   BP1R		EQU		0F81H
  413  0000000                   BP1D		EQU		0F85H
  414  0000000                   BP1M		EQU		0F89H
  415  0000000                   BP1EN		EQU		0F99H
  416  0000000                   
  417  0000000                   ;.IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
  418  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
  419  0000000                   BP2			EQU		0F82H
  420  0000000                   BP2R		EQU		0F82H
  421  0000000                   BP2D		EQU		0F86H
  422  0000000                   BP2M		EQU		0F8AH
  423  0000000                   BP2EN		EQU		0F9AH
  424  0000000                   BP2MF0		EQU		0F9EH
  425  0000000                   BP2MF1		EQU		0F9FH
  426  0000000                   ;.ENDIF
  427  0000000                   ;.ENDIF
  428  0000000                   
  429  0000000                   ;.IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
  430  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
  431  0000000                   BP3			EQU		0F83H
  432  0000000                   BP3R		EQU		0F83H
  433  0000000                   BP3D		EQU		0F87H
  434  0000000                   BP3M		EQU		0F8BH
  435  0000000                   BP3EN		EQU		0F9BH
  436  0000000                   ;.ENDIF
  437  0000000                   ;.ENDIF
  438  0000000                   
  439  0000000                   TMAC		EQU		0FA0H
  440  0000000                   TMAV		EQU		0FA1H
  441  0000000                   TMAO		EQU		0FA2H
  442  0000000                   
  443  0000000                   TMGC		EQU		0FA9H
  444  0000000                   TMGVL		EQU		0FAAH
  445  0000000                   TMGVH		EQU		0FABH





  446  0000000                   TMGOL		EQU		0FACH
  447  0000000                   TMGOH		EQU		0FADH
  448  0000000                   
  449  0000000                   IEF0		EQU		0F90H
  450  0000000                   EVF0		EQU		0F92H
  451  0000000                   IEF1		EQU		0F91H
  452  0000000                   EVF1		EQU		0F93H
  453  0000000                   
  454  0000000                   PCMH		EQU		0FB5H
  455  0000000                   VOL			EQU		0FB6H
  456  0000000                   CHGC		EQU		0FB7H
  457  0000000                   
  458  0000000                   BANK		EQU		0F8CH
  459  0000000                   WAKEF		EQU		0F8DH
  460  0000000                   RSTF	   	EQU     0F8FH
  461  0000000                   WDTC		EQU		0F96H
  462  0000000                   
  463  0000000                   
  464  0000000                   PWMC		EQU		0FC0H
  465  0000000                   PWMEN		EQU		0FC1H
  466  0000000                   PWMOA		EQU		0FC2H
  467  0000000                   PWMOB		EQU		0FC3H
  468  0000000                   PWV0		EQU		0FC5H
  469  0000000                   PWV1		EQU		0FC6H
  470  0000000                   PWV2		EQU		0FC7H
  471  0000000                   PWV3		EQU		0FC8H
  472  0000000                   PWV4		EQU		0FC9H
  473  0000000                   PWV5		EQU		0FCAH
  474  0000000                   
  475  0000000                   PWM_G0_MASK	EQU		0FCH
  476  0000000                   PWM_G1_MASK	EQU		0F3H
  477  0000000                   PWM_G2_MASK	EQU		0CFH
  478  0000000                   PWM_G3_MASK	EQU		03FH
  479  0000000                   PWM_G4_MASK	EQU		0FCH
  480  0000000                   PWM_G5_MASK	EQU		0F3H
  481  0000000                   
  482  0000000                   BP00_PWM	EQU		01H
  483  0000000                   BP01_PWM	EQU		02H
  484  0000000                   BP02_PWM	EQU		04H
  485  0000000                   BP03_PWM	EQU		08H
  486  0000000                   BP04_PWM	EQU		10H
  487  0000000                   BP05_PWM	EQU		20H
  488  0000000                   BP06_PWM	EQU		40H
  489  0000000                   BP07_PWM	EQU		80H
  490  0000000                   BP10_PWM	EQU		01H
  491  0000000                   BP11_PWM	EQU		02H
  492  0000000                   BP12_PWM	EQU		04H
  493  0000000                   BP13_PWM	EQU		08H
  494  0000000                   BP32_PWM	EQU		04H
  495  0000000                   BP33_PWM	EQU		08H
  496  0000000                   BP34_PWM	EQU		10H
  497  0000000                   BP35_PWM	EQU		20H
  498  0000000                   BP36_PWM	EQU		40H
  499  0000000                   BP37_PWM	EQU		80H
  500  0000000                   
  501  0000000                   PWM_G0_BP00	EQU		00H
  502  0000000                   PWM_G0_BP06	EQU		01H





  503  0000000                   PWM_G0_BP32	EQU		02H
  504  0000000                   PWM_G1_BP01	EQU		00H
  505  0000000                   PWM_G1_BP07	EQU		04H
  506  0000000                   PWM_G1_BP33	EQU		08H
  507  0000000                   PWM_G2_BP02	EQU		00H
  508  0000000                   PWM_G2_BP10	EQU		10H
  509  0000000                   PWM_G2_BP34	EQU		20H
  510  0000000                   PWM_G3_BP03	EQU		00H
  511  0000000                   PWM_G3_BP11	EQU		40H
  512  0000000                   PWM_G3_BP35	EQU		80H
  513  0000000                   PWM_G4_BP04	EQU		00H
  514  0000000                   PWM_G4_BP12	EQU		01H
  515  0000000                   PWM_G4_BP36	EQU		02H
  516  0000000                   PWM_G5_BP05	EQU		00H
  517  0000000                   PWM_G5_BP13	EQU		04H
  518  0000000                   PWM_G5_BP37	EQU		08H
  519  0000000                   
  520  0000000                   ;LDOEN		EQU		0FAFH
  521  0000000                   
  522  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
  523  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20')
  524  0000000                   SPIC		EQU		0FD8H
  525  0000000                   SPIB		EQU		0FD9H
  526  0000000                   SPIBN		EQU		0FDAH
  527  0000000                   .ENDIF
  528  0000000                   .ENDIF
  529  0000000                   
  530  0000000                   IRWS		EQU		0FDCH
  531  0000000                   IRWD		EQU		0FDDH
  532  0000000                   IRWSB		EQU		0FDEH
  533  0000000                   
  534  0000000                   CAPS		EQU		0FAEH
  535  0000000                   LVDC		EQU		0F97H
  536  0000000                   
  537  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
  538  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
  539  0000000                   ADRC		EQU		0FB0H
  540  0000000                   ADR			EQU		0FB2H
  541  0000000                   .ENDIF
  542  0000000                   .ENDIF
  543  0000000                   
  544  0000000                   LRCC		EQU		0FDBH
  545  0000000                   
  546  0000000                   SLDC0		EQU		0F70H
  547  0000000                   SLDC1		EQU		0F71H
  548  0000000                   HIDA1		EQU		0F72H
  549  0000000                   LODA1		EQU		0F73H
  550  0000000                   HIDA0		EQU		0F74H
  551  0000000                   LODA0		EQU		0F75H
  552  0000000                   SDTH		EQU		0F76H
  553  0000000                   SLDAT		EQU		0F77H
  554  0000000                   
  555  0000000                   UMODE		EQU		0F78H
  556  0000000                   TXSTS		EQU		0F79H
  557  0000000                   RXSTS		EQU		0F7AH
  558  0000000                   BRDIVH		EQU		0F7BH
  559  0000000                   BRDIVL		EQU		0F7CH





  560  0000000                   URTHD		EQU		0F7DH
  561  0000000                   URDATA		EQU		0F7EH
  562  0000000                   TDLY		EQU		0F7FH
  563  0000000                   
  564  0000000                   IMAGEP00	EQU		0FE0H
  565  0000000                   IMAGEP01	EQU		0FE1H
  566  0000000                   IMAGEP02	EQU		0FE2H
  567  0000000                   IMAGEP03	EQU		0FE3H
  568  0000000                   IMAGEP10	EQU		0FE4H
  569  0000000                   IMAGEP11	EQU		0FE5H
  570  0000000                   IMAGEP12	EQU		0FE6H
  571  0000000                   IMAGEP13	EQU		0FE7H
  572  0000000                   
  573  0000000                   IMAGEP20	EQU		0FD4H		
  574  0000000                   IMAGEP21	EQU		0FD5H
  575  0000000                   IMAGEP22	EQU		0FD6H
  576  0000000                   IMAGEP23	EQU		0FD7H
  577  0000000                   
  578  0000000                   ISPCON		EQU		0FE8H
  579  0000000                   ISPADR0		EQU		0FE9H
  580  0000000                   ISPADR1		EQU		0FEAH
  581  0000000                   ISPADR2		EQU		0FEBH
  582  0000000                   ISPDAT0		EQU		0FECH
  583  0000000                   ISPDAT1		EQU		0FEDH
  584  0000000                   ISPDAT2		EQU		0FEEH
  585  0000000                   ISPDAT3		EQU		0FEFH
  586  0000000                   ISPCMD		EQU		0FF0H
  587  0000000                   ISPTRG		EQU		0FF1H
  588  0000000                   ISPULK		EQU		0FF2H
  589  0000000                   ISPEPT		EQU		0FF3H
  590  0000000                   ISPULK1		EQU		0FF4H
  591  0000000                   
  592  0000000                   .ENDIF
  593  0000000                   
  594  0000000                   
  595  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\N55P242_DEFINE.INI.APP"
  596  0000000                   ;----IO REGUSTER----------
  597  0000000                   BPA0			EQU	00H
  598  0000000                   BPB0			EQU	01H
  599  0000000                   BPC0			EQU	02H
  600  0000000                   BPA1			EQU	00H
  601  0000000                   BPB1			EQU	01H
  602  0000000                   BPC1			EQU	02H
  603  0000000                   
  604  0000000                   ;----IO REGUSTER----------
  605  0000000                   ; BUFFER  Data of GPA/B/C
  606  0000000                   ;-------------------------
  607  0000000                   P242BPA_B		EQU	00H
  608  0000000                   P242BPB_B		EQU	01H
  609  0000000                   P242BPC_B		EQU	02H
  610  0000000                   
  611  0000000                   ;-------------------------
  612  0000000                   ; DIRECTION  Data of GPA/B/C
  613  0000000                   ;-------------------------
  614  0000000                   P242BPA_D		EQU	04H
  615  0000000                   P242BPB_D		EQU	05H
  616  0000000                   P242BPC_D		EQU	06H





  617  0000000                   
  618  0000000                   ;-------------------------
  619  0000000                   ; ATTRIBUTE   Data of GPA/B/C
  620  0000000                   ;-------------------------
  621  0000000                   P242BPA_A		EQU	08H
  622  0000000                   P242BPB_A		EQU	09H
  623  0000000                   P242BPC_A		EQU	0AH
  624  0000000                   
  625  0000000                   ;-------------------------
  626  0000000                   ; PIN data   Data of GPA/B/C
  627  0000000                   ;-------------------------
  628  0000000                   P242BPA_P		EQU	0CH
  629  0000000                   P242BPB_P		EQU	0DH
  630  0000000                   P242BPC_P		EQU	0EH
  631  0000000                   
  632  0000000                   
  633  0000000                   
  634  0000000                   ;-----------------WAKE UP--------------------------
  635  0000000                   ;WAKEN[7] ,KCAEN[6], KCBEN[5], KCCEN[4] ; R/W 
  636  0000000                   ;PAC[3], PBC[2], PCC[1], WKFLG[0]  ; Read Only
  637  0000000                   ;--------------------------------------------------
  638  0000000                   ;WAKEN[7]: Wakeup enable bit.
  639  0000000                   ;KCA/B/C_EN :Wakeup enable bit of GPA/B/C
  640  0000000                   ;PAC/PBC/PCC : Change bit GPA/B/C :1: change; 0: no change.
  641  0000000                   ;WKFLG :Only when PAC, PBC and PCC bits are all ¡§0¡¨s is WKFLG bit set to ¡§0¡¨
  642  0000000                   ;--------------------------------------------------
  643  0000000                   P242WKCTL		EQU	0FH
  644  0000000                   
  645  0000000                   ;----RESET------------------
  646  0000000                   P242RESET		EQU	4FH    ; Write Only
  647  0000000                   
  648  0000000                   ;----Device Select----------
  649  0000000                   P242DVSL0		EQU	4CH    ; Write Only
  650  0000000                   P242DVSL1		EQU	4DH    ; Write Only
  651  0000000                   
  652  0000000                   ;----Test Mode--------------
  653  0000000                   ;TEST[7] : 
  654  0000000                   ;---------------------------
  655  0000000                   P242TEST		EQU	4EH    ; R/W
  656  0000000                   
  657  0000000                   
  658  0000000                   
  659  0000000                   ;---AND REGISTER----------
  660  0000000                   ;----For Buffer ----------
  661  0000000                   P242AND_BPA_B		EQU	10H
  662  0000000                   P242AND_BPB_B		EQU	11H
  663  0000000                   P242AND_BPC_B		EQU	12H
  664  0000000                   
  665  0000000                   ;--- For Direction --------
  666  0000000                   P242AND_BPA_D		EQU	14H
  667  0000000                   P242AND_BPB_D		EQU	15H
  668  0000000                   P242AND_BPC_D		EQU	16H
  669  0000000                   
  670  0000000                   ;--- For Attribute  -------
  671  0000000                   P242AND_BPA_A		EQU	18H
  672  0000000                   P242AND_BPB_A		EQU	19H
  673  0000000                   P242AND_BPC_A		EQU	1AH





  674  0000000                   
  675  0000000                   ;---OR REGISTER----------
  676  0000000                   ;----For Buffer ----------
  677  0000000                   P242OR_BPA_B		EQU	20H
  678  0000000                   P242OR_BPB_B		EQU	21H
  679  0000000                   P242OR_BPC_B		EQU	22H
  680  0000000                   
  681  0000000                   ;--- For Direction --------
  682  0000000                   P242OR_BPA_D		EQU	24H
  683  0000000                   P242OR_BPB_D		EQU	25H
  684  0000000                   P242OR_BPC_D		EQU	26H
  685  0000000                   
  686  0000000                   ;--- For Attribute  -------
  687  0000000                   P242OR_BPA_A		EQU	28H
  688  0000000                   P242OR_BPB_A		EQU	29H
  689  0000000                   P242OR_BPC_A		EQU	2AH
  690  0000000                   
  691  0000000                   ;---XOR REGISTER----------
  692  0000000                   ;--- For Attribute  -------
  693  0000000                   P242XOR_BPA_B		EQU	30H
  694  0000000                   P242XOR_BPB_B		EQU	31H
  695  0000000                   P242XOR_BPC_B		EQU	32H
  696  0000000                   
  697  0000000                   ;--- For Direction --------
  698  0000000                   P242XOR_BPA_D		EQU	34H
  699  0000000                   P242XOR_BPB_D		EQU	35H
  700  0000000                   P242XOR_BPC_D		EQU	36H
  701  0000000                   
  702  0000000                   ;--- For Attribute  -------
  703  0000000                   P242XOR_BPA_A		EQU	38H
  704  0000000                   P242XOR_BPB_A		EQU	39H
  705  0000000                   P242XOR_BPC_A		EQU	3AH
  706  0000000                   
  707  0000000                   ;---------------------------
  708  0000000                   ; Constant/Normal Current/
  709  0000000                   ; Current Control of GPA/B/C
  710  0000000                   ;---------------------------
  711  0000000                   P242CNST_BPA		EQU	40H
  712  0000000                   P242CNST_BPB		EQU	41H
  713  0000000                   P242CNST_BPC		EQU	42H
  714  0000000                   
  715  0000000                   ;---PWM REGISTER----------
  716  0000000                   ;   For BPA0~BPA7 
  717  0000000                   ;-------------------------
  718  0000000                   ; Writ Only
  719  0000000                   ;-------------------------
  720  0000000                   P242PWM_BPA0		EQU	50H
  721  0000000                   P242PWM_BPA1		EQU	51H
  722  0000000                   P242PWM_BPA2		EQU	52H
  723  0000000                   P242PWM_BPA3		EQU	53H
  724  0000000                   P242PWM_BPA4		EQU	54H
  725  0000000                   P242PWM_BPA5		EQU	55H
  726  0000000                   P242PWM_BPA6		EQU	56H
  727  0000000                   P242PWM_BPA7		EQU	57H
  728  0000000                   
  729  0000000                   
  730  0000000                   ;---PWM REGISTER----------





  731  0000000                   ;   For BPB0~BPB7 
  732  0000000                   ;-------------------------
  733  0000000                   ; Writ Only
  734  0000000                   ;-------------------------
  735  0000000                   P242PWM_BPB0		EQU	58H
  736  0000000                   P242PWM_BPB1		EQU	59H
  737  0000000                   P242PWM_BPB2		EQU	5AH
  738  0000000                   P242PWM_BPB3		EQU	5BH
  739  0000000                   P242PWM_BPB4		EQU	5CH
  740  0000000                   P242PWM_BPB5		EQU	5DH
  741  0000000                   P242PWM_BPB6		EQU	5EH
  742  0000000                   P242PWM_BPB7		EQU	5FH
  743  0000000                   
  744  0000000                   ;---PWM REGISTER----------
  745  0000000                   ;   For BPC0~BPC7 
  746  0000000                   ;-------------------------
  747  0000000                   ; Writ Only
  748  0000000                   ;-------------------------
  749  0000000                   P242PWM_BPC0		EQU	60H
  750  0000000                   P242PWM_BPC1		EQU	61H
  751  0000000                   P242PWM_BPC2		EQU	62H
  752  0000000                   P242PWM_BPC3		EQU	63H
  753  0000000                   P242PWM_BPC4		EQU	64H
  754  0000000                   P242PWM_BPC5		EQU	65H
  755  0000000                   P242PWM_BPC6		EQU	66H
  756  0000000                   P242PWM_BPC7		EQU	67H
  757  0000000                   
  758  0000000                   ;---ENABLE PWM REGISTER----------
  759  0000000                   ;   For BPA/B/C0~7 
  760  0000000                   ;--------------------------------
  761  0000000                   P242PWMEN_BPA		EQU	78H
  762  0000000                   P242PWMEN_BPB		EQU	79H
  763  0000000                   P242PWMEN_BPC		EQU	7AH
  764  0000000                   
  765  0000000                   ;---PWM CLK REGISTER----------
  766  0000000                   ;   For BPA0~3, BPA4~7
  767  0000000                   ;   For BPB0~3, BPB4~7
  768  0000000                   ;   For BPB0~3, BPB4~7
  769  0000000                   ;--------------------------------
  770  0000000                   P242PWMCK_BPA		EQU	7DH   ; MSB 4bit for BPB, LSB 4bit for BPA
  771  0000000                   P242PWMCK_BPB		EQU	7DH   ; BPA/B same address 7DH
  772  0000000                   P242PWMCK_BPC		EQU	7EH   ; only LSB 4bits for BPC
  773  0000000                   
  774  0000000                   ;===========================================
  775  0000000                   ; Control Symbol Definition
  776  0000000                   ;===========================================
  777  0000000                   ;--------Wake up way-------
  778  0000000                   BY_MISO		EQU	00H
  779  0000000                   BY_PIN		EQU	01H
  780  0000000                   
  781  0000000                   ;--------external port-----
  782  0000000                   XBPA		EQU	0800H   ;.HIGH. For WakeUp bit
  783  0000000                   XBPB		EQU	0401H
  784  0000000                   XBPC		EQU	0202H
  785  0000000                   ;--------------------------
  786  0000000                   ;-------PWM pin------------
  787  0000000                   XPWM0		EQU	0100H





  788  0000000                   XPWM1		EQU	0201H
  789  0000000                   XPWM2		EQU	0402H
  790  0000000                   XPWM3		EQU	0803H
  791  0000000                   XPWM4		EQU	1004H
  792  0000000                   XPWM5		EQU	2005H
  793  0000000                   XPWM6		EQU	4006H
  794  0000000                   XPWM7		EQU	8007H
  795  0000000                   ;--------------------------
  796  0000000                   ;-------PIN pin------------
  797  0000000                   
  798  0000000                   XPIN_ALL	EQU 	00FFh
  799  0000000                   XPINALL		EQU 	00FFh
  800  0000000                   
  801  0000000                   XPIN0		EQU	0001H
  802  0000000                   XPIN1		EQU	0002H
  803  0000000                   XPIN2		EQU	0004H
  804  0000000                   XPIN3		EQU	0008H
  805  0000000                   XPIN4		EQU	0010H
  806  0000000                   XPIN5		EQU	0020H
  807  0000000                   XPIN6		EQU	0040H
  808  0000000                   XPIN7		EQU	0080H
  809  0000000                   ;-------PIN pin------------
  810  0000000                   
  811  0000000                   ;--------------------------
  812  0000000                   
  813  0000000                   ;-------PWM Clock Divider------------
  814  0000000                   ; 00: GPA0~GPA3 PWM clock is Fosc/1.
  815  0000000                   ; 01: GPA0~GPA3 PWM clock is Fosc/2.
  816  0000000                   ; 10: GPA0~GPA3 PWM clock is Fosc/4.
  817  0000000                   ; 11: GPA0~GPA3 PWM clock is Fosc/32
  818  0000000                   ;------------------------------------
  819  0000000                   XPWMA03_DIV1		EQU	00H
  820  0000000                   XPWMA03_DIV2		EQU	01H
  821  0000000                   XPWMA03_DIV4		EQU	02H
  822  0000000                   XPWMA03_DIV32		EQU	03H
  823  0000000                   XPWMA47_DIV1		EQU	00H<<2
  824  0000000                   XPWMA47_DIV2		EQU	01H<<2
  825  0000000                   XPWMA47_DIV4		EQU	02H<<2
  826  0000000                   XPWMA47_DIV32		EQU	03H<<2
  827  0000000                   
  828  0000000                   XPWMB03_DIV1		EQU	00H<<4
  829  0000000                   XPWMB03_DIV2		EQU	01H<<4
  830  0000000                   XPWMB03_DIV4		EQU	02H<<4
  831  0000000                   XPWMB03_DIV32		EQU	03H<<4
  832  0000000                   XPWMB47_DIV1		EQU	00H<<6
  833  0000000                   XPWMB47_DIV2		EQU	01H<<6
  834  0000000                   XPWMB47_DIV4		EQU	02H<<6
  835  0000000                   XPWMB47_DIV32		EQU	03H<<6
  836  0000000                   
  837  0000000                   XPWMC03_DIV1		EQU	00H
  838  0000000                   XPWMC03_DIV2		EQU	01H
  839  0000000                   XPWMC03_DIV4		EQU	02H
  840  0000000                   XPWMC03_DIV32		EQU	03H
  841  0000000                   XPWMC47_DIV1		EQU	00H<<2
  842  0000000                   XPWMC47_DIV2		EQU	01H<<2
  843  0000000                   XPWMC47_DIV4		EQU	02H<<2
  844  0000000                   XPWMC47_DIV32		EQU	03H<<2





  845  0000000                   
  846  0000000                   ;=====================================================
  847  0000000                   ; Other Symobol Definition
  848  0000000                   ;=====================================================
  849  0000000                   ;----------input mode ---------
  850  0000000                   ;float low - A=1,D=0,B=0
  851  0000000                   M_IP_FL		EQU	FF0000H
  852  0000000                   M_IP0_FL	EQU	010000H
  853  0000000                   M_IP1_FL	EQU	020000H
  854  0000000                   M_IP2_FL	EQU	040000H
  855  0000000                   M_IP3_FL	EQU	080000H
  856  0000000                   M_IP4_FL	EQU	100000H
  857  0000000                   M_IP5_FL	EQU	200000H
  858  0000000                   M_IP6_FL	EQU	400000H
  859  0000000                   M_IP7_FL	EQU	800000H
  860  0000000                   
  861  0000000                   ;float high - A=0,D=0,B=0(Default)
  862  0000000                   M_IP_FH		EQU	000000H
  863  0000000                   M_IP0_FH	EQU	000000H
  864  0000000                   M_IP1_FH	EQU	000000H
  865  0000000                   M_IP2_FH	EQU	000000H
  866  0000000                   M_IP3_FH	EQU	000000H
  867  0000000                   M_IP4_FH	EQU	000000H
  868  0000000                   M_IP5_FH	EQU	000000H
  869  0000000                   M_IP6_FH	EQU	000000H
  870  0000000                   M_IP7_FH	EQU	000000H
  871  0000000                   
  872  0000000                   ;pull low - A=1,D=0,B=1
  873  0000000                   M_IP_PL		EQU	FF00FFH
  874  0000000                   M_IP0_PL	EQU	010001H
  875  0000000                   M_IP1_PL	EQU	020002H
  876  0000000                   M_IP2_PL	EQU	040004H
  877  0000000                   M_IP3_PL	EQU	080008H
  878  0000000                   M_IP4_PL	EQU	100010H
  879  0000000                   M_IP5_PL	EQU	200020H
  880  0000000                   M_IP6_PL	EQU	400040H
  881  0000000                   M_IP7_PL	EQU	800080H
  882  0000000                   
  883  0000000                   ;pull high - A=0,D=0,B=1
  884  0000000                   M_IP_PH		EQU	0000FFH
  885  0000000                   M_IP0_PH	EQU	000001H
  886  0000000                   M_IP1_PH	EQU	000002H
  887  0000000                   M_IP2_PH	EQU	000004H
  888  0000000                   M_IP3_PH	EQU	000008H
  889  0000000                   M_IP4_PH	EQU	000010H
  890  0000000                   M_IP5_PH	EQU	000020H
  891  0000000                   M_IP6_PH	EQU	000040H
  892  0000000                   M_IP7_PH	EQU	000080H
  893  0000000                   
  894  0000000                   ;----------output mode ---------
  895  0000000                   ;CMOS high - A=0,D=1,B=1
  896  0000000                   M_OP_CM_H	EQU	00FFFFH
  897  0000000                   M_OP0_CM_H	EQU	000101H
  898  0000000                   M_OP1_CM_H	EQU	000202H
  899  0000000                   M_OP2_CM_H	EQU	000404H
  900  0000000                   M_OP3_CM_H	EQU	000808H
  901  0000000                   M_OP4_CM_H	EQU	001010H





  902  0000000                   M_OP5_CM_H	EQU	002020H
  903  0000000                   M_OP6_CM_H	EQU	004040H
  904  0000000                   M_OP7_CM_H	EQU	008080H
  905  0000000                   
  906  0000000                   ;CMOS low - A=0,D=1,B=0
  907  0000000                   M_OP_CM_L	EQU	00FF00H
  908  0000000                   M_OP0_CM_L	EQU	000100H
  909  0000000                   M_OP1_CM_L	EQU	000200H
  910  0000000                   M_OP2_CM_L	EQU	000400H
  911  0000000                   M_OP3_CM_L	EQU	000800H
  912  0000000                   M_OP4_CM_L	EQU	001000H
  913  0000000                   M_OP5_CM_L	EQU	002000H
  914  0000000                   M_OP6_CM_L	EQU	004000H
  915  0000000                   M_OP7_CM_L	EQU	008000H
  916  0000000                   
  917  0000000                   ;Inverted CMOS high - A=1,D=1,B=0
  918  0000000                   M_OP_ICM_H	EQU	FFFF00H
  919  0000000                   M_OP0_ICM_H	EQU	010100H
  920  0000000                   M_OP1_ICM_H	EQU	020200H
  921  0000000                   M_OP2_ICM_H	EQU	040400H
  922  0000000                   M_OP3_ICM_H	EQU	080800H
  923  0000000                   M_OP4_ICM_H	EQU	101000H
  924  0000000                   M_OP5_ICM_H	EQU	202000H
  925  0000000                   M_OP6_ICM_H	EQU	404000H
  926  0000000                   M_OP7_ICM_H	EQU	808000H
  927  0000000                   
  928  0000000                   ;Inverted CMOS low - A=1,D=1,B=1
  929  0000000                   M_OP_ICM_L	EQU	FFFFFFH
  930  0000000                   M_OP0_ICM_L	EQU	010101H
  931  0000000                   M_OP1_ICM_L	EQU	020202H
  932  0000000                   M_OP2_ICM_L	EQU	040404H
  933  0000000                   M_OP3_ICM_L	EQU	080808H
  934  0000000                   M_OP4_ICM_L	EQU	101010H
  935  0000000                   M_OP5_ICM_L	EQU	202020H
  936  0000000                   M_OP6_ICM_L	EQU	404040H
  937  0000000                   M_OP7_ICM_L	EQU	808080H
  938  0000000                   
  939  0000000                   ;------set output value ---------
  940  0000000                   ;set CMOS low: AND BUF
  941  0000000                   S_OPALL		EQU	FFH
  942  0000000                   S_OP0		EQU	01H
  943  0000000                   S_OP1		EQU	02H
  944  0000000                   S_OP2		EQU	04H
  945  0000000                   S_OP3		EQU	08H
  946  0000000                   S_OP4		EQU	10H
  947  0000000                   S_OP5		EQU	20H
  948  0000000                   S_OP6		EQU	40H
  949  0000000                   S_OP7		EQU	80H
  950  0000000                   ;========================================================
  951  0000000                   
  952  0000000                   	INCLUDE	"D:\11101465\03_NUVOTON\00_DATASHEET\#9_AUDIO ENHANCEMENT\NSP\SAMPLE CODE\NSP PLAYLIST PROJECT\RINGRING\DEMOKIT\CONFIGURATION.INI.APP"
  953  0000000                   LOCAL_TEST						EQU 0
  954  0000000                   ;--------------------------------------------------------------------------
  955  0000000                   ; Configurations : New add
  956  0000000                   ;--------------------------------------------------------------------------
  957  0000000                   ; share ram
  958  0000000                   SHM_RAM_BEGIN		EQU B20H





  959  0000000                   SHM_RAM_END			EQU BAFH
  960  0000000                   
  961  0000000                   ; stack
  962  0000000                   STACK_END   		EQU 1ffH
  963  0000000                   
  964  0000000                   HWE_STACK_BEGIN		EQU BB0H
  965  0000000                   
  966  0000000                   ; spi flash
  967  0000000                   WITH_SPI_SWITCH 	EQU 0
  968  0000000                   
  969  0000000                   ; share timing
  970  0000000                   ; Modified ---------- HIRC_CLK_6502		EQU 0FFH
  971  0000000                   HIRC_CLK_6502 EQU 07FH
  972  0000000                   ; Modified ---------- HIRC_CLK_HWE		EQU 17FH
  973  0000000                   HIRC_CLK_HWE  EQU 1FFH
  974  0000000                   
  975  0000000                   ;--------------------------------------------------------------------------
  976  0000000                   ; Configurations : Configurations config features for di-fferent libraries.
  977  0000000                   ;--------------------------------------------------------------------------
  978  0000000                   WITH_CHIP_SERIES				EQU 0
  979  0000000                   ;0:	N588M
  980  0000000                   ;1:	N588K
  981  0000000                   
  982  0000000                   WITH_VOL_ADJ					EQU 1
  983  0000000                   ; There will be 2 libraries for each chip series such as W566B,W566C,....
  984  0000000                   ; One library with Volume Adjustment, another one without Volume Adjustment.
  985  0000000                   ; 0: WITHOUT VOL ADJ.
  986  0000000                   ; 1: WITH S/W VOL ADJ.
  987  0000000                   ; 2: WITH H/W VOL ADJ.
  988  0000000                   
  989  0000000                   WITH_MULTI_CHANNEL				EQU  0
  990  0000000                   ; There will be 2 libraries 
  991  0000000                   ; One library with 16HQ, another one without 16HQ
  992  0000000                   ; 0: WITHOUT 16HQ.
  993  0000000                   ; 1: WITH 16HQ.	
  994  0000000                   
  995  0000000                   WITH_VOL_REDUCE					EQU 0	
  996  0000000                   
  997  0000000                   WITH_16BIT_MODE					EQU 0
  998  0000000                   ; Some with 65C816 uC, some with 65C02.
  999  0000000                   WITH_32K_BANK					EQU 1
 1000  0000000                   ;some with bank (ex:W567,W588), some without (ex:W566,W5691)
 1001  0000000                   WITH_T_BUFFER					EQU 0
 1002  0000000                   ;T-buffer is the buffer for latch decoded output PCM
 1003  0000000                   WITH_READ_DATA_TYPE 			EQU 0
 1004  0000000                   ; 0 : from ROM
 1005  0000000                   ; 1 : from FI-FO
 1006  0000000                   WITH_PCM_OUTPUT_TYPE			EQU 0
 1007  0000000                   ; 0 : unsigned PCM
 1008  0000000                   ; 1 : signed PCM (2' complement) 
 1009  0000000                   ; 2 : signed magnitude
 1010  0000000                   WITH_PCM_OUTPUT_SIZE			EQU 2
 1011  0000000                   ; 1 : 1 BYTE
 1012  0000000                   ; 2 : 2 BYTE	
 1013  0000000                   WITH_CMD						EQU 0
 1014  0000000                   ; for W569 chips that CPU send command to uC for next operations
 1015  0000000                   





 1016  0000000                   WITH_FW_MIXER					EQU 0
 1017  0000000                   ; I-f a timer mix several channels but output to a T-buffer/Mixer output.
 1018  0000000                   ; A firmware mixer will be needed.
 1019  0000000                   WITH_COMPRESSED_MIDI			EQU 2
 1020  0000000                   WITH_MULTIPLIER					EQU 0
 1021  0000000                   ; 0 : FW
 1022  0000000                   ; 1 : 9*7
 1023  0000000                   ; 2 : 9*8
 1024  0000000                   WITH_HEAD_TAIL_PROCESS			EQU 1
 1025  0000000                   
 1026  0000000                   ;-------------------------------------------------
 1027  0000000                   ; for melody symbol definition
 1028  0000000                   ;-------------------------------------------------
 1029  0000000                   ENV_SHARP_DECAY_AMOUNT				EQU 4
 1030  0000000                   
 1031  0000000                   WITH_ALL_MIXER_SFR				EQU 0
 1032  0000000                   ; Following defines T-buffer registers
 1033  0000000                   
 1034  0000000                   ;USED ACCOMPANY WITH SP_LO_T_INDEX_TABLE & SP_HI_T_INDEX_TABLE
 1035  0000000                   SP_START_SIM_BUF_VS0A			EQU 0
 1036  0000000                   SP_START_SIM_BUF_VS1A			EQU 0
 1037  0000000                   SP_START_SIM_BUF_VS2A			EQU 0
 1038  0000000                   SP_START_SIM_BUF_VS0B 			EQU 0
 1039  0000000                   SP_START_SIM_BUF_VS1B			EQU 0
 1040  0000000                   
 1041  0000000                   
 1042  0000000                   ; Following options used for ISR.
 1043  0000000                   ; Please disable VS0D->VS0C->VS2B->VS1B->VSF->VSE->...>VS0A 
 1044  0000000                   WITH_ISR_VS0A					EQU 1
 1045  0000000                   WITH_ISR_VS0B					EQU 0
 1046  0000000                   WITH_ISR_VS1A					EQU 0
 1047  0000000                   WITH_ISR_VS1B					EQU 0
 1048  0000000                   WITH_ISR_VS2A					EQU 0
 1049  0000000                   WITH_ISR_VS2B					EQU 0
 1050  0000000                   
 1051  0000000                   
 1052  0000000                   ; Following options used for selecting speech channels.
 1053  0000000                   ; Please disable VS0D->VS0C->VS2B->VS1B->VSF->VSE->...>VS0A 
 1054  0000000                   WITH_VS0A						EQU 1
 1055  0000000                   WITH_VS0B						EQU 0
 1056  0000000                   WITH_VS1A						EQU 0
 1057  0000000                   WITH_VS1B						EQU 0
 1058  0000000                   WITH_VS2A						EQU 0
 1059  0000000                   WITH_VS2B						EQU 0
 1060  0000000                   WITH_VS0C						EQU 0
 1061  0000000                   WITH_VS0D						EQU 0
 1062  0000000                   WITH_VS3						EQU 0
 1063  0000000                   WITH_VS4						EQU 0
 1064  0000000                   WITH_VS5						EQU 0
 1065  0000000                   WITH_VS6						EQU 0
 1066  0000000                   WITH_VS7						EQU 0
 1067  0000000                   WITH_VS8						EQU 0
 1068  0000000                   WITH_VS9						EQU 0
 1069  0000000                   WITH_VSA						EQU 0
 1070  0000000                   WITH_VSB						EQU 0
 1071  0000000                   WITH_VSC						EQU 0
 1072  0000000                   WITH_VSD						EQU 0





 1073  0000000                   WITH_VSE						EQU 0
 1074  0000000                   WITH_VSF						EQU 0
 1075  0000000                   
 1076  0000000                   WITH_MD4						EQU 0
 1077  0000000                   WITH_HNM4						EQU 0
 1078  0000000                   WITH_NM4						EQU 0
 1079  0000000                   WITH_NM4S						EQU 0
 1080  0000000                   WITH_MDM						EQU 0
 1081  0000000                   WITH_APM						EQU 0
 1082  0000000                   WITH_LP8						EQU 0
 1083  0000000                   WITH_VC4						EQU 0
 1084  0000000                   WITH_MDR						EQU 0
 1085  0000000                   
 1086  0000000                   WITH_E2A						EQU 0
 1087  0000000                   WITH_EMM						EQU 0
 1088  0000000                   WITH_MD6						EQU 0
 1089  0000000                   WITH_P10						EQU 0
 1090  0000000                   WITH_PC8						EQU 0
 1091  0000000                   
 1092  0000000                   WITH_SIL						EQU 1
 1093  0000000                   WITH_VMDPC8						EQU 0
 1094  0000000                   WITH_PCSPC8						EQU 0
 1095  0000000                   WITH_TONE						EQU 0
 1096  0000000                   WITH_HQPC8						EQU 0
 1097  0000000                   
 1098  0000000                   WITH_HQ567						EQU 0
 1099  0000000                   WITH_VMD567						EQU 0
 1100  0000000                   WITH_HQ567_HW						EQU 0
 1101  0000000                   WITH_HQ569_HW						EQU 0
 1102  0000000                   WITH_YAD						EQU 0
 1103  0000000                   WITH_P16						EQU 0
 1104  0000000                   WITH_VC8						EQU 0
 1105  0000000                   WITH_PC8VMDPCS						EQU 0
 1106  0000000                   WITH_LP8VMDPCS						EQU 0
 1107  0000000                   WITH_P16VMDPCS						EQU 0
 1108  0000000                   ;--------------------------------------------------------------------------
 1109  0000000                   ; Options
 1110  0000000                   ;--------------------------------------------------------------------------
 1111  0000000                   WITH_POLYPHONY					EQU 0
 1112  0000000                   WITH_MIDI_CHANNEL				EQU 0
 1113  0000000                   WITH_VOL_ADJ_MS					EQU 0
 1114  0000000                   
 1115  0000000                   WITH_PAUSE_RESUME				EQU 1
 1116  0000000                   WITH_CHANNEL_PRESSURE				EQU 0
 1117  0000000                   WITH_NOTE_OFFSET				EQU 0
 1118  0000000                   WITH_CHANGE_TEMPO				EQU 0
 1119  0000000                   WITH_ONEKEYONENOTE  				EQU 1
 1120  0000000                   WITH_VELOCITY					EQU 0
 1121  0000000                   WITH_MS_EXT_MIDI				EQU 0
 1122  0000000                   WITH_SYNC_CH1_MS				EQU 0
 1123  0000000                   ; Disable this feature will save 5 bytes RAM.
 1124  0000000                   WITH_GLOBAL_CHANNEL_VOLM 			EQU 0
 1125  0000000                   WITH_GLOBAL_CHANNEL_INS   			EQU 0
 1126  0000000                   
 1127  0000000                   WITH_PITCH_BEND					EQU 0
 1128  0000000                   WITH_VIBRATO                                 	EQU 0
 1129  0000000                   WITH_MODULATION_DEPTH                         	EQU 0





 1130  0000000                   WITH_CHANNEL_SUSTAIN				EQU 0
 1131  0000000                   WITH_SP_MIDI					EQU 0
 1132  0000000                   WITH_PERCUSSION					EQU 0
 1133  0000000                   WITH_DYNAMIC_CH					EQU 0
 1134  0000000                   WITH_MS_ENABLE_CHANNEL				EQU 0
 1135  0000000                   ; Disable this feature will save 2 bytes RAM.
 1136  0000000                   
 1137  0000000                   WITH_SP							EQU 1
 1138  0000000                   ; Disable speech channels to save code size.
 1139  0000000                   WITH_MS							EQU 0
 1140  0000000                   ; Disable melody channels to save RAM and code size.
 1141  0000000                   WITH_EVO						EQU 0
 1142  0000000                   ; Disable EVO channels to save RAM and code size.
 1143  0000000                   
 1144  0000000                   ;------for speaker output type-----------------------------------------
 1145  0000000                   WITH_SPEAKER_OUTPUT_TYPE 			EQU 	1
 1146  0000000                   WITH_SPEAKER_SWITCH      			EQU     0  
 1147  0000000                   
 1148  0000000                   WITH_SIM_SP                                     EQU     0 
 1149  0000000                   WITH_SIM_TYPE					EQU	1
 1150  0000000                   ;0:W55F
 1151  0000000                   ;1:SPI
 1152  0000000                   WITH_EXT32MBIT					EQU	0
 1153  0000000                   WITH_EXT64M_SPI					EQU 	0
 1154  0000000                   
 1155  0000000                   WITH_SP_NUM                                     EQU     1
 1156  0000000                   WITH_ONE_HQ					EQU	0
 1157  0000000                   WITH_PLAYE					EQU 	1
 1158  0000000                   
 1159  0000000                   
 1160  0000000                   
 1161  0000000                   ; Following Options speci-fy what format can be played in each individual channel.
 1162  0000000                   ; Properly disable some formats for channels can save RAM and code size.
 1163  0000000                   WITH_VS0A_SIL					EQU 1
 1164  0000000                   WITH_VS0B_SIL					EQU 0
 1165  0000000                   WITH_VS1A_SIL					EQU 0
 1166  0000000                   WITH_VS1B_SIL					EQU 0
 1167  0000000                   WITH_VS2A_SIL					EQU 0
 1168  0000000                   WITH_VS2B_SIL					EQU 0
 1169  0000000                   
 1170  0000000                   WITH_VS0A_MD4					EQU 0
 1171  0000000                   WITH_VS0B_MD4					EQU 0
 1172  0000000                   WITH_VS1A_MD4					EQU 0
 1173  0000000                   WITH_VS1B_MD4					EQU 0
 1174  0000000                   WITH_VS2A_MD4					EQU 0
 1175  0000000                   WITH_VS2B_MD4					EQU 0
 1176  0000000                   
 1177  0000000                   WITH_VS0A_HNM4					EQU 0
 1178  0000000                   WITH_VS0B_HNM4					EQU 0
 1179  0000000                   WITH_VS1A_HNM4					EQU 0
 1180  0000000                   WITH_VS1B_HNM4					EQU 0
 1181  0000000                   WITH_VS2A_HNM4					EQU 0
 1182  0000000                   WITH_VS2B_HNM4					EQU 0
 1183  0000000                   
 1184  0000000                   WITH_VS0A_NM4					EQU 0
 1185  0000000                   WITH_VS0B_NM4					EQU 0
 1186  0000000                   WITH_VS1A_NM4					EQU 0





 1187  0000000                   WITH_VS1B_NM4					EQU 0
 1188  0000000                   WITH_VS2A_NM4					EQU 0
 1189  0000000                   WITH_VS2B_NM4					EQU 0
 1190  0000000                   
 1191  0000000                   WITH_VS0A_NM4S					EQU 0
 1192  0000000                   WITH_VS0B_NM4S					EQU 0
 1193  0000000                   WITH_VS1A_NM4S					EQU 0
 1194  0000000                   WITH_VS1B_NM4S					EQU 0
 1195  0000000                   WITH_VS2A_NM4S					EQU 0
 1196  0000000                   WITH_VS2B_NM4S					EQU 0
 1197  0000000                   
 1198  0000000                   WITH_VS0A_MDM					EQU 0
 1199  0000000                   WITH_VS0B_MDM					EQU 0
 1200  0000000                   WITH_VS1A_MDM					EQU 0
 1201  0000000                   WITH_VS1B_MDM					EQU 0
 1202  0000000                   WITH_VS2A_MDM					EQU 0
 1203  0000000                   WITH_VS2B_MDM					EQU 0
 1204  0000000                   
 1205  0000000                   WITH_VS0A_APM					EQU 0
 1206  0000000                   WITH_VS0B_APM					EQU 0
 1207  0000000                   WITH_VS1A_APM					EQU 0
 1208  0000000                   WITH_VS1B_APM					EQU 0
 1209  0000000                   WITH_VS2A_APM					EQU 0
 1210  0000000                   WITH_VS2B_APM					EQU 0
 1211  0000000                   
 1212  0000000                   WITH_VS0A_LP8					EQU 0
 1213  0000000                   WITH_VS0B_LP8					EQU 0
 1214  0000000                   WITH_VS1A_LP8					EQU 0
 1215  0000000                   WITH_VS1B_LP8					EQU 0
 1216  0000000                   WITH_VS2A_LP8					EQU 0
 1217  0000000                   WITH_VS2B_LP8					EQU 0
 1218  0000000                   
 1219  0000000                   WITH_VS0A_VC4					EQU 0
 1220  0000000                   WITH_VS0B_VC4					EQU 0
 1221  0000000                   WITH_VS1A_VC4					EQU 0
 1222  0000000                   WITH_VS1B_VC4					EQU 0
 1223  0000000                   WITH_VS2A_VC4					EQU 0
 1224  0000000                   WITH_VS2B_VC4					EQU 0
 1225  0000000                   
 1226  0000000                   WITH_VS0A_MDR					EQU 0
 1227  0000000                   WITH_VS0B_MDR					EQU 0
 1228  0000000                   WITH_VS1A_MDR					EQU 0
 1229  0000000                   WITH_VS1B_MDR					EQU 0
 1230  0000000                   WITH_VS2A_MDR					EQU 0
 1231  0000000                   WITH_VS2B_MDR					EQU 0
 1232  0000000                   
 1233  0000000                   WITH_VS0A_E2A					EQU 0
 1234  0000000                   WITH_VS0B_E2A					EQU 0
 1235  0000000                   WITH_VS1A_E2A					EQU 0
 1236  0000000                   WITH_VS1B_E2A					EQU 0
 1237  0000000                   WITH_VS2A_E2A					EQU 0
 1238  0000000                   WITH_VS2B_E2A					EQU 0
 1239  0000000                   
 1240  0000000                   WITH_VS0A_EMM					EQU 0
 1241  0000000                   WITH_VS0B_EMM					EQU 0
 1242  0000000                   WITH_VS1A_EMM					EQU 0
 1243  0000000                   WITH_VS1B_EMM					EQU 0





 1244  0000000                   WITH_VS2A_EMM					EQU 0
 1245  0000000                   WITH_VS2B_EMM					EQU 0
 1246  0000000                   
 1247  0000000                   WITH_VS0A_MD6					EQU 0
 1248  0000000                   WITH_VS0B_MD6					EQU 0
 1249  0000000                   WITH_VS1A_MD6					EQU 0
 1250  0000000                   WITH_VS1B_MD6					EQU 0
 1251  0000000                   WITH_VS2A_MD6					EQU 0
 1252  0000000                   WITH_VS2B_MD6					EQU 0
 1253  0000000                   
 1254  0000000                   WITH_VS0A_P10					EQU 0
 1255  0000000                   WITH_VS0B_P10					EQU 0
 1256  0000000                   WITH_VS1A_P10					EQU 0
 1257  0000000                   WITH_VS1B_P10					EQU 0
 1258  0000000                   WITH_VS2A_P10					EQU 0
 1259  0000000                   WITH_VS2B_P10					EQU 0
 1260  0000000                   
 1261  0000000                   WITH_VS0A_PC8					EQU 0
 1262  0000000                   WITH_VS0B_PC8					EQU 0
 1263  0000000                   WITH_VS1A_PC8					EQU 0
 1264  0000000                   WITH_VS1B_PC8					EQU 0
 1265  0000000                   WITH_VS2A_PC8					EQU 0
 1266  0000000                   WITH_VS2B_PC8					EQU 0
 1267  0000000                   
 1268  0000000                   ; PC8 type VMD, disable to save code size.
 1269  0000000                   WITH_VS0A_VMDPC8				EQU 0
 1270  0000000                   WITH_VS0B_VMDPC8				EQU 0
 1271  0000000                   WITH_VS1A_VMDPC8				EQU 0
 1272  0000000                   WITH_VS1B_VMDPC8				EQU 0
 1273  0000000                   WITH_VS2A_VMDPC8				EQU 0
 1274  0000000                   WITH_VS2B_VMDPC8				EQU 0
 1275  0000000                   
 1276  0000000                   ; PC8 type PCS, disable to save code size.
 1277  0000000                   WITH_VS0A_PCSPC8				EQU 0
 1278  0000000                   WITH_VS0B_PCSPC8				EQU 0
 1279  0000000                   WITH_VS1A_PCSPC8				EQU 0
 1280  0000000                   WITH_VS1B_PCSPC8				EQU 0
 1281  0000000                   WITH_VS2A_PCSPC8				EQU 0
 1282  0000000                   WITH_VS2B_PCSPC8				EQU 0
 1283  0000000                   
 1284  0000000                   ; I-f there is HQ melody, disable TONE save nothing.
 1285  0000000                   WITH_VS0A_TONE					EQU 0
 1286  0000000                   WITH_VS0B_TONE					EQU 0
 1287  0000000                   WITH_VS1A_TONE					EQU 0
 1288  0000000                   WITH_VS1B_TONE					EQU 0
 1289  0000000                   WITH_VS2A_TONE					EQU 0
 1290  0000000                   WITH_VS2B_TONE					EQU 0
 1291  0000000                   
 1292  0000000                   ; W566/W588(PC8) type HQ, disable to save code size.
 1293  0000000                   WITH_VS0A_HQPC8					EQU 0
 1294  0000000                   WITH_VS0B_HQPC8					EQU 0
 1295  0000000                   WITH_VS1A_HQPC8					EQU 0
 1296  0000000                   WITH_VS1B_HQPC8					EQU 0
 1297  0000000                   WITH_VS2A_HQPC8					EQU 0
 1298  0000000                   WITH_VS2B_HQPC8					EQU 0
 1299  0000000                   
 1300  0000000                   WITH_CH0_EVO					EQU 0





 1301  0000000                   WITH_CH1_EVO					EQU 0
 1302  0000000                   WITH_CH2_EVO					EQU 0
 1303  0000000                   
 1304  0000000                   
 1305  0000000                   WITH_FILTER					EQU 0
 1306  0000000                   WITH_NOISE_SHAPING				EQU 0
 1307  0000000                   ;NoiseShapingEnableCondition
 1308  0000000                   ;0 - not support noise shaping
 1309  0000000                   ;1 - support noise shaping
 1310  0000000                   ;2 - only PWM support shaping
 1311  0000000                   
 1312  0000000                   WITH_DAC_ENABLE					EQU 0
 1313  0000000                   WITH_SP0XL_RESOLUTION				EQU 1
 1314  0000000                   ; 1 - 16 bit
 1315  0000000                   ; 2 - 14 bit
 1316  0000000                   ; 3 - 12 bit
 1317  0000000                   WITH_SPEN_EFFECTIVE_BITS       			EQU 7
 1318  0000000                   ;X X X X PWM_NS DAC_MA PWM DAC  
 1319  0000000                   WITH_RDPC_VALUE         			EQU 0
 1320  0000000                   
 1321  0000000                   WITH_MS_CODA					EQU 0
 1322  0000000                   WITH_SP_MIDI_SIMUL 				EQU 1	
 1323  0000000                   ;SpeechMidiSimultaneously
 1324  0000000                   WITH_SP_SKIP                       		EQU 1
 1325  0000000                   WITH_SP_GLOBAL_SR                       	EQU 1
 1326  0000000                   
 1327  0000000                   WITH_RAM_OVER_STACK				EQU 	0
 1328  0000000                   WITH_STACK_SIZE					EQU	32
 1329  0000000                   WITH_HWENGINE_SHARED_RAM_SIZE			EQU	0
 1330  0000000                   
 1331  0000000                   TONE_2KHZ_TMC	EQU 7
 1332  0000000                   TONE_2KHZ_TMV 	EQU 159
 1333  0000000                   
 1334  0000000                   WITH_COLOR_FLY_CURVENUMS	EQU 0
 1335  0000000                   
 1336  0000000                   WITH_SPI_GPIO                                   EQU     0
 1337  0000000                   WITH_SPI_SPIO                                   EQU     0
 1338  0000000                   ;SPIOEnable
 1339  0000000                   
 1340  0000000                   SPI_COMMAND_ENABLE    	EQU	0
 1341  0000000                   SPI_CLOCK_RATE        	EQU	0
 1342  0000000                   I2C_COMMAND_ENABLE	EQU	0
 1343  0000000                   
 1344  0000000                   WITH_ISP_READ_WRITE	EQU	1
 1345  0000000                   WITH_ISP_UPDATE		EQU 	0
 1346  0000000                   WITH_PROTECTION_PAGE_UPDATE	EQU 0
 1347  0000000                   WITH_BOOT_LOADER	EQU 	0
 1348  0000000                   
 1349  0000000                   BLOCK_NUM                       EQU         128
 1350  0000000                   
 1351  0000000                   PROTECTION_PAGE_WORKING_MODE    EQU        1
 1352  0000000                   
 1353  0000000                   
 1354  0000000                   WITH_PSF_PROJECT	EQU	0
 1355  0000000                   WITH_PLAY_INDEX     EQU 0
 1356  0000000                   
 1357  0000000                   ; IO EXPANDER SETTING





 1358  0000000                   N55P_DEVICE_NUM		EQU       0          
 1359  0000000                   ;N55PDeviceNum:0/1/2
 1360  0000000                   N55P_DEVICE_UIO_USED	EQU       00H
 1361  0000000                   N55P_DEVICE0_CNSTA    EQU       00H          
 1362  0000000                   N55P_DEVICE0_CNSTB    EQU       00H          
 1363  0000000                   N55P_DEVICE0_CNSTC    EQU       00H          
 1364  0000000                   N55P_DEVICE0_PCKAB    EQU       00H     
 1365  0000000                   N55P_DEVICE0_PCKCD    EQU       00H         
 1366  0000000                   
 1367  0000000                   N55P_DEVICE1_CNSTA    EQU       00H          
 1368  0000000                   N55P_DEVICE1_CNSTB    EQU       00H          
 1369  0000000                   N55P_DEVICE1_CNSTC    EQU       00H          
 1370  0000000                   N55P_DEVICE1_PCKAB    EQU       00H     
 1371  0000000                   N55P_DEVICE1_PCKCD    EQU       00H     
 1372  0000000                   
 1373  0000000                   AVAILABLE_DPD_RAM     EQU       20H
 1374  0000000                   
 1375  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1376  0000000                   ; Cap-Sensor Library
 1377  0000000                   ; 
 1378  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1379  0000000                   WITH_FW_CAP_SENSOR_KEYS         EQU 0
 1380  0000000                   
 1381  0000000                   WITH_TOUCH_WAKEUP_EN            EQU 0
 1382  0000000                   
 1383  0000000                   TOUCH_WAKEUP_EN                 EQU 0
 1384  0000000                   
 1385  0000000                   WITH_TOUCH_WAKEUP_KEYNUMS       EQU 0
 1386  0000000                   
 1387  0000000                   CAP_SENSOR_CURRENT_SOURCE       EQU 30H
 1388  0000000                   
 1389  0000000                   CAP_SENSOR_SLEEP_TIME           EQU 4FH
 1390  0000000                   
 1391  0000000                   CAP_SENSOR_TMG_DIV              EQU 00H
 1392  0000000                   
 1393  0000000                   CAP_GET_INIT_AVG                EQU 0
 1394  0000000                   
 1395  0000000                   CAP_AVG_WITH_CHECK_BUSY         EQU 0
 1396  0000000                   
 1397  0000000                   
 1398  0000000                   WITH_FW_SEN_OPTION_PIN           EQU         0
 1399  0000000                   CAP_Sensitivity_Sel_Num           EQU         0
 1400  0000000                   WITH_CAPSENSOR_MULTISENTABLE     EQU         1
 1401  0000000                   
 1402  0000000                   CAP_SENSOR_DEBOUNCE             EQU          00H
 1403  0000000                   
 1404  0000000                   CAP_SENSOR_TBL0_KEY0_TH              EQU 60
 1405  0000000                   CAP_SENSOR_TBL0_KEY1_TH              EQU 60
 1406  0000000                   CAP_SENSOR_TBL0_KEY2_TH              EQU 60
 1407  0000000                   CAP_SENSOR_TBL0_KEY3_TH              EQU 60
 1408  0000000                   CAP_SENSOR_TBL0_KEY4_TH              EQU 60
 1409  0000000                   CAP_SENSOR_TBL0_KEY5_TH              EQU 60
 1410  0000000                   CAP_SENSOR_TBL0_KEY6_TH              EQU 60
 1411  0000000                   CAP_SENSOR_TBL0_KEY7_TH              EQU 60
 1412  0000000                   CAP_SENSOR_TBL0_KEY8_TH              EQU 60
 1413  0000000                   CAP_SENSOR_TBL0_KEY9_TH              EQU 60
 1414  0000000                   CAP_SENSOR_TBL0_KEY10_TH             EQU 60





 1415  0000000                   CAP_SENSOR_TBL0_KEY11_TH             EQU 60
 1416  0000000                   CAP_SENSOR_TBL0_KEY12_TH             EQU 60
 1417  0000000                   CAP_SENSOR_TBL0_KEY13_TH             EQU 60
 1418  0000000                   CAP_SENSOR_TBL0_KEY14_TH             EQU 60
 1419  0000000                   CAP_SENSOR_TBL0_KEY15_TH             EQU 60
 1420  0000000                   CAP_SENSOR_TBL0_KEY16_TH             EQU 60
 1421  0000000                   CAP_SENSOR_TBL0_KEY17_TH             EQU 60
 1422  0000000                   CAP_SENSOR_TBL0_KEY18_TH             EQU 60
 1423  0000000                   CAP_SENSOR_TBL0_KEY19_TH             EQU 60
 1424  0000000                   CAP_SENSOR_TBL0_KEY20_TH             EQU 60
 1425  0000000                   CAP_SENSOR_TBL0_KEY21_TH             EQU 60
 1426  0000000                   CAP_SENSOR_TBL0_KEY22_TH             EQU 60
 1427  0000000                   CAP_SENSOR_TBL0_KEY23_TH             EQU 60
 1428  0000000                   
 1429  0000000                   CAP_SENSOR_TBL0_KEY0_TH_UNTOUCHED              EQU 30
 1430  0000000                   CAP_SENSOR_TBL0_KEY1_TH_UNTOUCHED              EQU 30
 1431  0000000                   CAP_SENSOR_TBL0_KEY2_TH_UNTOUCHED              EQU 30
 1432  0000000                   CAP_SENSOR_TBL0_KEY3_TH_UNTOUCHED              EQU 30
 1433  0000000                   CAP_SENSOR_TBL0_KEY4_TH_UNTOUCHED              EQU 30
 1434  0000000                   CAP_SENSOR_TBL0_KEY5_TH_UNTOUCHED              EQU 30
 1435  0000000                   CAP_SENSOR_TBL0_KEY6_TH_UNTOUCHED              EQU 30
 1436  0000000                   CAP_SENSOR_TBL0_KEY7_TH_UNTOUCHED              EQU 30
 1437  0000000                   CAP_SENSOR_TBL0_KEY8_TH_UNTOUCHED              EQU 30
 1438  0000000                   CAP_SENSOR_TBL0_KEY9_TH_UNTOUCHED              EQU 30
 1439  0000000                   CAP_SENSOR_TBL0_KEY10_TH_UNTOUCHED             EQU 30
 1440  0000000                   CAP_SENSOR_TBL0_KEY11_TH_UNTOUCHED             EQU 30
 1441  0000000                   CAP_SENSOR_TBL0_KEY12_TH_UNTOUCHED             EQU 30
 1442  0000000                   CAP_SENSOR_TBL0_KEY13_TH_UNTOUCHED             EQU 30
 1443  0000000                   CAP_SENSOR_TBL0_KEY14_TH_UNTOUCHED             EQU 30
 1444  0000000                   CAP_SENSOR_TBL0_KEY15_TH_UNTOUCHED             EQU 30
 1445  0000000                   CAP_SENSOR_TBL0_KEY16_TH_UNTOUCHED             EQU 30
 1446  0000000                   CAP_SENSOR_TBL0_KEY17_TH_UNTOUCHED             EQU 30
 1447  0000000                   CAP_SENSOR_TBL0_KEY18_TH_UNTOUCHED             EQU 30
 1448  0000000                   CAP_SENSOR_TBL0_KEY19_TH_UNTOUCHED             EQU 30
 1449  0000000                   CAP_SENSOR_TBL0_KEY20_TH_UNTOUCHED             EQU 30
 1450  0000000                   CAP_SENSOR_TBL0_KEY21_TH_UNTOUCHED             EQU 30
 1451  0000000                   CAP_SENSOR_TBL0_KEY22_TH_UNTOUCHED             EQU 30
 1452  0000000                   CAP_SENSOR_TBL0_KEY23_TH_UNTOUCHED             EQU 30
 1453  0000000                   
 1454  0000000                   CAP_SENSOR_TBL0_KEY0_TH_NOISEFILTER              EQU 7
 1455  0000000                   CAP_SENSOR_TBL0_KEY1_TH_NOISEFILTER              EQU 7
 1456  0000000                   CAP_SENSOR_TBL0_KEY2_TH_NOISEFILTER              EQU 7
 1457  0000000                   CAP_SENSOR_TBL0_KEY3_TH_NOISEFILTER              EQU 7
 1458  0000000                   CAP_SENSOR_TBL0_KEY4_TH_NOISEFILTER              EQU 7
 1459  0000000                   CAP_SENSOR_TBL0_KEY5_TH_NOISEFILTER              EQU 7
 1460  0000000                   CAP_SENSOR_TBL0_KEY6_TH_NOISEFILTER              EQU 7
 1461  0000000                   CAP_SENSOR_TBL0_KEY7_TH_NOISEFILTER              EQU 7
 1462  0000000                   CAP_SENSOR_TBL0_KEY8_TH_NOISEFILTER              EQU 7
 1463  0000000                   CAP_SENSOR_TBL0_KEY9_TH_NOISEFILTER              EQU 7
 1464  0000000                   CAP_SENSOR_TBL0_KEY10_TH_NOISEFILTER             EQU 7
 1465  0000000                   CAP_SENSOR_TBL0_KEY11_TH_NOISEFILTER             EQU 7
 1466  0000000                   CAP_SENSOR_TBL0_KEY12_TH_NOISEFILTER             EQU 7
 1467  0000000                   CAP_SENSOR_TBL0_KEY13_TH_NOISEFILTER             EQU 7
 1468  0000000                   CAP_SENSOR_TBL0_KEY14_TH_NOISEFILTER             EQU 7
 1469  0000000                   CAP_SENSOR_TBL0_KEY15_TH_NOISEFILTER             EQU 7
 1470  0000000                   CAP_SENSOR_TBL0_KEY16_TH_NOISEFILTER             EQU 7
 1471  0000000                   CAP_SENSOR_TBL0_KEY17_TH_NOISEFILTER             EQU 7





 1472  0000000                   CAP_SENSOR_TBL0_KEY18_TH_NOISEFILTER             EQU 7
 1473  0000000                   CAP_SENSOR_TBL0_KEY19_TH_NOISEFILTER             EQU 7
 1474  0000000                   CAP_SENSOR_TBL0_KEY20_TH_NOISEFILTER             EQU 7
 1475  0000000                   CAP_SENSOR_TBL0_KEY21_TH_NOISEFILTER             EQU 7
 1476  0000000                   CAP_SENSOR_TBL0_KEY22_TH_NOISEFILTER             EQU 7
 1477  0000000                   CAP_SENSOR_TBL0_KEY23_TH_NOISEFILTER             EQU 7
 1478  0000000                   
 1479  0000000                   
 1480  0000000                   AVG_ADJ_CNT_NUM               EQU 0
 1481  0000000                   
 1482  0000000                   
 1483  0000000                   CAP_SENSOR_SEL_PIN0     EQU 0
 1484  0000000                   CAP_SENSOR_SEL_PIN1     EQU 0
 1485  0000000                   CAP_SENSOR_SEL_PIN2     EQU 0
 1486  0000000                   CAP_SENSOR_SEL_PIN3     EQU 0
 1487  0000000                   
 1488  0000000                   
 1489  0000000                   CAP_RTP_DISABLE         EQU 0
 1490  0000000                   CAP_CHARGE_MODE         EQU 0
 1491  0000000                   CAP_SKIP_FIRST_SUM      EQU 1
 1492  0000000                   
 1493  0000000                   ;;;; Selection Pin for sleep time table
 1494  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1495  0000000                   CAP_SleepTime_Sel_Num       EQU 0
 1496  0000000                   WITH_SLEEP_SEL_PIN_NUM      EQU 0
 1497  0000000                   
 1498  0000000                   CAP_SENSOR_ST_SEL_PIN0     EQU 0
 1499  0000000                   CAP_SENSOR_ST_SEL_PIN1     EQU 0
 1500  0000000                   CAP_SENSOR_ST_SEL_PIN2     EQU 0
 1501  0000000                   CAP_SENSOR_ST_SEL_PIN3     EQU 0
 1502  0000000                   
 1503  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX0              EQU 79
 1504  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX1              EQU 0
 1505  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX2              EQU 0
 1506  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX3              EQU 0
 1507  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX4              EQU 0
 1508  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX5              EQU 0
 1509  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX6              EQU 0
 1510  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX7              EQU 0
 1511  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX8              EQU 0
 1512  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX9              EQU 0
 1513  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX10             EQU 0
 1514  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX11             EQU 0
 1515  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX12             EQU 0
 1516  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX13             EQU 0
 1517  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX14             EQU 0
 1518  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX15             EQU 0
 1519  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1520  0000000                   
 1521  0000000                   CAP_SCAN_NUBER          EQU 16
 1522  0000000                   ;;;; Cap Sensor
 1523  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1524  0000000                   CAP_SENSOR_KEY0_BP              EQU 0
 1525  0000000                   CAP_SENSOR_KEY1_BP              EQU 0
 1526  0000000                   CAP_SENSOR_KEY2_BP              EQU 0
 1527  0000000                   CAP_SENSOR_KEY3_BP              EQU 0
 1528  0000000                   CAP_SENSOR_KEY4_BP              EQU 0





 1529  0000000                   CAP_SENSOR_KEY5_BP              EQU 0
 1530  0000000                   CAP_SENSOR_KEY6_BP              EQU 0
 1531  0000000                   CAP_SENSOR_KEY7_BP              EQU 0
 1532  0000000                   CAP_SENSOR_KEY8_BP              EQU 0
 1533  0000000                   CAP_SENSOR_KEY9_BP              EQU 0
 1534  0000000                   CAP_SENSOR_KEY10_BP             EQU 0
 1535  0000000                   CAP_SENSOR_KEY11_BP             EQU 0
 1536  0000000                   CAP_SENSOR_KEY12_BP             EQU 0
 1537  0000000                   CAP_SENSOR_KEY13_BP             EQU 0
 1538  0000000                   CAP_SENSOR_KEY14_BP             EQU 0
 1539  0000000                   CAP_SENSOR_KEY15_BP             EQU 0
 1540  0000000                   CAP_SENSOR_KEY16_BP             EQU 0
 1541  0000000                   CAP_SENSOR_KEY17_BP             EQU 0
 1542  0000000                   CAP_SENSOR_KEY18_BP             EQU 0
 1543  0000000                   CAP_SENSOR_KEY19_BP             EQU 0
 1544  0000000                   CAP_SENSOR_KEY20_BP             EQU 0
 1545  0000000                   CAP_SENSOR_KEY21_BP             EQU 0
 1546  0000000                   CAP_SENSOR_KEY22_BP             EQU 0
 1547  0000000                   CAP_SENSOR_KEY23_BP             EQU 0
 1548  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1549  0000000                   
 1550  0000000                   
 1551  0000000                   ;;;; UART
 1552  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1553  0000000                   WITH_UART_TX                     EQU         0
 1554  0000000                   WITH_UART_RX                     EQU         0
 1555  0000000                   WITH_UART_SWITCH                 EQU         0
 1556  0000000                   UART_BAUDRATE_DIVIDER            EQU         354
 1557  0000000                   TDLY_VALUE                       EQU         0
 1558  0000000                   PARITY_BIT                       EQU         0
 1559  0000000                   UART_TXDLY_CNT                   EQU         3
 1560  0000000                   
 1561  0000000                   
 1562  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1563  0000000                   
 1564  0000000                   ;;;; Address LED
 1565  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1566  0000000                   WITH_SLD_ENABLE			EQU		00H
 1567  0000000                   WITH_SLD_SWITCH 		EQU		00H
 1568  0000000                   SLD_CTL_TYPE			EQU		00H
 1569  0000000                   SLD_ORDER_BIT			EQU		01H
 1570  0000000                   SLD_ONE_WIRE_HIDA0		EQU		06H
 1571  0000000                   SLD_ONE_WIRE_HIDA1		EQU		0CH
 1572  0000000                   SLD_ONE_WIRE_LODA0		EQU		12H
 1573  0000000                   SLD_ONE_WIRE_LODA1		EQU		0CH
 1574  0000000                   SLD_TWO_WIRE_CLK_RATE	EQU		00H         
 1575  0000000                   
 1576  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1577  0000000                   
 1578  0000000                   	INCLUDE	"D:\11101465\03_NUVOTON\00_DATASHEET\#9_AUDIO ENHANCEMENT\NSP\SAMPLE CODE\NSP PLAYLIST PROJECT\RINGRING\DEMOKIT\RAMVAR.INI.APP"
 1579  0000000                   ;  0WITH_SPI_SWITCH
 1580  0000000                   ;  0WITH_CHIP_SERIES
 1581  0000000                   ;  1WITH_VOL_ADJ
 1582  0000000                   ;  0WITH_MULTI_CHANNEL
 1583  0000000                   ;  0WITH_VOL_REDUCE
 1584  0000000                   ;  0WITH_16BIT_MODE
 1585  0000000                   ;  1WITH_32K_BANK





 1586  0000000                   ;  0WITH_T_BUFFER
 1587  0000000                   ;  0WITH_READ_DATA_TYPE
 1588  0000000                   ;  0WITH_PCM_OUTPUT_TYPE
 1589  0000000                   ;  2WITH_PCM_OUTPUT_SIZE
 1590  0000000                   ;  0WITH_CMD
 1591  0000000                   ;  0WITH_FW_MIXER
 1592  0000000                   ;  2WITH_COMPRESSED_MIDI
 1593  0000000                   ;  0WITH_MULTIPLIER
 1594  0000000                   ;  1WITH_HEAD_TAIL_PROCESS
 1595  0000000                   ;  0WITH_ALL_MIXER_SFR
 1596  0000000                   ;  1WITH_ISR_VS0A
 1597  0000000                   ;  0WITH_ISR_VS0B
 1598  0000000                   ;  0WITH_ISR_VS1A
 1599  0000000                   ;  0WITH_ISR_VS1B
 1600  0000000                   ;  0WITH_ISR_VS2A
 1601  0000000                   ;  0WITH_ISR_VS2B
 1602  0000000                   ;  1WITH_VS0A
 1603  0000000                   ;  0WITH_VS0B
 1604  0000000                   ;  0WITH_VS1A
 1605  0000000                   ;  0WITH_VS1B
 1606  0000000                   ;  0WITH_VS2A
 1607  0000000                   ;  0WITH_VS2B
 1608  0000000                   ;  0WITH_VS0C
 1609  0000000                   ;  0WITH_VS0D
 1610  0000000                   ;  0WITH_VS3
 1611  0000000                   ;  0WITH_VS4
 1612  0000000                   ;  0WITH_VS5
 1613  0000000                   ;  0WITH_VS6
 1614  0000000                   ;  0WITH_VS7
 1615  0000000                   ;  0WITH_VS8
 1616  0000000                   ;  0WITH_VS9
 1617  0000000                   ;  0WITH_VSA
 1618  0000000                   ;  0WITH_VSB
 1619  0000000                   ;  0WITH_VSC
 1620  0000000                   ;  0WITH_VSD
 1621  0000000                   ;  0WITH_VSE
 1622  0000000                   ;  0WITH_VSF
 1623  0000000                   ;  0WITH_MD4
 1624  0000000                   ;  0WITH_HNM4
 1625  0000000                   ;  0WITH_NM4
 1626  0000000                   ;  0WITH_NM4S
 1627  0000000                   ;  0WITH_MDM
 1628  0000000                   ;  0WITH_APM
 1629  0000000                   ;  0WITH_LP8
 1630  0000000                   ;  0WITH_VC4
 1631  0000000                   ;  0WITH_MDR
 1632  0000000                   ;  0WITH_E2A
 1633  0000000                   ;  0WITH_EMM
 1634  0000000                   ;  0WITH_MD6
 1635  0000000                   ;  0WITH_P10
 1636  0000000                   ;  0WITH_PC8
 1637  0000000                   ;  1WITH_SIL
 1638  0000000                   ;  0WITH_VMDPC8
 1639  0000000                   ;  0WITH_PCSPC8
 1640  0000000                   ;  0WITH_TONE
 1641  0000000                   ;  0WITH_HQPC8
 1642  0000000                   ;  0WITH_HQ567





 1643  0000000                   ;  0WITH_VMD567
 1644  0000000                   ;  0WITH_HQ567_HW
 1645  0000000                   ;  0WITH_HQ569_HW
 1646  0000000                   ;  0WITH_YAD
 1647  0000000                   ;  0WITH_P16
 1648  0000000                   ;  0WITH_VC8
 1649  0000000                   ;  0WITH_PC8VMDPCS
 1650  0000000                   ;  0WITH_LP8VMDPCS
 1651  0000000                   ;  0WITH_P16VMDPCS
 1652  0000000                   ;  0WITH_POLYPHONY
 1653  0000000                   ;  0WITH_MIDI_CHANNEL
 1654  0000000                   ;  0WITH_VOL_ADJ_MS
 1655  0000000                   ;  1WITH_PAUSE_RESUME
 1656  0000000                   ;  0WITH_CHANNEL_PRESSURE
 1657  0000000                   ;  0WITH_NOTE_OFFSET
 1658  0000000                   ;  0WITH_CHANGE_TEMPO
 1659  0000000                   ;  1WITH_ONEKEYONENOTE
 1660  0000000                   ;  0WITH_VELOCITY
 1661  0000000                   ;  0WITH_MS_EXT_MIDI
 1662  0000000                   ;  0WITH_SYNC_CH1_MS
 1663  0000000                   ;  0WITH_GLOBAL_CHANNEL_VOLM
 1664  0000000                   ;  0WITH_GLOBAL_CHANNEL_INS
 1665  0000000                   ;  0WITH_PITCH_BEND
 1666  0000000                   ;  0WITH_VIBRATO
 1667  0000000                   ;  0WITH_MODULATION_DEPTH
 1668  0000000                   ;  0WITH_CHANNEL_SUSTAIN
 1669  0000000                   ;  0WITH_SP_MIDI
 1670  0000000                   ;  0WITH_PERCUSSION
 1671  0000000                   ;  0WITH_DYNAMIC_CH
 1672  0000000                   ;  0WITH_MS_ENABLE_CHANNEL
 1673  0000000                   ;  1WITH_SP
 1674  0000000                   ;  0WITH_MS
 1675  0000000                   ;  0WITH_EVO
 1676  0000000                   ;  1WITH_SPEAKER_OUTPUT_TYPE
 1677  0000000                   ;  0WITH_SPEAKER_SWITCH
 1678  0000000                   ;  0WITH_SIM_SP
 1679  0000000                   ;  1WITH_SIM_TYPE
 1680  0000000                   ;  0WITH_EXT32MBIT
 1681  0000000                   ;  0WITH_EXT64M_SPI
 1682  0000000                   ;  1WITH_SP_NUM
 1683  0000000                   ;  0WITH_ONE_HQ
 1684  0000000                   ;  1WITH_PLAYE
 1685  0000000                   ;  1WITH_VS0A_SIL
 1686  0000000                   ;  0WITH_VS0B_SIL
 1687  0000000                   ;  0WITH_VS1A_SIL
 1688  0000000                   ;  0WITH_VS1B_SIL
 1689  0000000                   ;  0WITH_VS2A_SIL
 1690  0000000                   ;  0WITH_VS2B_SIL
 1691  0000000                   ;  0WITH_VS0A_MD4
 1692  0000000                   ;  0WITH_VS0B_MD4
 1693  0000000                   ;  0WITH_VS1A_MD4
 1694  0000000                   ;  0WITH_VS1B_MD4
 1695  0000000                   ;  0WITH_VS2A_MD4
 1696  0000000                   ;  0WITH_VS2B_MD4
 1697  0000000                   ;  0WITH_VS0A_HNM4
 1698  0000000                   ;  0WITH_VS0B_HNM4
 1699  0000000                   ;  0WITH_VS1A_HNM4





 1700  0000000                   ;  0WITH_VS1B_HNM4
 1701  0000000                   ;  0WITH_VS2A_HNM4
 1702  0000000                   ;  0WITH_VS2B_HNM4
 1703  0000000                   ;  0WITH_VS0A_NM4
 1704  0000000                   ;  0WITH_VS0B_NM4
 1705  0000000                   ;  0WITH_VS1A_NM4
 1706  0000000                   ;  0WITH_VS1B_NM4
 1707  0000000                   ;  0WITH_VS2A_NM4
 1708  0000000                   ;  0WITH_VS2B_NM4
 1709  0000000                   ;  0WITH_VS0A_NM4S
 1710  0000000                   ;  0WITH_VS0B_NM4S
 1711  0000000                   ;  0WITH_VS1A_NM4S
 1712  0000000                   ;  0WITH_VS1B_NM4S
 1713  0000000                   ;  0WITH_VS2A_NM4S
 1714  0000000                   ;  0WITH_VS2B_NM4S
 1715  0000000                   ;  0WITH_VS0A_MDM
 1716  0000000                   ;  0WITH_VS0B_MDM
 1717  0000000                   ;  0WITH_VS1A_MDM
 1718  0000000                   ;  0WITH_VS1B_MDM
 1719  0000000                   ;  0WITH_VS2A_MDM
 1720  0000000                   ;  0WITH_VS2B_MDM
 1721  0000000                   ;  0WITH_VS0A_APM
 1722  0000000                   ;  0WITH_VS0B_APM
 1723  0000000                   ;  0WITH_VS1A_APM
 1724  0000000                   ;  0WITH_VS1B_APM
 1725  0000000                   ;  0WITH_VS2A_APM
 1726  0000000                   ;  0WITH_VS2B_APM
 1727  0000000                   ;  0WITH_VS0A_LP8
 1728  0000000                   ;  0WITH_VS0B_LP8
 1729  0000000                   ;  0WITH_VS1A_LP8
 1730  0000000                   ;  0WITH_VS1B_LP8
 1731  0000000                   ;  0WITH_VS2A_LP8
 1732  0000000                   ;  0WITH_VS2B_LP8
 1733  0000000                   ;  0WITH_VS0A_VC4
 1734  0000000                   ;  0WITH_VS0B_VC4
 1735  0000000                   ;  0WITH_VS1A_VC4
 1736  0000000                   ;  0WITH_VS1B_VC4
 1737  0000000                   ;  0WITH_VS2A_VC4
 1738  0000000                   ;  0WITH_VS2B_VC4
 1739  0000000                   ;  0WITH_VS0A_MDR
 1740  0000000                   ;  0WITH_VS0B_MDR
 1741  0000000                   ;  0WITH_VS1A_MDR
 1742  0000000                   ;  0WITH_VS1B_MDR
 1743  0000000                   ;  0WITH_VS2A_MDR
 1744  0000000                   ;  0WITH_VS2B_MDR
 1745  0000000                   ;  0WITH_VS0A_E2A
 1746  0000000                   ;  0WITH_VS0B_E2A
 1747  0000000                   ;  0WITH_VS1A_E2A
 1748  0000000                   ;  0WITH_VS1B_E2A
 1749  0000000                   ;  0WITH_VS2A_E2A
 1750  0000000                   ;  0WITH_VS2B_E2A
 1751  0000000                   ;  0WITH_VS0A_EMM
 1752  0000000                   ;  0WITH_VS0B_EMM
 1753  0000000                   ;  0WITH_VS1A_EMM
 1754  0000000                   ;  0WITH_VS1B_EMM
 1755  0000000                   ;  0WITH_VS2A_EMM
 1756  0000000                   ;  0WITH_VS2B_EMM





 1757  0000000                   ;  0WITH_VS0A_MD6
 1758  0000000                   ;  0WITH_VS0B_MD6
 1759  0000000                   ;  0WITH_VS1A_MD6
 1760  0000000                   ;  0WITH_VS1B_MD6
 1761  0000000                   ;  0WITH_VS2A_MD6
 1762  0000000                   ;  0WITH_VS2B_MD6
 1763  0000000                   ;  0WITH_VS0A_P10
 1764  0000000                   ;  0WITH_VS0B_P10
 1765  0000000                   ;  0WITH_VS1A_P10
 1766  0000000                   ;  0WITH_VS1B_P10
 1767  0000000                   ;  0WITH_VS2A_P10
 1768  0000000                   ;  0WITH_VS2B_P10
 1769  0000000                   ;  0WITH_VS0A_PC8
 1770  0000000                   ;  0WITH_VS0B_PC8
 1771  0000000                   ;  0WITH_VS1A_PC8
 1772  0000000                   ;  0WITH_VS1B_PC8
 1773  0000000                   ;  0WITH_VS2A_PC8
 1774  0000000                   ;  0WITH_VS2B_PC8
 1775  0000000                   ;  0WITH_VS0A_VMDPC8
 1776  0000000                   ;  0WITH_VS0B_VMDPC8
 1777  0000000                   ;  0WITH_VS1A_VMDPC8
 1778  0000000                   ;  0WITH_VS1B_VMDPC8
 1779  0000000                   ;  0WITH_VS2A_VMDPC8
 1780  0000000                   ;  0WITH_VS2B_VMDPC8
 1781  0000000                   ;  0WITH_VS0A_PCSPC8
 1782  0000000                   ;  0WITH_VS0B_PCSPC8
 1783  0000000                   ;  0WITH_VS1A_PCSPC8
 1784  0000000                   ;  0WITH_VS1B_PCSPC8
 1785  0000000                   ;  0WITH_VS2A_PCSPC8
 1786  0000000                   ;  0WITH_VS2B_PCSPC8
 1787  0000000                   ;  0WITH_VS0A_TONE
 1788  0000000                   ;  0WITH_VS0B_TONE
 1789  0000000                   ;  0WITH_VS1A_TONE
 1790  0000000                   ;  0WITH_VS1B_TONE
 1791  0000000                   ;  0WITH_VS2A_TONE
 1792  0000000                   ;  0WITH_VS2B_TONE
 1793  0000000                   ;  0WITH_VS0A_HQPC8
 1794  0000000                   ;  0WITH_VS0B_HQPC8
 1795  0000000                   ;  0WITH_VS1A_HQPC8
 1796  0000000                   ;  0WITH_VS1B_HQPC8
 1797  0000000                   ;  0WITH_VS2A_HQPC8
 1798  0000000                   ;  0WITH_VS2B_HQPC8
 1799  0000000                   ;  0WITH_CH0_EVO
 1800  0000000                   ;  0WITH_CH1_EVO
 1801  0000000                   ;  0WITH_CH2_EVO
 1802  0000000                   ;  0WITH_FILTER
 1803  0000000                   ;  0WITH_NOISE_SHAPING
 1804  0000000                   ;  0WITH_DAC_ENABLE
 1805  0000000                   ;  1WITH_SP0XL_RESOLUTION
 1806  0000000                   ;  7WITH_SPEN_EFFECTIVE_BITS
 1807  0000000                   ;  0WITH_RDPC_VALUE
 1808  0000000                   ;  0WITH_MS_CODA
 1809  0000000                   ;  1WITH_SP_MIDI_SIMUL
 1810  0000000                   ;  1WITH_SP_SKIP
 1811  0000000                   ;  1WITH_SP_GLOBAL_SR
 1812  0000000                   ;  0WITH_RAM_OVER_STACK
 1813  0000000                   ; 32WITH_STACK_SIZE





 1814  0000000                   ;  0WITH_HWENGINE_SHARED_RAM_SIZE
 1815  0000000                   ;  0WITH_COLOR_FLY_CURVENUMS
 1816  0000000                   ;  0WITH_SPI_GPIO
 1817  0000000                   ;  0WITH_SPI_SPIO
 1818  0000000                   ;  1WITH_ISP_READ_WRITE
 1819  0000000                   ;  0WITH_ISP_UPDATE
 1820  0000000                   ;  0WITH_PROTECTION_PAGE_UPDATE
 1821  0000000                   ;  0WITH_BOOT_LOADER
 1822  0000000                   ;  0WITH_PSF_PROJECT
 1823  0000000                   ;  0WITH_PLAY_INDEX
 1824  0000000                   ;  0WITH_FW_CAP_SENSOR_KEYS
 1825  0000000                   ;  0WITH_TOUCH_WAKEUP_EN
 1826  0000000                   ;  0WITH_TOUCH_WAKEUP_KEYNUMS
 1827  0000000                   ;  0CAP_AVG_WITH_CHECK_BUSY
 1828  0000000                   ;  0WITH_FW_SEN_OPTION_PIN
 1829  0000000                   ;  1WITH_CAPSENSOR_MULTISENTABLE
 1830  0000000                   ;  0WITH_SLEEP_SEL_PIN_NUM
 1831  0000000                   ;  0WITH_UART_TX
 1832  0000000                   ;  0WITH_UART_RX
 1833  0000000                   ;  0WITH_UART_SWITCH
 1834  0000000                   ;  0WITH_SLD_ENABLE
 1835  0000000                   ;  0WITH_SLD_SWITCH
 1836  0000000                   
 1837  0000000                   ;Support WITH_SP channel variables ========================
 1838  0000000                   CH_STATUS_SP                             EQU  0H ;  1,  0
 1839  0000000                   CH_STATUS1_SP                            EQU  1H ;  1,  1
 1840  0000000                   CH_ISR_SYNTH_START_SP                    EQU  2H ;  2,  2
 1841  0000000                   CH_PREVIOUS_PCM_VOL_SP                   EQU  4H ;  2,  4
 1842  0000000                   CH_PREVIOUS_PCM_SP                       EQU  6H ;  2,  6
 1843  0000000                   CH_R_FINAL_VOLUME_SP                     EQU  8H ;  1,  8
 1844  0000000                   CH_PAUSE_PCM_SP                          EQU  9H ;  2,  9
 1845  0000000                   CH_DATA_ADDR_SP                          EQU  BH ;  2, 11
 1846  0000000                   CH_RAMP_BUF1_SP                          EQU  BH ;  2, 11
 1847  0000000                   CH_DATA_BANK_SP                          EQU  DH ;  1, 13
 1848  0000000                   CH_PHRASE_REPEAT_NUM_SP                  EQU  EH ;  1, 14
 1849  0000000                   CH_SP_PCM_TEMP_SP                        EQU  FH ;  2, 15
 1850  0000000                   CH_SENTENCE_START_ADDR_SP                EQU 11H ;  2, 17
 1851  0000000                   CH_RAMP_BUF2_SP                          EQU 11H ;  2, 17
 1852  0000000                   CH_SENTENCE_START_BANK_SP                EQU 13H ;  1, 19
 1853  0000000                   CH_VOL_MUL_ADDR_SP                       EQU 14H ;  2, 20
 1854  0000000                   ; Size = 22  ==============================================
 1855  0000000                   
 1856  0000000                   ;Not support WITH_APM channel variables ========================
 1857  0000000                   
 1858  0000000                   ;Not support WITH_EAM channel variables ========================
 1859  0000000                   
 1860  0000000                   ;Not support WITH_E2A channel variables ========================
 1861  0000000                   
 1862  0000000                   ;Not support WITH_VC4 channel variables ========================
 1863  0000000                   
 1864  0000000                   ;Not support WITH_YAD channel variables ========================
 1865  0000000                   
 1866  0000000                   ;Support WITH_SIL channel variables ========================
 1867  0000000                   CH_STATUS_SIL                            EQU  0H ;  1,  0
 1868  0000000                   CH_STATUS1_SIL                           EQU  1H ;  1,  1
 1869  0000000                   CH_ISR_SYNTH_START_SIL                   EQU  2H ;  2,  2
 1870  0000000                   CH_PREVIOUS_PCM_VOL_SIL                  EQU  4H ;  2,  4





 1871  0000000                   CH_OLD_SAMPLE_SIL                        EQU  6H ;  2,  6
 1872  0000000                   CH_R_FINAL_VOLUME_SIL                    EQU  8H ;  1,  8
 1873  0000000                   CH_PAUSE_PCM_SIL                         EQU  9H ;  2,  9
 1874  0000000                   CH_DATA_ADDR_SIL                         EQU  BH ;  2, 11
 1875  0000000                   CH_DATA_BANK_SIL                         EQU  DH ;  1, 13
 1876  0000000                   CH_PHRASE_REPEAT_NUM_SIL                 EQU  EH ;  1, 14
 1877  0000000                   CH_SP_PCM_TEMP_SIL                       EQU  FH ;  2, 15
 1878  0000000                   CH_SENTENCE_START_ADDR_SIL               EQU 11H ;  2, 17
 1879  0000000                   CH_SENTENCE_START_BANK_SIL               EQU 13H ;  1, 19
 1880  0000000                   CH_COUNTER_SIL                           EQU 14H ;  1, 20
 1881  0000000                   CH_COUNTER2_SIL                          EQU 15H ;  1, 21
 1882  0000000                   ; Size = 22  ==============================================
 1883  0000000                   
 1884  0000000                   ;Not support WITH_MDM channel variables ========================
 1885  0000000                   
 1886  0000000                   ;Not support WITH_EMM channel variables ========================
 1887  0000000                   
 1888  0000000                   ;Not support WITH_MD6 channel variables ========================
 1889  0000000                   
 1890  0000000                   ;Not support WITH_PC8 channel variables ========================
 1891  0000000                   
 1892  0000000                   ;Not support WITH_LP8 channel variables ========================
 1893  0000000                   
 1894  0000000                   ;Not support WITH_P10 channel variables ========================
 1895  0000000                   
 1896  0000000                   ;Not support WITH_P16 channel variables ========================
 1897  0000000                   
 1898  0000000                   ;Not support WITH_VC8 channel variables ========================
 1899  0000000                   
 1900  0000000                   ;Not support WITH_MD4 channel variables ========================
 1901  0000000                   
 1902  0000000                   ;Not support WITH_MDR channel variables ========================
 1903  0000000                   
 1904  0000000                   ;Not support WITH_NM4 channel variables ========================
 1905  0000000                   
 1906  0000000                   ;Not support WITH_NM4S channel variables ========================
 1907  0000000                   
 1908  0000000                   ;Not support WITH_HNM4 channel variables ========================
 1909  0000000                   CH_STATUS_MS                             EQU  0H ;  0,   0
 1910  0000000                   
 1911  0000000                   
 1912  0000000                   ;Support WITH_EVO channel variables ========================
 1913  0000000                   CH_STATUS_EVO                            EQU  0H ;  1,   0
 1914  0000000                   
 1915  0000000                   ;     RAM addresses =======================================
 1916  0000000                   GLOBAL_PLAY                              EQU  0H ;  1,   0
 1917  0000000                   COMMON_FLAG                              EQU  1H ;  1,   1
 1918  0000000                   COMMON_FLAG2                             EQU  2H ;  1,   2
 1919  0000000                   SUB_INDEX                                EQU  3H ;  0,   3
 1920  0000000                   COMMAND_OPERAND                          EQU  3H ;  1,   3
 1921  0000000                   RAMP_CHANNEL                             EQU  3H ;  1,   3
 1922  0000000                   RAMP_OPERAND                             EQU  3H ;  1,   3
 1923  0000000                   TEMP_REG1                                EQU  4H ;  2,   4
 1924  0000000                   TEMP_REG2                                EQU  6H ;  2,   6
 1925  0000000                   SP_TEMP                                  EQU  8H ;  7,   8
 1926  0000000                   GLOBAL_VOL_SP0                           EQU  FH ;  1,  15
 1927  0000000                   GLOBAL_VOL_SP1                           EQU  FH ;  1,  15





 1928  0000000                   GLOBAL_VOL_SP2                           EQU  FH ;  1,  15
 1929  0000000                   CH1_GLOBAL_TMC                           EQU 10H ;  1,  16
 1930  0000000                   CH1_GLOBAL_TMV                           EQU 11H ;  1,  17
 1931  0000000                   CH2_GLOBAL_TMC                           EQU 12H ;  1,  18
 1932  0000000                   CH2_GLOBAL_TMV                           EQU 12H ;  1,  18
 1933  0000000                   CH3_GLOBAL_TMC                           EQU 12H ;  1,  18
 1934  0000000                   CH3_GLOBAL_TMV                           EQU 12H ;  1,  18
 1935  0000000                   MS_START                                 EQU 12H ;  0,  18
 1936  0000000                   CH_SYNTH_CHANNEL0                        EQU 12H ;  0,  18
 1937  0000000                   CH_SYNTH_CHANNEL1                        EQU 12H ;  0,  18
 1938  0000000                   CH_SYNTH_CHANNEL2                        EQU 12H ;  0,  18
 1939  0000000                   GLOBAL_CHANNEL_VOLM0                     EQU 12H ;  0,  18
 1940  0000000                   GLOBAL_CHANNEL_VOLM1                     EQU 12H ;  0,  18
 1941  0000000                   GLOBAL_CHANNEL_VOLM2                     EQU 12H ;  0,  18
 1942  0000000                   GLOBAL_CHANNEL_INS0                      EQU 12H ;  0,  18
 1943  0000000                   GLOBAL_CHANNEL_INS1                      EQU 12H ;  0,  18
 1944  0000000                   GLOBAL_CHANNEL_INS2                      EQU 12H ;  0,  18
 1945  0000000                   CH1_PLAY_SEGMENT                         EQU 12H ;  0,  18
 1946  0000000                   CH2_PLAY_SEGMENT                         EQU 12H ;  0,  18
 1947  0000000                   CH3_PLAY_SEGMENT                         EQU 12H ;  0,  18
 1948  0000000                   ISP_TEMP                                 EQU 12H ; 20,  18
 1949  0000000                   USER_START                               EQU 1BH ; 27
 1950  0000000                   DPD_USER_START                           EQU F00H
 1951  0000000                   
 1952  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SYNTHCONSTANT_EXTERNAL.INI.APP"
 1953  0000000                   	EXTERN TONE_MELODY_TYPE
 1954  0000000                   	EXTERN VMDPC8_MELODY_TYPE
 1955  0000000                   	EXTERN HQPC8_MELODY_TYPE
 1956  0000000                   	EXTERN PCSPC8_MELODY_TYPE
 1957  0000000                   	EXTERN END_MELODY_TYPE
 1958  0000000                   ;========================================================================	
 1959  0000000                   	EXTERN TONE_MELODY_TYPE_2
 1960  0000000                   	EXTERN VMDPC8_MELODY_TYPE_2
 1961  0000000                   	EXTERN HQPC8_MELODY_TYPE_2
 1962  0000000                   	EXTERN PCSPC8_MELODY_TYPE_2
 1963  0000000                   ;========================================================================
 1964  0000000                   	EXTERN RESTYPE_APM
 1965  0000000                   	EXTERN RESTYPE_PC8
 1966  0000000                   	EXTERN RESTYPE_P10
 1967  0000000                   	EXTERN RESTYPE_SIL
 1968  0000000                   	EXTERN RESTYPE_MDM
 1969  0000000                   	EXTERN RESTYPE_EMM
 1970  0000000                   	EXTERN RESTYPE_LP8
 1971  0000000                   	EXTERN RESTYPE_MD6
 1972  0000000                   	EXTERN RESTYPE_E2A
 1973  0000000                   	EXTERN RESTYPE_VC4
 1974  0000000                   	EXTERN RESTYPE_MD4		
 1975  0000000                   	EXTERN RESTYPE_MDR
 1976  0000000                   	EXTERN RESTYPE_NM4
 1977  0000000                   	EXTERN RESTYPE_HNM4
 1978  0000000                   	EXTERN RESTYPE_NM4S	
 1979  0000000                   
 1980  0000000                   	EXTERN RESTYPE_EVO
 1981  0000000                   	EXTERN RESTYPE_MIDI0
 1982  0000000                   
 1983  0000000                   	EXTERN RESTYPE_NUO
 1984  0000000                   	EXTERN RESTYPE_NUOS





 1985  0000000                   	EXTERN RESTYPE_P16
 1986  0000000                   ;============================================================================
 1987  0000000                   	EXTERN CHANNEL_ID_START
 1988  0000000                   	EXTERN CHANNEL_VS0A
 1989  0000000                   	EXTERN CHANNEL_VS0B
 1990  0000000                   	EXTERN CHANNEL_VS0
 1991  0000000                   ;-------------------------------------------------------------------------
 1992  0000000                   	EXTERN CHANNEL_VS1A
 1993  0000000                   	EXTERN CHANNEL_VS1B
 1994  0000000                   	EXTERN CHANNEL_VS1
 1995  0000000                   ;-------------------------------------------------------------------------
 1996  0000000                   	EXTERN CHANNEL_VS2A
 1997  0000000                   	EXTERN CHANNEL_VS2B
 1998  0000000                   	EXTERN CHANNEL_VS2
 1999  0000000                   ;-------------------------------------------------------------------------
 2000  0000000                   	EXTERN CHANNEL_MS
 2001  0000000                   ;-------------------------------------------------------------------------
 2002  0000000                   	EXTERN CHANNEL_EVO0			
 2003  0000000                   	EXTERN CHANNEL_EVO1
 2004  0000000                   	EXTERN CHANNEL_EVO2
 2005  0000000                   ;-------------------------------------------------------------------------
 2006  0000000                   	EXTERN CHANNEL_NONE
 2007  0000000                   ;============================================================================
 2008  0000000                   	EXTERN CHANNEL_VS0A_2
 2009  0000000                   	EXTERN CHANNEL_VS0B_2
 2010  0000000                   	EXTERN CHANNEL_VS0_2
 2011  0000000                   	EXTERN CHANNEL_VS1A_2
 2012  0000000                   	EXTERN CHANNEL_VS1B_2
 2013  0000000                   	EXTERN CHANNEL_VS1_2
 2014  0000000                   	EXTERN CHANNEL_VS2A_2
 2015  0000000                   	EXTERN CHANNEL_VS2B_2
 2016  0000000                   	EXTERN CHANNEL_VS2_2
 2017  0000000                   	EXTERN CHANNEL_MS_2
 2018  0000000                   ;========================================================================
 2019  0000000                   ; Speech / melody channel flags
 2020  0000000                   ;========================================================================
 2021  0000000                   	EXTERN SP_BZ
 2022  0000000                   
 2023  0000000                   	EXTERN SP_DC_RAMP_UP_FOR_MS
 2024  0000000                   	EXTERN SP_INIT
 2025  0000000                   
 2026  0000000                   	EXTERN SP_NOTE
 2027  0000000                   
 2028  0000000                   	EXTERN SP_DC_RAMP_DOWN
 2029  0000000                   	EXTERN SP_EXT_NOTE
 2030  0000000                   
 2031  0000000                   	EXTERN SP_PAUSE
 2032  0000000                   
 2033  0000000                   	EXTERN SP_DECAY
 2034  0000000                   	EXTERN SP_RESUME
 2035  0000000                   
 2036  0000000                   	EXTERN SP_DC_RAMP_UP
 2037  0000000                   
 2038  0000000                   	EXTERN SP_ADSR
 2039  0000000                   	EXTERN SP_DRUM
 2040  0000000                   	EXTERN SP_AUD
 2041  0000000                   ;------------------------------------------------------------------------





 2042  0000000                   ; Speech flag1
 2043  0000000                   ;------------------------------------------------------------------------
 2044  0000000                   	EXTERN SP_HW_DECODE
 2045  0000000                   	EXTERN SP_HW_STOP
 2046  0000000                   	EXTERN SP_HW_PAUSE
 2047  0000000                   	EXTERN SP_HW_INIT
 2048  0000000                   	EXTERN SP_CHANNEL_FADE
 2049  0000000                   	EXTERN SP_PLAY_BACK
 2050  0000000                   	EXTERN SP_SIM_LOOP
 2051  0000000                   	EXTERN SP_DIS_UIO_EVENT
 2052  0000000                   ;---------------------------------------------------------------------------------------
 2053  0000000                   ; Melody flags
 2054  0000000                   ;---------------------------------------------------------------------------------------
 2055  0000000                   	EXTERN MS_BZ
 2056  0000000                   
 2057  0000000                   	EXTERN MS_DC_RAMP_UP
 2058  0000000                   	EXTERN MS_COMD_PHRASE
 2059  0000000                   
 2060  0000000                   	EXTERN MS_LE
 2061  0000000                   
 2062  0000000                   	EXTERN MS_PS
 2063  0000000                   	EXTERN MS_PAUSE
 2064  0000000                   
 2065  0000000                   	EXTERN MS_DC_RAMP_DOWN
 2066  0000000                   	EXTERN MS_COMD_EVENT
 2067  0000000                   
 2068  0000000                   	EXTERN MS_STOP
 2069  0000000                   
 2070  0000000                   	EXTERN MS_CNP
 2071  0000000                   ;---------------------------------------------------------------------------------------
 2072  0000000                   ; EVO flags
 2073  0000000                   ;---------------------------------------------------------------------------------------
 2074  0000000                   	EXTERN EVO_BZ
 2075  0000000                   
 2076  0000000                   	EXTERN EVO_PAUSE
 2077  0000000                   
 2078  0000000                   	EXTERN EVO_EVENT_TYPE
 2079  0000000                   	EXTERN EVO_NOP_EVENT
 2080  0000000                   	EXTERN EVO_COMD_EVENT
 2081  0000000                   	EXTERN EVO_STOP_EVENT
 2082  0000000                   ;=========================================GLOBAL_PLAY bits
 2083  0000000                   	EXTERN SP1_BZ
 2084  0000000                   	EXTERN SP2_BZ
 2085  0000000                   	EXTERN SP3_BZ
 2086  0000000                   	EXTERN EVO1_BZ
 2087  0000000                   	EXTERN EVO2_BZ
 2088  0000000                   	EXTERN EVO3_BZ
 2089  0000000                   	EXTERN MIDI_BZ
 2090  0000000                   	EXTERN MS_EXT
 2091  0000000                   ;========================================COMMON_FLAG bits
 2092  0000000                   	EXTERN TAIL_OFF_DAC
 2093  0000000                   	EXTERN GLOBAL_VOL_MS_FLAG
 2094  0000000                   ;	EXTERN NOISE_SHAPING_FLAG	
 2095  0000000                   ;========================================================================
 2096  0000000                   ;ENV_STATE_HOLD 					EQ 0
 2097  0000000                   	EXTERN ENV_STATE_ATTACK
 2098  0000000                   	EXTERN ENV_STATE_DECAY





 2099  0000000                   	EXTERN ENV_STATE_SUSTAIN
 2100  0000000                   	EXTERN ENV_STATE_RELEASE
 2101  0000000                   
 2102  0000000                   ;========================================================================
 2103  0000000                   	EXTERN HEAD_TAIL_STEP_COUNT
 2104  0000000                   	EXTERN PLAY_PHRASE_LEN
 2105  0000000                   	EXTERN PLAY_PHRASE_MDR_LEN
 2106  0000000                   ;===========================================================================
 2107  0000000                   	EXTERN DRUM_CHANNEL_ID
 2108  0000000                   
 2109  0000000                   	EXTERN SP_CH0
 2110  0000000                   	EXTERN SP_CH1
 2111  0000000                   	EXTERN SP_CH2
 2112  0000000                   
 2113  0000000                   	EXTERN MS_CH0
 2114  0000000                   	EXTERN MS_CH1
 2115  0000000                   	EXTERN MS_CH2
 2116  0000000                   ;===========================================================================
 2117  0000000                   	EXTERN SPEECH_TYPE
 2118  0000000                   	EXTERN EVO_TYPE
 2119  0000000                   	EXTERN GLOBAL_SR_FLAG
 2120  0000000                   ;===========================================================================
 2121  0000000                   	EXTERN TM0_NM4_PLAYING
 2122  0000000                   	EXTERN TM0_NM4S_PLAYING
 2123  0000000                   
 2124  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\MACROS.INI.APP"
 2125  0000000                   	SYMBOLS
 2126  0000000                   	LINKLIST
 2127  0000000                   	DEBUG  	ASM
 2128  0000000                   	LINEAR	ON
 2129  0000000                   	LONGA	OFF
 2130  0000000                   	LONGI	OFF
 2131  0000000                   
 2132  0000000                   ;==============================================================================
 2133  0000000                   ; Macros
 2134  0000000                   ;==============================================================================
 2135  0000000                   STZ16 MACRO VAR_ADDR
 2136  0000000                   	STZ VAR_ADDR
 2137  0000000                   	STZ VAR_ADDR+1
 2138  0000000                   	ENDM
 2139  0000000                   ;----------------------------------------------------------------	
 2140  0000000                   STZ24 MACRO VAR_ADDR
 2141  0000000                   	STZ VAR_ADDR
 2142  0000000                   	STZ VAR_ADDR+1
 2143  0000000                   	STZ VAR_ADDR+2
 2144  0000000                   	ENDM
 2145  0000000                   ;----------------------------------------------------------------	
 2146  0000000                   ADD16_8_DP MACRO VAR_ADDR, VAR_ADDR2
 2147  0000000                   	CLC
 2148  0000000                   	LDA VAR_ADDR
 2149  0000000                   	ADC VAR_ADDR2
 2150  0000000                   	STA VAR_ADDR
 2151  0000000                   	LDA VAR_ADDR+1
 2152  0000000                   	ADC #0
 2153  0000000                   	STA VAR_ADDR+1
 2154  0000000                   	ENDM
 2155  0000000                   ;----------------------------------------------------------------	





 2156  0000000                   ADD16_16 MACRO VAR_ADDR, NUM
 2157  0000000                   	CLC
 2158  0000000                   	LDA VAR_ADDR
 2159  0000000                   	ADC #.LOW.NUM
 2160  0000000                   	STA VAR_ADDR
 2161  0000000                   	LDA VAR_ADDR+1
 2162  0000000                   	ADC #.HIGH.NUM
 2163  0000000                   	STA VAR_ADDR+1
 2164  0000000                   	ENDM
 2165  0000000                   ;----------------------------------------------------------------	
 2166  0000000                   ADD24_16 MACRO VAR_ADDR, NUM
 2167  0000000                   	CLC
 2168  0000000                   	LDA VAR_ADDR
 2169  0000000                   	ADC #.LOW.NUM
 2170  0000000                   	STA VAR_ADDR
 2171  0000000                   	LDA VAR_ADDR+1
 2172  0000000                   	ADC #.HIGH.NUM
 2173  0000000                   	STA VAR_ADDR+1
 2174  0000000                   	LDA VAR_ADDR+2
 2175  0000000                   	ADC #0
 2176  0000000                   	STA VAR_ADDR+2
 2177  0000000                   	ENDM
 2178  0000000                   ;----------------------------------------------------------------	
 2179  0000000                   ADD16_16_DP MACRO VAR_ADDR, VAR_ADDR2
 2180  0000000                   	CLC
 2181  0000000                   	LDA VAR_ADDR
 2182  0000000                   	ADC VAR_ADDR2
 2183  0000000                   	STA VAR_ADDR
 2184  0000000                   	LDA VAR_ADDR+1
 2185  0000000                   	ADC VAR_ADDR2+1
 2186  0000000                   	STA VAR_ADDR+1
 2187  0000000                   	ENDM
 2188  0000000                   ;----------------------------------------------------------------	
 2189  0000000                   ADD24_16_DP MACRO VAR_ADDR, VAR_ADDR2
 2190  0000000                   	CLC
 2191  0000000                   	LDA VAR_ADDR
 2192  0000000                   	ADC VAR_ADDR2
 2193  0000000                   	STA VAR_ADDR
 2194  0000000                   	LDA VAR_ADDR+1
 2195  0000000                   	ADC VAR_ADDR2+1
 2196  0000000                   	STA VAR_ADDR+1
 2197  0000000                   	LDA VAR_ADDR+2
 2198  0000000                   	ADC #0
 2199  0000000                   	STA VAR_ADDR+2
 2200  0000000                   	ENDM
 2201  0000000                   ;----------------------------------------------------------------	
 2202  0000000                   ADD24_24 MACRO VAR_ADDR, NUM
 2203  0000000                   	CLC
 2204  0000000                   	LDA VAR_ADDR
 2205  0000000                   	ADC #.LOW.NUM
 2206  0000000                   	STA VAR_ADDR
 2207  0000000                   	LDA VAR_ADDR+1
 2208  0000000                   	ADC #.HIGH.NUM
 2209  0000000                   	STA VAR_ADDR+1
 2210  0000000                   	LDA VAR_ADDR+2
 2211  0000000                   	ADC #.HIGH8.NUM
 2212  0000000                   	STA VAR_ADDR+2





 2213  0000000                   	ENDM
 2214  0000000                   ;----------------------------------------------------------------	
 2215  0000000                   ADD24_24_DP MACRO VAR_ADDR1, VAR_ADDR2
 2216  0000000                   	CLC
 2217  0000000                   	LDA VAR_ADDR1
 2218  0000000                   	ADC VAR_ADDR2
 2219  0000000                   	STA VAR_ADDR1
 2220  0000000                   	LDA VAR_ADDR1+1
 2221  0000000                   	ADC VAR_ADDR2+1
 2222  0000000                   	STA VAR_ADDR1+1
 2223  0000000                   	LDA VAR_ADDR1+2
 2224  0000000                   	ADC VAR_ADDR2+2
 2225  0000000                   	STA VAR_ADDR1+2
 2226  0000000                   	ENDM
 2227  0000000                   ;----------------------------------------------------------------
 2228  0000000                   SBC16_16 MACRO VAR_ADDR, NUM
 2229  0000000                   	SEC
 2230  0000000                   	LDA VAR_ADDR
 2231  0000000                   	SBC #.LOW.NUM
 2232  0000000                   	STA VAR_ADDR
 2233  0000000                   	LDA VAR_ADDR+1
 2234  0000000                   	SBC #.HIGH.NUM
 2235  0000000                   	STA VAR_ADDR+1
 2236  0000000                   	ENDM
 2237  0000000                   ;----------------------------------------------------------------
 2238  0000000                   SBC16_16_DP MACRO VAR_ADDR1, VAR_ADDR2
 2239  0000000                   	SEC
 2240  0000000                   	LDA VAR_ADDR1
 2241  0000000                   	SBC VAR_ADDR2
 2242  0000000                   	STA VAR_ADDR1
 2243  0000000                   	LDA VAR_ADDR1+1
 2244  0000000                   	SBC VAR_ADDR2+1
 2245  0000000                   	STA VAR_ADDR1+1
 2246  0000000                   	ENDM
 2247  0000000                   ;----------------------------------------------------------------
 2248  0000000                   SBC24_24 MACRO VAR_ADDR, NUM
 2249  0000000                   	SEC
 2250  0000000                   	LDA VAR_ADDR
 2251  0000000                   	SBC #.LOW.NUM
 2252  0000000                   	STA VAR_ADDR
 2253  0000000                   	LDA VAR_ADDR+1
 2254  0000000                   	SBC #.HIGH.NUM
 2255  0000000                   	STA VAR_ADDR+1
 2256  0000000                   	LDA VAR_ADDR+2
 2257  0000000                   	SBC #.HIGH8.NUM
 2258  0000000                   	STA VAR_ADDR+2
 2259  0000000                   	ENDM
 2260  0000000                   ;----------------------------------------------------------------
 2261  0000000                   SBC24_24_DP MACRO VAR_ADDR1, VAR_ADDR2
 2262  0000000                   	SEC
 2263  0000000                   	LDA VAR_ADDR1
 2264  0000000                   	SBC VAR_ADDR2
 2265  0000000                   	STA VAR_ADDR1
 2266  0000000                   	LDA VAR_ADDR1+1
 2267  0000000                   	SBC VAR_ADDR2+1
 2268  0000000                   	STA VAR_ADDR1+1
 2269  0000000                   	LDA VAR_ADDR1+2





 2270  0000000                   	SBC VAR_ADDR2+2
 2271  0000000                   	STA VAR_ADDR1+2
 2272  0000000                   	ENDM
 2273  0000000                   ;----------------------------------------------------------------
 2274  0000000                   MOV16_16 MACRO VAR_ADDR, NUM
 2275  0000000                   	LDA	#.LOW.NUM
 2276  0000000                   	STA VAR_ADDR
 2277  0000000                   	LDA	#.HIGH.NUM
 2278  0000000                   	STA VAR_ADDR+1
 2279  0000000                   	ENDM
 2280  0000000                   ;----------------------------------------------------------------
 2281  0000000                   MOV16_16_DP MACRO VAR_ADDR1, VAR_ADDR2
 2282  0000000                   	LDA	VAR_ADDR2
 2283  0000000                   	STA VAR_ADDR1
 2284  0000000                   	LDA	VAR_ADDR2+1
 2285  0000000                   	STA VAR_ADDR1+1
 2286  0000000                   	ENDM
 2287  0000000                   ;----------------------------------------------------------------
 2288  0000000                   MOV24_24 MACRO VAR_ADDR, NUM
 2289  0000000                   	LDA	#.LOW.NUM
 2290  0000000                   	STA VAR_ADDR
 2291  0000000                   	LDA	#.HIGH.NUM
 2292  0000000                   	STA VAR_ADDR+1
 2293  0000000                   	LDA	#.HIGH8.NUM
 2294  0000000                   	STA VAR_ADDR+2
 2295  0000000                   	ENDM
 2296  0000000                   ;----------------------------------------------------------------
 2297  0000000                   MOV24_24_DP MACRO VAR_ADDR1, VAR_ADDR2
 2298  0000000                   	LDA	VAR_ADDR2
 2299  0000000                   	STA VAR_ADDR1
 2300  0000000                   	LDA	VAR_ADDR2+1
 2301  0000000                   	STA VAR_ADDR1+1
 2302  0000000                   	LDA	VAR_ADDR2+2
 2303  0000000                   	STA VAR_ADDR1+2
 2304  0000000                   	ENDM
 2305  0000000                   ;------------------------------------------------------------------------------
 2306  0000000                   ; Like JSR (addr,X) operation
 2307  0000000                   ;------------------------------------------------------------------------------
 2308  0000000                   ;----------------------------------------------------------------
 2309  0000000                   ; JSR ISR for Return Addr
 2310  0000000                   ;----------------------------------------------------------------
 2311  0000000                   JSR_ISR_AII MACRO ISR_ADDR
 2312  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2313  0000000                   	PHA
 2314  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2315  0000000                   	PHA
 2316  0000000                   	PHP
 2317  0000000                   	JMP ISR_ADDR
 2318  0000000                   RETURN_ADDR_#:
 2319  0000000                   	ENDM
 2320  0000000                   
 2321  0000000                   ;----------------------------------------------------------------
 2322  0000000                   ; PHA for Return Addr
 2323  0000000                   ;----------------------------------------------------------------
 2324  0000000                   JSR_AII MACRO JSR_ADDR
 2325  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2326  0000000                   	PHA





 2327  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2328  0000000                   	PHA
 2329  0000000                   	JMP JSR_ADDR
 2330  0000000                   RETURN_ADDR_#:
 2331  0000000                   	NOP
 2332  0000000                   	ENDM
 2333  0000000                   ;----------------------------------------------------------------
 2334  0000000                   ; PHA for Return Addr with X
 2335  0000000                   ;----------------------------------------------------------------
 2336  0000000                   JSR_AII_X MACRO JSR_ADDR
 2337  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2338  0000000                   	PHA
 2339  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2340  0000000                   	PHA
 2341  0000000                   	JMP (JSR_ADDR,X)
 2342  0000000                   RETURN_ADDR_#:
 2343  0000000                   	NOP
 2344  0000000                   	ENDM
 2345  0000000                   ;----------------------------------------------------------------
 2346  0000000                   ; PHY for Return Addr
 2347  0000000                   ;----------------------------------------------------------------
 2348  0000000                   JSR_AII_PHY_X MACRO JSR_ADDR
 2349  0000000                   	LDY #.HIGH.RETURN_ADDR_Y_#
 2350  0000000                   	PHY
 2351  0000000                   	LDY #.LOW.RETURN_ADDR_Y_#
 2352  0000000                   	PHY
 2353  0000000                   	JMP (JSR_ADDR,X)
 2354  0000000                   RETURN_ADDR_Y_#:
 2355  0000000                   	NOP
 2356  0000000                   	ENDM
 2357  0000000                   ;--------------------------------------------------------------------------
 2358  0000000                   JSR_AII_X_SA MACRO JSR_ADDR,BUF_ADDR
 2359  0000000                   ;	.IF (WITH_16BIT_MODE .EQ. 1)
 2360  0000000                   ;	JSR (JSR_ADDR,X)
 2361  0000000                   ;	.ELSE
 2362  0000000                   	STA <BUF_ADDR
 2363  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2364  0000000                   	PHA
 2365  0000000                   ;	LDA #.LOW.RETURN_ADDR_#-1
 2366  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2367  0000000                   	PHA
 2368  0000000                   	LDA <BUF_ADDR
 2369  0000000                   	JMP (JSR_ADDR,X)
 2370  0000000                   RETURN_ADDR_#:
 2371  0000000                   	NOP
 2372  0000000                   ;	.ENDIF
 2373  0000000                   	ENDM
 2374  0000000                   ;===============================================================
 2375  0000000                   ;
 2376  0000000                   ;===============================================================
 2377  0000000                   T_XY MACRO
 2378  0000000                   	PHX
 2379  0000000                   	PLY
 2380  0000000                   
 2381  0000000                   	ENDM
 2382  0000000                   ;--------------------------------------------------------------------------
 2383  0000000                   T_YX MACRO





 2384  0000000                   	PHY
 2385  0000000                   	PLX
 2386  0000000                   
 2387  0000000                   	ENDM
 2388  0000000                   ;------------------------------------------------------------------------------
 2389  0000000                   PSF_RESPONSE_LIMIT MACRO 
 2390  0000000                   .IF (WITH_PSF_PROJECT .EQ. 1)
 2391  0000000                   .IFDEF ABANDON_STACK
 2392  0000000                   	LDA #80H
 2393  0000000                   	BIT <ABANDON_STACK_FLAG
 2394  0000000                   	BEQ PSF_RESPONSE_LIMIT_END#
 2395  0000000                   	LDA #01H
 2396  0000000                   PSF_RESPONSE_LIMIT_END#:
 2397  0000000                   	TSB <ABANDON_STACK_FLAG
 2398  0000000                   .ENDIF
 2399  0000000                   .ENDIF
 2400  0000000                   	ENDM
 2401  0000000                   ;----------------------------------------------------------------
 2402  0000000                   PSF_RESPONSE_LIMIT_RELEASE MACRO 
 2403  0000000                   .IF (WITH_PSF_PROJECT .EQ. 1)
 2404  0000000                   .IFDEF ABANDON_STACK
 2405  0000000                   	LDA #01H
 2406  0000000                   	BIT <ABANDON_STACK_FLAG
 2407  0000000                   	BNE PSF_RESPONSE_LIMIT_RELEASE_END#
 2408  0000000                   	LDA #80H
 2409  0000000                   PSF_RESPONSE_LIMIT_RELEASE_END#:
 2410  0000000                   	TRB <ABANDON_STACK_FLAG
 2411  0000000                   .ENDIF
 2412  0000000                   .ENDIF
 2413  0000000                   	ENDM	
 2414  0000000                   ;----------------------------------------------------------------
 2415  0000000                   PSF_RESPONSE_LIMIT_JSR MACRO JSR_ADDR
 2416  0000000                   	PSF_RESPONSE_LIMIT
 2417  0000000                   	JSR JSR_ADDR
 2418  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 2419  0000000                   	ENDM
 2420  0000000                   
 2421  0000000                   
 2422  0000000                   
 2423  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SPI_MACROS.INI.APP"
 2424  0000000                   ;========================================================
 2425  0000000                   ;-----SPI mode define,user can change--------
 2426  0000000                   SPI_CLK_RATE	EQU	01H
 2427  0000000                   ;FOSC_CLK_DIVIDED_1: SPI clock rate is Fosc/1
 2428  0000000                   ;FOSC_CLK_DIVIDED_2: SPI clock rate is Fosc/2
 2429  0000000                   ;FOSC_CLK_DIVIDED_4: SPI clock rate is Fosc/4
 2430  0000000                   ;FOSC_CLK_DIVIDED_8: SPI clock rate is Fosc/8
 2431  0000000                   
 2432  0000000                   ;----internal pin-----------
 2433  0000000                   SPI_BP00		EQU	10H
 2434  0000000                   SPI_BP01		EQU	11H
 2435  0000000                   SPI_BP02		EQU	12H
 2436  0000000                   SPI_BP03		EQU	13H
 2437  0000000                   SPI_BP04		EQU	14H
 2438  0000000                   SPI_BP05		EQU	15H
 2439  0000000                   SPI_BP06		EQU	16H
 2440  0000000                   SPI_BP07		EQU	17H





 2441  0000000                   
 2442  0000000                   SPI_BP10		EQU	20H
 2443  0000000                   SPI_BP11		EQU	21H
 2444  0000000                   SPI_BP12		EQU	22H
 2445  0000000                   SPI_BP13		EQU	23H
 2446  0000000                   SPI_BP14		EQU	24H
 2447  0000000                   SPI_BP15		EQU	25H
 2448  0000000                   SPI_BP16		EQU	26H
 2449  0000000                   SPI_BP17		EQU	27H
 2450  0000000                   
 2451  0000000                   SPI_BP20		EQU	30H
 2452  0000000                   SPI_BP21		EQU	31H
 2453  0000000                   SPI_BP22		EQU	32H
 2454  0000000                   SPI_BP23		EQU	33H
 2455  0000000                   SPI_BP24		EQU	34H
 2456  0000000                   SPI_BP25		EQU	35H
 2457  0000000                   SPI_BP26		EQU	36H
 2458  0000000                   SPI_BP27		EQU	37H
 2459  0000000                   
 2460  0000000                   SPI_BP30		EQU	40H
 2461  0000000                   SPI_BP31		EQU	41H
 2462  0000000                   SPI_BP32		EQU	42H
 2463  0000000                   SPI_BP33		EQU	43H
 2464  0000000                   SPI_BP34		EQU	44H
 2465  0000000                   SPI_BP35		EQU	45H
 2466  0000000                   SPI_BP36		EQU	46H
 2467  0000000                   SPI_BP37		EQU	47H
 2468  0000000                   ;========================================================
 2469  0000000                   SPI_PORT_BASE		EQU	0F80H
 2470  0000000                   SPI_PORT_D_BASE		EQU	0F84H
 2471  0000000                   SPI_PORT_M_BASE		EQU	0F88H
 2472  0000000                   SPI_PORT_EN_BASE	EQU	0F98H
 2473  0000000                   
 2474  0000000                   SPI_BP2MF1			EQU 0F9FH
 2475  0000000                   SPI_SPIC			EQU 0FD8H
 2476  0000000                   SPI_SPIB			EQU 0FD9H
 2477  0000000                   SPI_SPIBN			EQU 0FDAH
 2478  0000000                   
 2479  0000000                   SPI1_EN_MASK		EQU 00000001B
 2480  0000000                   SPI2_EN_MASK		EQU 00000010B
 2481  0000000                   
 2482  0000000                   SPIC_EN_MASK		EQU 00000001B
 2483  0000000                   SPIC_PIN_DEF_MASK	EQU 00000010B
 2484  0000000                   SPIC_CLK_MASK		EQU	01100000B
 2485  0000000                   SPIC_DONE_MASK		EQU 10000000B
 2486  0000000                   
 2487  0000000                   FOSC_CLK_DIVIDED_1	EQU 0
 2488  0000000                   FOSC_CLK_DIVIDED_2	EQU 1
 2489  0000000                   FOSC_CLK_DIVIDED_4	EQU 2
 2490  0000000                   FOSC_CLK_DIVIDED_8	EQU 3
 2491  0000000                   ;========================================================
 2492  0000000                   ;-----pin define,user can change--------
 2493  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 2494  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 1)
 2495  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP24
 2496  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP25
 2497  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP26





 2498  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP27
 2499  0000000                   SPI_EN_MASK		EQU SPI2_EN_MASK
 2500  0000000                   	.ELSE
 2501  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP20
 2502  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP21
 2503  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP22
 2504  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP23
 2505  0000000                   SPI_EN_MASK		EQU SPI1_EN_MASK
 2506  0000000                   	.ENDIF
 2507  0000000                   .ENDIF
 2508  0000000                   
 2509  0000000                   .IF	(MAINBODY='A960')
 2510  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 0)
 2511  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP02
 2512  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP03
 2513  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP04
 2514  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP05
 2515  0000000                   	.ENDIF
 2516  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 1)
 2517  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP24
 2518  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP25
 2519  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP26
 2520  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP27
 2521  0000000                   	.ENDIF
 2522  0000000                   .ENDIF
 2523  0000000                   
 2524  0000000                   ;-------------SPIO X0 4Pin parameter ------------------------
 2525  0000000                   SPI_X0CSB_PIN_VALUE		EQU		1<<(SPI_X0CSB_PIN&0FH)
 2526  0000000                   SPI_X0CSB_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0CSB_PIN>>4)-1
 2527  0000000                   SPI_X0CSB_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0CSB_PIN>>4)-1
 2528  0000000                   SPI_X0CSB_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0CSB_PIN>>4)-1	
 2529  0000000                   
 2530  0000000                   SPI_X0SCK_PIN_VALUE		EQU		1<<(SPI_X0SCK_PIN&0FH)
 2531  0000000                   SPI_X0SCK_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0SCK_PIN>>4)-1
 2532  0000000                   SPI_X0SCK_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0SCK_PIN>>4)-1
 2533  0000000                   SPI_X0SCK_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0SCK_PIN>>4)-1	
 2534  0000000                   
 2535  0000000                   SPI_X0MOSI_PIN_VALUE	EQU		1<<(SPI_X0MOSI_PIN&0FH)	
 2536  0000000                   SPI_X0MOSI_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0MOSI_PIN>>4)-1
 2537  0000000                   SPI_X0MOSI_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0MOSI_PIN>>4)-1	
 2538  0000000                   SPI_X0MOSI_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0MOSI_PIN>>4)-1
 2539  0000000                   
 2540  0000000                   SPI_X0MISO_PIN_VALUE	EQU		1<<(SPI_X0MISO_PIN&0FH)
 2541  0000000                   SPI_X0MISO_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0MISO_PIN>>4)-1
 2542  0000000                   SPI_X0MISO_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0MISO_PIN>>4)-1
 2543  0000000                   SPI_X0MISO_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0MISO_PIN>>4)-1
 2544  0000000                   ;========================================================
 2545  0000000                   SPI_X0CSB_M_VALUE		EQU 	1<<(SPI_X0CSB_PIN&0FH)
 2546  0000000                   SPI_X0CSB_D_VALUE		EQU 	1<<(SPI_X0CSB_PIN&0FH)
 2547  0000000                   
 2548  0000000                   ;--------------------------------------------------------
 2549  0000000                   SPI_X0SCK_M_VALUE		EQU 	1<<(SPI_X0SCK_PIN&0FH)
 2550  0000000                   SPI_X0SCK_D_VALUE		EQU 	1<<(SPI_X0SCK_PIN&0FH)
 2551  0000000                   
 2552  0000000                   ;--------------------------------------------------------
 2553  0000000                   SPI_X0MOSI_M_VALUE		EQU 	1<<(SPI_X0MOSI_PIN&0FH)
 2554  0000000                   SPI_X0MOSI_D_VALUE		EQU 	1<<(SPI_X0MOSI_PIN&0FH)





 2555  0000000                   
 2556  0000000                   ;--------------------------------------------------------
 2557  0000000                   SPI_X0MISO_M_VALUE		EQU 	1<<(SPI_X0MISO_PIN&0FH)
 2558  0000000                   SPI_X0MISO_D_VALUE		EQU 	1<<(SPI_X0MISO_PIN&0FH)
 2559  0000000                   
 2560  0000000                   ;================================================================================
 2561  0000000                   ; 	USER MACRO - Drive Macro
 2562  0000000                   ;================================================================================
 2563  0000000                   SPI_X0_INIT_PIN MACRO
 2564  0000000                   
 2565  0000000                   ;CSB: cmos output,init value 1
 2566  0000000                   	LDA #SPI_X0CSB_D_VALUE
 2567  0000000                   	TRB !SPI_X0CSB_D_ADDR
 2568  0000000                   	TSB !SPI_X0CSB_M_ADDR
 2569  0000000                   
 2570  0000000                   	LDA !SPI_X0CSB_PORT_ADDR
 2571  0000000                   	ORA #SPI_X0CSB_PIN_VALUE
 2572  0000000                   	STA !SPI_X0CSB_PORT_ADDR	
 2573  0000000                   
 2574  0000000                   ;SCK: cmos output
 2575  0000000                   	LDA #SPI_X0SCK_D_VALUE
 2576  0000000                   	TRB !SPI_X0SCK_D_ADDR
 2577  0000000                   	TSB !SPI_X0SCK_M_ADDR
 2578  0000000                   
 2579  0000000                   	LDA #SPI_X0SCK_PIN_VALUE
 2580  0000000                   	TRB !SPI_X0SCK_PORT_ADDR
 2581  0000000                   
 2582  0000000                   ;MOSI: cmos output,init value 1
 2583  0000000                   	LDA #SPI_X0MOSI_D_VALUE
 2584  0000000                   	TRB !SPI_X0MOSI_D_ADDR
 2585  0000000                   	TSB !SPI_X0MOSI_M_ADDR
 2586  0000000                   
 2587  0000000                   	LDA !SPI_X0MOSI_PORT_ADDR
 2588  0000000                   	ORA #SPI_X0MOSI_PIN_VALUE
 2589  0000000                   	STA !SPI_X0MOSI_PORT_ADDR
 2590  0000000                   
 2591  0000000                   ;MISO: pull high input,init value 1
 2592  0000000                   	LDA #SPI_X0MISO_D_VALUE
 2593  0000000                   	TSB !SPI_X0MISO_D_ADDR
 2594  0000000                   	TSB !SPI_X0MISO_M_ADDR
 2595  0000000                   
 2596  0000000                   	LDA !SPI_X0MISO_PORT_ADDR
 2597  0000000                   	ORA #SPI_X0MISO_PIN_VALUE
 2598  0000000                   	STA !SPI_X0MISO_PORT_ADDR
 2599  0000000                   
 2600  0000000                   ;SPI clock rate, init value 0
 2601  0000000                   	LDA !SPI_SPIC
 2602  0000000                   	AND #(FFH^SPIC_CLK_MASK)
 2603  0000000                   .IF (SPI_CLK_RATE.EQ.0)
 2604  0000000                   	ORA #(FOSC_CLK_DIVIDED_1 << 5)
 2605  0000000                   .ENDIF
 2606  0000000                   .IF (SPI_CLK_RATE.EQ.1)
 2607  0000000                   	ORA #(FOSC_CLK_DIVIDED_2 << 5)
 2608  0000000                   .ENDIF
 2609  0000000                   .IF (SPI_CLK_RATE.EQ.2)
 2610  0000000                   	ORA #(FOSC_CLK_DIVIDED_4 << 5)
 2611  0000000                   .ENDIF





 2612  0000000                   .IF (SPI_CLK_RATE.EQ.3)
 2613  0000000                   	ORA #(FOSC_CLK_DIVIDED_8 << 5)
 2614  0000000                   .ENDIF
 2615  0000000                   	STA !SPI_SPIC
 2616  0000000                   
 2617  0000000                   ;ALTER:IO->SPI
 2618  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171')
 2619  0000000                   	LDA #SPI_EN_MASK
 2620  0000000                   	TSB !SPI_BP2MF1
 2621  0000000                   .ENDIF
 2622  0000000                   
 2623  0000000                   .IF	(MAINBODY='A960')
 2624  0000000                   	LDA #02H
 2625  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 0)
 2626  0000000                   	TRB !SPI_SPIC
 2627  0000000                   	.ENDIF
 2628  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 1)
 2629  0000000                   	TSB !SPI_SPIC
 2630  0000000                   	.ENDIF
 2631  0000000                   .ENDIF
 2632  0000000                   SPI_X0_INIT_PIN_END#:
 2633  0000000                   	ENDM
 2634  0000000                   ;--------------------------------------------------------	
 2635  0000000                   SPI_X0_DEINIT_PIN MACRO
 2636  0000000                   ;ALTER:SPI->IO
 2637  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171')
 2638  0000000                   	LDA #SPI_EN_MASK
 2639  0000000                   	TRB !SPI_BP2MF1
 2640  0000000                   .ENDIF
 2641  0000000                   	ENDM
 2642  0000000                   ;================================================================================
 2643  0000000                   ; 	SPI SUBROUTINE
 2644  0000000                   ;================================================================================
 2645  0000000                   SPI_X0_ON MACRO 
 2646  0000000                   ;CSB:1->0
 2647  0000000                   	LDA	#SPIC_EN_MASK
 2648  0000000                   	TSB !SPI_SPIC
 2649  0000000                   	ENDM
 2650  0000000                   ;--------------------------------------------------------
 2651  0000000                   SPI_X0_OFF MACRO
 2652  0000000                   ;CSB:0->1
 2653  0000000                   	LDA	#SPIC_EN_MASK
 2654  0000000                   	TRB !SPI_SPIC
 2655  0000000                   	ENDM
 2656  0000000                   ;========================================================
 2657  0000000                   ;Only SPI mode 0. The definition of mode 0 is:
 2658  0000000                   ;mode0: idle:0;	DO:falling edge;	DI:rising edge
 2659  0000000                   
 2660  0000000                   POLLING_SPI_READY MACRO
 2661  0000000                   PollingSPIReady#:	
 2662  0000000                   	LDA !SPI_SPIC
 2663  0000000                   	BMI PollingSPIReady#
 2664  0000000                   	ENDM
 2665  0000000                   ;--------------------------------------------------------
 2666  0000000                   SPI_X0_MOSI MACRO
 2667  0000000                   	STA !SPI_SPIB
 2668  0000000                   	POLLING_SPI_READY





 2669  0000000                   	ENDM
 2670  0000000                   ;--------------------------------------------------------
 2671  0000000                   SPI_X0_MISO MACRO
 2672  0000000                   	LDY #00H
 2673  0000000                   	LDY !SPI_SPIB
 2674  0000000                   	POLLING_SPI_READY
 2675  0000000                   	LDY !SPI_SPIBN
 2676  0000000                   	POLLING_SPI_READY
 2677  0000000                   	ENDM
 2678  0000000                   ;--------------------------------------------------------
 2679  0000000                   ;--------------------------------------------------------
 2680  0000000                   SPI_X0_WRITE_NB_RAM MACRO NUM,REG
 2681  0000000                   	LDX #00H
 2682  0000000                   SPI_X0_WRITE_NB_RAM_LOOP#:
 2683  0000000                   	CPX #NUM
 2684  0000000                   	BNE 3
 2685  0000000                   	JMP END_SPI_X0_WRITE_NB_RAM#
 2686  0000000                   	LDA REG,X
 2687  0000000                   	SPI_X0_MOSI
 2688  0000000                   	INX
 2689  0000000                   	JMP SPI_X0_WRITE_NB_RAM_LOOP#
 2690  0000000                   END_SPI_X0_WRITE_NB_RAM#:
 2691  0000000                   	ENDM
 2692  0000000                   ;--------------------------------------------------------
 2693  0000000                   SPI_X0_WRITE_NB_RAM2 MACRO REG
 2694  0000000                   	LDX #00H
 2695  0000000                   SPI_X0_WRITE_NB_RAM2_LOOP#:
 2696  0000000                   	CPX REG
 2697  0000000                   	BNE 3
 2698  0000000                   	JMP END_SPI_X0_WRITE_NB_RAM2#
 2699  0000000                   	LDA REG+1,X
 2700  0000000                   	SPI_X0_MOSI
 2701  0000000                   	INX
 2702  0000000                   	JMP SPI_X0_WRITE_NB_RAM2_LOOP#
 2703  0000000                   END_SPI_X0_WRITE_NB_RAM2#:
 2704  0000000                   	ENDM
 2705  0000000                   ;--------------------------------------------------------
 2706  0000000                   SPI_X0_WRITE_NB_RAM_ILI MACRO NUM_RAM,REG
 2707  0000000                   	LDY #00H
 2708  0000000                   SPI_X0_WRITE_NB_RAM_LOOP#:
 2709  0000000                   	CPY NUM_RAM
 2710  0000000                   	BNE 3
 2711  0000000                   	JMP END_SPI_X0_WRITE_NB_RAM#
 2712  0000000                   	LDA (.LOW.REG),Y
 2713  0000000                   	SPI_X0_MOSI
 2714  0000000                   	INY
 2715  0000000                   	JMP SPI_X0_WRITE_NB_RAM_LOOP#
 2716  0000000                   END_SPI_X0_WRITE_NB_RAM#:
 2717  0000000                   	ENDM
 2718  0000000                   ;--------------------------------------------------------
 2719  0000000                   SPI_X0_READ_NB_RAM MACRO NUM,REG
 2720  0000000                   	LDX #00H
 2721  0000000                   SPI_X0_READ_NB_RAM_LOOP#:
 2722  0000000                   	CPX #NUM
 2723  0000000                   	BNE 3
 2724  0000000                   	JMP END_SPI_X0_READ_NB_RAM#
 2725  0000000                   	SPI_X0_MISO





 2726  0000000                   	TYA
 2727  0000000                   	STA REG,X
 2728  0000000                   	INX
 2729  0000000                   	JMP SPI_X0_READ_NB_RAM_LOOP#
 2730  0000000                   END_SPI_X0_READ_NB_RAM#:
 2731  0000000                   
 2732  0000000                   	ENDM
 2733  0000000                   ;--------------------------------------------------------
 2734  0000000                   SPI_X0_READ_NB_RAM2 MACRO REG
 2735  0000000                   	LDX #00H
 2736  0000000                   SPI_X0_READ_NB_RAM2_LOOP#:
 2737  0000000                   	CPX REG
 2738  0000000                   	BNE 3
 2739  0000000                   	JMP END_SPI_X0_READ_NB_RAM2#
 2740  0000000                   	SPI_X0_MISO
 2741  0000000                   	TYA
 2742  0000000                   	STA REG+1,X
 2743  0000000                   	INX
 2744  0000000                   	JMP SPI_X0_READ_NB_RAM2_LOOP#
 2745  0000000                   END_SPI_X0_READ_NB_RAM2#:
 2746  0000000                   	ENDM
 2747  0000000                   ;--------------------------------------------------------
 2748  0000000                   SPI_X0_READ_NB_RAM_ILI MACRO NUM_RAM,REG
 2749  0000000                   	LDY #00H
 2750  0000000                   SPI_X0_READ_NB_RAM_LOOP#:
 2751  0000000                   	CPY NUM_RAM
 2752  0000000                   	BNE 3
 2753  0000000                   	JMP END_SPI_X0_READ_NB_RAM#
 2754  0000000                   	PHY
 2755  0000000                   	SPI_X0_MISO
 2756  0000000                   	TYA
 2757  0000000                   	PLY
 2758  0000000                   	STA (.LOW.REG),Y
 2759  0000000                   	INY
 2760  0000000                   	JMP SPI_X0_READ_NB_RAM_LOOP#
 2761  0000000                   END_SPI_X0_READ_NB_RAM#:
 2762  0000000                   
 2763  0000000                   	ENDM
 2764  0000000                   ;--------------------------------------------------------
 2765  0000000                   SPI_X0_READ_NB_DUMMY MACRO
 2766  0000000                   	SPI_X0_MISO
 2767  0000000                   	ENDM
 2768  0000000                   ;=====================================================================================
 2769  0000000                   ;=====================================================================================
 2770  0000000                   .IF (SPI_COMMAND_ENABLE .EQ. 1H)
 2771  0000000                   SPI_INIT MACRO 
 2772  0000000                   	SPI_X0_INIT_PIN
 2773  0000000                   	ENDM
 2774  0000000                   ;------------------------------------------------------------------------------
 2775  0000000                   SPI_DEINIT MACRO 
 2776  0000000                   	SPI_X0_DEINIT_PIN
 2777  0000000                   	ENDM
 2778  0000000                   ;------------------------------------------------------------------------------
 2779  0000000                   SPI_ON	MACRO
 2780  0000000                   	SPI_X0_ON
 2781  0000000                   	ENDM
 2782  0000000                   ;------------------------------------------------------------------------------





 2783  0000000                   SPI_OFF	MACRO 
 2784  0000000                   	SPI_X0_OFF
 2785  0000000                   	ENDM
 2786  0000000                   ;------------------------------------------------------------------------------
 2787  0000000                   SPI_WRITE MACRO DATA
 2788  0000000                   	LDA #DATA
 2789  0000000                   	SPI_X0_MOSI
 2790  0000000                   	ENDM
 2791  0000000                   ;------------------------------------------------------------------------------
 2792  0000000                   SPI_WRITE_RAM MACRO REG
 2793  0000000                   	LDA REG
 2794  0000000                   	SPI_X0_MOSI
 2795  0000000                   	ENDM
 2796  0000000                   ;------------------------------------------------------------------------------
 2797  0000000                   SPI_WRITE_NB_RAM MACRO NUM,REG
 2798  0000000                   	SPI_X0_WRITE_NB_RAM NUM,REG
 2799  0000000                   	ENDM
 2800  0000000                   ;------------------------------------------------------------------------------
 2801  0000000                   SPI_WRITE_NB_RAM2 MACRO REG
 2802  0000000                   	SPI_X0_WRITE_NB_RAM2 REG
 2803  0000000                   	ENDM
 2804  0000000                   ;------------------------------------------------------------------------------
 2805  0000000                   SPI_WRITE_NB_RAM_ILI MACRO NUM,REG
 2806  0000000                   	SPI_X0_WRITE_NB_RAM_ILI NUM,REG
 2807  0000000                   	ENDM
 2808  0000000                   ;------------------------------------------------------------------------------
 2809  0000000                   SPI_READ MACRO
 2810  0000000                   	SPI_X0_MISO
 2811  0000000                   	TYA
 2812  0000000                   	ENDM
 2813  0000000                   ;------------------------------------------------------------------------------
 2814  0000000                   SPI_READ_RAM MACRO REG
 2815  0000000                   	SPI_X0_MISO
 2816  0000000                   	STY REG
 2817  0000000                   	ENDM
 2818  0000000                   ;------------------------------------------------------------------------------
 2819  0000000                   SPI_READ_NB_RAM MACRO NUM,REG
 2820  0000000                   	SPI_X0_READ_NB_RAM NUM,REG
 2821  0000000                   	ENDM
 2822  0000000                   ;------------------------------------------------------------------------------
 2823  0000000                   SPI_READ_NB_RAM2 MACRO REG
 2824  0000000                   	SPI_X0_READ_NB_RAM2 REG
 2825  0000000                   	ENDM
 2826  0000000                   ;------------------------------------------------------------------------------
 2827  0000000                   SPI_READ_NB_RAM_ILI MACRO NUM,REG
 2828  0000000                   	SPI_X0_READ_NB_RAM_ILI NUM,REG
 2829  0000000                   	ENDM
 2830  0000000                   .ENDIF
 2831  0000000                   
 2832  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\I2C_MACROS.INI.APP"
 2833  0000000                   ;========================================================
 2834  0000000                   ;-----I2C output type define,user can change--------
 2835  0000000                   WITH_OUTPUT_OPEN_DRAIN	EQU 0
 2836  0000000                   
 2837  0000000                   ;----internal pin-----------
 2838  0000000                   I2C_IP00		EQU	00H
 2839  0000000                   I2C_IP01		EQU	01H





 2840  0000000                   I2C_IP02		EQU	02H
 2841  0000000                   I2C_IP03		EQU	03H
 2842  0000000                   I2C_IP04		EQU	04H
 2843  0000000                   I2C_IP05		EQU	05H
 2844  0000000                   I2C_IP06		EQU	06H
 2845  0000000                   I2C_IP07		EQU	07H
 2846  0000000                   
 2847  0000000                   I2C_BP00		EQU	10H
 2848  0000000                   I2C_BP01		EQU	11H
 2849  0000000                   I2C_BP02		EQU	12H
 2850  0000000                   I2C_BP03		EQU	13H
 2851  0000000                   I2C_BP04		EQU	14H
 2852  0000000                   I2C_BP05		EQU	15H
 2853  0000000                   I2C_BP06		EQU	16H
 2854  0000000                   I2C_BP07		EQU	17H
 2855  0000000                   
 2856  0000000                   I2C_BP10		EQU	20H
 2857  0000000                   I2C_BP11		EQU	21H
 2858  0000000                   I2C_BP12		EQU	22H
 2859  0000000                   I2C_BP13		EQU	23H
 2860  0000000                   I2C_BP14		EQU	24H
 2861  0000000                   I2C_BP15		EQU	25H
 2862  0000000                   I2C_BP16		EQU	26H
 2863  0000000                   I2C_BP17		EQU	27H
 2864  0000000                   
 2865  0000000                   I2C_BP20		EQU	30H
 2866  0000000                   I2C_BP21		EQU	31H
 2867  0000000                   I2C_BP22		EQU	32H
 2868  0000000                   I2C_BP23		EQU	33H
 2869  0000000                   I2C_BP24		EQU	34H
 2870  0000000                   I2C_BP25		EQU	35H
 2871  0000000                   I2C_BP26		EQU	36H
 2872  0000000                   I2C_BP27		EQU	37H
 2873  0000000                   
 2874  0000000                   I2C_BP30		EQU	40H
 2875  0000000                   I2C_BP31		EQU	41H
 2876  0000000                   I2C_BP32		EQU	42H
 2877  0000000                   I2C_BP33		EQU	43H
 2878  0000000                   I2C_BP34		EQU	44H
 2879  0000000                   I2C_BP35		EQU	45H
 2880  0000000                   I2C_BP36		EQU	46H
 2881  0000000                   I2C_BP37		EQU	47H
 2882  0000000                   
 2883  0000000                   ;========================================================
 2884  0000000                   I2C_PORT_BASE		EQU	0F80H
 2885  0000000                   I2C_PORT_D_BASE		EQU	0F84H
 2886  0000000                   I2C_PORT_M_BASE		EQU	0F88H
 2887  0000000                   I2C_PORT_EN_BASE	EQU	0F98H
 2888  0000000                   
 2889  0000000                   ;========================================================
 2890  0000000                   ;-----pin define,user can change--------
 2891  0000000                   I2C_X0SCL_PIN		EQU	I2C_BP25
 2892  0000000                   I2C_X0SDA_PIN		EQU	I2C_BP24
 2893  0000000                   
 2894  0000000                   ;-------------X0 2Pin parameter ------------------------
 2895  0000000                   I2C_X0SCL_PIN_VALUE		EQU		1<<(I2C_X0SCL_PIN&0FH)
 2896  0000000                   I2C_X0SCL_PORT_ADDR 	EQU 	I2C_PORT_BASE+(I2C_X0SCL_PIN>>4)-1





 2897  0000000                   I2C_X0SCL_D_ADDR		EQU 	I2C_PORT_D_BASE+(I2C_X0SCL_PIN>>4)-1
 2898  0000000                   I2C_X0SCL_M_ADDR		EQU 	I2C_PORT_M_BASE+(I2C_X0SCL_PIN>>4)-1
 2899  0000000                   
 2900  0000000                   I2C_X0SDA_PIN_VALUE		EQU		1<<(I2C_X0SDA_PIN&0FH)
 2901  0000000                   I2C_X0SDA_PORT_ADDR 	EQU 	I2C_PORT_BASE+(I2C_X0SDA_PIN>>4)-1
 2902  0000000                   I2C_X0SDA_D_ADDR		EQU 	I2C_PORT_D_BASE+(I2C_X0SDA_PIN>>4)-1
 2903  0000000                   I2C_X0SDA_M_ADDR		EQU 	I2C_PORT_M_BASE+(I2C_X0SDA_PIN>>4)-1
 2904  0000000                   ;========================================================
 2905  0000000                   I2C_X0SCL_M_VALUE		EQU 	1<<(I2C_X0SCL_PIN&0FH)
 2906  0000000                   I2C_X0SCL_D_VALUE		EQU 	1<<(I2C_X0SCL_PIN&0FH)
 2907  0000000                   ;--------------------------------------------------------
 2908  0000000                   I2C_X0SDA_M_VALUE		EQU 	1<<(I2C_X0SDA_PIN&0FH)
 2909  0000000                   I2C_X0SDA_D_VALUE		EQU 	1<<(I2C_X0SDA_PIN&0FH)
 2910  0000000                   ;========================================================
 2911  0000000                   
 2912  0000000                   ;================================================================================
 2913  0000000                   ; 	I2C SUBROUTINE
 2914  0000000                   ;================================================================================
 2915  0000000                   I2C_DELAY MACRO
 2916  0000000                   	NOP
 2917  0000000                   	NOP
 2918  0000000                   	NOP
 2919  0000000                   	NOP
 2920  0000000                   	NOP
 2921  0000000                   .IF (SYSTEMCLK.GT.4096000 )
 2922  0000000                   	NOP
 2923  0000000                   	NOP
 2924  0000000                   	NOP
 2925  0000000                   	NOP
 2926  0000000                   	NOP
 2927  0000000                   .IF (SYSTEMCLK.GT.6144000 )	
 2928  0000000                   	NOP
 2929  0000000                   	NOP
 2930  0000000                   	NOP
 2931  0000000                   	NOP
 2932  0000000                   	NOP
 2933  0000000                   .ENDIF
 2934  0000000                   .ENDIF
 2935  0000000                   ENDM
 2936  0000000                   ;--------------------------------------------------------
 2937  0000000                   I2C_X0_SCL_1 MACRO 
 2938  0000000                   ;SCL:0->1
 2939  0000000                   	LDA !I2C_X0SCL_PORT_ADDR
 2940  0000000                   	ORA #I2C_X0SCL_PIN_VALUE
 2941  0000000                   	STA !I2C_X0SCL_PORT_ADDR
 2942  0000000                   	ENDM
 2943  0000000                   ;--------------------------------------------------------
 2944  0000000                   I2C_X0_SCL_0 MACRO
 2945  0000000                   ;SCL:1->0
 2946  0000000                   	LDA !I2C_X0SCL_PORT_ADDR		
 2947  0000000                   	AND #(FFH^I2C_X0SCL_PIN_VALUE)
 2948  0000000                   	STA !I2C_X0SCL_PORT_ADDR 
 2949  0000000                   	ENDM
 2950  0000000                   ;--------------------------------------------------------
 2951  0000000                   I2C_X0_SDA_OUTPUT MACRO
 2952  0000000                   ;SDA: output
 2953  0000000                   	LDA #I2C_X0SDA_D_VALUE





 2954  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 2955  0000000                   	TRB !I2C_X0SDA_M_ADDR
 2956  0000000                   	.ENDIF
 2957  0000000                   	TRB !I2C_X0SDA_D_ADDR
 2958  0000000                   	ENDM
 2959  0000000                   ;--------------------------------------------------------
 2960  0000000                   I2C_X0_SDA_0 MACRO
 2961  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 2962  0000000                   	AND #(FFH^I2C_X0SDA_PIN_VALUE)
 2963  0000000                   	STA !I2C_X0SDA_PORT_ADDR
 2964  0000000                   	ENDM
 2965  0000000                   ;--------------------------------------------------------
 2966  0000000                   I2C_X0_SDA_1 MACRO
 2967  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 2968  0000000                   	ORA #I2C_X0SDA_PIN_VALUE
 2969  0000000                   	STA !I2C_X0SDA_PORT_ADDR
 2970  0000000                   	ENDM
 2971  0000000                   ;--------------------------------------------------------
 2972  0000000                   I2C_X0_SDA_OUTPUT_0 MACRO
 2973  0000000                   	I2C_X0_SDA_OUTPUT
 2974  0000000                   	I2C_X0_SDA_0
 2975  0000000                   	ENDM
 2976  0000000                   ;--------------------------------------------------------
 2977  0000000                   I2C_X0_SDA_OUTPUT_1 MACRO
 2978  0000000                   	I2C_X0_SDA_OUTPUT
 2979  0000000                   	I2C_X0_SDA_1
 2980  0000000                   	ENDM
 2981  0000000                   ;--------------------------------------------------------
 2982  0000000                   I2C_X0_SDA_PULL_HIGH_1	MACRO
 2983  0000000                   ;SDA:pull high input, value 1
 2984  0000000                   	I2C_X0_SDA_1
 2985  0000000                   
 2986  0000000                   	LDA #I2C_X0SDA_D_VALUE
 2987  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 2988  0000000                   	TSB !I2C_X0SDA_M_ADDR
 2989  0000000                   	.ENDIF
 2990  0000000                   	TSB !I2C_X0SDA_D_ADDR
 2991  0000000                   	ENDM
 2992  0000000                   ;========================================================
 2993  0000000                   ;output: SCL output
 2994  0000000                   I2C_X0_INIT_PIN MACRO
 2995  0000000                   ;SCL:  output,init value 1
 2996  0000000                   	I2C_X0_SCL_1
 2997  0000000                   
 2998  0000000                   	LDA #I2C_X0SCL_D_VALUE
 2999  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 3000  0000000                   	TRB !I2C_X0SCL_M_ADDR
 3001  0000000                   	.ELSE
 3002  0000000                   	TSB !I2C_X0SCL_M_ADDR
 3003  0000000                   	.ENDIF
 3004  0000000                   	TRB !I2C_X0SCL_D_ADDR
 3005  0000000                   
 3006  0000000                   ;SDA:  output, init value 1
 3007  0000000                   	I2C_X0_SDA_1
 3008  0000000                   
 3009  0000000                   	LDA #I2C_X0SDA_D_VALUE
 3010  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)





 3011  0000000                   	TRB !I2C_X0SDA_M_ADDR
 3012  0000000                   	.ELSE
 3013  0000000                   	TSB !I2C_X0SDA_M_ADDR
 3014  0000000                   	.ENDIF
 3015  0000000                   	TRB !I2C_X0SDA_D_ADDR
 3016  0000000                   	ENDM
 3017  0000000                   ;--------------------------------------------------------
 3018  0000000                   ;output: SDA output low,SCL output low
 3019  0000000                   I2C_X0_START MACRO
 3020  0000000                   ;SDA:  output,init value 1
 3021  0000000                   	I2C_X0_SDA_OUTPUT_1
 3022  0000000                   
 3023  0000000                   ;SCL:  output,init value 1
 3024  0000000                   	I2C_X0_SCL_1
 3025  0000000                   	I2C_DELAY
 3026  0000000                   
 3027  0000000                   ;SDA:1->0
 3028  0000000                   	I2C_X0_SDA_0
 3029  0000000                   	I2C_DELAY
 3030  0000000                   
 3031  0000000                   ;SCL:1->0 
 3032  0000000                   	I2C_X0_SCL_0
 3033  0000000                   	ENDM
 3034  0000000                   ;--------------------------------------------------------
 3035  0000000                   ;output: SDA output high,SCL output high
 3036  0000000                   I2C_X0_STOP MACRO
 3037  0000000                   ;SDA: output,0
 3038  0000000                   	I2C_X0_SDA_OUTPUT_0
 3039  0000000                   
 3040  0000000                   ;SCL: output value 1
 3041  0000000                   	I2C_X0_SCL_1
 3042  0000000                   	I2C_DELAY	
 3043  0000000                   
 3044  0000000                   ;SDA:0->1
 3045  0000000                   	I2C_X0_SDA_1
 3046  0000000                   	I2C_DELAY
 3047  0000000                   	ENDM
 3048  0000000                   ;========================================================
 3049  0000000                   ;--------------------------------------------------------
 3050  0000000                   I2C_X0_MOSI_Y MACRO
 3051  0000000                   	TYA
 3052  0000000                   	ASL A
 3053  0000000                   	TAY
 3054  0000000                   	LDA #I2C_X0SDA_PORT_ADDR
 3055  0000000                   	BCC I2C_X0_MOSI_SET_0#
 3056  0000000                   I2C_X0_MOSI_SET_1#:
 3057  0000000                   	ORA #I2C_X0SDA_PIN_VALUE
 3058  0000000                   	BRA I2C_X0_MOSI_NEXT#
 3059  0000000                   I2C_X0_MOSI_SET_0#:
 3060  0000000                   	AND #(FFH^I2C_X0SDA_PIN_VALUE)
 3061  0000000                   I2C_X0_MOSI_NEXT#:
 3062  0000000                   	STA !I2C_X0SDA_PORT_ADDR
 3063  0000000                   	ENDM
 3064  0000000                   ;--------------------------------------------------------
 3065  0000000                   I2C_X0_MOSI_Y_1BIT MACRO
 3066  0000000                   	I2C_X0_MOSI_Y
 3067  0000000                   	I2C_DELAY





 3068  0000000                   	I2C_X0_SCL_1 	
 3069  0000000                   	I2C_DELAY	
 3070  0000000                   	I2C_X0_SCL_0	
 3071  0000000                   	ENDM
 3072  0000000                   ;--------------------------------------------------------
 3073  0000000                   ;input: SCL output low,
 3074  0000000                   ;output:SCL output low, SDA input
 3075  0000000                   ;	ack:acc=01;nack:acc=00
 3076  0000000                   
 3077  0000000                   I2C_X0_MOSI MACRO
 3078  0000000                   	TAY
 3079  0000000                   	I2C_X0_SDA_OUTPUT
 3080  0000000                   
 3081  0000000                   	I2C_X0_MOSI_Y_1BIT
 3082  0000000                   	I2C_X0_MOSI_Y_1BIT
 3083  0000000                   	I2C_X0_MOSI_Y_1BIT
 3084  0000000                   	I2C_X0_MOSI_Y_1BIT
 3085  0000000                   	I2C_X0_MOSI_Y_1BIT
 3086  0000000                   	I2C_X0_MOSI_Y_1BIT
 3087  0000000                   	I2C_X0_MOSI_Y_1BIT
 3088  0000000                   	I2C_X0_MOSI_Y_1BIT
 3089  0000000                   
 3090  0000000                   I2C_X0_MOSI_ACK#:
 3091  0000000                   	I2C_X0_SDA_PULL_HIGH_1
 3092  0000000                   	I2C_DELAY
 3093  0000000                   
 3094  0000000                   ;SCL:9th:0->1
 3095  0000000                   	I2C_X0_SCL_1
 3096  0000000                   	I2C_DELAY
 3097  0000000                   
 3098  0000000                   ;SDA:check ACK
 3099  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 3100  0000000                   	BIT #I2C_X0SDA_PIN_VALUE
 3101  0000000                   	BNE I2C_X0_MOSI_NACK#			; non zero
 3102  0000000                   
 3103  0000000                   	I2C_X0_SCL_0
 3104  0000000                   	LDA #01H
 3105  0000000                   	BRA I2C_X0_MOSI_END#
 3106  0000000                   
 3107  0000000                   I2C_X0_MOSI_NACK#:
 3108  0000000                   	I2C_X0_SCL_0	
 3109  0000000                   	LDA #00H
 3110  0000000                   
 3111  0000000                   I2C_X0_MOSI_END#:		
 3112  0000000                   	ENDM	
 3113  0000000                   ;--------------------------------------------------------
 3114  0000000                   I2C_X0_MISO_Y	MACRO
 3115  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 3116  0000000                   	BIT #I2C_X0SDA_PIN_VALUE
 3117  0000000                   	BEQ I2C_X0_MISO_0#	
 3118  0000000                   I2C_X0_MISO_1#:
 3119  0000000                   	TYA
 3120  0000000                   	SEC
 3121  0000000                   	ROL A
 3122  0000000                   	TAY
 3123  0000000                   	BRA I2C_X0_MISO_NEXT#
 3124  0000000                   I2C_X0_MISO_0#:





 3125  0000000                   	TYA
 3126  0000000                   	CLC
 3127  0000000                   	ROL A
 3128  0000000                   	TAY
 3129  0000000                   I2C_X0_MISO_NEXT#:
 3130  0000000                   	ENDM
 3131  0000000                   ;--------------------------------------------------------
 3132  0000000                   I2C_X0_MISO_Y_1BIT	MACRO
 3133  0000000                   	I2C_X0_SCL_0
 3134  0000000                   	I2C_DELAY
 3135  0000000                   	I2C_X0_SCL_1
 3136  0000000                   	I2C_DELAY
 3137  0000000                   	I2C_X0_MISO_Y
 3138  0000000                   	ENDM
 3139  0000000                   ;--------------------------------------------------------
 3140  0000000                   ;input: SCL output low,
 3141  0000000                   ;output:SCL output low, SDA output 1
 3142  0000000                   
 3143  0000000                   I2C_X0_MISO MACRO
 3144  0000000                   	I2C_X0_SDA_PULL_HIGH_1
 3145  0000000                   
 3146  0000000                   	LDY #00H
 3147  0000000                   	I2C_X0_MISO_Y_1BIT
 3148  0000000                   	I2C_X0_MISO_Y_1BIT
 3149  0000000                   	I2C_X0_MISO_Y_1BIT
 3150  0000000                   	I2C_X0_MISO_Y_1BIT
 3151  0000000                   	I2C_X0_MISO_Y_1BIT
 3152  0000000                   	I2C_X0_MISO_Y_1BIT
 3153  0000000                   	I2C_X0_MISO_Y_1BIT
 3154  0000000                   	I2C_X0_MISO_Y_1BIT
 3155  0000000                   
 3156  0000000                   	ENDM
 3157  0000000                   ;--------------------------------------------------------
 3158  0000000                   I2C_X0_MISO_ACK MACRO
 3159  0000000                   	I2C_X0_SCL_0
 3160  0000000                   
 3161  0000000                   ;SDA: output0
 3162  0000000                   	I2C_X0_SDA_OUTPUT_0	
 3163  0000000                   	I2C_DELAY
 3164  0000000                   
 3165  0000000                   ;SCL:0->1
 3166  0000000                   	I2C_X0_SCL_1
 3167  0000000                   	I2C_DELAY
 3168  0000000                   
 3169  0000000                   ;SCL:1->0
 3170  0000000                   	I2C_X0_SCL_0
 3171  0000000                   	ENDM
 3172  0000000                   ;--------------------------------------------------------
 3173  0000000                   I2C_X0_MISO_NACK MACRO
 3174  0000000                   ;SCL:1->0
 3175  0000000                   	I2C_X0_SCL_0
 3176  0000000                   
 3177  0000000                   ;SDA: output1
 3178  0000000                   	I2C_X0_SDA_OUTPUT_1
 3179  0000000                   	I2C_DELAY
 3180  0000000                   
 3181  0000000                   ;SCL:0->1





 3182  0000000                   	I2C_X0_SCL_1
 3183  0000000                   	I2C_DELAY
 3184  0000000                   
 3185  0000000                   ;SCL:1->0
 3186  0000000                   	I2C_X0_SCL_0
 3187  0000000                   	ENDM
 3188  0000000                   ;--------------------------------------------------------
 3189  0000000                   ;	ack:acc=01;nack:acc=00
 3190  0000000                   I2C_X0_WRITE_NB_RAM MACRO NUM,REG
 3191  0000000                   	LDX #00H
 3192  0000000                   I2C_X0_WRITE_NB_RAM_LOOP#:
 3193  0000000                   	CPX #NUM
 3194  0000000                   	BNE 3
 3195  0000000                   	JMP I2C_X0_WRITE_NB_RAM_DONE#
 3196  0000000                   	LDA REG,X
 3197  0000000                   	I2C_X0_MOSI
 3198  0000000                   	BEQ I2C_X0_WRITE_NB_RAM_NACK#
 3199  0000000                   	INX
 3200  0000000                   	JMP I2C_X0_WRITE_NB_RAM_LOOP#
 3201  0000000                   I2C_X0_WRITE_NB_RAM_DONE#:
 3202  0000000                   	LDA #01H
 3203  0000000                   	BRA END_I2C_X0_WRITE_NB_RAM#
 3204  0000000                   
 3205  0000000                   I2C_X0_WRITE_NB_RAM_NACK#:
 3206  0000000                   	LDA #00H
 3207  0000000                   
 3208  0000000                   END_I2C_X0_WRITE_NB_RAM#:
 3209  0000000                   	ENDM
 3210  0000000                   ;--------------------------------------------------------
 3211  0000000                   ;	ack:acc=01;nack:acc=00
 3212  0000000                   I2C_X0_WRITE_NB_RAM_ILI MACRO NUM,REG
 3213  0000000                   	LDX #00H
 3214  0000000                   	DEC NUM
 3215  0000000                   I2C_X0_WRITE_NB_RAM_LOOP#:
 3216  0000000                   	CPY NUM
 3217  0000000                   	BNE 3
 3218  0000000                   	JMP I2C_X0_WRITE_NB_RAM_DONE#
 3219  0000000                   	LDA (.LOW.REG),Y
 3220  0000000                   	I2C_X0_MOSI
 3221  0000000                   	BEQ I2C_X0_WRITE_NB_RAM_NACK#
 3222  0000000                   	INY
 3223  0000000                   	JMP I2C_X0_WRITE_NB_RAM_LOOP#
 3224  0000000                   I2C_X0_WRITE_NB_RAM_DONE#:
 3225  0000000                   	LDA #01H
 3226  0000000                   	BRA END_I2C_X0_WRITE_NB_RAM#
 3227  0000000                   
 3228  0000000                   I2C_X0_WRITE_NB_RAM_NACK#:
 3229  0000000                   	LDA #00H
 3230  0000000                   
 3231  0000000                   END_I2C_X0_WRITE_NB_RAM#:
 3232  0000000                   	ENDM
 3233  0000000                   ;--------------------------------------------------------
 3234  0000000                   ;	ack:acc=01;nack:acc=00
 3235  0000000                   I2C_X0_WRITE_NB_RAM2 MACRO REG
 3236  0000000                   	LDX #00H
 3237  0000000                   I2C_X0_WRITE_NB_RAM2_LOOP#:
 3238  0000000                   	CPX REG





 3239  0000000                   	BNE 3
 3240  0000000                   	JMP I2C_X0_WRITE_NB_RAM2_DONE#
 3241  0000000                   	LDA REG+1,X
 3242  0000000                   	I2C_X0_MOSI
 3243  0000000                   	BEQ I2C_X0_WRITE_NB_RAM2_NACK#
 3244  0000000                   	INX
 3245  0000000                   	JMP I2C_X0_WRITE_NB_RAM2_LOOP#
 3246  0000000                   I2C_X0_WRITE_NB_RAM2_DONE#:
 3247  0000000                   	LDA #01H
 3248  0000000                   	BRA END_I2C_X0_WRITE_NB_RAM2#
 3249  0000000                   
 3250  0000000                   I2C_X0_WRITE_NB_RAM2_NACK#:
 3251  0000000                   	LDA #00H
 3252  0000000                   
 3253  0000000                   END_I2C_X0_WRITE_NB_RAM2#:
 3254  0000000                   	ENDM
 3255  0000000                   ;--------------------------------------------------------
 3256  0000000                   I2C_X0_READ_NB_RAM MACRO NUM,REG
 3257  0000000                   	LDX #00H
 3258  0000000                   I2C_X0_READ_NB_RAM_LOOP#:
 3259  0000000                   	CPX #NUM-1
 3260  0000000                   	BNE 3
 3261  0000000                   	JMP END_I2C_X0_READ_NB_RAM#
 3262  0000000                   	I2C_X0_MISO
 3263  0000000                   	I2C_X0_MISO_ACK
 3264  0000000                   	TYA
 3265  0000000                   	STA REG,X
 3266  0000000                   	INX
 3267  0000000                   	JMP I2C_X0_READ_NB_RAM_LOOP#
 3268  0000000                   END_I2C_X0_READ_NB_RAM#:
 3269  0000000                   	I2C_X0_MISO
 3270  0000000                   	I2C_X0_MISO_NACK
 3271  0000000                   	TYA
 3272  0000000                   	STA REG,X
 3273  0000000                   	ENDM
 3274  0000000                   ;--------------------------------------------------------
 3275  0000000                   I2C_X0_READ_NB_RAM_ILI MACRO NUM,REG
 3276  0000000                   	LDY #00H
 3277  0000000                   	DEC NUM
 3278  0000000                   I2C_X0_READ_NB_RAM_LOOP#:
 3279  0000000                   	CPY NUM
 3280  0000000                   	BNE 3
 3281  0000000                   	JMP END_I2C_X0_READ_NB_RAM#
 3282  0000000                   	PHY
 3283  0000000                   	I2C_X0_MISO
 3284  0000000                   	I2C_X0_MISO_ACK
 3285  0000000                   	TYA
 3286  0000000                   	PLY
 3287  0000000                   	STA (.LOW.REG),Y
 3288  0000000                   	INY
 3289  0000000                   	JMP I2C_X0_READ_NB_RAM_LOOP#
 3290  0000000                   END_I2C_X0_READ_NB_RAM#:
 3291  0000000                   	PHY
 3292  0000000                   	I2C_X0_MISO
 3293  0000000                   	I2C_X0_MISO_NACK
 3294  0000000                   	TYA
 3295  0000000                   	STA (.LOW.REG),Y





 3296  0000000                   	PLY
 3297  0000000                   	STA (.LOW.REG),Y
 3298  0000000                   	LDX NUM
 3299  0000000                   	ENDM
 3300  0000000                   ;--------------------------------------------------------
 3301  0000000                   I2C_X0_READ_NB_RAM2 MACRO REG
 3302  0000000                   	LDX #00H
 3303  0000000                   I2C_X0_READ_NB_RAM2_LOOP#:
 3304  0000000                   	INX
 3305  0000000                   	CPX REG
 3306  0000000                   	BNE 3
 3307  0000000                   	JMP END_I2C_X0_READ_NB_RAM2#
 3308  0000000                   	DEX
 3309  0000000                   	I2C_X0_MISO
 3310  0000000                   	I2C_X0_MISO_ACK
 3311  0000000                   	TYA
 3312  0000000                   	STA REG+1,X
 3313  0000000                   	INX
 3314  0000000                   	JMP I2C_X0_READ_NB_RAM2_LOOP#
 3315  0000000                   END_I2C_X0_READ_NB_RAM2#:
 3316  0000000                   	DEX
 3317  0000000                   	I2C_X0_MISO
 3318  0000000                   	I2C_X0_MISO_NACK
 3319  0000000                   	TYA
 3320  0000000                   	STA REG+1,X
 3321  0000000                   	ENDM
 3322  0000000                   ;=====================================================================================
 3323  0000000                   ;=====================================================================================
 3324  0000000                   .IF (I2C_COMMAND_ENABLE .EQ. 1H)
 3325  0000000                   ;output: SCL output
 3326  0000000                   I2C_INIT MACRO
 3327  0000000                    	I2C_X0_INIT_PIN
 3328  0000000                    	ENDM
 3329  0000000                   ;------------------------------------------------------------------------------
 3330  0000000                   ;output: SDA output low,SCL output low
 3331  0000000                   I2C_ON	MACRO 
 3332  0000000                   	I2C_X0_START
 3333  0000000                   	ENDM
 3334  0000000                   ;------------------------------------------------------------------------------
 3335  0000000                   ;output: SDA output high,SCL output high
 3336  0000000                   I2C_OFF	MACRO 
 3337  0000000                   	I2C_X0_STOP
 3338  0000000                   	ENDM
 3339  0000000                   ;------------------------------------------------------------------------------
 3340  0000000                   ;input: SCL output low,
 3341  0000000                   ;output:SCL output low, SDA input
 3342  0000000                   ;	ack:acc=01;nack:acc=00
 3343  0000000                   I2C_WRITE MACRO DATA
 3344  0000000                   	LDA #DATA
 3345  0000000                   	I2C_X0_MOSI
 3346  0000000                   	ENDM
 3347  0000000                   ;------------------------------------------------------------------------------
 3348  0000000                   I2C_WRITE_RAM MACRO REG
 3349  0000000                   	LDA REG
 3350  0000000                   	I2C_X0_MOSI
 3351  0000000                   	ENDM
 3352  0000000                   ;------------------------------------------------------------------------------





 3353  0000000                   I2C_WRITE_NB_RAM MACRO NUM,REG
 3354  0000000                   	I2C_X0_WRITE_NB_RAM NUM,REG
 3355  0000000                   	ENDM
 3356  0000000                   ;------------------------------------------------------------------------------
 3357  0000000                   I2C_WRITE_NB_RAM2 MACRO REG
 3358  0000000                   	I2C_X0_WRITE_NB_RAM2 REG
 3359  0000000                   	ENDM
 3360  0000000                   ;------------------------------------------------------------------------------
 3361  0000000                   I2C_WRITE_NB_RAM_ILI MACRO NUM,REG
 3362  0000000                   	I2C_X0_WRITE_NB_RAM_ILI NUM,REG
 3363  0000000                   	ENDM
 3364  0000000                   ;------------------------------------------------------------------------------
 3365  0000000                   ;input: SCL output low,
 3366  0000000                   ;output:SCL output low, SDA output 1
 3367  0000000                   
 3368  0000000                   I2C_READ_NACK MACRO 
 3369  0000000                   	I2C_X0_MISO
 3370  0000000                   	I2C_X0_MISO_NACK
 3371  0000000                   	TYA
 3372  0000000                   	ENDM
 3373  0000000                   ;------------------------------------------------------------------------------
 3374  0000000                   I2C_READ MACRO 
 3375  0000000                   	I2C_READ_NACK
 3376  0000000                   	ENDM
 3377  0000000                   ;------------------------------------------------------------------------------
 3378  0000000                   I2C_READ_NACK_RAM MACRO REG
 3379  0000000                   	I2C_X0_MISO
 3380  0000000                   	I2C_X0_MISO_NACK
 3381  0000000                   	STY REG
 3382  0000000                   	ENDM
 3383  0000000                   ;------------------------------------------------------------------------------
 3384  0000000                   I2C_READ_RAM MACRO REG
 3385  0000000                   	I2C_READ_NACK_RAM REG
 3386  0000000                   	ENDM
 3387  0000000                   ;------------------------------------------------------------------------------
 3388  0000000                   I2C_READ_ACK MACRO 
 3389  0000000                   	I2C_X0_MISO
 3390  0000000                   	I2C_X0_MISO_ACK
 3391  0000000                   	TYA
 3392  0000000                   	ENDM
 3393  0000000                   ;------------------------------------------------------------------------------
 3394  0000000                   I2C_READ_ACK_RAM MACRO REG
 3395  0000000                   	I2C_X0_MISO
 3396  0000000                   	I2C_X0_MISO_ACK
 3397  0000000                   	STY REG
 3398  0000000                   	ENDM
 3399  0000000                   ;------------------------------------------------------------------------------
 3400  0000000                   I2C_READ_NB_RAM MACRO NUM,REG
 3401  0000000                   	I2C_X0_READ_NB_RAM NUM,REG
 3402  0000000                   	ENDM
 3403  0000000                   ;------------------------------------------------------------------------------
 3404  0000000                   I2C_READ_NB_RAM2 MACRO REG
 3405  0000000                   	I2C_X0_READ_NB_RAM2 REG
 3406  0000000                   	ENDM
 3407  0000000                   ;------------------------------------------------------------------------------
 3408  0000000                   I2C_READ_NB_RAM_ILI MACRO NUM,REG
 3409  0000000                   	I2C_X0_READ_NB_RAM_ILI NUM,REG





 3410  0000000                   	ENDM
 3411  0000000                   .ENDIF
 3412  0000000                   ;=====================================================================================
 3413  0000000                   ;=====================================================================================	
 3414  0000000                   
 3415  0000000                   
 3416  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\ADC_MACROS.INI.APP"
 3417  0000000                   ;========================================================
 3418  0000000                   .EXTERNAL  ADC_CH_PIN_MASK_TABLE
 3419  0000000                   .EXTERNAL  ADC_CH_SETTING_TABLE
 3420  0000000                   
 3421  0000000                   ;----internal pin-----------
 3422  0000000                   
 3423  0000000                   ADC_PORT_D_BASE		EQU 0F85H
 3424  0000000                   ADC_PORT_M_BASE		EQU 0F89H
 3425  0000000                   ADC_ADRC			EQU 0FB0H
 3426  0000000                   ADC_ADR				EQU 0FB2H
 3427  0000000                   ADC_IEF1			EQU 0F91H
 3428  0000000                   ADC_EVF1			EQU 0F93H
 3429  0000000                   
 3430  0000000                   ADC_ADRC_EN			EQU	01H
 3431  0000000                   ADC_ADRC_START		EQU	02H
 3432  0000000                   
 3433  0000000                   ADC_ADRC_BP14_AN	EQU 10H
 3434  0000000                   ADC_ADRC_BP15_AN	EQU 24H
 3435  0000000                   ADC_ADRC_BP16_AN	EQU 48H
 3436  0000000                   ADC_ADRC_BP17_AN	EQU 8CH
 3437  0000000                   
 3438  0000000                   AN_CH1				EQU 00H
 3439  0000000                   AN_CH2				EQU 01H
 3440  0000000                   AN_CH3				EQU 02H
 3441  0000000                   AN_CH4				EQU 03H
 3442  0000000                   
 3443  0000000                   ADC_CH1_PIN_MASK	EQU 10H
 3444  0000000                   ADC_CH2_PIN_MASK	EQU 20H
 3445  0000000                   ADC_CH3_PIN_MASK	EQU 40H
 3446  0000000                   ADC_CH4_PIN_MASK	EQU 80H
 3447  0000000                   ;================================================================================
 3448  0000000                   ; 	ADC SUBROUTINE
 3449  0000000                   ;================================================================================
 3450  0000000                   
 3451  0000000                   ;================================================================================
 3452  0000000                   ; 	USER MACRO - Drive Macro
 3453  0000000                   ;================================================================================
 3454  0000000                   ADC_INIT MACRO CHANNEL
 3455  0000000                   	LDA #CHANNEL
 3456  0000000                   	BEQ ADC_INIT_END#
 3457  0000000                   
 3458  0000000                   	LDX #(CHANNEL-1)
 3459  0000000                   ;set input floating
 3460  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3461  0000000                   	TRB !ADC_PORT_M_BASE
 3462  0000000                   	TSB !ADC_PORT_D_BASE
 3463  0000000                   
 3464  0000000                   ;select channel
 3465  0000000                   	LDA !ADC_ADRC
 3466  0000000                   	AND #03H





 3467  0000000                   	ORA ADC_CH_SETTING_TABLE, X
 3468  0000000                   	STA !ADC_ADRC
 3469  0000000                   	JMP ADC_INIT_END#
 3470  0000000                   
 3471  0000000                   ADC_INIT_END#:
 3472  0000000                   	ENDM
 3473  0000000                   ;------------------------------------------------------------------------------	
 3474  0000000                   ADC_INIT_RAM MACRO CHANNEL_RAM
 3475  0000000                   	LDA CHANNEL_RAM
 3476  0000000                   	BEQ ADC_INIT_END#
 3477  0000000                   
 3478  0000000                   	LDX CHANNEL_RAM
 3479  0000000                   	DEX
 3480  0000000                   ;set input floating
 3481  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3482  0000000                   	TRB !ADC_PORT_M_BASE
 3483  0000000                   	TSB !ADC_PORT_D_BASE
 3484  0000000                   	TSB !ADC_ADRC
 3485  0000000                   
 3486  0000000                   ;select channel
 3487  0000000                   	LDA !ADC_ADRC
 3488  0000000                   	AND #F3H
 3489  0000000                   	ORA ADC_CH_SETTING_TABLE, X
 3490  0000000                   	TSB !ADC_ADRC
 3491  0000000                   ADC_INIT_END#:
 3492  0000000                   	ENDM
 3493  0000000                   ;------------------------------------------------------------------------------	
 3494  0000000                   ADC_DEINIT MACRO CHANNEL
 3495  0000000                   	LDA #CHANNEL
 3496  0000000                   	BEQ ADC_INIT_END#
 3497  0000000                   
 3498  0000000                   	LDX #(CHANNEL-1)
 3499  0000000                   
 3500  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3501  0000000                   	TRB !ADC_ADRC
 3502  0000000                   ADC_INIT_END#:
 3503  0000000                   	ENDM
 3504  0000000                   ;------------------------------------------------------------------------------	
 3505  0000000                   ADC_DEINIT_RAM MACRO CHANNEL_RAM
 3506  0000000                   	LDA CHANNEL_RAM
 3507  0000000                   	BEQ ADC_DEINIT_END#
 3508  0000000                   
 3509  0000000                   	LDX CHANNEL_RAM
 3510  0000000                   	DEX
 3511  0000000                   
 3512  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3513  0000000                   	TRB !ADC_ADRC
 3514  0000000                   ADC_DEINIT_END#:
 3515  0000000                   	ENDM
 3516  0000000                   ;------------------------------------------------------------------------------
 3517  0000000                   ADC_ON MACRO
 3518  0000000                   	LDA #01H
 3519  0000000                   	TSB !ADRC
 3520  0000000                   	ENDM
 3521  0000000                   ;------------------------------------------------------------------------------
 3522  0000000                   ADC_OFF MACRO
 3523  0000000                   ;LDA !ADC_ADRC





 3524  0000000                   ;AND #0FH
 3525  0000000                   ;STA !ADC_ADRC
 3526  0000000                   
 3527  0000000                   	LDA #04H
 3528  0000000                   	TRB !ADC_IEF1
 3529  0000000                   
 3530  0000000                   	LDA #01H
 3531  0000000                   	TRB !ADC_ADRC
 3532  0000000                   	ENDM
 3533  0000000                   ;------------------------------------------------------------------------------
 3534  0000000                   ADC_INT_EN MACRO
 3535  0000000                   	LDA #04H
 3536  0000000                   	TSB !ADC_IEF1
 3537  0000000                   	ENDM
 3538  0000000                   ;------------------------------------------------------------------------------
 3539  0000000                   ADC_INT_DIS MACRO
 3540  0000000                   	LDA #04H
 3541  0000000                   	TRB !ADC_IEF1
 3542  0000000                   	ENDM
 3543  0000000                   ;------------------------------------------------------------------------------
 3544  0000000                   ADC_CONV MACRO
 3545  0000000                   ; conversion
 3546  0000000                   	LDA #02H
 3547  0000000                   	TSB !ADC_ADRC
 3548  0000000                   	ENDM
 3549  0000000                   ;------------------------------------------------------------------------------
 3550  0000000                   ADC_CONV_RAM MACRO
 3551  0000000                   ; conversion
 3552  0000000                   	LDA #02H
 3553  0000000                   	TSB !ADC_ADRC
 3554  0000000                   	ENDM
 3555  0000000                   ;------------------------------------------------------------------------------
 3556  0000000                   ADC_START_CONV MACRO CHANNEL
 3557  0000000                   	ADC_INIT CHANNEL
 3558  0000000                   ; conversion
 3559  0000000                   	LDA #02H
 3560  0000000                   	TSB !ADC_ADRC
 3561  0000000                   	ENDM
 3562  0000000                   ;------------------------------------------------------------------------------
 3563  0000000                   ADC_START_CONV_RAM MACRO CHANNEL_RAM
 3564  0000000                   	ADC_INIT_RAM CHANNEL_RAM
 3565  0000000                   ; conversion
 3566  0000000                   	LDA #02H
 3567  0000000                   	TSB !ADC_ADRC
 3568  0000000                   	ENDM
 3569  0000000                   ;------------------------------------------------------------------------------
 3570  0000000                   ADC_GET_CONV_DATA_RAM MACRO RAM
 3571  0000000                   	LDA !ADC_ADR
 3572  0000000                   	STA RAM
 3573  0000000                   	ENDM
 3574  0000000                   ;------------------------------------------------------------------------------
 3575  0000000                   ADC_GET_CONV_STATUS_RAM MACRO RAM
 3576  0000000                   	ADC_GET_CONV_STATUS
 3577  0000000                   	STA RAM
 3578  0000000                   	ENDM
 3579  0000000                   ;------------------------------------------------------------------------------
 3580  0000000                   ADC_GET_CONV_STATUS MACRO





 3581  0000000                   	LDA !ADC_ADRC
 3582  0000000                   	BIT #02H
 3583  0000000                   	BNE ADC_IS_BUSY#
 3584  0000000                   	LDA #00H
 3585  0000000                   	BRA ADC_GET_CONV_STATUS_END#
 3586  0000000                   ADC_IS_BUSY#:
 3587  0000000                   	LDA #01H
 3588  0000000                   ADC_GET_CONV_STATUS_END#:
 3589  0000000                   	ENDM
 3590  0000000                   
 3591  0000000                   
 3592  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\UART_MACROS.INI.APP"
 3593  0000000                   ;========================================================
 3594  0000000                   
 3595  0000000                   ;----internal pin-----------
 3596  0000000                   	.IF (WITH_UART_SWITCH .EQ. 0)
 3597  0000000                   UART_RX_PORT_ADDR 	EQU 	BP1R			;BP1
 3598  0000000                   UART_RX_D_ADDR 		EQU 	BP1D
 3599  0000000                   UART_RX_M_ADDR 		EQU 	BP1M
 3600  0000000                   UART_RX_PIN 		EQU 	08H				;BP1.3
 3601  0000000                   
 3602  0000000                   UART_TX_PORT_ADDR 	EQU 	BP1R			;BP1
 3603  0000000                   UART_TX_D_ADDR 		EQU 	BP1D
 3604  0000000                   UART_TX_M_ADDR 		EQU 	BP1M
 3605  0000000                   UART_TX_PIN 		EQU 	04H				;BP1.2
 3606  0000000                   
 3607  0000000                   	.ELSE	
 3608  0000000                   UART_RX_PORT_ADDR 	EQU 	BP3R			;BP3
 3609  0000000                   UART_RX_D_ADDR 		EQU 	BP3D
 3610  0000000                   UART_RX_M_ADDR 		EQU 	BP3M
 3611  0000000                   UART_RX_PIN 		EQU 	02H				;BP3.1
 3612  0000000                   
 3613  0000000                   UART_TX_PORT_ADDR 	EQU 	BP3R			;BP3
 3614  0000000                   UART_TX_D_ADDR 		EQU 	BP3D
 3615  0000000                   UART_TX_M_ADDR 		EQU 	BP3M
 3616  0000000                   UART_TX_PIN 		EQU 	01H				;BP3.0
 3617  0000000                   	.ENDIF
 3618  0000000                   ;================================================================================
 3619  0000000                   ; 	UART SUBROUTINE
 3620  0000000                   ;================================================================================
 3621  0000000                   INIT_UART_TXIO MACRO
 3622  0000000                   	LDA	#UART_TX_PIN 
 3623  0000000                   	TSB	!UART_TX_M_ADDR
 3624  0000000                   	TSB	!UART_TX_PORT_ADDR
 3625  0000000                   	TRB	!UART_TX_D_ADDR
 3626  0000000                   
 3627  0000000                   	LDA #02H						; Defines BP12 or BP30 is the shared function TXD pin
 3628  0000000                   	.IF (WITH_UART_SWITCH .EQ. 0)
 3629  0000000                   	TRB !TXSTS
 3630  0000000                   	.ELSE
 3631  0000000                   	TSB !TXSTS
 3632  0000000                   	.ENDIF
 3633  0000000                   
 3634  0000000                   	LDA #80H
 3635  0000000                   	TSB !UMODE
 3636  0000000                   
 3637  0000000                   	ENDM





 3638  0000000                   ;--------------------------------------------------------
 3639  0000000                   DEINIT_UART_TXIO MACRO
 3640  0000000                   	LDA #80H
 3641  0000000                   	TRB !UMODE
 3642  0000000                   	ENDM
 3643  0000000                   ;--------------------------------------------------------
 3644  0000000                   EN_UART_X0_TX MACRO
 3645  0000000                   	LDA #20H
 3646  0000000                   	TSB !UMODE
 3647  0000000                   	ENDM
 3648  0000000                   ;--------------------------------------------------------
 3649  0000000                   DIS_UART_X0_TX MACRO
 3650  0000000                   	LDA #20H
 3651  0000000                   	TRB !UMODE
 3652  0000000                   	ENDM
 3653  0000000                   ;--------------------------------------------------------
 3654  0000000                   INIT_UART_RXIO MACRO
 3655  0000000                   	LDA	#UART_RX_PIN 
 3656  0000000                   	TSB	!UART_RX_M_ADDR
 3657  0000000                   	TSB	!UART_RX_D_ADDR
 3658  0000000                   
 3659  0000000                   	LDA #02H						; Defines BP13 or BP31 is the shared function RXD pin
 3660  0000000                   	.IF (WITH_UART_SWITCH .EQ. 0)
 3661  0000000                   	TRB !RXSTS
 3662  0000000                   	.ELSE
 3663  0000000                   	TSB !RXSTS
 3664  0000000                   	.ENDIF
 3665  0000000                   
 3666  0000000                   	LDA #40H
 3667  0000000                   	TSB !UMODE
 3668  0000000                   
 3669  0000000                   	ENDM
 3670  0000000                   ;--------------------------------------------------------
 3671  0000000                   DEINIT_UART_RXIO MACRO
 3672  0000000                   	LDA #40H
 3673  0000000                   	TRB !UMODE
 3674  0000000                   	ENDM
 3675  0000000                   ;--------------------------------------------------------
 3676  0000000                   EN_UART_X0_RX MACRO
 3677  0000000                   	LDA #10H
 3678  0000000                   	TSB !UMODE
 3679  0000000                   	ENDM
 3680  0000000                   ;--------------------------------------------------------
 3681  0000000                   DIS_UART_X0_RX MACRO
 3682  0000000                   	LDA #10H
 3683  0000000                   	TRB !UMODE
 3684  0000000                   	ENDM
 3685  0000000                   ;--------------------------------------------------------
 3686  0000000                   SET_UART_BAUD_RATE MACRO BR_VAL
 3687  0000000                   	LDA #.HIGH.(BR_VAL)
 3688  0000000                   	STA !BRDIVH
 3689  0000000                   	LDA #.LOW.(BR_VAL)
 3690  0000000                   	STA !BRDIVL
 3691  0000000                   	ENDM
 3692  0000000                   ;--------------------------------------------------------
 3693  0000000                   UART_X0_CONFIG MACRO
 3694  0000000                   	LDA !UMODE





 3695  0000000                   	AND #11110001B
 3696  0000000                   
 3697  0000000                   ;.IF(PARITY_BIT .EQ. 0)
 3698  0000000                   ;.ENDIF
 3699  0000000                   .IF(PARITY_BIT .EQ. 1)
 3700  0000000                   	ORA #00000100B		; STICK 0 PARITY IF TRANSMITTER
 3701  0000000                   .ENDIF
 3702  0000000                   .IF(PARITY_BIT .EQ. 2)
 3703  0000000                   	ORA #00000110B		; STICK 1 PARITY IF TRANSMITTER
 3704  0000000                   .ENDIF
 3705  0000000                   .IF(PARITY_BIT .EQ. 3)
 3706  0000000                   	ORA #00001000B		; EVEN PARITY
 3707  0000000                   .ENDIF
 3708  0000000                   .IF(PARITY_BIT .EQ. 4)
 3709  0000000                   	ORA #00001010B		; ODD PARITY
 3710  0000000                   .ENDIF
 3711  0000000                   .IF(PARITY_BIT .EQ. 5)
 3712  0000000                   	ORA #00001100B		; STICK 0 PARITY
 3713  0000000                   .ENDIF
 3714  0000000                   .IF(PARITY_BIT .EQ. 6)
 3715  0000000                   	ORA #00001110B		; STICK 1 PARITY
 3716  0000000                   .ENDIF
 3717  0000000                   	STA !UMODE
 3718  0000000                   
 3719  0000000                   	LDA #TDLY_VALUE		; DEFINE THE TRANSFER DELAY TIME
 3720  0000000                   	STA !TDLY
 3721  0000000                   
 3722  0000000                   	ENDM
 3723  0000000                   ;--------------------------------------------------------
 3724  0000000                   SET_UART_TX_DATA	MACRO DAT
 3725  0000000                   	LDA #DAT
 3726  0000000                   	STA !URDATA
 3727  0000000                   	ENDM
 3728  0000000                   ;--------------------------------------------------------
 3729  0000000                   SET_UART_TX_DATA_RAM	MACRO REG
 3730  0000000                   	LDA REG
 3731  0000000                   	STA !URDATA
 3732  0000000                   	ENDM
 3733  0000000                   ;--------------------------------------------------------
 3734  0000000                   SET_UART_TX_DATA_ACC	MACRO
 3735  0000000                   	STA !URDATA
 3736  0000000                   	ENDM
 3737  0000000                   ;--------------------------------------------------------
 3738  0000000                   GET_UART_RX_DATA_RAM	MACRO REG
 3739  0000000                   	LDA !URDATA
 3740  0000000                   	STA REG
 3741  0000000                   	ENDM
 3742  0000000                   ;--------------------------------------------------------
 3743  0000000                   GET_UART_RX_DATA_ACC	MACRO
 3744  0000000                   	LDA !URDATA
 3745  0000000                   	ENDM
 3746  0000000                   ;--------------------------------------------------------
 3747  0000000                   CHK_UART_X0_RX_FIFO_EMPTY MACRO
 3748  0000000                   ;Z=1 not empty
 3749  0000000                   ;Z=0 empty
 3750  0000000                   	LDA #80H
 3751  0000000                   	BIT !RXSTS





 3752  0000000                   CHK_UART_X0_RX_FIFO_EMPTY_END#:
 3753  0000000                   	ENDM
 3754  0000000                   ;--------------------------------------------------------
 3755  0000000                   CHK_UART_X0_RX_FIFO_FULL MACRO
 3756  0000000                   ;Z=1 not full
 3757  0000000                   ;Z=0 full
 3758  0000000                   	LDA #40H
 3759  0000000                   	BIT !RXSTS
 3760  0000000                   CHK_UART_X0_RX_FILL_FULL_END#:
 3761  0000000                   	ENDM
 3762  0000000                   ;--------------------------------------------------------
 3763  0000000                   CHK_UART_X0_TX_FIFO_FULL MACRO
 3764  0000000                   ;Z=1 not full
 3765  0000000                   ;Z=0 full
 3766  0000000                   	LDA #40H
 3767  0000000                   	BIT !TXSTS
 3768  0000000                   CHK_UART_X0_TX_FILL_FULL_END#:
 3769  0000000                   	ENDM
 3770  0000000                   ;--------------------------------------
 3771  0000000                   UART_X0_TX_WRITE_RAM MACRO NUM,REG
 3772  0000000                   ;ACC = NumberOfBytesWrited
 3773  0000000                   	LDX #00H
 3774  0000000                   RELOAD_UART_TX_RAM_LOOP#:
 3775  0000000                   	CHK_UART_X0_TX_FIFO_FULL
 3776  0000000                   	BEQ 3
 3777  0000000                   	JMP RELOAD_UART_TX_RAM_FULL#
 3778  0000000                   
 3779  0000000                   	CPX #NUM
 3780  0000000                   	BNE 3
 3781  0000000                   	JMP RELOAD_UART_TX_RAM_DONE#
 3782  0000000                   
 3783  0000000                   	LDA REG,X
 3784  0000000                   	SET_UART_TX_DATA_ACC
 3785  0000000                   	INX
 3786  0000000                   	JMP RELOAD_UART_TX_RAM_LOOP#
 3787  0000000                   
 3788  0000000                   RELOAD_UART_TX_RAM_DONE#:
 3789  0000000                   	BRA END_RELOAD_UART_TX_RAM#
 3790  0000000                   RELOAD_UART_TX_RAM_FULL#:
 3791  0000000                   END_RELOAD_UART_TX_RAM#:
 3792  0000000                   	TXA
 3793  0000000                   	ENDM
 3794  0000000                   ;--------------------------------------
 3795  0000000                   UART_X0_TX_WRITE_RAM_ILI MACRO NUM_RAM,REG
 3796  0000000                   ;ACC = NumberOfBytesWrited
 3797  0000000                   	LDY #00H
 3798  0000000                   RELOAD_UART_TX_RAM_LOOP#:
 3799  0000000                   	CHK_UART_X0_TX_FIFO_FULL
 3800  0000000                   	BEQ 3
 3801  0000000                   	JMP RELOAD_UART_TX_RAM_FULL#
 3802  0000000                   
 3803  0000000                   	CPY NUM_RAM
 3804  0000000                   	BNE 3
 3805  0000000                   	JMP RELOAD_UART_TX_RAM_DONE#
 3806  0000000                   
 3807  0000000                   	LDA (.LOW.REG),Y
 3808  0000000                   	SET_UART_TX_DATA_ACC





 3809  0000000                   	INY
 3810  0000000                   	JMP RELOAD_UART_TX_RAM_LOOP#
 3811  0000000                   
 3812  0000000                   RELOAD_UART_TX_RAM_DONE#:
 3813  0000000                   	BRA END_RELOAD_UART_TX_RAM#
 3814  0000000                   RELOAD_UART_TX_RAM_FULL#:
 3815  0000000                   END_RELOAD_UART_TX_RAM#:
 3816  0000000                   	TYA
 3817  0000000                   	ENDM
 3818  0000000                   ;--------------------------------------------------------
 3819  0000000                   UART_X0_RX_READ_RAM MACRO NUM,REG
 3820  0000000                   ; Returns the number of bytes to be received.
 3821  0000000                   ; ACC = NumberOfBytesRead
 3822  0000000                   	LDX #00H
 3823  0000000                   READ_UART_RX_RAM_LOOP#:
 3824  0000000                   	CHK_UART_X0_RX_FIFO_EMPTY
 3825  0000000                   	BEQ 3
 3826  0000000                   	JMP READ_UART_RX_RAM_EMPTY#
 3827  0000000                   
 3828  0000000                   	CPX #NUM
 3829  0000000                   	BNE 3
 3830  0000000                   	JMP READ_UART_RX_RAM_DONE#
 3831  0000000                   
 3832  0000000                   	GET_UART_RX_DATA_ACC
 3833  0000000                   	STA REG,X
 3834  0000000                   	INX
 3835  0000000                   	JMP READ_UART_RX_RAM_LOOP#
 3836  0000000                   
 3837  0000000                   READ_UART_RX_RAM_DONE#:
 3838  0000000                   	BRA END_READ_UART_RX_RAM#
 3839  0000000                   READ_UART_RX_RAM_EMPTY#:
 3840  0000000                   END_READ_UART_RX_RAM#:
 3841  0000000                   	TXA
 3842  0000000                   	ENDM
 3843  0000000                   ;--------------------------------------------------------
 3844  0000000                   UART_X0_RX_READ_RAM_ILI MACRO NUM_RAM,REG
 3845  0000000                   ; Returns the number of bytes to be received.
 3846  0000000                   ; ACC = NumberOfBytesRead
 3847  0000000                   	LDY #00H
 3848  0000000                   READ_UART_RX_RAM_LOOP#:
 3849  0000000                   	CHK_UART_X0_RX_FIFO_EMPTY
 3850  0000000                   	BEQ 3
 3851  0000000                   	JMP READ_UART_RX_RAM_EMPTY#
 3852  0000000                   
 3853  0000000                   	CPY NUM_RAM
 3854  0000000                   	BNE 3
 3855  0000000                   	JMP READ_UART_RX_RAM_DONE#
 3856  0000000                   
 3857  0000000                   	GET_UART_RX_DATA_ACC
 3858  0000000                   	STA (.LOW.REG),Y
 3859  0000000                   	INY
 3860  0000000                   	JMP READ_UART_RX_RAM_LOOP#
 3861  0000000                   
 3862  0000000                   READ_UART_RX_RAM_DONE#:
 3863  0000000                   	BRA END_READ_UART_RX_RAM#
 3864  0000000                   READ_UART_RX_RAM_EMPTY#:
 3865  0000000                   END_READ_UART_RX_RAM#:





 3866  0000000                   	TYA
 3867  0000000                   	ENDM
 3868  0000000                   ;=====================================================================================
 3869  0000000                   ;=====================================================================================
 3870  0000000                   UART_INIT MACRO
 3871  0000000                   .IF (WITH_UART_TX .EQ. 1)
 3872  0000000                   	INIT_UART_TXIO
 3873  0000000                   .ENDIF
 3874  0000000                   
 3875  0000000                   .IF (WITH_UART_RX .EQ. 1)	
 3876  0000000                   	INIT_UART_RXIO
 3877  0000000                   .ENDIF
 3878  0000000                   
 3879  0000000                   	SET_UART_BAUD_RATE UART_BAUDRATE_DIVIDER
 3880  0000000                   	UART_X0_CONFIG
 3881  0000000                   	ENDM
 3882  0000000                   ;------------------------------------------------------------------------------
 3883  0000000                   UART_DEINIT MACRO
 3884  0000000                   .IF (WITH_UART_TX .EQ. 1)
 3885  0000000                   	DEINIT_UART_TXIO
 3886  0000000                   .ENDIF
 3887  0000000                   
 3888  0000000                   .IF (WITH_UART_RX .EQ. 1)	
 3889  0000000                   	DEINIT_UART_RXIO
 3890  0000000                   .ENDIF
 3891  0000000                   	ENDM
 3892  0000000                   ;------------------------------------------------------------------------------
 3893  0000000                   EN_UART_TX MACRO
 3894  0000000                   	EN_UART_X0_TX
 3895  0000000                   	ENDM
 3896  0000000                   ;------------------------------------------------------------------------------
 3897  0000000                   DIS_UART_TX MACRO
 3898  0000000                   	DIS_UART_X0_TX
 3899  0000000                   	ENDM
 3900  0000000                   ;------------------------------------------------------------------------------
 3901  0000000                   EN_UART_RX MACRO
 3902  0000000                   	EN_UART_X0_RX
 3903  0000000                   	ENDM
 3904  0000000                   ;------------------------------------------------------------------------------
 3905  0000000                   DIS_UART_RX MACRO
 3906  0000000                   	DIS_UART_X0_RX
 3907  0000000                   	ENDM
 3908  0000000                   ;------------------------------------------------------------------------------
 3909  0000000                   SET_TX_INT_NUM MACRO NUM
 3910  0000000                   	LDA #0FH
 3911  0000000                   	TRB !URTHD
 3912  0000000                   
 3913  0000000                   	LDA #NUM
 3914  0000000                   	TSB !URTHD
 3915  0000000                   	ENDM
 3916  0000000                   ;------------------------------------------------------------------------------
 3917  0000000                   SET_TX_INT_NUM_RAM MACRO NUM_RAM
 3918  0000000                   	LDA #0FH
 3919  0000000                   	TRB !URTHD
 3920  0000000                   
 3921  0000000                   	LDA NUM_RAM
 3922  0000000                   	AND #0FH





 3923  0000000                   	ORA !URTHD
 3924  0000000                   	STA !URTHD
 3925  0000000                   	ENDM
 3926  0000000                   ;------------------------------------------------------------------------------
 3927  0000000                   SET_RX_INT_NUM MACRO NUM
 3928  0000000                   	LDA #F0H
 3929  0000000                   	TRB !URTHD
 3930  0000000                   
 3931  0000000                   	LDA #(NUM << 4)
 3932  0000000                   	TSB !URTHD
 3933  0000000                   	ENDM
 3934  0000000                   ;------------------------------------------------------------------------------
 3935  0000000                   SET_RX_INT_NUM_RAM MACRO NUM_RAM
 3936  0000000                   	LDA #F0H
 3937  0000000                   	TRB !URTHD
 3938  0000000                   
 3939  0000000                   	LDA NUM_RAM
 3940  0000000                   	ASL A
 3941  0000000                   	ASL A
 3942  0000000                   	ASL A
 3943  0000000                   	ASL A
 3944  0000000                   	ORA !URTHD
 3945  0000000                   	STA !URTHD
 3946  0000000                   	ENDM
 3947  0000000                   ;------------------------------------------------------------------------------
 3948  0000000                   UART_RESET_TX_FIFO MACRO
 3949  0000000                   	LDA #01H
 3950  0000000                   	TSB !TXSTS		; Reset TX FIFO
 3951  0000000                   	ENDM
 3952  0000000                   ;------------------------------------------------------------------------------
 3953  0000000                   UART_RESET_RX_FIFO MACRO
 3954  0000000                   	LDA #01H
 3955  0000000                   	TSB !RXSTS		; Reset RX FIFO
 3956  0000000                   	ENDM
 3957  0000000                   ;------------------------------------------------------------------------------
 3958  0000000                   CHK_UART_RX_FIFO_EMPTY MACRO
 3959  0000000                   	CHK_UART_X0_RX_FIFO_EMPTY
 3960  0000000                   	ENDM
 3961  0000000                   ;------------------------------------------------------------------------------
 3962  0000000                   CHK_UART_RX_FIFO_FULL MACRO
 3963  0000000                   	CHK_UART_X0_RX_FIFO_FULL
 3964  0000000                   	ENDM
 3965  0000000                   ;------------------------------------------------------------------------------	
 3966  0000000                   CHK_UART_TX_FIFO_FULL MACRO
 3967  0000000                   	CHK_UART_X0_TX_FIFO_FULL
 3968  0000000                   	ENDM
 3969  0000000                   ;------------------------------------------------------------------------------
 3970  0000000                   UART_WRITE_ONE_BYTE_RAM MACRO REG
 3971  0000000                   	SET_UART_TX_DATA_RAM REG
 3972  0000000                   	ENDM
 3973  0000000                   ;------------------------------------------------------------------------------
 3974  0000000                   UART_WRITE_ONE_BYTE MACRO VAL	
 3975  0000000                   	SET_UART_TX_DATA VAL
 3976  0000000                   	ENDM
 3977  0000000                   ;------------------------------------------------------------------------------
 3978  0000000                   UART_READ_ONE_BYTE MACRO
 3979  0000000                   	GET_UART_RX_DATA_ACC





 3980  0000000                   	ENDM
 3981  0000000                   ;------------------------------------------------------------------------------
 3982  0000000                   UART_READ_ONE_BYTE_RAM MACRO REG
 3983  0000000                   	GET_UART_RX_DATA_RAM REG
 3984  0000000                   	ENDM
 3985  0000000                   ;------------------------------------------------------------------------------
 3986  0000000                   UART_WRITE_DATA_RAM MACRO LEN, PADDR
 3987  0000000                   	UART_X0_TX_WRITE_RAM LEN, PADDR
 3988  0000000                   	ENDM
 3989  0000000                   ;------------------------------------------------------------------------------
 3990  0000000                   UART_READ_DATA_RAM MACRO LEN, PADDR
 3991  0000000                   	UART_X0_RX_READ_RAM LEN, PADDR
 3992  0000000                   	ENDM
 3993  0000000                   ;------------------------------------------------------------------------------
 3994  0000000                   
 3995  0000000                   
 3996  0000000                   
 3997  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\MACRO_SYSTEM_INIT.INI.APP"
 3998  0000000                   	SYMBOLS
 3999  0000000                   	LINKLIST
 4000  0000000                   	DEBUG  	ASM
 4001  0000000                   	LINEAR	ON
 4002  0000000                   	LONGA	OFF
 4003  0000000                   	LONGI	OFF
 4004  0000000                   
 4005  0000000                   	EXTERN	ADD_CHECKSUM_LIB
 4006  0000000                   	EXTERN	LEAKPROOF_SETTING_FUNC
 4007  0000000                   ;==============================================================================
 4008  0000000                   ; SYSTEM INIT Routine Macros
 4009  0000000                   ;==============================================================================
 4010  0000000                   SYSTEM_INIT_PROCEDURE MACRO
 4011  0000000                       SYSTEM_INIT_PROCEDURE_N589A
 4012  0000000                   	ENDM
 4013  0000000                   ;------------------------------------------------------------------------------
 4014  0000000                   SYSTEM_INIT_PROCEDURE_N589A MACRO
 4015  0000000                   .IF	(MAINBODY='A960')
 4016  0000000                   	SYSTEM_INIT_PROCEDURE_N589A900
 4017  0000000                   .ENDIF
 4018  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4019  0000000                   	SYSTEM_INIT_PROCEDURE_N589A340
 4020  0000000                   .ENDIF
 4021  0000000                   	ENDM 
 4022  0000000                   ;----------------------------------------------------------------
 4023  0000000                   SYSTEM_INIT_PROCEDURE_N589A340 MACRO
 4024  0000000                   	LDA #E3H
 4025  0000000                   	STA	!CFGULK
 4026  0000000                   	LDA #97H
 4027  0000000                   	STA !CFGULK
 4028  0000000                   	LDA #A2H
 4029  0000000                   	STA !CFGULK
 4030  0000000                   
 4031  0000000                   CHECK_CFGULK#:	
 4032  0000000                   	LDA !CFGULK
 4033  0000000                   	BIT #01H
 4034  0000000                   	BEQ CHECK_CFGULK#
 4035  0000000                   
 4036  0000000                   ; shared ram allocation





 4037  0000000                   	LDA #.LOW.(SHM_RAM_BEGIN >> 4)
 4038  0000000                   	STA	!SYSCFG2
 4039  0000000                   	LDA #.LOW.(SHM_RAM_END >> 4)
 4040  0000000                   	STA	!SYSCFG1
 4041  0000000                   
 4042  0000000                   ; HIRC clock allocation
 4043  0000000                   	LDA #.LOW.(HIRC_CLK_6502)
 4044  0000000                   	STA !SYSCFG3
 4045  0000000                   	LDA #(((HIRC_CLK_6502 & 0300H) >> 8) + ((HIRC_CLK_HWE & 0300H) >> 4))
 4046  0000000                   	STA !SYSCFG4
 4047  0000000                   	LDA #.LOW.(HIRC_CLK_HWE)
 4048  0000000                   	STA !SYSCFG5
 4049  0000000                   
 4050  0000000                   ; functional configuration
 4051  0000000                   	STZ !SYSCFG6
 4052  0000000                   
 4053  0000000                   ; BP20-23
 4054  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4055  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4056  0000000                   	LDA #01H
 4057  0000000                   	TSB !SYSCFG6
 4058  0000000                   .ENDIF
 4059  0000000                   .ENDIF
 4060  0000000                   
 4061  0000000                   ; BP24-27
 4062  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C080').OR.(PARTNO='N589C120').OR.(PARTNO='N589C170').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D080').OR.(PARTNO='N589D081').OR.(PARTNO='N589D120').OR.(PARTNO='N589D121').OR.(PARTNO='N589D170').OR.(PARTNO='N589D171').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4063  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
 4064  0000000                   	LDA #02H
 4065  0000000                   	TSB !SYSCFG6
 4066  0000000                   .ENDIF
 4067  0000000                   .ENDIF
 4068  0000000                   
 4069  0000000                   ; BP3
 4070  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4071  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4072  0000000                   	LDA #04H
 4073  0000000                   	TSB !SYSCFG6
 4074  0000000                   .ENDIF
 4075  0000000                   .ENDIF
 4076  0000000                   
 4077  0000000                   ; BP0_PWM
 4078  0000000                   .IF (PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4079  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='SOP8')
 4080  0000000                   	LDA #08H
 4081  0000000                   	TSB !SYSCFG6
 4082  0000000                   .ENDIF
 4083  0000000                   .ENDIF
 4084  0000000                   
 4085  0000000                   ; BP1_PWM
 4086  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340')
 4087  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
 4088  0000000                   	LDA #08H
 4089  0000000                   	TSB !SYSCFG6
 4090  0000000                   .ENDIF
 4091  0000000                   .ENDIF
 4092  0000000                   
 4093  0000000                   ; SPIO





 4094  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4095  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
 4096  0000000                   	LDA #10H
 4097  0000000                   	TSB !SYSCFG6
 4098  0000000                   .ENDIF
 4099  0000000                   .ENDIF
 4100  0000000                   
 4101  0000000                   ; IR-Wakeup & LRC
 4102  0000000                   	LDA #60H
 4103  0000000                   	TSB !SYSCFG6
 4104  0000000                   
 4105  0000000                   ; ADC
 4106  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340')
 4107  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28')
 4108  0000000                   	LDA #80H
 4109  0000000                   	TSB !SYSCFG6
 4110  0000000                   .ENDIF
 4111  0000000                   .ENDIF
 4112  0000000                   
 4113  0000000                   ; FMC
 4114  0000000                   	LDA #SYS_PQ
 4115  0000000                   	STA !SYSCFG7
 4116  0000000                   
 4117  0000000                   ; LDO33
 4118  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340')
 4119  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4120  0000000                   	LDA #01H
 4121  0000000                   	TSB !SYSCFG7
 4122  0000000                   .ENDIF
 4123  0000000                   .ENDIF
 4124  0000000                   
 4125  0000000                   	STZ !CFGULK
 4126  0000000                   
 4127  0000000                   	ENDM
 4128  0000000                   
 4129  0000000                   ;----------------------------------------------------------------
 4130  0000000                   SYSTEM_INIT_PROCEDURE_N589A900 MACRO
 4131  0000000                   	LDA #E3H
 4132  0000000                   	STA	!CFGULK
 4133  0000000                   	LDA #97H
 4134  0000000                   	STA !CFGULK
 4135  0000000                   	LDA #A2H
 4136  0000000                   	STA !CFGULK
 4137  0000000                   
 4138  0000000                   CHECK_CFGULK#:	
 4139  0000000                   	LDA !CFGULK
 4140  0000000                   	BIT #01H
 4141  0000000                   	BEQ CHECK_CFGULK#
 4142  0000000                   
 4143  0000000                   ; shared ram allocation
 4144  0000000                   	LDA #.LOW.(SHM_RAM_BEGIN >> 4)
 4145  0000000                   	STA	!SYSCFG2
 4146  0000000                   	LDA #.LOW.(SHM_RAM_END >> 4)
 4147  0000000                   	STA	!SYSCFG1
 4148  0000000                   
 4149  0000000                   ; HIRC clock allocation
 4150  0000000                   	LDA #.LOW.(HIRC_CLK_6502)





 4151  0000000                   	STA !SYSCFG3
 4152  0000000                   	LDA #(((HIRC_CLK_6502 & 0300H) >> 8) + ((HIRC_CLK_HWE & 0300H) >> 4))
 4153  0000000                   	STA !SYSCFG4
 4154  0000000                   	LDA #.LOW.(HIRC_CLK_HWE)
 4155  0000000                   	STA !SYSCFG5
 4156  0000000                   
 4157  0000000                   ; functional configuration
 4158  0000000                   	STZ !SYSCFG6
 4159  0000000                   
 4160  0000000                   ; BP20-23
 4161  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4162  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
 4163  0000000                   	LDA #01H
 4164  0000000                   	TSB !SYSCFG6
 4165  0000000                   .ENDIF
 4166  0000000                   .ENDIF
 4167  0000000                   
 4168  0000000                   ; BP24-27
 4169  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
 4170  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4171  0000000                   	LDA #02H
 4172  0000000                   	TSB !SYSCFG6
 4173  0000000                   .ENDIF
 4174  0000000                   .ENDIF
 4175  0000000                   
 4176  0000000                   ; BP3
 4177  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
 4178  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4179  0000000                   	LDA #04H
 4180  0000000                   	TSB !SYSCFG6
 4181  0000000                   .ENDIF
 4182  0000000                   .ENDIF
 4183  0000000                   
 4184  0000000                   ; SPIO
 4185  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
 4186  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20')
 4187  0000000                   	LDA #10H
 4188  0000000                   	TSB !SYSCFG6
 4189  0000000                   .ENDIF
 4190  0000000                   .ENDIF
 4191  0000000                   
 4192  0000000                   ; IR-Wakeup & LRC
 4193  0000000                   	LDA #60H
 4194  0000000                   	TSB !SYSCFG6
 4195  0000000                   
 4196  0000000                   ; ADC
 4197  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4198  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
 4199  0000000                   	LDA #80H
 4200  0000000                   	TSB !SYSCFG6
 4201  0000000                   .ENDIF
 4202  0000000                   .ENDIF
 4203  0000000                   
 4204  0000000                   ; FMC
 4205  0000000                   	LDA #SYS_PQ
 4206  0000000                   	STA !SYSCFG8
 4207  0000000                   





 4208  0000000                   ; UART
 4209  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4210  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='SOP14')
 4211  0000000                   	LDA #01H
 4212  0000000                   	TSB !SYSCFG7
 4213  0000000                   .ENDIF
 4214  0000000                   .ENDIF
 4215  0000000                   
 4216  0000000                   ; Serial LED
 4217  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4218  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='SOP8')
 4219  0000000                   	LDA #02H
 4220  0000000                   	TSB !SYSCFG7
 4221  0000000                   .ENDIF
 4222  0000000                   .ENDIF
 4223  0000000                   
 4224  0000000                   	STZ !CFGULK
 4225  0000000                   
 4226  0000000                   	ENDM
 4227  0000000                   ;==============================================================================
 4228  0000000                   ; IO INIT Routine Macros
 4229  0000000                   ;==============================================================================	
 4230  0000000                   IO_INIT_PROCEDURE MACRO
 4231  0000000                   ;prevent unopened pin leakage
 4232  0000000                   	LEAKPROOF_SETTING
 4233  0000000                   
 4234  0000000                   	ENDM
 4235  0000000                   ;------------------------------------------------------------------------------	
 4236  0000000                   LEAKPROOF_SETTING MACRO
 4237  0000000                   	JSR LEAKPROOF_SETTING_FUNC
 4238  0000000                   	ENDM
 4239  0000000                   ;==============================================================================
 4240  0000000                   ; Unique-ID
 4241  0000000                   ;==============================================================================	
 4242  0000000                   GET_UNIQUE_ID MACRO RAM
 4243  0000000                   ; The Unique-ID format of these 51 bits are: 
 4244  0000000                   ; -----xxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx
 4245  0000000                   	LDA !IMAGEP00
 4246  0000000                   	STA RAM
 4247  0000000                   	LDA !IMAGEP01
 4248  0000000                   	STA RAM+1
 4249  0000000                   	LDA !IMAGEP02
 4250  0000000                   	STA RAM+2
 4251  0000000                   	LDA !IMAGEP03
 4252  0000000                   	STA RAM+3
 4253  0000000                   	LDA !IMAGEP10
 4254  0000000                   	STA RAM+4
 4255  0000000                   	LDA !IMAGEP11
 4256  0000000                   	STA RAM+5
 4257  0000000                   	LDA !IMAGEP12
 4258  0000000                   	STA RAM+6
 4259  0000000                   
 4260  0000000                   	ENDM
 4261  0000000                   ;------------------------------------------------------------------------------
 4262  0000000                   ; Checksum
 4263  0000000                   ;------------------------------------------------------------------------------
 4264  0000000                   ADD_CHECKSUM MACRO





 4265  0000000                   	JSR ADD_CHECKSUM_LIB
 4266  0000000                   	ENDM
 4267  0000000                   
 4268  0000000                   ;----------------------------------------------------------------
 4269  0000000                   GET_CHECKSUM MACRO
 4270  0000000                   	PSF_RESPONSE_LIMIT
 4271  0000000                   	PHP
 4272  0000000                   	SEI
 4273  0000000                   	ADD_CHECKSUM
 4274  0000000                   	PLP
 4275  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4276  0000000                   	ENDM
 4277  0000000                   ;----------------------------------------------------------------
 4278  0000000                   CHECKSUM MACRO
 4279  0000000                   	PSF_RESPONSE_LIMIT
 4280  0000000                   	PHP
 4281  0000000                   	SEI
 4282  0000000                   
 4283  0000000                   	ADD_CHECKSUM
 4284  0000000                   
 4285  0000000                   	LDA	#.high.CHECKSUM_33TH
 4286  0000000                   	STA	<CHECKSUM_ADDR1
 4287  0000000                   	LDA #.low.CHECKSUM_33TH
 4288  0000000                   	STA <CHECKSUM_ADDR
 4289  0000000                   
 4290  0000000                   	CLC
 4291  0000000                   	LDA (<CHECKSUM_ADDR)
 4292  0000000                   	ADC <CHECK_RESULT
 4293  0000000                   	STA <CHECK_RESULT
 4294  0000000                   	INC CHECKSUM_ADDR
 4295  0000000                   	LDA (<CHECKSUM_ADDR)
 4296  0000000                   	ADC <CHECK_RESULT+1
 4297  0000000                   	STA <CHECK_RESULT+1
 4298  0000000                   
 4299  0000000                   	PLP
 4300  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4301  0000000                   	ENDM
 4302  0000000                   ;----------------------------------------------------------------
 4303  0000000                   CHECKSUM_VERIFY MACRO JUMP_ADDR
 4304  0000000                   	CHECKSUM
 4305  0000000                   	LDA <CHECK_RESULT
 4306  0000000                   	BEQ 3
 4307  0000000                   	JMP JUMP_ADDR
 4308  0000000                   	LDA <CHECK_RESULT+1
 4309  0000000                   	BEQ 3
 4310  0000000                   	JMP JUMP_ADDR
 4311  0000000                   	ENDM
 4312  0000000                   
 4313  0000000                   ;------------------------------------------------------------------------------
 4314  0000000                   ; Output 1KHz Tone
 4315  0000000                   ;
 4316  0000000                   ; REG.Affected: ACC, X, Y
 4317  0000000                   ;------------------------------------------------------------------------------
 4318  0000000                   BP00	EQU 00H	
 4319  0000000                   BP01	EQU 01H	
 4320  0000000                   BP02	EQU 02H	
 4321  0000000                   BP03	EQU 03H	





 4322  0000000                   BP04	EQU 04H	
 4323  0000000                   BP05	EQU 05H	
 4324  0000000                   BP06	EQU 06H	
 4325  0000000                   BP07	EQU 07H	
 4326  0000000                   BP10	EQU 10H	
 4327  0000000                   BP11	EQU 11H	
 4328  0000000                   BP12	EQU 12H	
 4329  0000000                   BP13	EQU 13H	
 4330  0000000                   BP14	EQU 14H	
 4331  0000000                   BP15	EQU 15H	
 4332  0000000                   BP16	EQU 16H	
 4333  0000000                   BP17	EQU 17H	
 4334  0000000                   BP20	EQU 20H	
 4335  0000000                   BP21	EQU 21H	
 4336  0000000                   BP22	EQU 22H	
 4337  0000000                   BP23	EQU 23H	
 4338  0000000                   BP24	EQU 24H	
 4339  0000000                   BP25	EQU 25H	
 4340  0000000                   BP26	EQU 26H	
 4341  0000000                   BP27	EQU 27H	
 4342  0000000                   BP30	EQU 30H	
 4343  0000000                   BP31	EQU 31H	
 4344  0000000                   BP32	EQU 32H	
 4345  0000000                   BP33	EQU 33H	
 4346  0000000                   BP34	EQU 34H	
 4347  0000000                   BP35	EQU 35H	
 4348  0000000                   BP36	EQU 36H	
 4349  0000000                   BP37	EQU 37H
 4350  0000000                   ;----------------------------------------------------------------
 4351  0000000                   OUT1KHZTONE MACRO PORT, TIMES
 4352  0000000                   	PSF_RESPONSE_LIMIT
 4353  0000000                   	PHP
 4354  0000000                   	SEI
 4355  0000000                   	LDA <0
 4356  0000000                   	PHA
 4357  0000000                   	LDA <1
 4358  0000000                   	PHA
 4359  0000000                   	LDA <2
 4360  0000000                   	PHA
 4361  0000000                   	BRA xGET_PORTPIN#
 4362  0000000                   
 4363  0000000                   .ifndef xpintable_
 4364  0000000                   xPINOUT_TABLE:
 4365  0000000                   xPINMODE_TABLE01:
 4366  0000000                   	DB 01H
 4367  0000000                   	DB 02H
 4368  0000000                   	DB 04H
 4369  0000000                   	DB 08H
 4370  0000000                   	DB 10H
 4371  0000000                   	DB 20H
 4372  0000000                   	DB 40H
 4373  0000000                   	DB 80H
 4374  0000000                   xpintable_:
 4375  0000000                   .endif
 4376  0000000                   
 4377  0000000                   xGET_PORTPIN#:
 4378  0000000                   	LDA #0





 4379  0000000                   	STA !TMAC
 4380  0000000                   	STA <0
 4381  0000000                   	STA <1
 4382  0000000                   	STA <2
 4383  0000000                   	LDA #PORT
 4384  0000000                   	LSR A
 4385  0000000                   	LSR A
 4386  0000000                   	LSR A
 4387  0000000                   	LSR A
 4388  0000000                   	TAX
 4389  0000000                   	LDA !BP0D,X
 4390  0000000                   	PHA
 4391  0000000                   	LDA !BP0M,X
 4392  0000000                   	PHA
 4393  0000000                   
 4394  0000000                   	LDA #PORT
 4395  0000000                   	AND #07H
 4396  0000000                   	TAY 
 4397  0000000                   
 4398  0000000                   	LDA xPINMODE_TABLE01,Y
 4399  0000000                       PHA
 4400  0000000                   	EOR #FFH
 4401  0000000                   	AND !BP0D,X 
 4402  0000000                   	STA !BP0D,X				; output
 4403  0000000                   	PLA
 4404  0000000                   	ORA !BP0M,X 
 4405  0000000                   	STA !BP0M,X	
 4406  0000000                   
 4407  0000000                   	LDA #TONE_2KHZ_TMV
 4408  0000000                   	STA !TMAV
 4409  0000000                   	LDA #02H
 4410  0000000                   	STA !EVF0
 4411  0000000                   	LDA #TONE_2KHZ_TMC
 4412  0000000                   	ORA #01H
 4413  0000000                   	STA !TMAC
 4414  0000000                   
 4415  0000000                   xPOLL_TIMEOUT#:
 4416  0000000                   	LDA !EVF0
 4417  0000000                   	AND #INT0_TMA				; TimerA
 4418  0000000                   	BEQ xPOLL_TIMEOUT# 
 4419  0000000                   	STA !EVF0
 4420  0000000                   
 4421  0000000                   	LDA xPINOUT_TABLE,Y
 4422  0000000                   	EOR !BP0,X
 4423  0000000                   	STA !BP0,X
 4424  0000000                   	INC <2
 4425  0000000                   	LDA <2
 4426  0000000                   	AND #01H
 4427  0000000                   	BNE xPOLL_TIMEOUT#
 4428  0000000                   	.IFDEF WDTIMER
 4429  0000000                   		LDA #WDTC_CLR
 4430  0000000                   		STA !WDTC
 4431  0000000                   	.ENDIF  
 4432  0000000                   
 4433  0000000                   	LDA #.low.TIMES
 4434  0000000                   	BNE xCHECK_TIMEOUT#
 4435  0000000                   	LDA #.high.TIMES





 4436  0000000                   	BEQ xPOLL_TIMEOUT#
 4437  0000000                   
 4438  0000000                   xCHECK_TIMEOUT#:    
 4439  0000000                   	CLC
 4440  0000000                       LDA <0
 4441  0000000                   	ADC #1
 4442  0000000                   	STA <0
 4443  0000000                   	LDA <1
 4444  0000000                   	ADC #0
 4445  0000000                   	STA <1
 4446  0000000                       CMP #.high.TIMES  
 4447  0000000                   	BNE xPOLL_TIMEOUT#
 4448  0000000                   	LDA <0
 4449  0000000                   	CMP #.low.TIMES  
 4450  0000000                   	BNE xPOLL_TIMEOUT#
 4451  0000000                   	STZ !TMAC
 4452  0000000                   
 4453  0000000                   	PLA
 4454  0000000                   	STA !BP0M,X
 4455  0000000                   	PLA
 4456  0000000                   	STA !BP0D,X
 4457  0000000                   xDONOT_DO#:
 4458  0000000                   	PLA 
 4459  0000000                   	STA <2
 4460  0000000                   	PLA 
 4461  0000000                   	STA <1
 4462  0000000                   	PLA 
 4463  0000000                   	STA <0
 4464  0000000                   	PLP
 4465  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4466  0000000                   	ENDM
 4467  0000000                   
 4468  0000000                   
 4469  0000000                   
 4470  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\MACRO_INSTRUCTION.INI.APP"
 4471  0000000                   	SYMBOLS
 4472  0000000                   	LINKLIST
 4473  0000000                   	DEBUG  	ASM
 4474  0000000                   	LINEAR	ON
 4475  0000000                   	LONGA	OFF
 4476  0000000                   	LONGI	OFF
 4477  0000000                   
 4478  0000000                   .EXTERN PWM_PIN_TABLE
 4479  0000000                   ;==============================================================================
 4480  0000000                   ; Macros
 4481  0000000                   ;==============================================================================
 4482  0000000                   ;------------------------------------------------------------------------------
 4483  0000000                   SET_STACK_POINTER_TO	MACRO	STACK_START_VALUE
 4484  0000000                   	LDX	#STACK_START_VALUE
 4485  0000000                   	TXS
 4486  0000000                   	ENDM
 4487  0000000                   ;------------------------------------------------------------------------------
 4488  0000000                   CLEAR_RAM_FROM_00H_TO	MACRO	CLEAR_RAM_END
 4489  0000000                   ;
 4490  0000000                   ; clear RAM
 4491  0000000                   ;
 4492  0000000                   	LDA	#.LOW.CLEAR_RAM_END





 4493  0000000                   	STA	<RR0			;keep the end address low byte
 4494  0000000                   	LDA	#.HIGH.CLEAR_RAM_END	
 4495  0000000                   	STA	<RR1			;keep the end address high byte
 4496  0000000                   CLEAR_LOOP#:
 4497  0000000                   	LDA	#00
 4498  0000000                   	STA	(<RR0)
 4499  0000000                   	LDA	<RR1
 4500  0000000                   	BNE	DEC_ADDR#
 4501  0000000                   	LDA	<RR0
 4502  0000000                   	CMP	#02H
 4503  0000000                   	BEQ	END_CLEAR#
 4504  0000000                   DEC_ADDR#:
 4505  0000000                   	SEC
 4506  0000000                   	LDA	<RR0
 4507  0000000                   	SBC	#01H
 4508  0000000                   	STA	<RR0
 4509  0000000                   	LDA	<RR1
 4510  0000000                   	SBC	#00H
 4511  0000000                   	STA	<RR1
 4512  0000000                   NOT_IN_01#:
 4513  0000000                   	JMP	CLEAR_LOOP#
 4514  0000000                   END_CLEAR#:
 4515  0000000                   	LDA	#00h
 4516  0000000                   	STA	<RR0	;Clear address 00H and 01H
 4517  0000000                   	STA	<RR1
 4518  0000000                   	ENDM
 4519  0000000                   ;----------------------------------------------------------------
 4520  0000000                   CLEAR_RAM MACRO
 4521  0000000                   
 4522  0000000                   	 .IFDEF IS_C_PROJECT
 4523  0000000                       LDA <_sp0
 4524  0000000                       STA <RAM_BEGIN+2
 4525  0000000                       LDA <_sp1
 4526  0000000                       STA <RAM_BEGIN+3
 4527  0000000                       .ENDIF
 4528  0000000                   
 4529  0000000                   	.IF (TOUCH_WAKEUP_EN .EQ. 1)
 4530  0000000                       LDA <TOUCH_STATUS_FLAG
 4531  0000000                       STA <RAM_BEGIN+4
 4532  0000000                       LDA <WK_CS_SCAN_INDEX
 4533  0000000                       STA <RAM_BEGIN+5
 4534  0000000                       LDA <CS_KEY_STATUS
 4535  0000000                       STA <RAM_BEGIN+6
 4536  0000000                           LDA  <CS_OLD_KEY_STATUS
 4537  0000000                       STA <RAM_BEGIN+7
 4538  0000000                       	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 8)
 4539  0000000                       LDA <CS_KEY_STATUS+1
 4540  0000000                       STA <RAM_BEGIN+8
 4541  0000000                           LDA  <CS_OLD_KEY_STATUS+1
 4542  0000000                       STA <RAM_BEGIN+9    
 4543  0000000                       	.ENDIF
 4544  0000000                       .ENDIF
 4545  0000000                   
 4546  0000000                   ; start cleaning ram
 4547  0000000                   	CLEAR_RAM_RANGE RAM_BEGIN+10,SHM_RAM_END
 4548  0000000                   
 4549  0000000                   	.IFDEF IS_C_PROJECT





 4550  0000000                       LDA <RAM_BEGIN+2
 4551  0000000                       STA <_sp0
 4552  0000000                       LDA <RAM_BEGIN+3
 4553  0000000                       STA <_sp1
 4554  0000000                       .ENDIF
 4555  0000000                   
 4556  0000000                   	.IF (TOUCH_WAKEUP_EN .EQ. 1)
 4557  0000000                       LDA <RAM_BEGIN+4
 4558  0000000                       STA <TOUCH_STATUS_FLAG
 4559  0000000                       LDA <RAM_BEGIN+5
 4560  0000000                       STA <WK_CS_SCAN_INDEX
 4561  0000000                       LDA <RAM_BEGIN+6
 4562  0000000                       STA <CS_KEY_STATUS
 4563  0000000                       LDA <RAM_BEGIN+7
 4564  0000000                       STA <CS_OLD_KEY_STATUS
 4565  0000000                       	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 8)
 4566  0000000                       LDA <RAM_BEGIN+8
 4567  0000000                       STA <CS_KEY_STATUS+1
 4568  0000000                       LDA <RAM_BEGIN+9
 4569  0000000                       STA <CS_OLD_KEY_STATUS+1
 4570  0000000                           .ENDIF
 4571  0000000                       .ENDIF
 4572  0000000                   
 4573  0000000                       .IFDEF IS_C_PROJECT
 4574  0000000                       .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 4575  0000000                       BRA CLEAR_RAM_END#
 4576  0000000                       .ENDIF
 4577  0000000                       .ENDIF
 4578  0000000                   
 4579  0000000                   	STZ <RAM_BEGIN
 4580  0000000                       STZ <RAM_BEGIN+1
 4581  0000000                       STZ <RAM_BEGIN+2
 4582  0000000                       STZ <RAM_BEGIN+3
 4583  0000000                       STZ <RAM_BEGIN+4
 4584  0000000                       STZ <RAM_BEGIN+5
 4585  0000000                       STZ <RAM_BEGIN+6
 4586  0000000                       STZ <RAM_BEGIN+7
 4587  0000000                       STZ <RAM_BEGIN+8
 4588  0000000                       STZ <RAM_BEGIN+9
 4589  0000000                   
 4590  0000000                   CLEAR_RAM_END#:
 4591  0000000                   	ENDM
 4592  0000000                   ;----------------------------------------------------------------
 4593  0000000                   CLEAR_RAM_RANGE MACRO CLEAR_RAM_BEGIN,CLEAR_RAM_END
 4594  0000000                   	CLEAR_RAM_RANGE_API 00, CLEAR_RAM_BEGIN, CLEAR_RAM_END
 4595  0000000                   	ENDM
 4596  0000000                   ;----------------------------------------------------------------
 4597  0000000                   CLEAR_RAM_RANGE_API MACRO BUF_ADDR, CLEAR_RAM_BEGIN, CLEAR_RAM_END
 4598  0000000                   ;=== CLEAR RAMS ===
 4599  0000000                   	LDA	#.LOW.CLEAR_RAM_END
 4600  0000000                   	STA	BUF_ADDR			;keep the end address low byte
 4601  0000000                   	LDA	#.HIGH.CLEAR_RAM_END
 4602  0000000                   	STA	BUF_ADDR+1			;keep the end address high byte
 4603  0000000                   CLEAR_LOOP#:
 4604  0000000                   	LDA	#00h
 4605  0000000                   	STA	(BUF_ADDR)
 4606  0000000                   	LDA	BUF_ADDR+1





 4607  0000000                   	CMP #(.HIGH.CLEAR_RAM_BEGIN)
 4608  0000000                   	BNE DEC_ADDR#
 4609  0000000                   	LDA	BUF_ADDR
 4610  0000000                   	CMP	#(.LOW.CLEAR_RAM_BEGIN)
 4611  0000000                   	BEQ	END_CLEAR#
 4612  0000000                   DEC_ADDR#:
 4613  0000000                   	SEC
 4614  0000000                   	LDA	BUF_ADDR
 4615  0000000                   	SBC	#01H
 4616  0000000                   	STA	BUF_ADDR
 4617  0000000                   	LDA	BUF_ADDR+1
 4618  0000000                   	SBC	#00H
 4619  0000000                   	STA	BUF_ADDR+1
 4620  0000000                   
 4621  0000000                   NOT_IN_01#:
 4622  0000000                   	JMP	CLEAR_LOOP#
 4623  0000000                   END_CLEAR#:
 4624  0000000                   	LDA	#00h
 4625  0000000                   	STA	BUF_ADDR	;Clear buffer address
 4626  0000000                   	STA	BUF_ADDR+1
 4627  0000000                   	ENDM
 4628  0000000                   ;------------------------------------------------------------------------------
 4629  0000000                   ; Sleep
 4630  0000000                   ;------------------------------------------------------------------------------
 4631  0000000                   STOP MACRO
 4632  0000000                   	LEAKPROOF_SETTING
 4633  0000000                   
 4634  0000000                   .IF((WITH_MS .EQ. 1).OR.(WITH_SP .EQ. 0).OR.(WITH_EVO .EQ. 0))
 4635  0000000                   	SYNTHESISER_OFF
 4636  0000000                   .ENDIF
 4637  0000000                   
 4638  0000000                   	LDA #STOP_FLAG
 4639  0000000                   	STA 0F8EH
 4640  0000000                   	ENDM
 4641  0000000                   ;------------------------------------------------------------------------------
 4642  0000000                   ; Control UltraIO
 4643  0000000                   ;------------------------------------------------------------------------------
 4644  0000000                   	.IF (WITH_SP .EQ. 1)
 4645  0000000                   EN_ULTRAIO_EVENT MACRO CHANNEL
 4646  0000000                   	PHP
 4647  0000000                   	SEI
 4648  0000000                   	LDY #CHANNEL-1
 4649  0000000                   	EXTERN DIS_UIO_EVENT_FLAG
 4650  0000000                   	LDA !DIS_UIO_EVENT_FLAG,Y
 4651  0000000                   	TRB <COMMON_FLAG2 
 4652  0000000                   
 4653  0000000                   	PSF_RESPONSE_LIMIT
 4654  0000000                   	LDA #SPEECH_TYPE
 4655  0000000                   	EXTERN UIO_START
 4656  0000000                   	JSR UIO_START
 4657  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4658  0000000                   	PLP
 4659  0000000                   	ENDM
 4660  0000000                   ;------------------------------------------------------------------------------		
 4661  0000000                   DIS_ULTRAIO_EVENT MACRO CHANNEL
 4662  0000000                   	PHP
 4663  0000000                   	SEI





 4664  0000000                   	LDY #CHANNEL-1
 4665  0000000                   	EXTERN DIS_UIO_EVENT_FLAG
 4666  0000000                   	LDA !DIS_UIO_EVENT_FLAG,Y
 4667  0000000                   	TSB <COMMON_FLAG2
 4668  0000000                   
 4669  0000000                   	PSF_RESPONSE_LIMIT
 4670  0000000                   	LDA #SPEECH_TYPE
 4671  0000000                   	EXTERN UIO_STOP
 4672  0000000                   	JSR UIO_STOP
 4673  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4674  0000000                   	PLP
 4675  0000000                   	ENDM
 4676  0000000                   	.ENDIF	
 4677  0000000                   ;------------------------------------------------------------------------------
 4678  0000000                   ; Control PWM Output
 4679  0000000                   ;------------------------------------------------------------------------------
 4680  0000000                   EN_BPX_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY
 4681  0000000                   	LDA #BPX_VALUE
 4682  0000000                   	BIT !(BP0D+PORT_INDEX)
 4683  0000000                   	BNE BPX_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4684  0000000                   
 4685  0000000                   	BIT !(BP0+PORT_INDEX)
 4686  0000000                   	BNE BPX_PWM_INIT_NEXT#
 4687  0000000                   
 4688  0000000                   	LDA #DUTY
 4689  0000000                   	EOR #FFH
 4690  0000000                   	BRA BPX_PWM_INIT_CONST#
 4691  0000000                   
 4692  0000000                   BPX_PWM_INIT#:	
 4693  0000000                   	TSB !(BP0+PORT_INDEX)
 4694  0000000                   BPX_PWM_INIT_NEXT#:
 4695  0000000                   	LDA #DUTY		;duty,low level
 4696  0000000                   BPX_PWM_INIT_CONST#:
 4697  0000000                   	STA !(PWV00+PWV_INDEX)
 4698  0000000                   	LDA !PWMC
 4699  0000000                   	AND #PWMC_AND
 4700  0000000                   	ORA #DIVISION
 4701  0000000                   	STA !PWMC
 4702  0000000                   	LDA #BPX_VALUE
 4703  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4704  0000000                   
 4705  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4706  0000000                   	TRB !(BP0D+PORT_INDEX)
 4707  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4708  0000000                   
 4709  0000000                   EN_BPX_PWM_END#:
 4710  0000000                   	ENDM
 4711  0000000                   ;------------------------------------------------------------------------------	
 4712  0000000                   EN_BPX_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY_RAM
 4713  0000000                   	LDA #BPX_VALUE
 4714  0000000                   	BIT !(BP0D+PORT_INDEX)
 4715  0000000                   	BNE BPX_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4716  0000000                   
 4717  0000000                   	BIT !(BP0+PORT_INDEX)
 4718  0000000                   	BNE BPX_PWM_RAM_INIT_NEXT#
 4719  0000000                   
 4720  0000000                   	LDA !DUTY_RAM





 4721  0000000                   	EOR #FFH
 4722  0000000                   	BRA BPX_PWM_RAM_INIT_CONST#
 4723  0000000                   
 4724  0000000                   BPX_PWM_RAM_INIT#:	
 4725  0000000                   	TSB !(BP0+PORT_INDEX)
 4726  0000000                   BPX_PWM_RAM_INIT_NEXT#:
 4727  0000000                   	LDA !DUTY_RAM		;duty,low level
 4728  0000000                   BPX_PWM_RAM_INIT_CONST#:
 4729  0000000                   	STA !(PWV00+PWV_INDEX)
 4730  0000000                   	LDA !PWMC
 4731  0000000                   	AND #PWMC_AND
 4732  0000000                   	ORA #DIVISION
 4733  0000000                   	STA !PWMC
 4734  0000000                   	LDA #BPX_VALUE
 4735  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4736  0000000                   
 4737  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4738  0000000                   	TRB !(BP0D+PORT_INDEX)
 4739  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4740  0000000                   
 4741  0000000                   EN_BPX_PWM_RAM_END#:
 4742  0000000                   	ENDM
 4743  0000000                   ;------------------------------------------------------------------------------	
 4744  0000000                   EN_BPX_H_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY
 4745  0000000                   	LDA #BPX_VALUE
 4746  0000000                   	BIT !(BP0D+PORT_INDEX)
 4747  0000000                   	BNE BPX_H_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4748  0000000                   
 4749  0000000                   	BIT !(BP0+PORT_INDEX)
 4750  0000000                   	BNE BPX_H_PWM_INIT_NEXT#
 4751  0000000                   
 4752  0000000                   	LDA #DUTY
 4753  0000000                   	BRA BPX_H_PWM_INIT_CONST#
 4754  0000000                   
 4755  0000000                   BPX_H_PWM_INIT#:	
 4756  0000000                   	TSB !(BP0+PORT_INDEX)
 4757  0000000                   BPX_H_PWM_INIT_NEXT#:
 4758  0000000                   	LDA #DUTY		;duty,low level
 4759  0000000                   	EOR #FFH
 4760  0000000                   BPX_H_PWM_INIT_CONST#:
 4761  0000000                   	STA !(PWV00+PWV_INDEX)
 4762  0000000                   	LDA !PWMC
 4763  0000000                   	AND #PWMC_AND
 4764  0000000                   	ORA #DIVISION
 4765  0000000                   	STA !PWMC
 4766  0000000                   	LDA #BPX_VALUE
 4767  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4768  0000000                   
 4769  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4770  0000000                   	TRB !(BP0D+PORT_INDEX)
 4771  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4772  0000000                   
 4773  0000000                   EN_BPX_H_PWM_END#:
 4774  0000000                   	ENDM
 4775  0000000                   ;------------------------------------------------------------------------------	
 4776  0000000                   EN_BPX_H_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY_RAM
 4777  0000000                   	LDA #BPX_VALUE





 4778  0000000                   	BIT !(BP0D+PORT_INDEX)
 4779  0000000                   	BNE BPX_H_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4780  0000000                   
 4781  0000000                   	BIT !(BP0+PORT_INDEX)
 4782  0000000                   	BNE BPX_H_PWM_RAM_INIT_NEXT#
 4783  0000000                   
 4784  0000000                   	LDA !DUTY_RAM
 4785  0000000                   	BRA BPX_H_PWM_RAM_INIT_CONST#
 4786  0000000                   
 4787  0000000                   BPX_H_PWM_RAM_INIT#:	
 4788  0000000                   	TSB !(BP0+PORT_INDEX)
 4789  0000000                   BPX_H_PWM_RAM_INIT_NEXT#:
 4790  0000000                   	LDA !DUTY_RAM		;duty,low level
 4791  0000000                   	EOR #FFH
 4792  0000000                   BPX_H_PWM_RAM_INIT_CONST#:
 4793  0000000                   	STA !(PWV00+PWV_INDEX)
 4794  0000000                   	LDA !PWMC
 4795  0000000                   	AND #PWMC_AND
 4796  0000000                   	ORA #DIVISION
 4797  0000000                   	STA !PWMC
 4798  0000000                   	LDA #BPX_VALUE
 4799  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4800  0000000                   
 4801  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4802  0000000                   	TRB !(BP0D+PORT_INDEX)
 4803  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4804  0000000                   
 4805  0000000                   EN_BPX_H_PWM_RAM_END#:
 4806  0000000                   	ENDM
 4807  0000000                   ;------------------------------------------------------------------------------		
 4808  0000000                   EN_BPXX_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY
 4809  0000000                   	LDA #BPX_VALUE
 4810  0000000                   	BIT !(BP0D+PORT_INDEX)
 4811  0000000                   	BNE BPXX_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4812  0000000                   
 4813  0000000                   	BIT !(BP0+PORT_INDEX)
 4814  0000000                   	BNE BPXX_PWM_INIT_NEXT#
 4815  0000000                   
 4816  0000000                   	LDA #DUTY
 4817  0000000                   	EOR #FFH
 4818  0000000                   	BRA BPXX_PWM_INIT_CONST#
 4819  0000000                   
 4820  0000000                   BPXX_PWM_INIT#:	
 4821  0000000                   	TSB !(BP0+PORT_INDEX)
 4822  0000000                   BPXX_PWM_INIT_NEXT#:
 4823  0000000                   	LDA #DUTY		;duty,low level
 4824  0000000                   BPXX_PWM_INIT_CONST#:
 4825  0000000                   	STA !(PWV0+PWV_INDEX)
 4826  0000000                   ;LDA !PWMC
 4827  0000000                   ;AND #PWMC_AND
 4828  0000000                   ;ORA #DIVISION
 4829  0000000                   	LDA #DIVISION
 4830  0000000                   	STA !PWMC
 4831  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4832  0000000                   	AND #GROUP_MASK
 4833  0000000                   	ORA #GROUP_SEL
 4834  0000000                   	STA !(PWMOA+PWMO_INDEX)





 4835  0000000                   	LDA #PWMEN_BIT
 4836  0000000                   	TSB !PWMEN
 4837  0000000                   
 4838  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4839  0000000                   	TRB !(BP0D+PORT_INDEX)
 4840  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4841  0000000                   
 4842  0000000                   EN_BPXX_PWM_END#:
 4843  0000000                   	ENDM
 4844  0000000                   ;------------------------------------------------------------------------------		
 4845  0000000                   EN_BPXX_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY_RAM
 4846  0000000                   	LDA #BPX_VALUE
 4847  0000000                   	BIT !(BP0D+PORT_INDEX)
 4848  0000000                   	BNE BPXX_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4849  0000000                   
 4850  0000000                   	BIT !(BP0+PORT_INDEX)
 4851  0000000                   	BNE BPXX_PWM_RAM_INIT_NEXT#
 4852  0000000                   
 4853  0000000                   	LDA !DUTY_RAM
 4854  0000000                   	EOR #FFH
 4855  0000000                   	BRA BPXX_PWM_RAM_INIT_CONST#
 4856  0000000                   
 4857  0000000                   BPXX_PWM_RAM_INIT#:	
 4858  0000000                   	TSB !(BP0+PORT_INDEX)
 4859  0000000                   BPXX_PWM_RAM_INIT_NEXT#:
 4860  0000000                   	LDA !DUTY_RAM		;duty,low level
 4861  0000000                   BPXX_PWM_RAM_INIT_CONST#:
 4862  0000000                   	STA !(PWV0+PWV_INDEX)
 4863  0000000                   ;LDA !PWMC
 4864  0000000                   ;AND #PWMC_AND
 4865  0000000                   ;ORA #DIVISION
 4866  0000000                   	LDA #DIVISION
 4867  0000000                   	STA !PWMC
 4868  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4869  0000000                   	AND #GROUP_MASK
 4870  0000000                   	ORA #GROUP_SEL
 4871  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4872  0000000                   	LDA #PWMEN_BIT
 4873  0000000                   	TSB !PWMEN
 4874  0000000                   
 4875  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4876  0000000                   	TRB !(BP0D+PORT_INDEX)
 4877  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4878  0000000                   
 4879  0000000                   EN_BPXX_PWM_RAM_END#:
 4880  0000000                   	ENDM
 4881  0000000                   ;------------------------------------------------------------------------------		
 4882  0000000                   EN_BPXX_H_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY
 4883  0000000                   	LDA #BPX_VALUE
 4884  0000000                   	BIT !(BP0D+PORT_INDEX)
 4885  0000000                   	BNE BPXX_H_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4886  0000000                   
 4887  0000000                   	BIT !(BP0+PORT_INDEX)
 4888  0000000                   	BNE BPXX_H_PWM_INIT_NEXT#
 4889  0000000                   
 4890  0000000                   	LDA #DUTY
 4891  0000000                   	BRA BPXX_H_PWM_INIT_CONST#





 4892  0000000                   
 4893  0000000                   BPXX_H_PWM_INIT#:	
 4894  0000000                   	TSB !(BP0+PORT_INDEX)
 4895  0000000                   BPXX_H_PWM_INIT_NEXT#:
 4896  0000000                   	LDA #DUTY		;duty,low level
 4897  0000000                   	EOR #FFH
 4898  0000000                   BPXX_H_PWM_INIT_CONST#:
 4899  0000000                   	STA !(PWV0+PWV_INDEX)
 4900  0000000                   	LDA #DIVISION
 4901  0000000                   	STA !PWMC
 4902  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4903  0000000                   	AND #GROUP_MASK
 4904  0000000                   	ORA #GROUP_SEL
 4905  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4906  0000000                   	LDA #PWMEN_BIT
 4907  0000000                   	TSB !PWMEN
 4908  0000000                   
 4909  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4910  0000000                   	TRB !(BP0D+PORT_INDEX)
 4911  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4912  0000000                   
 4913  0000000                   EN_BPXX_H_PWM_END#:
 4914  0000000                   	ENDM
 4915  0000000                   ;------------------------------------------------------------------------------		
 4916  0000000                   EN_BPXX_H_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY_RAM
 4917  0000000                   	LDA #BPX_VALUE
 4918  0000000                   	BIT !(BP0D+PORT_INDEX)
 4919  0000000                   	BNE BPXX_H_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4920  0000000                   
 4921  0000000                   	BIT !(BP0+PORT_INDEX)
 4922  0000000                   	BNE BPXX_H_PWM_RAM_INIT_NEXT#
 4923  0000000                   
 4924  0000000                   	LDA !DUTY_RAM
 4925  0000000                   	BRA BPXX_H_PWM_RAM_INIT_CONST#
 4926  0000000                   
 4927  0000000                   BPXX_H_PWM_RAM_INIT#:	
 4928  0000000                   	TSB !(BP0+PORT_INDEX)
 4929  0000000                   BPXX_H_PWM_RAM_INIT_NEXT#:
 4930  0000000                   	LDA !DUTY_RAM		;duty,low level
 4931  0000000                   	EOR #FFH
 4932  0000000                   BPXX_H_PWM_RAM_INIT_CONST#:
 4933  0000000                   	STA !(PWV0+PWV_INDEX)
 4934  0000000                   	LDA #DIVISION
 4935  0000000                   	STA !PWMC
 4936  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4937  0000000                   	AND #GROUP_MASK
 4938  0000000                   	ORA #GROUP_SEL
 4939  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4940  0000000                   	LDA #PWMEN_BIT
 4941  0000000                   	TSB !PWMEN
 4942  0000000                   
 4943  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4944  0000000                   	TRB !(BP0D+PORT_INDEX)
 4945  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4946  0000000                   
 4947  0000000                   EN_BPXX_H_PWM_RAM_END#:
 4948  0000000                   	ENDM





 4949  0000000                   ;------------------------------------------------------------------------------
 4950  0000000                   EN_BP00_PWM MACRO DUTY, DIVISION
 4951  0000000                   .IF	(MAINBODY='A960')
 4952  0000000                   	EN_BPXX_PWM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY
 4953  0000000                   .ENDIF
 4954  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4955  0000000                   	EN_BPX_PWM BP00_PWM,0,0,70H,DIVISION-1,DUTY
 4956  0000000                   .ENDIF
 4957  0000000                   	ENDM
 4958  0000000                   ;----------------------------------------------------------------
 4959  0000000                   EN_BP00_H_PWM MACRO DUTY, DIVISION
 4960  0000000                   .IF	(MAINBODY='A960')
 4961  0000000                   	EN_BPXX_H_PWM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY
 4962  0000000                   .ENDIF
 4963  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4964  0000000                   	EN_BPX_H_PWM BP00_PWM,0,0,70H,DIVISION-1,DUTY
 4965  0000000                   .ENDIF
 4966  0000000                   	ENDM
 4967  0000000                   ;----------------------------------------------------------------
 4968  0000000                   EN_BP00_PWM_RAM MACRO DUTY_RAM, DIVISION
 4969  0000000                   .IF	(MAINBODY='A960')
 4970  0000000                   	EN_BPXX_PWM_RAM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY_RAM
 4971  0000000                   .ENDIF
 4972  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4973  0000000                   	EN_BPX_PWM_RAM BP00_PWM,0,0,70H,DIVISION-1,DUTY_RAM
 4974  0000000                   .ENDIF
 4975  0000000                   	ENDM
 4976  0000000                   ;----------------------------------------------------------------
 4977  0000000                   EN_BP00_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 4978  0000000                   .IF	(MAINBODY='A960')
 4979  0000000                   	EN_BPXX_H_PWM_RAM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY_RAM
 4980  0000000                   .ENDIF
 4981  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4982  0000000                   	EN_BPX_H_PWM_RAM BP00_PWM,0,0,70H,DIVISION-1,DUTY_RAM
 4983  0000000                   .ENDIF
 4984  0000000                   	ENDM
 4985  0000000                   ;----------------------------------------------------------------	
 4986  0000000                   DIS_BP00_PWM MACRO
 4987  0000000                   .IF	(MAINBODY='A960')
 4988  0000000                   	LDA #01H
 4989  0000000                   	TRB !PWMEN
 4990  0000000                   .ENDIF
 4991  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4992  0000000                   	LDA #BP00_PWM		
 4993  0000000                   	TRB !PWM0EN
 4994  0000000                   .ENDIF
 4995  0000000                   	ENDM	
 4996  0000000                   ;------------------------------------------------------------------------------
 4997  0000000                   EN_BP01_PWM MACRO DUTY, DIVISION
 4998  0000000                   .IF	(MAINBODY='A960')
 4999  0000000                   	EN_BPXX_PWM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY
 5000  0000000                   .ENDIF
 5001  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5002  0000000                   	EN_BPX_PWM BP01_PWM,0,1,70H,DIVISION-1,DUTY
 5003  0000000                   .ENDIF
 5004  0000000                   	ENDM
 5005  0000000                   ;----------------------------------------------------------------		





 5006  0000000                   EN_BP01_H_PWM MACRO DUTY, DIVISION
 5007  0000000                   .IF	(MAINBODY='A960')
 5008  0000000                   	EN_BPXX_H_PWM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY
 5009  0000000                   .ENDIF
 5010  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5011  0000000                   	EN_BPX_H_PWM BP01_PWM,0,1,70H,DIVISION-1,DUTY
 5012  0000000                   .ENDIF
 5013  0000000                   	ENDM
 5014  0000000                   ;----------------------------------------------------------------
 5015  0000000                   EN_BP01_PWM_RAM MACRO DUTY_RAM, DIVISION
 5016  0000000                   .IF	(MAINBODY='A960')
 5017  0000000                   	EN_BPXX_PWM_RAM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY_RAM
 5018  0000000                   .ENDIF
 5019  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5020  0000000                   	EN_BPX_PWM_RAM BP01_PWM,0,1,70H,DIVISION-1,DUTY_RAM
 5021  0000000                   .ENDIF
 5022  0000000                   	ENDM
 5023  0000000                   ;----------------------------------------------------------------
 5024  0000000                   EN_BP01_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5025  0000000                   .IF	(MAINBODY='A960')
 5026  0000000                   	EN_BPXX_H_PWM_RAM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY_RAM
 5027  0000000                   .ENDIF
 5028  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5029  0000000                   	EN_BPX_H_PWM_RAM BP01_PWM,0,1,70H,DIVISION-1,DUTY_RAM
 5030  0000000                   .ENDIF
 5031  0000000                   	ENDM
 5032  0000000                   ;----------------------------------------------------------------
 5033  0000000                   DIS_BP01_PWM MACRO
 5034  0000000                   .IF	(MAINBODY='A960')
 5035  0000000                   	LDA #02H
 5036  0000000                   	TRB !PWMEN
 5037  0000000                   .ENDIF
 5038  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5039  0000000                   	LDA #BP01_PWM		
 5040  0000000                   	TRB !PWM0EN
 5041  0000000                   .ENDIF
 5042  0000000                   	ENDM
 5043  0000000                   ;------------------------------------------------------------------------------
 5044  0000000                   EN_BP02_PWM MACRO DUTY, DIVISION
 5045  0000000                   .IF	(MAINBODY='A960')
 5046  0000000                   	EN_BPXX_PWM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY
 5047  0000000                   .ENDIF
 5048  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5049  0000000                   	EN_BPX_PWM BP02_PWM,0,2,70H,DIVISION-1,DUTY
 5050  0000000                   .ENDIF
 5051  0000000                   	ENDM
 5052  0000000                   ;------------------------------------------------------------------------------
 5053  0000000                   EN_BP02_H_PWM MACRO DUTY, DIVISION
 5054  0000000                   .IF	(MAINBODY='A960')
 5055  0000000                   	EN_BPXX_H_PWM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY
 5056  0000000                   .ENDIF
 5057  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5058  0000000                   	EN_BPX_H_PWM BP02_PWM,0,2,70H,DIVISION-1,DUTY
 5059  0000000                   .ENDIF
 5060  0000000                   	ENDM
 5061  0000000                   ;------------------------------------------------------------------------------
 5062  0000000                   EN_BP02_PWM_RAM MACRO DUTY_RAM, DIVISION





 5063  0000000                   .IF	(MAINBODY='A960')
 5064  0000000                   	EN_BPXX_PWM_RAM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY_RAM
 5065  0000000                   .ENDIF
 5066  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5067  0000000                   	EN_BPX_PWM_RAM BP02_PWM,0,2,70H,DIVISION-1,DUTY_RAM
 5068  0000000                   .ENDIF
 5069  0000000                   	ENDM
 5070  0000000                   ;------------------------------------------------------------------------------	
 5071  0000000                   EN_BP02_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5072  0000000                   .IF	(MAINBODY='A960')
 5073  0000000                   	EN_BPXX_H_PWM_RAM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY_RAM
 5074  0000000                   .ENDIF
 5075  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5076  0000000                   	EN_BPX_H_PWM_RAM BP02_PWM,0,2,70H,DIVISION-1,DUTY_RAM
 5077  0000000                   .ENDIF
 5078  0000000                   	ENDM
 5079  0000000                   ;------------------------------------------------------------------------------	
 5080  0000000                   DIS_BP02_PWM MACRO
 5081  0000000                   .IF	(MAINBODY='A960')
 5082  0000000                   	LDA #04H
 5083  0000000                   	TRB !PWMEN
 5084  0000000                   .ENDIF
 5085  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5086  0000000                   	LDA #BP02_PWM	
 5087  0000000                   	TRB !PWM0EN
 5088  0000000                   .ENDIF
 5089  0000000                   	ENDM
 5090  0000000                   ;------------------------------------------------------------------------------
 5091  0000000                   EN_BP03_PWM MACRO DUTY, DIVISION
 5092  0000000                   .IF	(MAINBODY='A960')
 5093  0000000                   	EN_BPXX_PWM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY
 5094  0000000                   .ENDIF
 5095  0000000                   	ENDM
 5096  0000000                   ;------------------------------------------------------------------------------
 5097  0000000                   EN_BP03_H_PWM MACRO DUTY, DIVISION
 5098  0000000                   .IF	(MAINBODY='A960')
 5099  0000000                   	EN_BPXX_H_PWM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY
 5100  0000000                   .ENDIF
 5101  0000000                   	ENDM
 5102  0000000                   ;------------------------------------------------------------------------------
 5103  0000000                   EN_BP03_PWM_RAM MACRO DUTY_RAM, DIVISION
 5104  0000000                   .IF	(MAINBODY='A960')
 5105  0000000                   	EN_BPXX_PWM_RAM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY_RAM
 5106  0000000                   .ENDIF
 5107  0000000                   	ENDM
 5108  0000000                   ;-------------------------------------------------------------	
 5109  0000000                   EN_BP03_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5110  0000000                   .IF	(MAINBODY='A960')
 5111  0000000                   	EN_BPXX_H_PWM_RAM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY_RAM
 5112  0000000                   .ENDIF
 5113  0000000                   	ENDM
 5114  0000000                   ;------------------------------------------------------------------------------	
 5115  0000000                   DIS_BP03_PWM MACRO
 5116  0000000                   .IF	(MAINBODY='A960')
 5117  0000000                   	LDA #08H
 5118  0000000                   	TRB !PWMEN
 5119  0000000                   .ENDIF





 5120  0000000                   	ENDM
 5121  0000000                   ;------------------------------------------------------------------------------
 5122  0000000                   EN_BP04_PWM MACRO DUTY, DIVISION
 5123  0000000                   .IF	(MAINBODY='A960')
 5124  0000000                   	EN_BPXX_PWM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY
 5125  0000000                   .ENDIF
 5126  0000000                   	ENDM
 5127  0000000                   ;------------------------------------------------------------------------------
 5128  0000000                   EN_BP04_H_PWM MACRO DUTY, DIVISION
 5129  0000000                   .IF	(MAINBODY='A960')
 5130  0000000                   	EN_BPXX_H_PWM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY
 5131  0000000                   .ENDIF
 5132  0000000                   	ENDM
 5133  0000000                   ;------------------------------------------------------------------------------
 5134  0000000                   EN_BP04_PWM_RAM MACRO DUTY_RAM, DIVISION
 5135  0000000                   .IF	(MAINBODY='A960')
 5136  0000000                   	EN_BPXX_PWM_RAM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY_RAM
 5137  0000000                   .ENDIF
 5138  0000000                   	ENDM
 5139  0000000                   ;------------------------------------------------------------------------------	
 5140  0000000                   EN_BP04_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5141  0000000                   .IF	(MAINBODY='A960')
 5142  0000000                   	EN_BPXX_H_PWM_RAM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY_RAM
 5143  0000000                   .ENDIF
 5144  0000000                   	ENDM
 5145  0000000                   ;------------------------------------------------------------------------------	
 5146  0000000                   DIS_BP04_PWM MACRO
 5147  0000000                   .IF	(MAINBODY='A960')
 5148  0000000                   	LDA #10H
 5149  0000000                   	TRB !PWMEN
 5150  0000000                   .ENDIF
 5151  0000000                   	ENDM
 5152  0000000                   ;------------------------------------------------------------------------------	
 5153  0000000                   EN_BP05_PWM MACRO DUTY, DIVISION
 5154  0000000                   .IF	(MAINBODY='A960')
 5155  0000000                   	EN_BPXX_PWM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY
 5156  0000000                   .ENDIF
 5157  0000000                   	ENDM
 5158  0000000                   ;------------------------------------------------------------------------------
 5159  0000000                   EN_BP05_H_PWM MACRO DUTY, DIVISION
 5160  0000000                   .IF	(MAINBODY='A960')
 5161  0000000                   	EN_BPXX_H_PWM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY
 5162  0000000                   .ENDIF
 5163  0000000                   	ENDM
 5164  0000000                   ;------------------------------------------------------------------------------
 5165  0000000                   EN_BP05_PWM_RAM MACRO DUTY_RAM, DIVISION
 5166  0000000                   .IF	(MAINBODY='A960')
 5167  0000000                   	EN_BPXX_PWM_RAM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY_RAM
 5168  0000000                   .ENDIF
 5169  0000000                   	ENDM
 5170  0000000                   ;-------------------------------------------------------------	
 5171  0000000                   EN_BP05_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5172  0000000                   .IF	(MAINBODY='A960')
 5173  0000000                   	EN_BPXX_H_PWM_RAM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY_RAM
 5174  0000000                   .ENDIF
 5175  0000000                   	ENDM
 5176  0000000                   ;------------------------------------------------------------------------------	





 5177  0000000                   DIS_BP05_PWM MACRO
 5178  0000000                   .IF	(MAINBODY='A960')
 5179  0000000                   	LDA #20H
 5180  0000000                   	TRB !PWMEN
 5181  0000000                   .ENDIF
 5182  0000000                   	ENDM
 5183  0000000                   ;------------------------------------------------------------------------------	
 5184  0000000                   EN_BP06_PWM MACRO DUTY, DIVISION
 5185  0000000                   .IF	(MAINBODY='A960')
 5186  0000000                   	EN_BPXX_PWM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY
 5187  0000000                   .ENDIF
 5188  0000000                   	ENDM
 5189  0000000                   ;------------------------------------------------------------------------------
 5190  0000000                   EN_BP06_H_PWM MACRO DUTY, DIVISION
 5191  0000000                   .IF	(MAINBODY='A960')
 5192  0000000                   	EN_BPXX_H_PWM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY
 5193  0000000                   .ENDIF
 5194  0000000                   	ENDM
 5195  0000000                   ;------------------------------------------------------------------------------
 5196  0000000                   EN_BP06_PWM_RAM MACRO DUTY_RAM, DIVISION
 5197  0000000                   .IF	(MAINBODY='A960')
 5198  0000000                   	EN_BPXX_PWM_RAM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY_RAM
 5199  0000000                   .ENDIF
 5200  0000000                   	ENDM
 5201  0000000                   ;-------------------------------------------------------------	
 5202  0000000                   EN_BP06_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5203  0000000                   .IF	(MAINBODY='A960')
 5204  0000000                   	EN_BPXX_H_PWM_RAM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY_RAM
 5205  0000000                   .ENDIF
 5206  0000000                   	ENDM
 5207  0000000                   ;------------------------------------------------------------------------------	
 5208  0000000                   DIS_BP06_PWM MACRO
 5209  0000000                   .IF	(MAINBODY='A960')
 5210  0000000                   	LDA #01H
 5211  0000000                   	TRB !PWMEN
 5212  0000000                   .ENDIF
 5213  0000000                   	ENDM
 5214  0000000                   ;------------------------------------------------------------------------------	
 5215  0000000                   EN_BP07_PWM MACRO DUTY, DIVISION
 5216  0000000                   .IF	(MAINBODY='A960')
 5217  0000000                   	EN_BPXX_PWM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY
 5218  0000000                   .ENDIF
 5219  0000000                   	ENDM
 5220  0000000                   ;------------------------------------------------------------------------------
 5221  0000000                   EN_BP07_H_PWM MACRO DUTY, DIVISION
 5222  0000000                   .IF	(MAINBODY='A960')
 5223  0000000                   	EN_BPXX_H_PWM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY
 5224  0000000                   .ENDIF
 5225  0000000                   	ENDM
 5226  0000000                   ;------------------------------------------------------------------------------
 5227  0000000                   EN_BP07_PWM_RAM MACRO DUTY_RAM, DIVISION
 5228  0000000                   .IF	(MAINBODY='A960')
 5229  0000000                   	EN_BPXX_PWM_RAM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY_RAM
 5230  0000000                   .ENDIF
 5231  0000000                   	ENDM
 5232  0000000                   ;-------------------------------------------------------------	
 5233  0000000                   EN_BP07_H_PWM_RAM MACRO DUTY_RAM, DIVISION





 5234  0000000                   .IF	(MAINBODY='A960')
 5235  0000000                   	EN_BPXX_H_PWM_RAM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY_RAM
 5236  0000000                   .ENDIF
 5237  0000000                   	ENDM
 5238  0000000                   ;------------------------------------------------------------------------------	
 5239  0000000                   DIS_BP07_PWM MACRO
 5240  0000000                   .IF	(MAINBODY='A960')
 5241  0000000                   	LDA #02H
 5242  0000000                   	TRB !PWMEN
 5243  0000000                   .ENDIF
 5244  0000000                   	ENDM
 5245  0000000                   ;------------------------------------------------------------------------------
 5246  0000000                   EN_BP10_PWM MACRO DUTY, DIVISION
 5247  0000000                   .IF	(MAINBODY='A960')
 5248  0000000                   	EN_BPXX_PWM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY
 5249  0000000                   .ENDIF
 5250  0000000                   .IF	(MAINBODY='A340')
 5251  0000000                   	EN_BPX_PWM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY
 5252  0000000                   .ENDIF
 5253  0000000                   	ENDM
 5254  0000000                   ;------------------------------------------------------------------------------
 5255  0000000                   EN_BP10_H_PWM MACRO DUTY, DIVISION
 5256  0000000                   .IF	(MAINBODY='A960')
 5257  0000000                   	EN_BPXX_H_PWM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY
 5258  0000000                   .ENDIF
 5259  0000000                   .IF	(MAINBODY='A340')
 5260  0000000                   	EN_BPX_H_PWM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY
 5261  0000000                   .ENDIF
 5262  0000000                   	ENDM
 5263  0000000                   ;------------------------------------------------------------------------------
 5264  0000000                   EN_BP10_PWM_RAM MACRO DUTY_RAM, DIVISION
 5265  0000000                   .IF	(MAINBODY='A960')
 5266  0000000                   	EN_BPXX_PWM_RAM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY_RAM
 5267  0000000                   .ENDIF
 5268  0000000                   .IF	(MAINBODY='A340')
 5269  0000000                   	EN_BPX_PWM_RAM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY_RAM
 5270  0000000                   .ENDIF
 5271  0000000                   	ENDM
 5272  0000000                   ;------------------------------------------------------------------------------	
 5273  0000000                   EN_BP10_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5274  0000000                   .IF	(MAINBODY='A960')
 5275  0000000                   	EN_BPXX_H_PWM_RAM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY_RAM
 5276  0000000                   .ENDIF
 5277  0000000                   .IF	(MAINBODY='A340')
 5278  0000000                   	EN_BPX_H_PWM_RAM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY_RAM
 5279  0000000                   .ENDIF
 5280  0000000                   	ENDM
 5281  0000000                   ;------------------------------------------------------------------------------	
 5282  0000000                   DIS_BP10_PWM MACRO
 5283  0000000                   .IF	(MAINBODY='A960')
 5284  0000000                   	LDA #04H
 5285  0000000                   	TRB !PWMEN
 5286  0000000                   .ENDIF
 5287  0000000                   .IF	(MAINBODY='A340')
 5288  0000000                   	LDA #BP10_PWM		
 5289  0000000                   	TRB !PWM1EN
 5290  0000000                   .ENDIF





 5291  0000000                   	ENDM
 5292  0000000                   ;------------------------------------------------------------------------------
 5293  0000000                   EN_BP11_PWM MACRO DUTY, DIVISION
 5294  0000000                   .IF	(MAINBODY='A960')
 5295  0000000                   	EN_BPXX_PWM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY
 5296  0000000                   .ENDIF
 5297  0000000                   .IF	(MAINBODY='A340')
 5298  0000000                   	EN_BPX_PWM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY
 5299  0000000                   .ENDIF
 5300  0000000                   	ENDM
 5301  0000000                   ;------------------------------------------------------------------------------
 5302  0000000                   EN_BP11_H_PWM MACRO DUTY, DIVISION
 5303  0000000                   .IF	(MAINBODY='A960')
 5304  0000000                   	EN_BPXX_H_PWM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY
 5305  0000000                   .ENDIF
 5306  0000000                   .IF	(MAINBODY='A340')
 5307  0000000                   	EN_BPX_H_PWM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY
 5308  0000000                   .ENDIF
 5309  0000000                   	ENDM
 5310  0000000                   ;------------------------------------------------------------------------------
 5311  0000000                   EN_BP11_PWM_RAM MACRO DUTY_RAM, DIVISION
 5312  0000000                   .IF	(MAINBODY='A960')
 5313  0000000                   	EN_BPXX_PWM_RAM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY_RAM
 5314  0000000                   .ENDIF
 5315  0000000                   .IF	(MAINBODY='A340')
 5316  0000000                   	EN_BPX_PWM_RAM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY_RAM
 5317  0000000                   .ENDIF
 5318  0000000                   	ENDM
 5319  0000000                   ;------------------------------------------------------------------------------	
 5320  0000000                   EN_BP11_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5321  0000000                   .IF	(MAINBODY='A960')
 5322  0000000                   	EN_BPXX_H_PWM_RAM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY_RAM
 5323  0000000                   .ENDIF
 5324  0000000                   .IF	(MAINBODY='A340')
 5325  0000000                   	EN_BPX_H_PWM_RAM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY_RAM
 5326  0000000                   .ENDIF
 5327  0000000                   	ENDM
 5328  0000000                   ;------------------------------------------------------------------------------	
 5329  0000000                   DIS_BP11_PWM MACRO
 5330  0000000                   .IF	(MAINBODY='A960')
 5331  0000000                   	LDA #08H
 5332  0000000                   	TRB !PWMEN
 5333  0000000                   .ENDIF
 5334  0000000                   .IF	(MAINBODY='A340')
 5335  0000000                   	LDA #BP11_PWM		
 5336  0000000                   	TRB !PWM1EN
 5337  0000000                   .ENDIF
 5338  0000000                   	ENDM
 5339  0000000                   ;------------------------------------------------------------------------------	
 5340  0000000                   EN_BP12_PWM MACRO DUTY, DIVISION
 5341  0000000                   .IF	(MAINBODY='A960')
 5342  0000000                   	EN_BPXX_PWM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY
 5343  0000000                   .ENDIF
 5344  0000000                   .IF	(MAINBODY='A340')
 5345  0000000                   	EN_BPX_PWM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY
 5346  0000000                   .ENDIF
 5347  0000000                   	ENDM





 5348  0000000                   ;------------------------------------------------------------------------------
 5349  0000000                   EN_BP12_H_PWM MACRO DUTY, DIVISION
 5350  0000000                   .IF	(MAINBODY='A960')
 5351  0000000                   	EN_BPXX_H_PWM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY
 5352  0000000                   .ENDIF
 5353  0000000                   .IF	(MAINBODY='A340')
 5354  0000000                   	EN_BPX_H_PWM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY
 5355  0000000                   .ENDIF
 5356  0000000                   	ENDM
 5357  0000000                   ;------------------------------------------------------------------------------
 5358  0000000                   EN_BP12_PWM_RAM MACRO DUTY_RAM, DIVISION
 5359  0000000                   .IF	(MAINBODY='A960')
 5360  0000000                   	EN_BPXX_PWM_RAM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY_RAM
 5361  0000000                   .ENDIF
 5362  0000000                   .IF	(MAINBODY='A340')
 5363  0000000                   	EN_BPX_PWM_RAM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY_RAM
 5364  0000000                   .ENDIF
 5365  0000000                   	ENDM
 5366  0000000                   ;------------------------------------------------------------------------------	
 5367  0000000                   EN_BP12_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5368  0000000                   .IF	(MAINBODY='A960')
 5369  0000000                   	EN_BPXX_H_PWM_RAM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY_RAM
 5370  0000000                   .ENDIF
 5371  0000000                   .IF	(MAINBODY='A340')
 5372  0000000                   	EN_BPX_H_PWM_RAM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY_RAM
 5373  0000000                   .ENDIF
 5374  0000000                   	ENDM
 5375  0000000                   ;------------------------------------------------------------------------------	
 5376  0000000                   DIS_BP12_PWM MACRO
 5377  0000000                   .IF	(MAINBODY='A960')
 5378  0000000                   	LDA #10H
 5379  0000000                   	TRB !PWMEN
 5380  0000000                   .ENDIF
 5381  0000000                   .IF	(MAINBODY='A340')
 5382  0000000                   	LDA #BP12_PWM		
 5383  0000000                   	TRB !PWM1EN
 5384  0000000                   .ENDIF
 5385  0000000                   	ENDM
 5386  0000000                   ;------------------------------------------------------------------------------	
 5387  0000000                   EN_BP13_PWM MACRO DUTY, DIVISION
 5388  0000000                   .IF	(MAINBODY='A960')
 5389  0000000                   	EN_BPXX_PWM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY
 5390  0000000                   .ENDIF
 5391  0000000                   	ENDM
 5392  0000000                   ;------------------------------------------------------------------------------
 5393  0000000                   EN_BP13_H_PWM MACRO DUTY, DIVISION
 5394  0000000                   .IF	(MAINBODY='A960')
 5395  0000000                   	EN_BPXX_H_PWM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY
 5396  0000000                   .ENDIF
 5397  0000000                   	ENDM
 5398  0000000                   ;------------------------------------------------------------------------------
 5399  0000000                   EN_BP13_PWM_RAM MACRO DUTY_RAM, DIVISION
 5400  0000000                   .IF	(MAINBODY='A960')
 5401  0000000                   	EN_BPXX_PWM_RAM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY_RAM
 5402  0000000                   .ENDIF
 5403  0000000                   	ENDM
 5404  0000000                   ;-------------------------------------------------------------	





 5405  0000000                   EN_BP13_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5406  0000000                   .IF	(MAINBODY='A960')
 5407  0000000                   	EN_BPXX_H_PWM_RAM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY_RAM
 5408  0000000                   .ENDIF
 5409  0000000                   	ENDM
 5410  0000000                   ;------------------------------------------------------------------------------	
 5411  0000000                   DIS_BP13_PWM MACRO
 5412  0000000                   .IF	(MAINBODY='A960')
 5413  0000000                   	LDA #20H
 5414  0000000                   	TRB !PWMEN
 5415  0000000                   .ENDIF
 5416  0000000                   	ENDM
 5417  0000000                   ;------------------------------------------------------------------------------	
 5418  0000000                   EN_BP32_PWM MACRO DUTY, DIVISION
 5419  0000000                   .IF	(MAINBODY='A960')
 5420  0000000                   	EN_BPXX_PWM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY
 5421  0000000                   .ENDIF
 5422  0000000                   	ENDM
 5423  0000000                   ;------------------------------------------------------------------------------
 5424  0000000                   EN_BP32_H_PWM MACRO DUTY, DIVISION
 5425  0000000                   .IF	(MAINBODY='A960')
 5426  0000000                   	EN_BPXX_H_PWM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY
 5427  0000000                   .ENDIF
 5428  0000000                   	ENDM
 5429  0000000                   ;------------------------------------------------------------------------------
 5430  0000000                   EN_BP32_PWM_RAM MACRO DUTY_RAM, DIVISION
 5431  0000000                   .IF	(MAINBODY='A960')
 5432  0000000                   	EN_BPXX_PWM_RAM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY_RAM
 5433  0000000                   .ENDIF
 5434  0000000                   	ENDM
 5435  0000000                   ;-------------------------------------------------------------	
 5436  0000000                   EN_BP32_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5437  0000000                   .IF	(MAINBODY='A960')
 5438  0000000                   	EN_BPXX_H_PWM_RAM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY_RAM
 5439  0000000                   .ENDIF
 5440  0000000                   	ENDM
 5441  0000000                   ;------------------------------------------------------------------------------	
 5442  0000000                   DIS_BP32_PWM MACRO
 5443  0000000                   .IF	(MAINBODY='A960')
 5444  0000000                   	LDA #01H
 5445  0000000                   	TRB !PWMEN
 5446  0000000                   .ENDIF
 5447  0000000                   	ENDM
 5448  0000000                   ;------------------------------------------------------------------------------	
 5449  0000000                   EN_BP33_PWM MACRO DUTY, DIVISION
 5450  0000000                   .IF	(MAINBODY='A960')
 5451  0000000                   	EN_BPXX_PWM BP33_PWM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY
 5452  0000000                   .ENDIF
 5453  0000000                   	ENDM
 5454  0000000                   ;------------------------------------------------------------------------------
 5455  0000000                   EN_BP33_H_PWM MACRO DUTY, DIVISION
 5456  0000000                   .IF	(MAINBODY='A960')
 5457  0000000                   	EN_BPXX_H_PWM BP33_PWM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY
 5458  0000000                   .ENDIF
 5459  0000000                   	ENDM
 5460  0000000                   ;------------------------------------------------------------------------------
 5461  0000000                   EN_BP33_PWM_RAM MACRO DUTY_RAM, DIVISION





 5462  0000000                   .IF	(MAINBODY='A960')
 5463  0000000                   	EN_BPXX_PWM_RAM BP33_PWM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY_RAM
 5464  0000000                   .ENDIF
 5465  0000000                   	ENDM
 5466  0000000                   ;-------------------------------------------------------------	
 5467  0000000                   EN_BP33_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5468  0000000                   .IF	(MAINBODY='A960')
 5469  0000000                   	EN_BPXX_H_PWM_RAM BP33_PWM_RAM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY_RAM
 5470  0000000                   .ENDIF
 5471  0000000                   	ENDM
 5472  0000000                   ;------------------------------------------------------------------------------	
 5473  0000000                   DIS_BP33_PWM MACRO
 5474  0000000                   .IF	(MAINBODY='A960')
 5475  0000000                   	LDA #02H
 5476  0000000                   	TRB !PWMEN
 5477  0000000                   .ENDIF
 5478  0000000                   	ENDM
 5479  0000000                   ;------------------------------------------------------------------------------	
 5480  0000000                   EN_BP34_PWM MACRO DUTY, DIVISION
 5481  0000000                   .IF	(MAINBODY='A960')
 5482  0000000                   	EN_BPXX_PWM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY
 5483  0000000                   .ENDIF
 5484  0000000                   	ENDM
 5485  0000000                   ;------------------------------------------------------------------------------
 5486  0000000                   EN_BP34_H_PWM MACRO DUTY, DIVISION
 5487  0000000                   .IF	(MAINBODY='A960')
 5488  0000000                   	EN_BPXX_H_PWM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY
 5489  0000000                   .ENDIF
 5490  0000000                   	ENDM
 5491  0000000                   ;------------------------------------------------------------------------------
 5492  0000000                   EN_BP34_PWM_RAM MACRO DUTY_RAM, DIVISION
 5493  0000000                   .IF	(MAINBODY='A960')
 5494  0000000                   	EN_BPXX_PWM_RAM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY_RAM
 5495  0000000                   .ENDIF
 5496  0000000                   	ENDM
 5497  0000000                   ;-------------------------------------------------------------	
 5498  0000000                   EN_BP34_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5499  0000000                   .IF	(MAINBODY='A960')
 5500  0000000                   	EN_BPXX_H_PWM_RAM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY_RAM
 5501  0000000                   .ENDIF
 5502  0000000                   	ENDM
 5503  0000000                   ;------------------------------------------------------------------------------	
 5504  0000000                   DIS_BP34_PWM MACRO
 5505  0000000                   .IF	(MAINBODY='A960')
 5506  0000000                   	LDA #04H
 5507  0000000                   	TRB !PWMEN
 5508  0000000                   .ENDIF
 5509  0000000                   	ENDM
 5510  0000000                   ;------------------------------------------------------------------------------	
 5511  0000000                   EN_BP35_PWM MACRO DUTY, DIVISION
 5512  0000000                   .IF	(MAINBODY='A960')
 5513  0000000                   	EN_BPXX_PWM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY
 5514  0000000                   .ENDIF
 5515  0000000                   	ENDM
 5516  0000000                   ;------------------------------------------------------------------------------
 5517  0000000                   EN_BP35_H_PWM MACRO DUTY, DIVISION
 5518  0000000                   .IF	(MAINBODY='A960')





 5519  0000000                   	EN_BPXX_H_PWM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY
 5520  0000000                   .ENDIF
 5521  0000000                   	ENDM
 5522  0000000                   ;------------------------------------------------------------------------------
 5523  0000000                   EN_BP35_PWM_RAM MACRO DUTY_RAM, DIVISION
 5524  0000000                   .IF	(MAINBODY='A960')
 5525  0000000                   	EN_BPXX_PWM_RAM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY_RAM
 5526  0000000                   .ENDIF
 5527  0000000                   	ENDM
 5528  0000000                   ;-------------------------------------------------------------	
 5529  0000000                   EN_BP35_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5530  0000000                   .IF	(MAINBODY='A960')
 5531  0000000                   	EN_BPXX_H_PWM_RAM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY_RAM
 5532  0000000                   .ENDIF
 5533  0000000                   	ENDM
 5534  0000000                   ;------------------------------------------------------------------------------	
 5535  0000000                   DIS_BP35_PWM MACRO
 5536  0000000                   .IF	(MAINBODY='A960')
 5537  0000000                   	LDA #08H
 5538  0000000                   	TRB !PWMEN
 5539  0000000                   .ENDIF
 5540  0000000                   	ENDM
 5541  0000000                   ;------------------------------------------------------------------------------	
 5542  0000000                   EN_BP36_PWM MACRO DUTY, DIVISION
 5543  0000000                   .IF	(MAINBODY='A960')
 5544  0000000                   	EN_BPXX_PWM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY
 5545  0000000                   .ENDIF
 5546  0000000                   	ENDM
 5547  0000000                   ;------------------------------------------------------------------------------
 5548  0000000                   EN_BP36_H_PWM MACRO DUTY, DIVISION
 5549  0000000                   .IF	(MAINBODY='A960')
 5550  0000000                   	EN_BPXX_H_PWM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY
 5551  0000000                   .ENDIF
 5552  0000000                   	ENDM
 5553  0000000                   ;------------------------------------------------------------------------------
 5554  0000000                   EN_BP36_PWM_RAM MACRO DUTY_RAM, DIVISION
 5555  0000000                   .IF	(MAINBODY='A960')
 5556  0000000                   	EN_BPXX_PWM_RAM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY_RAM
 5557  0000000                   .ENDIF
 5558  0000000                   	ENDM
 5559  0000000                   ;-------------------------------------------------------------	
 5560  0000000                   EN_BP36_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5561  0000000                   .IF	(MAINBODY='A960')
 5562  0000000                   	EN_BPXX_H_PWM_RAM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY_RAM
 5563  0000000                   .ENDIF
 5564  0000000                   	ENDM
 5565  0000000                   ;------------------------------------------------------------------------------	
 5566  0000000                   DIS_BP36_PWM MACRO
 5567  0000000                   .IF	(MAINBODY='A960')
 5568  0000000                   	LDA #10H
 5569  0000000                   	TRB !PWMEN
 5570  0000000                   .ENDIF
 5571  0000000                   	ENDM
 5572  0000000                   ;------------------------------------------------------------------------------	
 5573  0000000                   EN_BP37_PWM MACRO DUTY, DIVISION
 5574  0000000                   .IF	(MAINBODY='A960')
 5575  0000000                   	EN_BPXX_PWM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY





 5576  0000000                   .ENDIF
 5577  0000000                   	ENDM
 5578  0000000                   ;------------------------------------------------------------------------------
 5579  0000000                   EN_BP37_H_PWM MACRO DUTY, DIVISION
 5580  0000000                   .IF	(MAINBODY='A960')
 5581  0000000                   	EN_BPXX_H_PWM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY
 5582  0000000                   .ENDIF
 5583  0000000                   	ENDM
 5584  0000000                   ;------------------------------------------------------------------------------
 5585  0000000                   EN_BP37_PWM_RAM MACRO DUTY_RAM, DIVISION
 5586  0000000                   .IF	(MAINBODY='A960')
 5587  0000000                   	EN_BPXX_PWM_RAM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY_RAM
 5588  0000000                   .ENDIF
 5589  0000000                   	ENDM
 5590  0000000                   ;-------------------------------------------------------------	
 5591  0000000                   EN_BP37_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5592  0000000                   .IF	(MAINBODY='A960')
 5593  0000000                   	EN_BPXX_H_PWM_RAM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY_RAM
 5594  0000000                   .ENDIF
 5595  0000000                   	ENDM
 5596  0000000                   ;------------------------------------------------------------------------------	
 5597  0000000                   DIS_BP37_PWM MACRO
 5598  0000000                   .IF	(MAINBODY='A960')
 5599  0000000                   	LDA #20H
 5600  0000000                   	TRB !PWMEN
 5601  0000000                   .ENDIF
 5602  0000000                   	ENDM
 5603  0000000                   ;------------------------------------------------------------------------------
 5604  0000000                   ;------------------------------------------------------------------------------
 5605  0000000                   HWE_PWM_PINMAP_RAM MACRO BPXX_RAM
 5606  0000000                   	LDA BPXX_RAM 
 5607  0000000                   	AND #0FH		; Low 4 nibble bits is pin number
 5608  0000000                   	TAY
 5609  0000000                   	LDA PWM_PIN_TABLE, Y
 5610  0000000                   	ENDM
 5611  0000000                   ;------------------------------------------------------------------------------
 5612  0000000                   HWE_PWM_PORTMAP_RAM MACRO BPXX_RAM
 5613  0000000                   	LDA BPXX_RAM 
 5614  0000000                   	AND #F0H		; High 4 nibble bits is port number
 5615  0000000                   	LSR A
 5616  0000000                   	LSR A
 5617  0000000                   	LSR A
 5618  0000000                   	LSR A
 5619  0000000                   	TAX
 5620  0000000                   	ENDM
 5621  0000000                   ;------------------------------------------------------------------------------
 5622  0000000                   HWE_CTRL_PWM_RAM MACRO ENABLE_RAM,BPXX_RAM,DUTY_RAM,DIV_RAM
 5623  0000000                   	PHP 
 5624  0000000                   
 5625  0000000                   	HWE_PWM_PORTMAP_RAM	BPXX_RAM ; "X" register saves port index
 5626  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;"A" register saves pin information (table: 000xxxxb)
 5627  0000000                   
 5628  0000000                   	LDY ENABLE_RAM
 5629  0000000                   	CPY #00H				;for disable
 5630  0000000                   	BEQ DISABLE_PWM#
 5631  0000000                   
 5632  0000000                   	ORA !BP0,X





 5633  0000000                   	STA !BP0,X				;duty,low level
 5634  0000000                   
 5635  0000000                   	LDA BPXX_RAM 
 5636  0000000                   	AND #0FH
 5637  0000000                   	TAY						;Backup pin information by index: 0~7
 5638  0000000                   
 5639  0000000                   	LDA ENABLE_RAM		
 5640  0000000                   	CMP #11H
 5641  0000000                   	BNE BPX_PWM_RAM_INIT_CONST#
 5642  0000000                   	LDA !DUTY_RAM
 5643  0000000                   	EOR #FFH			;duty,high level
 5644  0000000                   	JMP INIT_DUTY#
 5645  0000000                   BPX_PWM_RAM_INIT_CONST#:
 5646  0000000                   	LDA !DUTY_RAM
 5647  0000000                   INIT_DUTY#:
 5648  0000000                   	CPX #00H
 5649  0000000                   	BEQ INIT_PWV0X#
 5650  0000000                   	STA !PWV10,Y	; save duty count
 5651  0000000                   
 5652  0000000                   	LDA #70H
 5653  0000000                   	TRB !PWMC		;PWM Clock Source Selection
 5654  0000000                   ;keep low 3 nibble bits is for BP00~BP05
 5655  0000000                   	LDA DIV_RAM
 5656  0000000                   	DEC A
 5657  0000000                   	ASL A
 5658  0000000                   	ASL A
 5659  0000000                   	ASL A
 5660  0000000                   	ASL A
 5661  0000000                   	ORA !PWMC		
 5662  0000000                   	JMP INIT_NEXT#
 5663  0000000                   
 5664  0000000                   INIT_PWV0X#:
 5665  0000000                   	STA !PWV00,Y	; save duty count
 5666  0000000                   	LDA !PWMC		;PWM Clock Source Selection
 5667  0000000                   	AND #70H		;keep high 3 nibble bits is for BP10~BP12
 5668  0000000                   	ORA DIV_RAM
 5669  0000000                   	DEC A
 5670  0000000                   INIT_NEXT#:
 5671  0000000                   	STA !PWMC		;PWM Clock Source Selection
 5672  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;load pin information
 5673  0000000                   	ORA !PWM0EN,X
 5674  0000000                   	STA !PWM0EN,X
 5675  0000000                   
 5676  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;load pin information	
 5677  0000000                   	EOR #FFH
 5678  0000000                   	AND !BP0D,X
 5679  0000000                   	STA !BP0D,X
 5680  0000000                   ;TRB !(BP0D+PORT_INDEX)		;BP0D[]=0 =>BP0[] as output pin
 5681  0000000                   
 5682  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;load pin information
 5683  0000000                   	ORA !BP0M,X
 5684  0000000                   	STA !BP0M,X
 5685  0000000                   ;TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 5686  0000000                   	JMP RETURN#
 5687  0000000                   DISABLE_PWM#:	
 5688  0000000                   	EOR #FFH
 5689  0000000                   	AND !PWM0EN,X





 5690  0000000                   	STA !PWM0EN,X
 5691  0000000                   
 5692  0000000                   RETURN#:	
 5693  0000000                   	PLP
 5694  0000000                   	ENDM
 5695  0000000                   ;------------------------------------------------------------------------------
 5696  0000000                   ; Control UltroIO
 5697  0000000                   ;------------------------------------------------------------------------------
 5698  0000000                   EN_ULTRAIO_PIN MACRO INDEX
 5699  0000000                   	EXTERN UIO_PIN_NUM
 5700  0000000                   	EXTERN UIO_USED_PIN_|INDEX
 5701  0000000                   	LDA #INDEX-1
 5702  0000000                   	CMP #UIO_PIN_NUM
 5703  0000000                   	BCS EN_ULTRAIO_PIN_END#
 5704  0000000                   	LDA #UIO_USED_PIN_|INDEX
 5705  0000000                   	BEQ EN_ULTRAIO_PIN_END#
 5706  0000000                   
 5707  0000000                   	EXTERN UIO_PIN_CH_FLAG_|INDEX
 5708  0000000                   	EXTERN UIO_SET_PIN_ENABLE_VALUE_|INDEX
 5709  0000000                   	LDA #7FH
 5710  0000000                   	AND !UIO_PIN_CH_FLAG_|INDEX
 5711  0000000                   	STA !UIO_PIN_CH_FLAG_|INDEX
 5712  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_SET_PIN_ENABLE_VALUE_|INDEX
 5713  0000000                   
 5714  0000000                   EN_ULTRAIO_PIN_END#:
 5715  0000000                   	ENDM
 5716  0000000                   ;------------------------------------------------------------------------------	
 5717  0000000                   DIS_ULTRAIO_PIN MACRO INDEX
 5718  0000000                   	EXTERN UIO_PIN_NUM
 5719  0000000                   	EXTERN UIO_USED_PIN_|INDEX
 5720  0000000                   	EXTERN UIO_SET_PIN_DISABLE_VALUE_|INDEX
 5721  0000000                   	LDA #INDEX-1	
 5722  0000000                   	CMP #UIO_PIN_NUM
 5723  0000000                   	BCS DIS_ULTRAIO_PIN_END#
 5724  0000000                   	LDA #UIO_USED_PIN_|INDEX
 5725  0000000                   	BEQ DIS_ULTRAIO_PIN_END#
 5726  0000000                   
 5727  0000000                   	EXTERN UIO_PIN_CH_FLAG_|INDEX
 5728  0000000                   	LDA #80H
 5729  0000000                   	ORA !UIO_PIN_CH_FLAG_|INDEX
 5730  0000000                   	STA !UIO_PIN_CH_FLAG_|INDEX
 5731  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_SET_PIN_DISABLE_VALUE_|INDEX
 5732  0000000                   
 5733  0000000                   DIS_ULTRAIO_PIN_END#:
 5734  0000000                   	ENDM
 5735  0000000                   ;------------------------------------------------------------------------------	
 5736  0000000                   EN_ULTRAIO_CURVE MACRO INDEX	
 5737  0000000                   	EN_ULTRAIO_PIN INDEX
 5738  0000000                   	ENDM
 5739  0000000                   ;------------------------------------------------------------------------------		
 5740  0000000                   DIS_ULTRAIO_CURVE MACRO INDEX
 5741  0000000                   	DIS_ULTRAIO_PIN INDEX
 5742  0000000                   	ENDM
 5743  0000000                   ;------------------------------------------------------------------------------	
 5744  0000000                   SET_ULTRAIO_CURVE_PIN MACRO INDEX, PIN_MAPPING
 5745  0000000                   	EXTERN UIO_PIN_NUM
 5746  0000000                   	EXTERN UIO_MULTI_PIN_|INDEX





 5747  0000000                   	EXTERN UIO_PIN_|INDEX
 5748  0000000                   	EXTERN UIO_EN_MULTI_PIN_|INDEX
 5749  0000000                   	EXTERN UIO_SET_DIS_PIN_STOP_VALUE_|INDEX
 5750  0000000                   	LDA #INDEX-1
 5751  0000000                   	CMP #UIO_PIN_NUM
 5752  0000000                   	BCS SET_ULTRAIO_CURVE_PIN_END#
 5753  0000000                   	LDA #UIO_MULTI_PIN_|INDEX
 5754  0000000                   	BEQ SET_ULTRAIO_CURVE_PIN_END#
 5755  0000000                   
 5756  0000000                   	LDA #PIN_MAPPING
 5757  0000000                   	AND #UIO_PIN_|INDEX
 5758  0000000                   	STA !UIO_EN_MULTI_PIN_|INDEX
 5759  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_SET_DIS_PIN_STOP_VALUE_|INDEX
 5760  0000000                   SET_ULTRAIO_CURVE_PIN_END#:
 5761  0000000                   	ENDM
 5762  0000000                   ;------------------------------------------------------------------------------
 5763  0000000                   STOP_KEEP_LEVEL_PIN MACRO INDEX
 5764  0000000                   	EXTERN UIO_PIN_NUM
 5765  0000000                   	EXTERN UIO_USED_PIN_|INDEX
 5766  0000000                   	EXTERN UIO_STOP_KEEP_LEVEL_PIN_|INDEX
 5767  0000000                   	LDA #INDEX-1
 5768  0000000                   	CMP #UIO_PIN_NUM
 5769  0000000                   	BCS STOP_KEEP_LEVEL_PIN_END#
 5770  0000000                   	LDA #UIO_USED_PIN_|INDEX
 5771  0000000                   	BEQ STOP_KEEP_LEVEL_PIN_END#
 5772  0000000                   
 5773  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_STOP_KEEP_LEVEL_PIN_|INDEX
 5774  0000000                   STOP_KEEP_LEVEL_PIN_END#:	
 5775  0000000                   	ENDM
 5776  0000000                   ;------------------------------------------------------------------------------	
 5777  0000000                   STOP_ALL_KEEP_LEVEL_PIN MACRO
 5778  0000000                   	EXTERN UIO_STOP_ALL_KEEP_LEVEL_PIN
 5779  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_STOP_ALL_KEEP_LEVEL_PIN
 5780  0000000                   	ENDM
 5781  0000000                   ;------------------------------------------------------------------------------
 5782  0000000                   HWE_CTRL_UIO_EVENT_RAM MACRO ENABLE_RAM,CHANNEL_RAM
 5783  0000000                   	PHP 
 5784  0000000                   	SEI 
 5785  0000000                   
 5786  0000000                   	LDY CHANNEL_RAM 
 5787  0000000                   	EXTERN DIS_UIO_EVENT_FLAG 
 5788  0000000                   	LDA !DIS_UIO_EVENT_FLAG,Y 
 5789  0000000                   	TRB <COMMON_FLAG2  
 5790  0000000                   
 5791  0000000                       PSF_RESPONSE_LIMIT 
 5792  0000000                       LDA #SPEECH_TYPE 
 5793  0000000                       LDX ENABLE_RAM 
 5794  0000000                       CPX #01H 
 5795  0000000                       BEQ UIOSTART_ROUTINE# 
 5796  0000000                       EXTERN UIO_STOP 
 5797  0000000                       JSR UIO_STOP 
 5798  0000000                       JMP SKIP_UIOSTART# 
 5799  0000000                   
 5800  0000000                   UIOSTART_ROUTINE#:
 5801  0000000                       EXTERN UIO_START
 5802  0000000                   	JSR UIO_START
 5803  0000000                   





 5804  0000000                   SKIP_UIOSTART#: 
 5805  0000000                       PSF_RESPONSE_LIMIT_RELEASE
 5806  0000000                   
 5807  0000000                   	PLP
 5808  0000000                   	ENDM
 5809  0000000                   ;------------------------------------------------------------------------------	
 5810  0000000                   HWE_EN_UIO_PIN_RAM MACRO INDEX_RAM
 5811  0000000                   	EXTERN UIO_PIN_NUM
 5812  0000000                   	EXTERN UIO_USED_PIN_TABLE
 5813  0000000                   
 5814  0000000                   	LDA INDEX_RAM
 5815  0000000                   	DEC A
 5816  0000000                   	CMP #UIO_PIN_NUM
 5817  0000000                   	BCS EN_ULTRAIO_PIN_END#
 5818  0000000                   	TAX 
 5819  0000000                   	LDA !UIO_USED_PIN_TABLE, X
 5820  0000000                   	BEQ EN_ULTRAIO_PIN_END#
 5821  0000000                   .IFNDEF	FW_BAM_TIMER
 5822  0000000                   	EXTERN UIO_PIN_CH_FLAG_ARRAY
 5823  0000000                   	EXTERN UIO_SET_PIN_ENABLE_VALUE_TABLE
 5824  0000000                   	EXTERN UIO_PIN_RAM_OFFSET_TABLE
 5825  0000000                   	LDY !UIO_PIN_RAM_OFFSET_TABLE,X ;Remapping RAM address by offset table
 5826  0000000                   	LDA #7FH
 5827  0000000                   	AND !UIO_PIN_CH_FLAG_ARRAY,Y
 5828  0000000                   	STA !UIO_PIN_CH_FLAG_ARRAY,Y
 5829  0000000                   	TXA
 5830  0000000                   	ASL A
 5831  0000000                   	TAX
 5832  0000000                   	JSR_AII_X UIO_SET_PIN_ENABLE_VALUE_TABLE
 5833  0000000                   .else
 5834  0000000                   
 5835  0000000                   .ENDIF
 5836  0000000                   
 5837  0000000                   EN_ULTRAIO_PIN_END#:
 5838  0000000                   	ENDM
 5839  0000000                   ;------------------------------------------------------------------------------	
 5840  0000000                   HWE_DIS_UIO_PIN_RAM MACRO INDEX_RAM
 5841  0000000                   	EXTERN UIO_PIN_NUM
 5842  0000000                   	EXTERN UIO_USED_PIN_TABLE
 5843  0000000                   	EXTERN UIO_SET_PIN_DISABLE_VALUE_TABLE
 5844  0000000                   
 5845  0000000                   	LDA INDEX_RAM
 5846  0000000                   	DEC A
 5847  0000000                   	CMP #UIO_PIN_NUM
 5848  0000000                   	BCS DIS_ULTRAIO_PIN_END#
 5849  0000000                   	TAX 
 5850  0000000                   	LDA !UIO_USED_PIN_TABLE, X
 5851  0000000                   	BEQ DIS_ULTRAIO_PIN_END#
 5852  0000000                   
 5853  0000000                   	EXTERN UIO_PIN_CH_FLAG_ARRAY
 5854  0000000                   	EXTERN UIO_PIN_RAM_OFFSET_TABLE
 5855  0000000                   	LDY !UIO_PIN_RAM_OFFSET_TABLE,X ;Remapping RAM address by offset table
 5856  0000000                   	LDA #80H
 5857  0000000                   	ORA !UIO_PIN_CH_FLAG_ARRAY,Y
 5858  0000000                   	STA !UIO_PIN_CH_FLAG_ARRAY,Y
 5859  0000000                   	TXA
 5860  0000000                   	ASL A





 5861  0000000                   	TAX
 5862  0000000                   	JSR_AII_X UIO_SET_PIN_DISABLE_VALUE_TABLE
 5863  0000000                   DIS_ULTRAIO_PIN_END#:
 5864  0000000                   	ENDM
 5865  0000000                   ;------------------------------------------------------------------------------	
 5866  0000000                   HWE_CTRL_UIO_PIN_RAM MACRO ENABLE_RAM,PININDEX_RAM
 5867  0000000                   	PHP 
 5868  0000000                   
 5869  0000000                   	LDA ENABLE_RAM
 5870  0000000                   	CMP #01H
 5871  0000000                   	BEQ ENABLE_PINS#
 5872  0000000                   	HWE_DIS_UIO_PIN_RAM PININDEX_RAM
 5873  0000000                   	JMP RETURN#
 5874  0000000                   ENABLE_PINS#:
 5875  0000000                   	HWE_EN_UIO_PIN_RAM PININDEX_RAM
 5876  0000000                   RETURN#:
 5877  0000000                   
 5878  0000000                   	PLP
 5879  0000000                   	ENDM
 5880  0000000                   ;------------------------------------------------------------------------------	
 5881  0000000                   HWE_CTRL_UIO_CURVE_RAM MACRO ENABLE_RAM,CURVEINDEX_RAM
 5882  0000000                   	PHP 
 5883  0000000                   
 5884  0000000                   	LDA ENABLE_RAM
 5885  0000000                   	CMP #01H
 5886  0000000                   	BEQ ENABLE_CURVES#
 5887  0000000                   	HWE_DIS_UIO_PIN_RAM CURVEINDEX_RAM
 5888  0000000                   	JMP RETURN#
 5889  0000000                   ENABLE_CURVES#:
 5890  0000000                   	HWE_EN_UIO_PIN_RAM CURVEINDEX_RAM
 5891  0000000                   RETURN#:
 5892  0000000                   
 5893  0000000                   	PLP
 5894  0000000                   	ENDM
 5895  0000000                   ;------------------------------------------------------------------------------	
 5896  0000000                   HWE_SET_UIO_CURVE_PIN_RAM MACRO INDEX_RAM, PIN_MAPPING_RAM
 5897  0000000                   	PHP 
 5898  0000000                   
 5899  0000000                   	EXTERN UIO_PIN_NUM
 5900  0000000                   	EXTERN UIO_MULTI_PIN_TABLE
 5901  0000000                   	EXTERN UIO_PIN_TABLE
 5902  0000000                   	EXTERN UIO_SET_DIS_PIN_STOP_VALUE_TABLE
 5903  0000000                   
 5904  0000000                   	LDA INDEX_RAM
 5905  0000000                   	DEC A
 5906  0000000                   	CMP #UIO_PIN_NUM
 5907  0000000                   	BCS SET_ULTRAIO_CURVE_PIN_END#
 5908  0000000                   	TAX 
 5909  0000000                   	LDA !UIO_MULTI_PIN_TABLE, X
 5910  0000000                   	BEQ SET_ULTRAIO_CURVE_PIN_END#
 5911  0000000                   
 5912  0000000                   	EXTERN UIO_EN_MULTI_PIN_ARRAY
 5913  0000000                   	EXTERN UIO_PIN_RAM_OFFSET_TABLE
 5914  0000000                   	LDY !UIO_PIN_RAM_OFFSET_TABLE,X ;Remapping RAM address by offset table
 5915  0000000                   	LDA PIN_MAPPING_RAM
 5916  0000000                   	AND !UIO_PIN_TABLE,X
 5917  0000000                   	STA !UIO_EN_MULTI_PIN_ARRAY,Y





 5918  0000000                   	TXA
 5919  0000000                   	ASL A
 5920  0000000                   	TAX
 5921  0000000                   	JSR_AII_X UIO_SET_DIS_PIN_STOP_VALUE_TABLE
 5922  0000000                   SET_ULTRAIO_CURVE_PIN_END#:
 5923  0000000                   
 5924  0000000                   	PLP
 5925  0000000                   	ENDM
 5926  0000000                   ;------------------------------------------------------------------------------
 5927  0000000                   ; Control SLD
 5928  0000000                   ;------------------------------------------------------------------------------
 5929  0000000                   EN_SLD_PIN MACRO
 5930  0000000                   	EXTERN SLD_ENABLE_PIN
 5931  0000000                   	PSF_RESPONSE_LIMIT_JSR SLD_ENABLE_PIN
 5932  0000000                   	ENDM
 5933  0000000                   ;------------------------------------------------------------------------------		
 5934  0000000                   DIS_SLD_PIN MACRO
 5935  0000000                   	EXTERN SLD_DISABLE_PIN
 5936  0000000                   	PSF_RESPONSE_LIMIT_JSR SLD_DISABLE_PIN
 5937  0000000                   	ENDM
 5938  0000000                   ;------------------------------------------------------------------------------
 5939  0000000                   ; Control IR WAKEUP
 5940  0000000                   ;------------------------------------------------------------------------------
 5941  0000000                   IR_WAKEUP_EN	MACRO IRWS_VALUE, IRWD_VALUE, IRWSB_VALUE
 5942  0000000                   ;init
 5943  0000000                   	LDA #80h	
 5944  0000000                   	TSB !BP0D	;set BP07 input floating	
 5945  0000000                   	TRB !BP0M
 5946  0000000                   
 5947  0000000                   	LDA #40h	
 5948  0000000                   	TRB !BP0R	
 5949  0000000                   	TRB !BP0D	;set BP06 output LOW
 5950  0000000                   	TSB !BP0M
 5951  0000000                   
 5952  0000000                   	LDA #08H
 5953  0000000                   	TSB !BP1D	;set BP13 input floating
 5954  0000000                   	TRB !BP1M
 5955  0000000                   
 5956  0000000                   	LDA #IRWS_VALUE
 5957  0000000                   	STA !IRWS
 5958  0000000                   
 5959  0000000                   	LDA #IRWD_VALUE
 5960  0000000                   	STA !IRWD
 5961  0000000                   
 5962  0000000                   	LDA #IRWSB_VALUE
 5963  0000000                   	STA !IRWSB
 5964  0000000                   
 5965  0000000                   	LDA #43H	;enable LRC osc, enable IR-Wakeup detection, IR detect pin BP07 input high
 5966  0000000                   	STA !LRCC
 5967  0000000                   	ENDM
 5968  0000000                   ;----------------------------------------------------------------
 5969  0000000                   IR_WAKEUP_DIS	MACRO
 5970  0000000                   	STZ !LRCC
 5971  0000000                   	ENDM
 5972  0000000                   
 5973  0000000                   ;------------------------------------------------------------------------------
 5974  0000000                   ; N55P device





 5975  0000000                   ;------------------------------------------------------------------------------
 5976  0000000                   .IF (N55P_DEVICE_NUM .GT. 0H)
 5977  0000000                   	EXTERN N55P_X0_INIT_PIN
 5978  0000000                   	EXTERN N55P_X0_ON
 5979  0000000                   	EXTERN N55P_X0_OFF
 5980  0000000                   	EXTERN N55P_X0_MISO
 5981  0000000                   	EXTERN N55P_X0_MOSI
 5982  0000000                   ;------------------------------------------------------------------------------
 5983  0000000                   N55P_INIT MACRO 
 5984  0000000                   	SPI_X0_INIT_PIN
 5985  0000000                   	ENDM
 5986  0000000                   ;----------------------------------------------------------------
 5987  0000000                   N55P_COMMAND_WRITE_CONST MACRO COMMAND,DATA
 5988  0000000                   	SPI_X0_ON
 5989  0000000                   	LDA #COMMAND+80H
 5990  0000000                   	SPI_X0_MOSI
 5991  0000000                   	LDA #DATA
 5992  0000000                   	SPI_X0_MOSI
 5993  0000000                   	SPI_X0_OFF
 5994  0000000                   	ENDM
 5995  0000000                   ;----------------------------------------------------------------
 5996  0000000                   N55P_COMMAND_WRITE_RAM MACRO COMMAND,DATA_ADDR
 5997  0000000                   	SPI_X0_ON
 5998  0000000                   	LDA #COMMAND+80H
 5999  0000000                   	SPI_X0_MOSI
 6000  0000000                   	LDA DATA_ADDR
 6001  0000000                   	SPI_X0_MOSI
 6002  0000000                   	SPI_X0_OFF
 6003  0000000                   	ENDM
 6004  0000000                   ;----------------------------------------------------------------
 6005  0000000                   N55P_COMMAND_READ MACRO COMMAND
 6006  0000000                   	SPI_X0_ON
 6007  0000000                   	LDA #COMMAND&7Fh
 6008  0000000                   	SPI_X0_MOSI
 6009  0000000                   	SPI_X0_MISO
 6010  0000000                   	SPI_X0_OFF
 6011  0000000                   	TYA
 6012  0000000                   	ENDM
 6013  0000000                   ;----------------------------------------------------------------
 6014  0000000                   N55P_COMMAND_READ_RAM MACRO COMMAND,RAM
 6015  0000000                   	SPI_X0_ON
 6016  0000000                   	LDA #COMMAND&7Fh
 6017  0000000                   	SPI_X0_MOSI
 6018  0000000                   	SPI_X0_MISO
 6019  0000000                   	SPI_X0_OFF
 6020  0000000                   	STY RAM
 6021  0000000                   	ENDM	
 6022  0000000                   ;----------------------------------------------------------------
 6023  0000000                   N55P_COMMAND_WRITE_UPDATE MACRO ADDR,BIT_MASK,DATA
 6024  0000000                   	N55P_COMMAND_READ ADDR
 6025  0000000                   
 6026  0000000                   	PHA		
 6027  0000000                   	SPI_X0_ON
 6028  0000000                   	LDA #ADDR+80H
 6029  0000000                   	SPI_X0_MOSI
 6030  0000000                   	PLA
 6031  0000000                   	AND #(FFH^BIT_MASK)





 6032  0000000                   	ORA #DATA
 6033  0000000                   	SPI_X0_MOSI
 6034  0000000                   	SPI_X0_OFF
 6035  0000000                   	ENDM
 6036  0000000                   ;----------------------------------------------------------------
 6037  0000000                   N55P_DEVICE_0 MACRO
 6038  0000000                   	N55P_COMMAND_WRITE_CONST 4Ch, FFh   
 6039  0000000                   	ENDM
 6040  0000000                   ;----------------------------------------------------------------	
 6041  0000000                   N55P_DEVICE_1 MACRO
 6042  0000000                   	N55P_COMMAND_WRITE_CONST 4Dh, FFh
 6043  0000000                   	ENDM
 6044  0000000                   
 6045  0000000                   ;----------------------------------------------------------------
 6046  0000000                   N55P_RESET MACRO
 6047  0000000                   	N55P_COMMAND_WRITE_CONST 4Fh, FFH
 6048  0000000                   	ENDM
 6049  0000000                   ;----------------------------------------------------------------		
 6050  0000000                   N55P_SET_PORT_CONST_CURRENT MACRO XPORT,XPINS
 6051  0000000                   	N55P_COMMAND_WRITE_CONST P242CNST_BPA+XPORT,XPINS
 6052  0000000                   	ENDM
 6053  0000000                   ;----------------------------------------------------------------
 6054  0000000                   N55P_SET_STATUS MACRO XPORT,XPORT_MASK,B_VALUE,D_VALUE,A_VALUE
 6055  0000000                   	N55P_COMMAND_WRITE_CONST P242BPA_B+XPORT,B_VALUE
 6056  0000000                   	N55P_COMMAND_WRITE_CONST P242BPA_D+XPORT,D_VALUE
 6057  0000000                   	N55P_COMMAND_WRITE_CONST P242BPA_A+XPORT,A_VALUE
 6058  0000000                   	ENDM
 6059  0000000                   ;----------------------------------------------------------------
 6060  0000000                   N55P_AND_BUFFER MACRO XPORT,B_VALUE
 6061  0000000                   	N55P_COMMAND_WRITE_CONST P242AND_BPA_B+XPORT,B_VALUE
 6062  0000000                   	ENDM	
 6063  0000000                   ;----------------------------------------------------------------
 6064  0000000                   N55P_AND_BUFFER_RAM MACRO XPORT,B_VALUE_RAM
 6065  0000000                   	N55P_COMMAND_WRITE_RAM P242AND_BPA_B+XPORT,B_VALUE_RAM
 6066  0000000                   	ENDM	
 6067  0000000                   ;----------------------------------------------------------------
 6068  0000000                   N55P_OR_BUFFER MACRO XPORT,B_VALUE
 6069  0000000                   	N55P_COMMAND_WRITE_CONST P242OR_BPA_B+XPORT,B_VALUE
 6070  0000000                   	ENDM	
 6071  0000000                   ;----------------------------------------------------------------
 6072  0000000                   N55P_OR_BUFFER_RAM MACRO XPORT,B_VALUE_RAM
 6073  0000000                   	N55P_COMMAND_WRITE_RAM P242OR_BPA_B+XPORT,B_VALUE_RAM
 6074  0000000                   	ENDM		
 6075  0000000                   ;----------------------------------------------------------------
 6076  0000000                   N55P_SET_BPAB_PWM_RATE MACRO PCKAB_MASK,PCKAB_VALUE
 6077  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMCK_BPA,PCKAB_MASK,PCKAB_VALUE
 6078  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMCK_BPA,PCKAB_VALUE
 6079  0000000                   	ENDM
 6080  0000000                   ;----------------------------------------------------------------
 6081  0000000                   N55P_SET_BPC_PWM_RATE MACRO PCKC_MASK,PCKC_VALUE
 6082  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMCK_BPC,PCKC_MASK,PCKC_VALUE
 6083  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMCK_BPC,PCKC_VALUE
 6084  0000000                   	ENDM
 6085  0000000                   ;----------------------------------------------------------------
 6086  0000000                   N55P_EN_PWM_PIN MACRO XPORT,XPWMX	
 6087  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMEN_BPA+XPORT,XPWMX,XPWMX
 6088  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMEN_BPA+XPORT,XPWMX





 6089  0000000                   	ENDM
 6090  0000000                   ;----------------------------------------------------------------
 6091  0000000                   N55P_DIS_PWM_PIN MACRO XPORT,XPWMX
 6092  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMEN_BPA+XPORT,XPWMX,XPWMX
 6093  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMEN_BPA+XPORT,0	
 6094  0000000                   	ENDM
 6095  0000000                   ;----------------------------------------------------------------
 6096  0000000                   N55P_SET_PWM_VALUE MACRO XPORT, XPWMX,VALUE
 6097  0000000                   	N55P_COMMAND_WRITE_CONST P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,VALUE
 6098  0000000                   	ENDM
 6099  0000000                   ;----------------------------------------------------------------
 6100  0000000                   N55P_SET_PWM_VALUE_RAM MACRO XPORT,XPWMX_RAM,RAM
 6101  0000000                   ;	N55P_COMMAND_WRITE_RAM P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,RAM
 6102  0000000                   	SPI_X0_ON
 6103  0000000                   	CLC
 6104  0000000                   	LDA #80H+P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)
 6105  0000000                   	ADC XPWMX_RAM
 6106  0000000                   	SPI_X0_MOSI
 6107  0000000                   	LDA RAM
 6108  0000000                   	SPI_X0_MOSI
 6109  0000000                   	SPI_X0_OFF
 6110  0000000                   	ENDM
 6111  0000000                   ;----------------------------------------------------------------
 6112  0000000                   N55P_SET_PWM_VALUE_RAM2 MACRO XPORT,XPWMX_RAM,VALUE
 6113  0000000                   ;	N55P_COMMAND_WRITE_RAM P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,RAM
 6114  0000000                   	SPI_X0_ON
 6115  0000000                   	CLC
 6116  0000000                   	LDA #80H+P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)
 6117  0000000                   	ADC XPWMX_RAM
 6118  0000000                   	SPI_X0_MOSI
 6119  0000000                   	LDA #VALUE
 6120  0000000                   	SPI_X0_MOSI
 6121  0000000                   	SPI_X0_OFF
 6122  0000000                   	ENDM
 6123  0000000                   ;----------------------------------------------------------------
 6124  0000000                   N55P_SET_PWM_VALUE_RAM3 MACRO XPORT,XPWMX,RAM
 6125  0000000                   	N55P_COMMAND_WRITE_RAM P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,RAM
 6126  0000000                   	ENDM
 6127  0000000                   .ENDIF
 6128  0000000                   ;----------------------------------------------------------------
 6129  0000000                   N55P_EXPANDER_PROCESS_RUNTIME MACRO
 6130  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6131  0000000                   .IFDEF WDTIMER
 6132  0000000                   	LDA #WDTC_CLR
 6133  0000000                   	STA !WDTC
 6134  0000000                   .ENDIF
 6135  0000000                   
 6136  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 6137  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 6138  0000000                   .ENDIF
 6139  0000000                   	ENDM 	
 6140  0000000                   ;----------------------------------------------------------------
 6141  0000000                   N55P_EXPANDER_PROCESS MACRO 
 6142  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6143  0000000                   .IFDEF WDTIMER
 6144  0000000                   		LDA #WDTC_CLR
 6145  0000000                   		STA !WDTC





 6146  0000000                   .ENDIF
 6147  0000000                   
 6148  0000000                   .IF (WITH_PSF_PROJECT .EQ. 1)
 6149  0000000                   .IFDEF ABANDON_STACK
 6150  0000000                   	LDA ABANDON_STACK_FLAG
 6151  0000000                   	BIT #6CH
 6152  0000000                   	BNE N55P_EXPANDER_PROCESS_END#
 6153  0000000                   .ENDIF
 6154  0000000                   .ENDIF
 6155  0000000                   	EXTERN UIO_N55P_PROCESS
 6156  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_N55P_PROCESS
 6157  0000000                   N55P_EXPANDER_PROCESS_END#:
 6158  0000000                   .ENDIF
 6159  0000000                   	ENDM
 6160  0000000                   ;----------------------------------------------------------------	
 6161  0000000                   HWE_SET_N55P_UIO_USED MACRO
 6162  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6163  0000000                   .IFDEF WDTIMER
 6164  0000000                   	LDA #WDTC_CLR
 6165  0000000                   	STA !WDTC
 6166  0000000                   .ENDIF  
 6167  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 6168  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 6169  0000000                   .ENDIF 	
 6170  0000000                   	ENDM
 6171  0000000                   ;------------------------------------------------------------------------------
 6172  0000000                   ; Control WDT
 6173  0000000                   ;------------------------------------------------------------------------------
 6174  0000000                   HWE_CLEAR_WDT_FLAG MACRO
 6175  0000000                   .IFDEF WDTIMER
 6176  0000000                   	LDA #WDTC_CLR 
 6177  0000000                   	STA !WDTC
 6178  0000000                   .ENDIF 
 6179  0000000                   	ENDM
 6180  0000000                   ;------------------------------------------------------------------------------
 6181  0000000                   ; Control INT
 6182  0000000                   ;------------------------------------------------------------------------------
 6183  0000000                   SET_INT0_RAM MACRO INT_MASK
 6184  0000000                   	LDA INT_MASK
 6185  0000000                   	TSB !IEF0
 6186  0000000                   	ENDM
 6187  0000000                   ;----------------------------------------------------------------	
 6188  0000000                   SET_INT1_RAM MACRO INT_MASK
 6189  0000000                   	LDA INT_MASK
 6190  0000000                   	TSB !IEF1
 6191  0000000                   	ENDM	
 6192  0000000                   ;----------------------------------------------------------------	
 6193  0000000                   CLR_INT0_RAM MACRO INT_MASK
 6194  0000000                   	LDA #INT_MASK
 6195  0000000                   	TRB !IEF0
 6196  0000000                   	ENDM
 6197  0000000                   ;----------------------------------------------------------------	
 6198  0000000                   CLR_INT1_RAM MACRO INT_MASK
 6199  0000000                   	LDA #INT_MASK
 6200  0000000                   	TRB !IEF1
 6201  0000000                   	ENDM
 6202  0000000                   ;------------------------------------------------------------------------------





 6203  0000000                   ; Access DPD_RAM
 6204  0000000                   ;------------------------------------------------------------------------------	
 6205  0000000                   SET_DPD_RAM MACRO INDEX_RAM, VALUE_RAM
 6206  0000000                   	PHX
 6207  0000000                   	LDX INDEX_RAM
 6208  0000000                   	LDA VALUE_RAM
 6209  0000000                   	STA DPD_USER_START
 6210  0000000                   
 6211  0000000                   	PLX
 6212  0000000                   	ENDM
 6213  0000000                   ;------------------------------------------------------------------------------
 6214  0000000                   ; Get PCMH
 6215  0000000                   ;------------------------------------------------------------------------------
 6216  0000000                   GET_SP_AMP_VALUE MACRO
 6217  0000000                   	LDA !PCMH
 6218  0000000                   	ENDM
 6219  0000000                   ;------------------------------------------------------------------------------
 6220  0000000                   ;GET_SP_AMP_RAM MACRO REG
 6221  0000000                   GET_SP_AMP_VALUE_RAM MACRO REG
 6222  0000000                   	LDA !PCMH
 6223  0000000                   	STA REG
 6224  0000000                   	ENDM
 6225  0000000                   ;------------------------------------------------------------------------------
 6226  0000000                   ; Control LDO
 6227  0000000                   ;------------------------------------------------------------------------------	
 6228  0000000                   LDO_ON MACRO
 6229  0000000                   	LDA #01H
 6230  0000000                   	TSB !LDOEN
 6231  0000000                   	ENDM
 6232  0000000                   ;------------------------------------------------------------------------------
 6233  0000000                   LDO_OFF MACRO
 6234  0000000                   	LDA #01H
 6235  0000000                   	TRB !LDOEN
 6236  0000000                   	ENDM
 6237  0000000                   ;------------------------------------------------------------------------------
 6238  0000000                   ; Control IO
 6239  0000000                   ;------------------------------------------------------------------------------
 6240  0000000                   IO_PINMAP_RAM MACRO BPXX_RAM
 6241  0000000                   	LDA BPXX_RAM 
 6242  0000000                   	AND #0FH		; Low 4 nibble bits is pin number
 6243  0000000                   	TAY
 6244  0000000                   	LDA IO_PIN_TABLE, Y
 6245  0000000                   	ENDM
 6246  0000000                   ;------------------------------------------------------------------------------
 6247  0000000                   IO_PORTMAP_RAM MACRO BPXX_RAM
 6248  0000000                   	LDA BPXX_RAM 
 6249  0000000                   	AND #F0H		; High 4 nibble bits is port number
 6250  0000000                   	LSR A
 6251  0000000                   	LSR A
 6252  0000000                   	LSR A
 6253  0000000                   	LSR A
 6254  0000000                   	TAX
 6255  0000000                   	ENDM
 6256  0000000                   ;------------------------------------------------------------------------------
 6257  0000000                   SET_BPXN_OUTPUT_MODE_RAM MACRO BPXX_RAM, PIN_RAM ,MODE_RAM
 6258  0000000                   	PHX
 6259  0000000                   	LDX #BPXX_RAM





 6260  0000000                   
 6261  0000000                   	LDA PIN_RAM
 6262  0000000                   	EOR #FFH
 6263  0000000                   	AND !BP0D,X
 6264  0000000                   	STA !BP0D,X
 6265  0000000                   
 6266  0000000                   	LDA MODE_RAM
 6267  0000000                   	BEQ SET_OD#
 6268  0000000                   SET_CMOS#:
 6269  0000000                   	LDA PIN_RAM
 6270  0000000                   	ORA !BP0M,X
 6271  0000000                   	STA !BP0M,X
 6272  0000000                   	JMP RETURN#
 6273  0000000                   SET_OD#:
 6274  0000000                   	LDA PIN_RAM
 6275  0000000                   	EOR #FFH
 6276  0000000                   	AND !BP0M,X
 6277  0000000                   	STA !BP0M,X
 6278  0000000                   RETURN#:
 6279  0000000                   	PLX	
 6280  0000000                   	ENDM
 6281  0000000                   ;------------------------------------------------------------------------------
 6282  0000000                   SET_BPXN_INPUT_MODE_RAM MACRO BPXX_RAM, PIN_RAM ,MODE_RAM
 6283  0000000                   	PHX
 6284  0000000                   	LDX #BPXX_RAM
 6285  0000000                   
 6286  0000000                   	LDA PIN_RAM
 6287  0000000                   	ORA !BP0D,X
 6288  0000000                   	STA !BP0D,X
 6289  0000000                   
 6290  0000000                   	LDA MODE_RAM
 6291  0000000                   	BEQ SET_FLOATING#
 6292  0000000                   SET_PULLUP#:
 6293  0000000                   	LDA PIN_RAM
 6294  0000000                   	ORA !BP0M,X
 6295  0000000                   	STA !BP0M,X
 6296  0000000                   	JMP RETURN#
 6297  0000000                   SET_FLOATING#:
 6298  0000000                   	LDA PIN_RAM
 6299  0000000                   	EOR #FFH
 6300  0000000                   	AND !BP0M,X
 6301  0000000                   	STA !BP0M,X
 6302  0000000                   RETURN#:
 6303  0000000                   	PLX
 6304  0000000                   	ENDM
 6305  0000000                   ;------------------------------------------------------------------------------
 6306  0000000                   SET_BPXN_WRITE_RAM MACRO BPXX_RAM, PINS_RAM
 6307  0000000                   	PHX
 6308  0000000                   	LDX #BPXX_RAM
 6309  0000000                   
 6310  0000000                   	LDA PINS_RAM
 6311  0000000                   	STA !BP0R,X
 6312  0000000                   RETURN#:
 6313  0000000                   	PLX	
 6314  0000000                   	ENDM
 6315  0000000                   ;------------------------------------------------------------------------------
 6316  0000000                   SET_BPXN_READ_RAM MACRO BPXX_RAM, RETURN_RAM





 6317  0000000                   	PHX
 6318  0000000                   	LDX #BPXX_RAM
 6319  0000000                   
 6320  0000000                   	LDA !BP0R,X
 6321  0000000                   	STA RETURN_RAM
 6322  0000000                   RETURN#:
 6323  0000000                   	PLX	
 6324  0000000                   	ENDM
 6325  0000000                   ;------------------------------------------------------------------------------
 6326  0000000                   SET_BPXN_WAKEUP_RAM MACRO BPXX_RAM, PIN_RAM, EN_RAM
 6327  0000000                   	PHX
 6328  0000000                   	LDX #BPXX_RAM
 6329  0000000                   
 6330  0000000                   	LDA EN_RAM
 6331  0000000                   	BEQ DIS_WAKEUP#
 6332  0000000                   
 6333  0000000                   EN_WAKEUP#:
 6334  0000000                   	LDA PIN_RAM
 6335  0000000                   	ORA !BP0EN,X
 6336  0000000                   	STA !BP0EN,X
 6337  0000000                   	JMP RETURN#
 6338  0000000                   DIS_WAKEUP#:
 6339  0000000                   	LDA PIN_RAM
 6340  0000000                   	EOR #FFH
 6341  0000000                   	AND !BP0EN,X
 6342  0000000                   	STA !BP0EN,X
 6343  0000000                   RETURN#:
 6344  0000000                   	PLX
 6345  0000000                   	ENDM
 6346  0000000                   ;------------------------------------------------------------------------------
 6347  0000000                   EN_WAKEUP_PIN_RAM	MACRO BPXX_RAM
 6348  0000000                   	PHP
 6349  0000000                   
 6350  0000000                   	IO_PORTMAP_RAM	BPXX_RAM ; "X" register saves port index
 6351  0000000                   	IO_PINMAP_RAM BPXX_RAM ;"A" register saves pin information (table: 000xxxxb)
 6352  0000000                   	ORA !BP0EN,X
 6353  0000000                   	STA !BP0EN,X
 6354  0000000                   RETURN#:
 6355  0000000                   	PLP
 6356  0000000                   	ENDM
 6357  0000000                   ;------------------------------------------------------------------------------
 6358  0000000                   DIS_WAKEUP_PIN_RAM	MACRO BPXX_RAM
 6359  0000000                   	PHP
 6360  0000000                   
 6361  0000000                   	IO_PORTMAP_RAM	BPXX_RAM ; "X" register saves port index
 6362  0000000                   	IO_PINMAP_RAM BPXX_RAM ;"A" register saves pin information (table: 000xxxxb)
 6363  0000000                   	EOR #FFH
 6364  0000000                   	AND !BP0EN,X
 6365  0000000                   	STA !BP0EN,X
 6366  0000000                   RETURN#:
 6367  0000000                   	PLP
 6368  0000000                   	ENDM
 6369  0000000                   ;===============================================================================
 6370  0000000                   ;===============================================================================
 6371  0000000                   TABLE_LOOKUP_1DIM  MACRO USER_DEFINED_TABLE,INDEX_RAM,RESULT,TEMP_RAM
 6372  0000000                   	LDA #.LOW.USER_DEFINED_TABLE
 6373  0000000                   	STA <TEMP_RAM





 6374  0000000                   	LDA #.HIGH.USER_DEFINED_TABLE
 6375  0000000                   	STA <TEMP_RAM+1
 6376  0000000                   
 6377  0000000                   	CLC
 6378  0000000                   	LDA <TEMP_RAM
 6379  0000000                   	ADC INDEX_RAM
 6380  0000000                   	STA <TEMP_RAM
 6381  0000000                   	LDA <TEMP_RAM+1
 6382  0000000                   	ADC #00H
 6383  0000000                   	STA <TEMP_RAM+1
 6384  0000000                   
 6385  0000000                   	LDA (<TEMP_RAM)
 6386  0000000                   	STA RESULT
 6387  0000000                   	ENDM	
 6388  0000000                   ;------------------------------------------------------------------------------
 6389  0000000                   TABLE_LOOKUP_1DIM_2B  MACRO USER_DEFINED_TABLE,INDEX_RAM,RESULT,TEMP_RAM
 6390  0000000                   	LDA #.LOW.USER_DEFINED_TABLE
 6391  0000000                   	STA <TEMP_RAM
 6392  0000000                   	LDA #.HIGH.USER_DEFINED_TABLE
 6393  0000000                   	STA <TEMP_RAM+1
 6394  0000000                   
 6395  0000000                   	LDY #02H
 6396  0000000                   TABLE_LOOKUP_ONE_DIMENSION_2B_LOOP#:
 6397  0000000                   	CLC
 6398  0000000                   	LDA <TEMP_RAM
 6399  0000000                   	ADC INDEX_RAM
 6400  0000000                   	STA <TEMP_RAM
 6401  0000000                   	LDA <TEMP_RAM+1
 6402  0000000                   	ADC #00H
 6403  0000000                   	STA <TEMP_RAM+1
 6404  0000000                   	DEY
 6405  0000000                   	BNE TABLE_LOOKUP_ONE_DIMENSION_2B_LOOP#
 6406  0000000                   
 6407  0000000                   	LDA (<TEMP_RAM)
 6408  0000000                   	STA RESULT
 6409  0000000                   	LDY #01H
 6410  0000000                   	LDA (<TEMP_RAM),Y
 6411  0000000                   	STA RESULT+1
 6412  0000000                   	ENDM	
 6413  0000000                   
 6414  0000000                   
 6415  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\HWE_DEFINE.INI.APP"
 6416  0000000                   ;******* SHARED MEMORY *******************************
 6417  0000000                   	INCLUDE	"D:\11101465\03_NUVOTON\00_DATASHEET\#9_AUDIO ENHANCEMENT\NSP\SAMPLE CODE\NSP PLAYLIST PROJECT\RINGRING\DEMOKIT\HWE_SHARE_RAM.INI.APP"
 6418  0000000                   HWE_SLD_LEN_BA	EQU	SHM_RAM_BEGIN+102
 6419  0000000                   HWE_SLD_ADDR_BA	EQU	SHM_RAM_BEGIN+102
 6420  0000000                   HWE_CACHE1_EVENT_CHUNK	EQU	SHM_RAM_BEGIN+102
 6421  0000000                   HWE_CACHE1_BA	EQU	SHM_RAM_BEGIN+110
 6422  0000000                   HWE_COLOR_FLY_BA	EQU	SHM_RAM_BEGIN+112
 6423  0000000                   HWE_STATUS_BA		EQU	SHM_RAM_BEGIN+123
 6424  0000000                   HWE_CTRL_BA		EQU	SHM_RAM_BEGIN+125
 6425  0000000                   HWE_CMD_BA		EQU	SHM_RAM_BEGIN+126
 6426  0000000                   HWE_CH1_BA		EQU	SHM_RAM_BEGIN+132
 6427  0000000                   HWE_CH2_BA		EQU	SHM_RAM_BEGIN+133
 6428  0000000                   HWE_CH3_BA		EQU	SHM_RAM_BEGIN+134
 6429  0000000                   HWE_CH_BUSY_BA		EQU	SHM_RAM_BEGIN+140
 6430  0000000                   HWE_INT_TYPE_BA		EQU	SHM_RAM_BEGIN+141





 6431  0000000                   HWE_PLAYBYIDX_BA		EQU	SHM_RAM_BEGIN+117
 6432  0000000                   HWE_NRPN_BA		EQU	SHM_RAM_BEGIN+115
 6433  0000000                   HWE_ENVELOPE_BA		EQU	SHM_RAM_BEGIN+112
 6434  0000000                   
 6435  0000000                   ;SHM_BA					EQU	SHM_RAM_BEGIN
 6436  0000000                   ;HWE_STATUS_BA			EQU	SHM_BA+0
 6437  0000000                   ;HWE_CTRL_BA				EQU	SHM_BA+2
 6438  0000000                   ;HWE_CMD_BA				EQU	SHM_BA+3
 6439  0000000                   ;HWE_CH1_BA				EQU	SHM_BA+9
 6440  0000000                   ;HWE_CH2_BA				EQU	SHM_BA+10
 6441  0000000                   ;HWE_CH3_BA				EQU	SHM_BA+11
 6442  0000000                   ;HWE_CH_BUSY_BA			EQU SHM_BA+17
 6443  0000000                   ;HWE_INT_TYPE_BA			EQU	SHM_BA+18
 6444  0000000                   ;HWE_PLAYBYIDX_BA		EQU SHM_BA+19
 6445  0000000                   ;HWE_NRPN_BA				EQU	SHM_BA+25
 6446  0000000                   ;HWE_ENVELOPE_BA			EQU SHM_BA+27
 6447  0000000                   ;HWE_COLOR_FLY_BA		EQU	SHM_BA+30
 6448  0000000                   ;HWE_CACHE1_BA			EQU	HWE_COLOR_FLY_BA+36
 6449  0000000                   ;HWE_CACHE1_EVENT_CHUNK	EQU HWE_CACHE1_BA+2
 6450  0000000                   ;HWE_SLD_ADDR_BA			EQU	SHM_BA+134
 6451  0000000                   ;HWE_SLD_LEN_BA			EQU HWE_SLD_ADDR_BA+4
 6452  0000000                   
 6453  0000000                   HWE_STATUS_L			EQU 00H
 6454  0000000                   HWE_STATUS_H			EQU 01H
 6455  0000000                   
 6456  0000000                   VOL_CHANGE_GRADUALLY	EQU 01H
 6457  0000000                   VOL_CHANGE_IMMEDIATELY	EQU 00H
 6458  0000000                   
 6459  0000000                   CMD_IDX					EQU 00H
 6460  0000000                   CMD_CH_IDX				EQU 01H
 6461  0000000                   CMD_PARAMETER			EQU 02H
 6462  0000000                   
 6463  0000000                   MIDI_STATUS_OFFSET		EQU	00H
 6464  0000000                   MIDI_TEMP_RATIO_OFFSET	EQU	01H
 6465  0000000                   MIDI_PITCH_OFFSET		EQU 03H
 6466  0000000                   
 6467  0000000                   CACHE_CH				EQU	00H
 6468  0000000                   CACHE_COUNT				EQU	01H
 6469  0000000                   CACHE_EVENT_CHUNK		EQU	02H
 6470  0000000                   
 6471  0000000                   CTL_START_FLAG			EQU 01H
 6472  0000000                   CTL_STANDBY_FLAG		EQU	02H
 6473  0000000                   CTL_SP_CHANGE_FLAG		EQU	04H
 6474  0000000                   CTL_EN_EXT_FLAG			EQU 08H
 6475  0000000                   
 6476  0000000                   ;SLD_CACHE_NUM			EQU 00H
 6477  0000000                   ;SLD_CACHE_EVENT_CHUNK	EQU	02H
 6478  0000000                   
 6479  0000000                   ;******* SYNTHESISER CMD *****************************
 6480  0000000                   CMD_IDLE				EQU 00H
 6481  0000000                   CMD_PLAY				EQU 01H
 6482  0000000                   CMD_STOP				EQU 02H
 6483  0000000                   CMD_PAUSE				EQU 03H
 6484  0000000                   CMD_RESUME				EQU 04H
 6485  0000000                   CMD_MUTE				EQU 05H
 6486  0000000                   CMD_UNMUTE				EQU 06H
 6487  0000000                   CMD_SET_VOL				EQU 07H





 6488  0000000                   CMD_SET_SR				EQU 08H
 6489  0000000                   CMD_SET_PLAY_SEGMENT	EQU 09H
 6490  0000000                   CMD_EN_GLOBAL_VOL		EQU 0CH
 6491  0000000                   CMD_DIS_GLOBAL_VOL		EQU 0DH
 6492  0000000                   CMD_EN_GLOBAL_SR		EQU 0EH
 6493  0000000                   CMD_DIS_GLOBAL_SR		EQU 0FH
 6494  0000000                   CMD_NOTE_ON				EQU 10H
 6495  0000000                   CMD_NOTE_OFF			EQU 11H
 6496  0000000                   CMD_SET_TEMPO			EQU 12H
 6497  0000000                   CMD_SET_PITCH_MS		EQU 13H
 6498  0000000                   CMD_EN_VIBRATO			EQU 14H
 6499  0000000                   CMD_DIS_VIBRATO			EQU 15H
 6500  0000000                   CMD_EN_MODULATION		EQU 16H
 6501  0000000                   CMD_DIS_MODULATION		EQU 17H
 6502  0000000                   CMD_SET_NOTE_PITCH_BEND	EQU 18H
 6503  0000000                   CMD_EN_GLOBAL_INS		EQU 19H
 6504  0000000                   CMD_DIS_GLOBAL_INS		EQU 1AH
 6505  0000000                   CMD_SET_EVP						EQU 1BH
 6506  0000000                   CMD_EN_GLOBAL_PITCH_OFFSET		EQU 1CH
 6507  0000000                   CMD_DIS_GLOBAL_PITCH_OFFSET		EQU 1DH
 6508  0000000                   CMD_EN_ONEKEYONENOTE			EQU 1EH
 6509  0000000                   CMD_DIS_ONEKEYONENOTE			EQU 1FH
 6510  0000000                   CMD_ONEKEYONENOTE_NEXT			EQU 20H
 6511  0000000                   
 6512  0000000                   CMD_EN_COLORFLY					EQU	23H
 6513  0000000                   CMD_DIS_COLORFLY				EQU	24H
 6514  0000000                   CMD_SET_COLORFLY_PARAM			EQU	25H
 6515  0000000                   
 6516  0000000                   CMD_SET_SPEED_SP				EQU 26H
 6517  0000000                   CMD_SET_PITCH_SP				EQU 27H
 6518  0000000                   CMD_PLAY_BY_INDEX				EQU	28H
 6519  0000000                   CMD_PLAY_IN_REVERSE_SP			EQU 29H
 6520  0000000                   CMD_EXT_NOTE_VOL				EQU 2AH
 6521  0000000                   CMD_CHK_EXT_NOTE_BUSY			EQU 2BH
 6522  0000000                   
 6523  0000000                   CMD_INIT_SYS					EQU	0A8H
 6524  0000000                   CMD_LOGIC_BA					EQU 0A9H
 6525  0000000                   CMD_TABLE_BA					EQU 0AAH
 6526  0000000                   
 6527  0000000                   CH_STATUS_GLOBAL_VOL	EQU 01H
 6528  0000000                   CH_STATUS_GLOBAL_SR		EQU 02H
 6529  0000000                   ;CH_STATUS_BZ			EQU 20H
 6530  0000000                   CH_STATUS_PASUE			EQU 40H
 6531  0000000                   CH_STATUS_MUTE			EQU 80H
 6532  0000000                   
 6533  0000000                   CH_SP1_BZ					EQU 01H
 6534  0000000                   CH_SP2_BZ					EQU 02H
 6535  0000000                   CH_SP3_BZ					EQU 04H
 6536  0000000                   CH_EVO1_BZ					EQU 08H
 6537  0000000                   CH_EVO2_BZ					EQU 10H
 6538  0000000                   CH_EVO3_BZ					EQU 20H
 6539  0000000                   CH_MIDI_BZ					EQU 40H
 6540  0000000                   CH_MS_EXT					EQU 80H
 6541  0000000                   
 6542  0000000                   .IF	(CHIPSERIES = 'N589A')
 6543  0000000                   EVO_CHANNEL_BASE		EQU 03H
 6544  0000000                   .ENDIF





 6545  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 6546  0000000                   EVO_CHANNEL_BASE		EQU 02H
 6547  0000000                   .ENDIF
 6548  0000000                   .IF	(CHIPSERIES = 'N589D')
 6549  0000000                   EVO_CHANNEL_BASE		EQU 01H
 6550  0000000                   .ENDIF
 6551  0000000                   
 6552  0000000                   WITH_HWE_DEBUG			EQU	0
 6553  0000000                   
 6554  0000000                   ;******* ERROR MESSAGE *******************************
 6555  0000000                   
 6556  0000000                   ERROR_HWE_READY			EQU 00FFH
 6557  0000000                   
 6558  0000000                   
 6559  0000000                   
 6560  0000000                   
 6561  0000000                   
 6562  0000000                   
 6563  0000000                   
 6564  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SYNTH_MACROS.INI.APP"
 6565  0000000                   ;******* SYNTHESISER MACRO ***************************
 6566  0000000                   	EXTERN SEND_CMD_PROC
 6567  0000000                   	EXTERN SEND_PLAY_CMD_PROC
 6568  0000000                   	EXTERN CHK_HANDSHAKE_PROC
 6569  0000000                   	EXTERN HWE_READY_PROC
 6570  0000000                   	EXTERN SET_PLAYLIST_TABLE_PROC
 6571  0000000                   	EXTERN HWE_TABLE_BA_PROC
 6572  0000000                   	EXTERN HWE_TABLE_ALT1_BA_PROC
 6573  0000000                   	EXTERN REFRESH_STATUS_PROC
 6574  0000000                   
 6575  0000000                   ;===============================================================================
 6576  0000000                   CHK_BUSY_CH1 MACRO
 6577  0000000                   	LDA HWE_CH_BUSY_BA
 6578  0000000                   	BIT #CH_SP1_BZ
 6579  0000000                   	ENDM
 6580  0000000                   ;------------------------------------------------------------------------------
 6581  0000000                   CHK_BUSY_CH2 MACRO
 6582  0000000                   	LDA HWE_CH_BUSY_BA
 6583  0000000                   	BIT #CH_SP2_BZ
 6584  0000000                   	ENDM
 6585  0000000                   ;------------------------------------------------------------------------------
 6586  0000000                   CHK_BUSY_CH3 MACRO
 6587  0000000                   	LDA HWE_CH_BUSY_BA
 6588  0000000                   	BIT #CH_SP3_BZ
 6589  0000000                   	ENDM
 6590  0000000                   ;------------------------------------------------------------------------------
 6591  0000000                   CHK_BUSY_MS MACRO
 6592  0000000                   	LDA HWE_CH_BUSY_BA
 6593  0000000                   	BIT #CH_MIDI_BZ
 6594  0000000                   	ENDM
 6595  0000000                   ;------------------------------------------------------------------------------
 6596  0000000                   CHK_BUSY_EVO1 MACRO
 6597  0000000                   	LDA HWE_CH_BUSY_BA
 6598  0000000                   	BIT #CH_EVO1_BZ
 6599  0000000                   	ENDM
 6600  0000000                   ;------------------------------------------------------------------------------
 6601  0000000                   CHK_BUSY_EVO2 MACRO





 6602  0000000                   	LDA HWE_CH_BUSY_BA
 6603  0000000                   	BIT #CH_EVO2_BZ
 6604  0000000                   	ENDM
 6605  0000000                   ;------------------------------------------------------------------------------
 6606  0000000                   CHK_BUSY_EVO3 MACRO
 6607  0000000                   	LDA HWE_CH_BUSY_BA
 6608  0000000                   	BIT #CH_EVO3_BZ
 6609  0000000                   	ENDM
 6610  0000000                   ;------------------------------------------------------------------------------
 6611  0000000                   CHK_ALL_CHANNELS_BUSY_RAM MACRO STATUS_RAM
 6612  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 6613  0000000                   .ELSE
 6614  0000000                   	REFRESH_STATUS
 6615  0000000                   	LDA <GLOBAL_PLAY
 6616  0000000                   	STA STATUS_RAM
 6617  0000000                   .ENDIF
 6618  0000000                   	ENDM
 6619  0000000                   ;------------------------------------------------------------------------------
 6620  0000000                   CHK_SP_BUSY_RAM MACRO CHID_RAM,STATUS_RAM
 6621  0000000                   	PHY
 6622  0000000                   	REFRESH_STATUS
 6623  0000000                   	LDY CHID_RAM
 6624  0000000                   .IF(WITH_SP .EQ. 1)
 6625  0000000                   ;LDA #00H
 6626  0000000                   	LDA !SP_BUSY_GLOBAL_PLAY_TABLE,Y
 6627  0000000                   ;BIT <GLOBAL_PLAY
 6628  0000000                   	AND <GLOBAL_PLAY
 6629  0000000                   _CHK_SP_CHANNEL_#:
 6630  0000000                   	STA STATUS_RAM
 6631  0000000                   .ENDIF
 6632  0000000                   
 6633  0000000                   	PLY
 6634  0000000                   	ENDM
 6635  0000000                   ;------------------------------------------------------------------------------
 6636  0000000                   CHK_ALL_MS_BUSY_RAM MACRO STATUS_RAM 
 6637  0000000                   	REFRESH_STATUS
 6638  0000000                   .IF(WITH_MS .EQ. 1)
 6639  0000000                   	LDA <GLOBAL_PLAY
 6640  0000000                   ;BIT #MIDI_BZ+MS_EXT
 6641  0000000                   	AND #MIDI_BZ+MS_EXT
 6642  0000000                   	STA STATUS_RAM
 6643  0000000                   .ENDIF
 6644  0000000                   	ENDM
 6645  0000000                   ;------------------------------------------------------------------------------
 6646  0000000                   CHK_EVO_BUSY_RAM MACRO CHID_RAM, STATUS_RAM
 6647  0000000                   	PHY
 6648  0000000                   	REFRESH_STATUS
 6649  0000000                   	LDY CHID_RAM
 6650  0000000                   .IF(WITH_EVO .EQ. 1)
 6651  0000000                   ;LDA #00H
 6652  0000000                   	LDA !EVO_BUSY_GLOBAL_PLAY_TABLE,Y
 6653  0000000                   ;BIT <GLOBAL_PLAY
 6654  0000000                   	AND <GLOBAL_PLAY
 6655  0000000                   	STA STATUS_RAM
 6656  0000000                   _CHK_EVO_CHANNEL_#:
 6657  0000000                   .ENDIF
 6658  0000000                   	PLY





 6659  0000000                   	ENDM
 6660  0000000                   ;------------------------------------------------------------------------------
 6661  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 6662  0000000                   .ELSE
 6663  0000000                   CHK_BUSY_ALL MACRO
 6664  0000000                   	REFRESH_STATUS
 6665  0000000                   	LDA <GLOBAL_PLAY
 6666  0000000                   
 6667  0000000                   	ENDM
 6668  0000000                   .ENDIF ;WITH_MS/WITH_SP/WITH_EVO
 6669  0000000                   ;------------------------------------------------------------------------------
 6670  0000000                   REFRESH_STATUS MACRO
 6671  0000000                   	PSF_RESPONSE_LIMIT
 6672  0000000                   	JSR REFRESH_STATUS_PROC
 6673  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 6674  0000000                   	ENDM
 6675  0000000                   ;------------------------------------------------------------------------------
 6676  0000000                   WAIT_IF_BUSY MACRO CHANNEL1, CHANNEL2, CHANNEL3, CHANNEL4, CHANNEL5, CHANNEL6 ,CHANNEL7, CHANNEL8, CHANNEL9
 6677  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 6678  0000000                   .ELSE
 6679  0000000                   _xPLAY_WAIT_LOOP_#:
 6680  0000000                   
 6681  0000000                   .IFDEF WDTIMER
 6682  0000000                   	LDA #WDTC_CLR
 6683  0000000                   	STA !WDTC
 6684  0000000                   .ENDIF 
 6685  0000000                   	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 0)
 6686  0000000                   	    CAP_SENSOR_ACTION    
 6687  0000000                   		CAP_SENSOR_KEY_DETECTION
 6688  0000000                   	.ENDIF 
 6689  0000000                   
 6690  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6691  0000000                   	N55P_EXPANDER_PROCESS
 6692  0000000                   	.ENDIF 
 6693  0000000                   
 6694  0000000                   	REFRESH_STATUS
 6695  0000000                   	LDA <GLOBAL_PLAY
 6696  0000000                   	BIT #(CHANNEL1+(CHANNEL2<<1)+(CHANNEL3<<2)+(CHANNEL7<<3)+(CHANNEL8<<4)+(CHANNEL9<<5)+(CHANNEL6<<6))
 6697  0000000                   	BNE _xPLAY_WAIT_LOOP_#
 6698  0000000                   
 6699  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H) 
 6700  0000000                   	LDA #(CHANNEL1+CHANNEL2+CHANNEL3+CHANNEL7+CHANNEL8+CHANNEL9)
 6701  0000000                   	BEQ _xPLAY_WAIT_END#
 6702  0000000                   	N55P_EXPANDER_PROCESS_RUNTIME
 6703  0000000                   _xPLAY_WAIT_END#:
 6704  0000000                   	.ENDIF
 6705  0000000                   .ENDIF
 6706  0000000                         ENDM
 6707  0000000                   ;------------------------------------------------------------------------------
 6708  0000000                   HWE_GET_CHAN_STATUS_RAM MACRO CHANNEL_RAM,STATUS_RAM 
 6709  0000000                   	LDA CHANNEL_RAM
 6710  0000000                   	CMP #FFH
 6711  0000000                   	BEQ 3
 6712  0000000                   	JMP NEXT_GET_STATUS_SP
 6713  0000000                   ;STOP_PLAY_ALL	;ALL
 6714  0000000                   	CHK_ALL_CHANNELS_BUSY_RAM STATUS_RAM
 6715  0000000                   	JMP HWE_GET_CHAN_STATUS_RAM_END





 6716  0000000                   NEXT_GET_STATUS_SP:
 6717  0000000                   	LDA CHANNEL_RAM
 6718  0000000                   	CMP #02H
 6719  0000000                   	BCC 3
 6720  0000000                   	JMP NEXT_GET_STATUS_MS
 6721  0000000                   ;STOP_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 6722  0000000                   	CHK_SP_BUSY_RAM CHANNEL_RAM, STATUS_RAM
 6723  0000000                   	JMP HWE_GET_CHAN_STATUS_RAM_END
 6724  0000000                   NEXT_GET_STATUS_MS:
 6725  0000000                   	LDA CHANNEL_RAM
 6726  0000000                   	CMP #02H
 6727  0000000                   	BEQ 3
 6728  0000000                   	JMP NEXT_GET_STATUS_EVO
 6729  0000000                   ;STOP_MS
 6730  0000000                   	CHK_ALL_MS_BUSY_RAM STATUS_RAM
 6731  0000000                   	JMP HWE_GET_CHAN_STATUS_RAM_END
 6732  0000000                   NEXT_GET_STATUS_EVO:
 6733  0000000                   	LDA CHANNEL_RAM
 6734  0000000                   	SEC
 6735  0000000                   	SBC #3
 6736  0000000                   	STA CHANNEL_RAM
 6737  0000000                   	CHK_EVO_BUSY_RAM CHANNEL_RAM, STATUS_RAM
 6738  0000000                   ;STOP_PLAY_EVO_CHANNEL_RAM CHANNEL_RAM
 6739  0000000                   HWE_GET_CHAN_STATUS_RAM_END:
 6740  0000000                   	ENDM
 6741  0000000                   ;===============================================================================
 6742  0000000                   SYNTHESISER_ON MACRO
 6743  0000000                   	LDA	#01H
 6744  0000000                   	TSB !HWENG
 6745  0000000                   	ENDM
 6746  0000000                   ;------------------------------------------------------------------------------
 6747  0000000                   SYNTHESISER_OFF MACRO
 6748  0000000                   	LDA	#01H
 6749  0000000                   	TRB !HWENG
 6750  0000000                   
 6751  0000000                   .IF (WITH_SIM_SP .EQ. 1)
 6752  0000000                   	LDA #0FH				; BP2n pin is mapped to 6502
 6753  0000000                   	TRB !BP2MF0
 6754  0000000                   
 6755  0000000                   	.IFDEF SPIVDD_FROM_LDO
 6756  0000000                   	LDA #01H				; disable LDO33
 6757  0000000                   	TRB !LDOEN		
 6758  0000000                   	.ENDIF ;SPIVDD_FROM_LDO
 6759  0000000                   .ENDIF ;WITH_SIM_SP
 6760  0000000                   	ENDM
 6761  0000000                   ;===============================================================================
 6762  0000000                   SET_SP_VOLUME MACRO VOLUME, CHANNEL_ID
 6763  0000000                   .IF (WITH_VOL_ADJ .EQ. 1).OR.(WITH_VOL_ADJ_MS .EQ. 1)
 6764  0000000                   	JSR HWE_READY_PROC
 6765  0000000                   	PHP
 6766  0000000                   	SEI
 6767  0000000                   
 6768  0000000                   	HWE_SET_PARAMETER0 VOLUME
 6769  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_GRADUALLY
 6770  0000000                   
 6771  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_VOL
 6772  0000000                   





 6773  0000000                   	PLP
 6774  0000000                   	JSR CHK_HANDSHAKE_PROC
 6775  0000000                   .ENDIF	;WITH_VOL_ADJ/WITH_VOL_ADJ_MS
 6776  0000000                   
 6777  0000000                   	LDX #CHANNEL_ID
 6778  0000000                   	ENDM
 6779  0000000                   ;------------------------------------------------------------------------------	
 6780  0000000                   SET_SP_VOLUME_RAM MACRO VOLUME_RAM, CHANNEL_ID_RAM
 6781  0000000                   .IF (WITH_VOL_ADJ .EQ. 1).OR.(WITH_VOL_ADJ_MS .EQ. 1)
 6782  0000000                   	JSR HWE_READY_PROC
 6783  0000000                   	PHP
 6784  0000000                   	SEI
 6785  0000000                   
 6786  0000000                   	HWE_SET_PARAMETER0_RAM VOLUME_RAM
 6787  0000000                   	HWE_SET_PARAMETER1_RAM VOL_CHANGE_GRADUALLY
 6788  0000000                   
 6789  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_SET_VOL
 6790  0000000                   
 6791  0000000                   	PLP
 6792  0000000                   	JSR CHK_HANDSHAKE_PROC
 6793  0000000                   .ENDIF	;WITH_VOL_ADJ/WITH_VOL_ADJ_MS
 6794  0000000                   
 6795  0000000                   	LDX CHANNEL_ID_RAM
 6796  0000000                   	ENDM
 6797  0000000                   ;------------------------------------------------------------------------------
 6798  0000000                   SET_SP_VOLUME_BY_RAM MACRO VOLUME_RAM, CHANNEL_ID
 6799  0000000                   .IF (WITH_VOL_ADJ .EQ. 1).OR.(WITH_VOL_ADJ_MS .EQ. 1)
 6800  0000000                   	JSR HWE_READY_PROC
 6801  0000000                   	PHP
 6802  0000000                   	SEI
 6803  0000000                   
 6804  0000000                   	LDA	VOLUME_RAM
 6805  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 6806  0000000                   	LDA #VOL_CHANGE_GRADUALLY
 6807  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 6808  0000000                   
 6809  0000000                   	LDA #CHANNEL_ID
 6810  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 6811  0000000                   	LDA #CMD_SET_VOL
 6812  0000000                   	JSR SEND_CMD_PROC
 6813  0000000                   
 6814  0000000                   	PLP
 6815  0000000                   	JSR CHK_HANDSHAKE_PROC
 6816  0000000                   .ENDIF	;WITH_VOL_ADJ/WITH_VOL_ADJ_MS
 6817  0000000                   	ENDM
 6818  0000000                   ;------------------------------------------------------------------------------
 6819  0000000                   .IF (WITH_SP .EQ. 1)
 6820  0000000                   ;	.IF (WITH_SP_NUM .GT. 0)
 6821  0000000                   SET_VOL1 MACRO NEW_VOL
 6822  0000000                   	SET_SP_VOLUME NEW_VOL, 00H 
 6823  0000000                   	ENDM
 6824  0000000                   ;------------------------------------------------------------------------------
 6825  0000000                   SET_VOL2 MACRO NEW_VOL
 6826  0000000                   	SET_SP_VOLUME NEW_VOL, 01H 
 6827  0000000                   	ENDM
 6828  0000000                   .ENDIF	;WITH_SP
 6829  0000000                   ;------------------------------------------------------------------------------





 6830  0000000                   SET_VOL3 MACRO NEW_VOL
 6831  0000000                   	SET_SP_VOLUME NEW_VOL, 02H
 6832  0000000                   	ENDM
 6833  0000000                   ;------------------------------------------------------------------------------
 6834  0000000                   .IF (WITH_MS .EQ. 1)
 6835  0000000                   SET_VOLM MACRO NEW_VOL
 6836  0000000                   	SET_SP_VOLUME NEW_VOL, 02H 
 6837  0000000                   	ENDM
 6838  0000000                   ;------------------------------------------------------------------------------
 6839  0000000                   SET_MS_CHANNEL_VOLUME MACRO VOLUME_VALUE, CHANNEL
 6840  0000000                   	SET_SP_VOLUME VOLUME_VALUE, CHANNEL+10H
 6841  0000000                   	ENDM
 6842  0000000                   ;------------------------------------------------------------------------------
 6843  0000000                   SET_VOLM1 MACRO NEW_MS_CHANNEL_VOL
 6844  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 10H
 6845  0000000                   	ENDM		
 6846  0000000                   ;------------------------------------------------------------------------------
 6847  0000000                   SET_VOLM2 MACRO NEW_MS_CHANNEL_VOL
 6848  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 11H
 6849  0000000                   	ENDM
 6850  0000000                   ;------------------------------------------------------------------------------
 6851  0000000                   SET_VOLM3 MACRO NEW_MS_CHANNEL_VOL
 6852  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 12H
 6853  0000000                   	ENDM
 6854  0000000                   ;------------------------------------------------------------------------------
 6855  0000000                   SET_VOLM4 MACRO NEW_MS_CHANNEL_VOL
 6856  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 13H
 6857  0000000                   	ENDM
 6858  0000000                   ;------------------------------------------------------------------------------
 6859  0000000                   SET_VOLM5 MACRO NEW_MS_CHANNEL_VOL
 6860  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 14H
 6861  0000000                   	ENDM
 6862  0000000                   ;------------------------------------------------------------------------------
 6863  0000000                   SET_VOLM6 MACRO NEW_MS_CHANNEL_VOL
 6864  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 15H
 6865  0000000                   	ENDM
 6866  0000000                   ;------------------------------------------------------------------------------
 6867  0000000                   SET_VOLM7 MACRO NEW_MS_CHANNEL_VOL
 6868  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 16H
 6869  0000000                   	ENDM
 6870  0000000                   ;------------------------------------------------------------------------------
 6871  0000000                   SET_VOLM8 MACRO NEW_MS_CHANNEL_VOL
 6872  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 17H
 6873  0000000                   	ENDM
 6874  0000000                   ;------------------------------------------------------------------------------
 6875  0000000                   SET_VOLM9 MACRO NEW_MS_CHANNEL_VOL
 6876  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 18H
 6877  0000000                   	ENDM
 6878  0000000                   ;------------------------------------------------------------------------------
 6879  0000000                   SET_VOLM10 MACRO NEW_MS_CHANNEL_VOL
 6880  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 19H
 6881  0000000                   	ENDM
 6882  0000000                   ;------------------------------------------------------------------------------
 6883  0000000                   SET_VOLM11 MACRO NEW_MS_CHANNEL_VOL
 6884  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1AH
 6885  0000000                   	ENDM
 6886  0000000                   ;------------------------------------------------------------------------------





 6887  0000000                   SET_VOLM12 MACRO NEW_MS_CHANNEL_VOL
 6888  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1BH
 6889  0000000                   	ENDM
 6890  0000000                   ;------------------------------------------------------------------------------
 6891  0000000                   SET_VOLM13 MACRO NEW_MS_CHANNEL_VOL
 6892  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1CH
 6893  0000000                   	ENDM
 6894  0000000                   ;------------------------------------------------------------------------------
 6895  0000000                   SET_VOLM14 MACRO NEW_MS_CHANNEL_VOL
 6896  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1DH
 6897  0000000                   	ENDM
 6898  0000000                   ;------------------------------------------------------------------------------
 6899  0000000                   SET_VOLM15 MACRO NEW_MS_CHANNEL_VOL
 6900  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1EH
 6901  0000000                   	ENDM
 6902  0000000                   ;------------------------------------------------------------------------------
 6903  0000000                   SET_VOLM16 MACRO NEW_MS_CHANNEL_VOL
 6904  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1FH
 6905  0000000                   	ENDM
 6906  0000000                   .ENDIF ;WITH_MS
 6907  0000000                   ;;.ENDIF
 6908  0000000                   ;------------------------------------------------------------------------------
 6909  0000000                   .IF (WITH_SP .EQ. 1)
 6910  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 6911  0000000                   SET_VOL1_RAM MACRO NEW_VOL_RAM
 6912  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 00H 
 6913  0000000                   	ENDM
 6914  0000000                   	.ENDIF	;WITH_SP_NUM
 6915  0000000                   ;------------------------------------------------------------------------------
 6916  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 6917  0000000                   SET_VOL2_RAM MACRO NEW_VOL_RAM
 6918  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 01H 
 6919  0000000                   	ENDM
 6920  0000000                   	.ENDIF	;WITH_SP_NUM
 6921  0000000                   .ENDIF	;WITH_SP
 6922  0000000                   ;------------------------------------------------------------------------------
 6923  0000000                   SET_VOL3_RAM MACRO NEW_VOL_RAM
 6924  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 02H 
 6925  0000000                   	ENDM
 6926  0000000                   ;------------------------------------------------------------------------------	
 6927  0000000                   .IF (WITH_MS .EQ. 1)
 6928  0000000                   SET_VOLM_RAM MACRO NEW_VOL_RAM
 6929  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 02H 
 6930  0000000                   	ENDM
 6931  0000000                   ;------------------------------------------------------------------------------
 6932  0000000                   SET_VOLM1_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6933  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 10H
 6934  0000000                   	ENDM		
 6935  0000000                   ;------------------------------------------------------------------------------
 6936  0000000                   SET_VOLM2_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6937  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 11H
 6938  0000000                   	ENDM
 6939  0000000                   ;------------------------------------------------------------------------------
 6940  0000000                   SET_VOLM3_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6941  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 12H
 6942  0000000                   	ENDM
 6943  0000000                   ;------------------------------------------------------------------------------





 6944  0000000                   SET_VOLM4_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6945  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 13H
 6946  0000000                   	ENDM
 6947  0000000                   ;------------------------------------------------------------------------------
 6948  0000000                   SET_VOLM5_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6949  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 14H
 6950  0000000                   	ENDM
 6951  0000000                   ;------------------------------------------------------------------------------
 6952  0000000                   SET_VOLM6_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6953  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 15H
 6954  0000000                   	ENDM
 6955  0000000                   ;------------------------------------------------------------------------------
 6956  0000000                   SET_VOLM7_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6957  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 16H
 6958  0000000                   	ENDM
 6959  0000000                   ;------------------------------------------------------------------------------
 6960  0000000                   SET_VOLM8_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6961  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 17H
 6962  0000000                   	ENDM
 6963  0000000                   ;------------------------------------------------------------------------------
 6964  0000000                   SET_VOLM9_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6965  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 18H
 6966  0000000                   	ENDM
 6967  0000000                   ;------------------------------------------------------------------------------
 6968  0000000                   SET_VOLM10_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6969  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 19H
 6970  0000000                   	ENDM
 6971  0000000                   ;------------------------------------------------------------------------------
 6972  0000000                   SET_VOLM11_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6973  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1AH
 6974  0000000                   	ENDM
 6975  0000000                   ;------------------------------------------------------------------------------
 6976  0000000                   SET_VOLM12_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6977  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1BH
 6978  0000000                   	ENDM
 6979  0000000                   ;------------------------------------------------------------------------------
 6980  0000000                   SET_VOLM13_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6981  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1CH
 6982  0000000                   	ENDM
 6983  0000000                   ;------------------------------------------------------------------------------
 6984  0000000                   SET_VOLM14_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6985  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1DH
 6986  0000000                   	ENDM
 6987  0000000                   ;------------------------------------------------------------------------------
 6988  0000000                   SET_VOLM15_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6989  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1EH
 6990  0000000                   	ENDM
 6991  0000000                   ;------------------------------------------------------------------------------
 6992  0000000                   SET_VOLM16_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6993  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1FH
 6994  0000000                   	ENDM	
 6995  0000000                   .ENDIF ;WITH_MS
 6996  0000000                   ;------------------------------------------------------------------------------	
 6997  0000000                   SET_SP_VOLUME_RT MACRO VOLUME, CHANNEL_ID
 6998  0000000                   	JSR HWE_READY_PROC
 6999  0000000                   	PHP
 7000  0000000                   	SEI





 7001  0000000                   
 7002  0000000                   	HWE_SET_PARAMETER0 VOLUME
 7003  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_IMMEDIATELY
 7004  0000000                   
 7005  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_VOL
 7006  0000000                   
 7007  0000000                   	PLP
 7008  0000000                   	JSR CHK_HANDSHAKE_PROC
 7009  0000000                   	ENDM
 7010  0000000                   ;------------------------------------------------------------------------------	
 7011  0000000                   SET_SP_VOLUME_RAM_RT MACRO VOLUME_RAM, CHANNEL_ID_RAM
 7012  0000000                   	JSR HWE_READY_PROC
 7013  0000000                   	PHP
 7014  0000000                   	SEI
 7015  0000000                   
 7016  0000000                   	HWE_SET_PARAMETER0_RAM 	VOLUME_RAM
 7017  0000000                   	HWE_SET_PARAMETER1 		VOL_CHANGE_IMMEDIATELY
 7018  0000000                   
 7019  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_SET_VOL
 7020  0000000                   
 7021  0000000                   	PLP
 7022  0000000                   	JSR CHK_HANDSHAKE_PROC
 7023  0000000                   	ENDM
 7024  0000000                   ;------------------------------------------------------------------------------
 7025  0000000                   SET_SP_VOLUME_BY_RAM_RT MACRO VOLUME_RAM, CHANNEL_ID
 7026  0000000                   	JSR HWE_READY_PROC
 7027  0000000                   	PHP
 7028  0000000                   	SEI
 7029  0000000                   
 7030  0000000                   	HWE_SET_PARAMETER0_RAM 	VOLUME_RAM
 7031  0000000                   	HWE_SET_PARAMETER1 		VOL_CHANGE_IMMEDIATELY
 7032  0000000                   
 7033  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_VOL
 7034  0000000                   
 7035  0000000                   	PLP
 7036  0000000                   	JSR CHK_HANDSHAKE_PROC
 7037  0000000                   	ENDM
 7038  0000000                   ;------------------------------------------------------------------------------
 7039  0000000                   ;.IF (WITH_VOL_ADJ .EQ. 1)
 7040  0000000                   .IF (WITH_SP .EQ. 1)
 7041  0000000                   SET_VOL1_RT MACRO NEW_VOL
 7042  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 00H 
 7043  0000000                   	ENDM
 7044  0000000                   ;------------------------------------------------------------------------------
 7045  0000000                   SET_VOL2_RT MACRO NEW_VOL
 7046  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 01H 
 7047  0000000                   	ENDM
 7048  0000000                   .ENDIF ;WITH_SP
 7049  0000000                   ;------------------------------------------------------------------------------
 7050  0000000                   SET_VOL3_RT MACRO NEW_VOL
 7051  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 02H
 7052  0000000                   	ENDM
 7053  0000000                   ;------------------------------------------------------------------------------	
 7054  0000000                   .IF (WITH_MS .EQ. 1)
 7055  0000000                   SET_VOLM_RT MACRO NEW_VOL
 7056  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 02H 
 7057  0000000                   	ENDM





 7058  0000000                   ;------------------------------------------------------------------------------
 7059  0000000                   SET_VOLM1_RT MACRO NEW_MS_CHANNEL_VOL
 7060  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 10H
 7061  0000000                   	ENDM		
 7062  0000000                   ;------------------------------------------------------------------------------
 7063  0000000                   SET_VOLM2_RT MACRO NEW_MS_CHANNEL_VOL
 7064  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 11H
 7065  0000000                   	ENDM
 7066  0000000                   ;------------------------------------------------------------------------------
 7067  0000000                   SET_VOLM3_RT MACRO NEW_MS_CHANNEL_VOL
 7068  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 12H
 7069  0000000                   	ENDM
 7070  0000000                   ;------------------------------------------------------------------------------
 7071  0000000                   SET_VOLM4_RT MACRO NEW_MS_CHANNEL_VOL
 7072  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 13H
 7073  0000000                   	ENDM
 7074  0000000                   ;------------------------------------------------------------------------------
 7075  0000000                   SET_VOLM5_RT MACRO NEW_MS_CHANNEL_VOL
 7076  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 14H
 7077  0000000                   	ENDM
 7078  0000000                   ;------------------------------------------------------------------------------
 7079  0000000                   SET_VOLM6_RT MACRO NEW_MS_CHANNEL_VOL
 7080  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 15H
 7081  0000000                   	ENDM
 7082  0000000                   ;------------------------------------------------------------------------------
 7083  0000000                   SET_VOLM7_RT MACRO NEW_MS_CHANNEL_VOL
 7084  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 16H
 7085  0000000                   	ENDM
 7086  0000000                   ;------------------------------------------------------------------------------
 7087  0000000                   SET_VOLM8_RT MACRO NEW_MS_CHANNEL_VOL
 7088  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 17H
 7089  0000000                   	ENDM
 7090  0000000                   ;------------------------------------------------------------------------------
 7091  0000000                   SET_VOLM9_RT MACRO NEW_MS_CHANNEL_VOL
 7092  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 18H
 7093  0000000                   	ENDM
 7094  0000000                   ;------------------------------------------------------------------------------
 7095  0000000                   SET_VOLM10_RT MACRO NEW_MS_CHANNEL_VOL
 7096  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 19H
 7097  0000000                   	ENDM
 7098  0000000                   ;------------------------------------------------------------------------------
 7099  0000000                   SET_VOLM11_RT MACRO NEW_MS_CHANNEL_VOL
 7100  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1AH
 7101  0000000                   	ENDM
 7102  0000000                   ;------------------------------------------------------------------------------
 7103  0000000                   SET_VOLM12_RT MACRO NEW_MS_CHANNEL_VOL
 7104  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1BH
 7105  0000000                   	ENDM
 7106  0000000                   ;------------------------------------------------------------------------------
 7107  0000000                   SET_VOLM13_RT MACRO NEW_MS_CHANNEL_VOL
 7108  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1CH
 7109  0000000                   	ENDM
 7110  0000000                   ;------------------------------------------------------------------------------
 7111  0000000                   SET_VOLM14_RT MACRO NEW_MS_CHANNEL_VOL
 7112  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1DH
 7113  0000000                   	ENDM
 7114  0000000                   ;------------------------------------------------------------------------------





 7115  0000000                   SET_VOLM15_RT MACRO NEW_MS_CHANNEL_VOL
 7116  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1EH
 7117  0000000                   	ENDM
 7118  0000000                   ;------------------------------------------------------------------------------
 7119  0000000                   SET_VOLM16_RT MACRO NEW_MS_CHANNEL_VOL
 7120  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1FH
 7121  0000000                   	ENDM
 7122  0000000                   .ENDIF ;WITH_MS
 7123  0000000                   ;------------------------------------------------------------------------------
 7124  0000000                   .IF (WITH_SP .EQ. 1)
 7125  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7126  0000000                   SET_VOL1_RAM_RT MACRO NEW_VOL_RAM
 7127  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 00H 
 7128  0000000                   	ENDM
 7129  0000000                   	.ENDIF	;WITH_SP_NUM
 7130  0000000                   ;------------------------------------------------------------------------------
 7131  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7132  0000000                   SET_VOL2_RAM_RT MACRO NEW_VOL_RAM
 7133  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 01H
 7134  0000000                   	ENDM
 7135  0000000                   	.ENDIF	;WITH_SP_NUM
 7136  0000000                   .ENDIF ;WITH_SP
 7137  0000000                   ;------------------------------------------------------------------------------	
 7138  0000000                   SET_VOL3_RAM_RT MACRO NEW_VOL_RAM
 7139  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 02H
 7140  0000000                   	ENDM
 7141  0000000                   ;------------------------------------------------------------------------------	
 7142  0000000                   .IF (WITH_MS .EQ. 1)
 7143  0000000                   SET_VOLM_RAM_RT MACRO NEW_VOL_RAM
 7144  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 02H
 7145  0000000                   	ENDM
 7146  0000000                   ;------------------------------------------------------------------------------
 7147  0000000                   SET_VOLM1_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7148  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 10H
 7149  0000000                   	ENDM		
 7150  0000000                   ;------------------------------------------------------------------------------
 7151  0000000                   SET_VOLM2_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7152  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 11H
 7153  0000000                   	ENDM
 7154  0000000                   ;------------------------------------------------------------------------------
 7155  0000000                   SET_VOLM3_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7156  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 12H
 7157  0000000                   	ENDM
 7158  0000000                   ;------------------------------------------------------------------------------
 7159  0000000                   SET_VOLM4_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7160  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 13H
 7161  0000000                   	ENDM
 7162  0000000                   ;------------------------------------------------------------------------------
 7163  0000000                   SET_VOLM5_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7164  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 14H
 7165  0000000                   	ENDM
 7166  0000000                   ;------------------------------------------------------------------------------
 7167  0000000                   SET_VOLM6_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7168  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 15H
 7169  0000000                   	ENDM
 7170  0000000                   ;------------------------------------------------------------------------------
 7171  0000000                   SET_VOLM7_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM





 7172  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 16H
 7173  0000000                   	ENDM
 7174  0000000                   ;------------------------------------------------------------------------------
 7175  0000000                   SET_VOLM8_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7176  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 17H
 7177  0000000                   	ENDM
 7178  0000000                   ;------------------------------------------------------------------------------
 7179  0000000                   SET_VOLM9_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7180  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 18H
 7181  0000000                   	ENDM
 7182  0000000                   ;------------------------------------------------------------------------------
 7183  0000000                   SET_VOLM10_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7184  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 19H
 7185  0000000                   	ENDM
 7186  0000000                   ;------------------------------------------------------------------------------
 7187  0000000                   SET_VOLM11_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7188  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1AH
 7189  0000000                   	ENDM
 7190  0000000                   ;------------------------------------------------------------------------------
 7191  0000000                   SET_VOLM12_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7192  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1BH
 7193  0000000                   	ENDM
 7194  0000000                   ;------------------------------------------------------------------------------
 7195  0000000                   SET_VOLM13_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7196  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1CH
 7197  0000000                   	ENDM
 7198  0000000                   ;------------------------------------------------------------------------------
 7199  0000000                   SET_VOLM14_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7200  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1DH
 7201  0000000                   	ENDM
 7202  0000000                   ;------------------------------------------------------------------------------
 7203  0000000                   SET_VOLM15_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7204  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1EH
 7205  0000000                   	ENDM
 7206  0000000                   ;------------------------------------------------------------------------------
 7207  0000000                   SET_VOLM16_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7208  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1FH
 7209  0000000                   	ENDM	
 7210  0000000                   .ENDIF ;WITH_MS
 7211  0000000                   ;===============================================================================
 7212  0000000                   SET_SP_SAMPLE_RATE MACRO NEW_SR, CHANNEL_ID
 7213  0000000                   	JSR HWE_READY_PROC
 7214  0000000                   
 7215  0000000                   	PHP
 7216  0000000                   	SEI
 7217  0000000                   
 7218  0000000                   	HWE_SET_PARAMETER0 .LOW.NEW_SR
 7219  0000000                   	HWE_SET_PARAMETER1 .HIGH.NEW_SR
 7220  0000000                   
 7221  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_SR
 7222  0000000                   
 7223  0000000                   	PLP
 7224  0000000                   	JSR CHK_HANDSHAKE_PROC
 7225  0000000                   	ENDM
 7226  0000000                   ;------------------------------------------------------------------------------
 7227  0000000                   SET_SP_SAMPLE_RATE_RAM MACRO NEW_SR_RAM, CHANNEL_ID_RAM
 7228  0000000                   	JSR HWE_READY_PROC





 7229  0000000                   
 7230  0000000                   	PHP
 7231  0000000                   	SEI
 7232  0000000                   
 7233  0000000                   	HWE_SET_PARAMETER0_RAM NEW_SR_RAM
 7234  0000000                   	HWE_SET_PARAMETER1_RAM NEW_SR_RAM+1
 7235  0000000                   
 7236  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_SET_SR
 7237  0000000                   
 7238  0000000                   	PLP
 7239  0000000                   	JSR CHK_HANDSHAKE_PROC
 7240  0000000                   	ENDM
 7241  0000000                   ;------------------------------------------------------------------------------
 7242  0000000                   SET_SP_SAMPLE_RATE_BY_RAM MACRO NEW_SR_RAM, CHANNEL_ID
 7243  0000000                   	JSR HWE_READY_PROC
 7244  0000000                   
 7245  0000000                   	PHP
 7246  0000000                   	SEI
 7247  0000000                   	LDA	NEW_SR_RAM
 7248  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7249  0000000                   	LDA	NEW_SR_RAM+1
 7250  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7251  0000000                   
 7252  0000000                   	LDA #CHANNEL_ID
 7253  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7254  0000000                   	LDA #CMD_SET_SR
 7255  0000000                   	JSR SEND_CMD_PROC
 7256  0000000                   
 7257  0000000                   	PLP
 7258  0000000                   	JSR CHK_HANDSHAKE_PROC
 7259  0000000                   	ENDM
 7260  0000000                   ;------------------------------------------------------------------------------
 7261  0000000                   ;;.IF (WITH_SP .EQ. 1)
 7262  0000000                   ;;	.IF (WITH_SP_NUM .GT. 0)
 7263  0000000                   SET_SR1 MACRO NEW_SR
 7264  0000000                   	SET_SP_SAMPLE_RATE NEW_SR, 00H
 7265  0000000                   	ENDM
 7266  0000000                   ;;	.ENDIF
 7267  0000000                   ;------------------------------------------------------------------------------
 7268  0000000                   ;;	.IF (WITH_SP_NUM .GT. 1)
 7269  0000000                   SET_SR2 MACRO NEW_SR
 7270  0000000                   	SET_SP_SAMPLE_RATE NEW_SR, 01H
 7271  0000000                   	ENDM
 7272  0000000                   ;;	.ENDIF
 7273  0000000                   ;------------------------------------------------------------------------------
 7274  0000000                   ;;	.IF (WITH_SP_NUM .GT. 2)
 7275  0000000                   SET_SR3 MACRO NEW_SR
 7276  0000000                   	SET_SP_SAMPLE_RATE NEW_SR, 02H
 7277  0000000                   	ENDM
 7278  0000000                   ;;	.ENDIF
 7279  0000000                   ;;.ENDIF
 7280  0000000                   ;------------------------------------------------------------------------------
 7281  0000000                   SET_SR1_RAM MACRO NEW_SR
 7282  0000000                   	SET_SP_SAMPLE_RATE_BY_RAM NEW_SR, 00H
 7283  0000000                   	ENDM
 7284  0000000                   ;------------------------------------------------------------------------------
 7285  0000000                   SET_SR2_RAM MACRO NEW_SR





 7286  0000000                   	SET_SP_SAMPLE_RATE_BY_RAM NEW_SR, 01H
 7287  0000000                   	ENDM
 7288  0000000                   ;------------------------------------------------------------------------------
 7289  0000000                   SET_SR3_RAM MACRO NEW_SR
 7290  0000000                   	SET_SP_SAMPLE_RATE_BY_RAM NEW_SR, 02H
 7291  0000000                   	ENDM
 7292  0000000                   ;===============================================================================
 7293  0000000                   ;------------------------------------------------------------------------------
 7294  0000000                   HWE_SET_COMMAND	MACRO	CHID,COMMAND
 7295  0000000                   	LDA #CHID
 7296  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 7297  0000000                   	LDA #COMMAND
 7298  0000000                   	JSR SEND_CMD_PROC
 7299  0000000                   	ENDM
 7300  0000000                   ;---------------------------------------------------------------
 7301  0000000                   HWE_SET_COMMAND_RAM	MACRO	CHID_RAM,COMMAND
 7302  0000000                   	LDA CHID_RAM
 7303  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 7304  0000000                   	LDA #COMMAND
 7305  0000000                   	JSR SEND_CMD_PROC
 7306  0000000                   	ENDM
 7307  0000000                   ;---------------------------------------------------------------
 7308  0000000                   HWE_SET_PLAY_COMMAND MACRO
 7309  0000000                   	JSR SEND_PLAY_CMD_PROC
 7310  0000000                   	ENDM
 7311  0000000                   ;------------------------------------------------------------------------------
 7312  0000000                   HWE_SET_PARAMETER0	MACRO	PARAMETER0
 7313  0000000                   	LDA #PARAMETER0
 7314  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER 
 7315  0000000                   	ENDM
 7316  0000000                   ;---------------------------------------------------------------	
 7317  0000000                   HWE_SET_PARAMETER0_RAM	MACRO	PARAMETER0
 7318  0000000                   	LDA PARAMETER0
 7319  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER 
 7320  0000000                   	ENDM
 7321  0000000                   ;------------------------------------------------------------------------------
 7322  0000000                   HWE_SET_PARAMETER1	MACRO	PARAMETER1
 7323  0000000                   	LDA #PARAMETER1
 7324  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7325  0000000                   	ENDM
 7326  0000000                   ;---------------------------------------------------------------	
 7327  0000000                   HWE_SET_PARAMETER1_RAM	MACRO	PARAMETER1
 7328  0000000                   	LDA PARAMETER1
 7329  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7330  0000000                   	ENDM	
 7331  0000000                   ;------------------------------------------------------------------------------
 7332  0000000                   HWE_SET_PARAMETER2	MACRO	PARAMETER2
 7333  0000000                   	LDA #PARAMETER2
 7334  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+2
 7335  0000000                   	ENDM
 7336  0000000                   ;---------------------------------------------------------------	
 7337  0000000                   HWE_SET_PARAMETER2_RAM	MACRO	PARAMETER2
 7338  0000000                   	LDA PARAMETER2
 7339  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+2
 7340  0000000                   	ENDM
 7341  0000000                   ;------------------------------------------------------------------------------
 7342  0000000                   HWE_SET_PARAMETER3	MACRO	PARAMETER3





 7343  0000000                   	LDA #PARAMETER3
 7344  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7345  0000000                   	ENDM
 7346  0000000                   ;---------------------------------------------------------------	
 7347  0000000                   HWE_SET_PARAMETER3_RAM	MACRO	PARAMETER3
 7348  0000000                   	LDA PARAMETER3
 7349  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7350  0000000                   	ENDM
 7351  0000000                   ;===============================================================================
 7352  0000000                   HWE_CTRL_PAUSE_CHANNEL_RAM MACRO CHANNEL_RAM
 7353  0000000                   	LDA CHANNEL_RAM
 7354  0000000                   	CMP #FFH
 7355  0000000                   	BEQ 3
 7356  0000000                   	JMP NEXT_PAUSE
 7357  0000000                   	PAUSE_ALL	;ALL
 7358  0000000                   	JMP HWE_CTRL_PAUSE_CHANNEL_RAM_END
 7359  0000000                   NEXT_PAUSE:
 7360  0000000                   	PAUSE_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 7361  0000000                   HWE_CTRL_PAUSE_CHANNEL_RAM_END:
 7362  0000000                   	ENDM
 7363  0000000                   ;---------------------------------------------------------------	
 7364  0000000                   PAUSE_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 7365  0000000                   	JSR HWE_READY_PROC
 7366  0000000                   	PHP
 7367  0000000                   	SEI
 7368  0000000                   
 7369  0000000                   	LDA #CHANNEL_ID
 7370  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7371  0000000                   	LDA #CMD_PAUSE
 7372  0000000                   	JSR SEND_CMD_PROC
 7373  0000000                   
 7374  0000000                   	PLP
 7375  0000000                   	JSR CHK_HANDSHAKE_PROC
 7376  0000000                   	ENDM
 7377  0000000                   ;------------------------------------------------------------------------------
 7378  0000000                   PAUSE_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 7379  0000000                   	JSR HWE_READY_PROC
 7380  0000000                   	PHP
 7381  0000000                   	SEI
 7382  0000000                   
 7383  0000000                   	LDA CHANNEL_ID_RAM
 7384  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7385  0000000                   	LDA #CMD_PAUSE
 7386  0000000                   	JSR SEND_CMD_PROC
 7387  0000000                   
 7388  0000000                   	PLP
 7389  0000000                   	JSR CHK_HANDSHAKE_PROC
 7390  0000000                   	ENDM
 7391  0000000                   ;------------------------------------------------------------------------------
 7392  0000000                   .IF (WITH_SP .EQ. 1)
 7393  0000000                   ;.IF (WITH_SP_NUM .GT. 0)
 7394  0000000                   PAUSE_CH1 MACRO
 7395  0000000                   	PAUSE_PLAY_SP_CHANNEL 00H
 7396  0000000                   
 7397  0000000                   	ENDM
 7398  0000000                   ;.ENDIF
 7399  0000000                   ;------------------------------------------------------------------------------





 7400  0000000                   ;.IF (WITH_SP_NUM .GT. 1)
 7401  0000000                   PAUSE_CH2 MACRO
 7402  0000000                   	PAUSE_PLAY_SP_CHANNEL 01H
 7403  0000000                   
 7404  0000000                   	ENDM
 7405  0000000                   ;.ENDIF
 7406  0000000                   .ENDIF
 7407  0000000                   ;------------------------------------------------------------------------------
 7408  0000000                   PAUSE_CH3 MACRO
 7409  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7410  0000000                   	ENDM
 7411  0000000                   ;------------------------------------------------------------------------------	
 7412  0000000                   .IF (WITH_MS .EQ. 1)
 7413  0000000                   PAUSE_MS MACRO
 7414  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7415  0000000                   
 7416  0000000                   	ENDM
 7417  0000000                   .ENDIF
 7418  0000000                   ;------------------------------------------------------------------------------	
 7419  0000000                   PAUSE_PLAY_EVO_CHANNEL MACRO CHANNEL_ID
 7420  0000000                   .IF(WITH_EVO .EQ. 1)
 7421  0000000                   	JSR HWE_READY_PROC
 7422  0000000                   	PHP
 7423  0000000                   	SEI
 7424  0000000                   
 7425  0000000                   .IF	(CHIPSERIES = 'N589A')
 7426  0000000                   	LDA #(CHANNEL_ID+3)
 7427  0000000                   .ENDIF
 7428  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7429  0000000                   	LDA #(CHANNEL_ID+2)
 7430  0000000                   .ENDIF
 7431  0000000                   .IF	(CHIPSERIES = 'N589D')
 7432  0000000                   	LDA #(CHANNEL_ID+1)
 7433  0000000                   .ENDIF
 7434  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7435  0000000                   	LDA #CMD_PAUSE
 7436  0000000                   	JSR SEND_CMD_PROC
 7437  0000000                   
 7438  0000000                   	PLP
 7439  0000000                   	JSR CHK_HANDSHAKE_PROC
 7440  0000000                   .ENDIF
 7441  0000000                   	ENDM
 7442  0000000                   ;------------------------------------------------------------------------------
 7443  0000000                   PAUSE_EVO1 MACRO
 7444  0000000                   .IF	(CHIPSERIES = 'N589A')
 7445  0000000                   	PAUSE_PLAY_SP_CHANNEL 03H
 7446  0000000                   .ENDIF
 7447  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7448  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7449  0000000                   .ENDIF
 7450  0000000                   .IF	(CHIPSERIES = 'N589D')
 7451  0000000                   	PAUSE_PLAY_SP_CHANNEL 01H
 7452  0000000                   .ENDIF
 7453  0000000                   	ENDM
 7454  0000000                   ;------------------------------------------------------------------------------	
 7455  0000000                   PAUSE_EVO2 MACRO
 7456  0000000                   .IF	(CHIPSERIES = 'N589A')





 7457  0000000                   	PAUSE_PLAY_SP_CHANNEL 04H
 7458  0000000                   .ENDIF
 7459  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7460  0000000                   	PAUSE_PLAY_SP_CHANNEL 03H
 7461  0000000                   .ENDIF
 7462  0000000                   .IF	(CHIPSERIES = 'N589D')
 7463  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7464  0000000                   .ENDIF
 7465  0000000                   	ENDM
 7466  0000000                   ;------------------------------------------------------------------------------	
 7467  0000000                   PAUSE_EVO3 MACRO
 7468  0000000                   .IF	(CHIPSERIES = 'N589A')
 7469  0000000                   	PAUSE_PLAY_SP_CHANNEL 05H
 7470  0000000                   .ENDIF
 7471  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7472  0000000                   	PAUSE_PLAY_SP_CHANNEL 04H
 7473  0000000                   .ENDIF
 7474  0000000                   .IF	(CHIPSERIES = 'N589D')
 7475  0000000                   	PAUSE_PLAY_SP_CHANNEL 03H
 7476  0000000                   .ENDIF
 7477  0000000                   	ENDM
 7478  0000000                   ;------------------------------------------------------------------------------	
 7479  0000000                   PAUSE_ALL MACRO
 7480  0000000                   	.IF (WITH_SP .EQ. 1)
 7481  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7482  0000000                   	PAUSE_CH1
 7483  0000000                   	.ENDIF
 7484  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7485  0000000                   	PAUSE_CH2
 7486  0000000                   	.ENDIF
 7487  0000000                   	.IF (WITH_SP_NUM .GT. 2)
 7488  0000000                   	PAUSE_CH3
 7489  0000000                   	.ENDIF
 7490  0000000                   	.ENDIF
 7491  0000000                   	.IF (WITH_MS .EQ. 1)
 7492  0000000                   	PAUSE_MS
 7493  0000000                   	.ENDIF
 7494  0000000                   
 7495  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7496  0000000                   .	IFDEF WDTIMER
 7497  0000000                   	LDA #WDTC_CLR
 7498  0000000                   	STA !WDTC	
 7499  0000000                   	.ENDIF
 7500  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 7501  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 7502  0000000                   	.ENDIF  	
 7503  0000000                   
 7504  0000000                   	ENDM
 7505  0000000                   
 7506  0000000                   ;===============================================================================
 7507  0000000                   HWE_CTRL_RESUME_CHANNEL_RAM MACRO CHANNEL_RAM
 7508  0000000                   	LDA CHANNEL_RAM
 7509  0000000                   	CMP #FFH
 7510  0000000                   	BEQ 3
 7511  0000000                   	JMP NEXT_RESUME
 7512  0000000                   	RESUME_ALL	;ALL
 7513  0000000                   	JMP HWE_CTRL_RESUME_CHANNEL_RAM_END





 7514  0000000                   NEXT_RESUME:
 7515  0000000                   	RESUME_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 7516  0000000                   HWE_CTRL_RESUME_CHANNEL_RAM_END:
 7517  0000000                   	ENDM
 7518  0000000                   ;------------------------------------------------------------------------------	
 7519  0000000                   RESUME_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 7520  0000000                   	JSR HWE_READY_PROC
 7521  0000000                   
 7522  0000000                   	PHP
 7523  0000000                   	SEI
 7524  0000000                   	LDA #CHANNEL_ID
 7525  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7526  0000000                   	LDA #CMD_RESUME
 7527  0000000                   	JSR SEND_CMD_PROC
 7528  0000000                   
 7529  0000000                   	PLP
 7530  0000000                   	JSR CHK_HANDSHAKE_PROC
 7531  0000000                   	ENDM
 7532  0000000                   ;------------------------------------------------------------------------------
 7533  0000000                   RESUME_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID
 7534  0000000                   	JSR HWE_READY_PROC
 7535  0000000                   
 7536  0000000                   	PHP
 7537  0000000                   	SEI
 7538  0000000                   	LDA CHANNEL_ID
 7539  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7540  0000000                   	LDA #CMD_RESUME
 7541  0000000                   	JSR SEND_CMD_PROC
 7542  0000000                   
 7543  0000000                   	PLP
 7544  0000000                   	JSR CHK_HANDSHAKE_PROC
 7545  0000000                   	ENDM
 7546  0000000                   ;------------------------------------------------------------------------------
 7547  0000000                   .IF (WITH_SP .EQ. 1)
 7548  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7549  0000000                   RESUME_CH1 MACRO
 7550  0000000                   	RESUME_PLAY_SP_CHANNEL 00H
 7551  0000000                   
 7552  0000000                   	ENDM
 7553  0000000                   	.ENDIF
 7554  0000000                   ;------------------------------------------------------------------------------
 7555  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7556  0000000                   RESUME_CH2 MACRO
 7557  0000000                   	RESUME_PLAY_SP_CHANNEL 01H
 7558  0000000                   
 7559  0000000                   	ENDM
 7560  0000000                   	.ENDIF
 7561  0000000                   .ENDIF
 7562  0000000                   ;------------------------------------------------------------------------------
 7563  0000000                   .IF (WITH_MS .EQ. 1)
 7564  0000000                   RESUME_CH3 MACRO
 7565  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7566  0000000                   
 7567  0000000                   	ENDM
 7568  0000000                   	.ENDIF
 7569  0000000                   ;------------------------------------------------------------------------------	
 7570  0000000                   RESUME_MS MACRO





 7571  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7572  0000000                   	ENDM
 7573  0000000                   .ENDIF
 7574  0000000                   ;------------------------------------------------------------------------------	
 7575  0000000                   RESUME_PLAY_EVO_CHANNEL MACRO CHANNEL_ID
 7576  0000000                   .IF(WITH_EVO .EQ. 1)
 7577  0000000                   	JSR HWE_READY_PROC
 7578  0000000                   
 7579  0000000                   	PHP
 7580  0000000                   	SEI
 7581  0000000                   .IF	(CHIPSERIES = 'N589A')
 7582  0000000                   	LDA #(CHANNEL_ID+3)
 7583  0000000                   .ENDIF
 7584  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7585  0000000                   	LDA #(CHANNEL_ID+2)
 7586  0000000                   .ENDIF
 7587  0000000                   .IF	(CHIPSERIES = 'N589D')
 7588  0000000                   	LDA #(CHANNEL_ID+1)
 7589  0000000                   .ENDIF
 7590  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7591  0000000                   	LDA #CMD_RESUME
 7592  0000000                   	JSR SEND_CMD_PROC
 7593  0000000                   
 7594  0000000                   	PLP
 7595  0000000                   	JSR CHK_HANDSHAKE_PROC
 7596  0000000                   .ENDIF
 7597  0000000                   	ENDM
 7598  0000000                   ;------------------------------------------------------------------------------
 7599  0000000                   RESUME_EVO1 MACRO
 7600  0000000                   .IF	(CHIPSERIES = 'N589A')
 7601  0000000                   	RESUME_PLAY_SP_CHANNEL 03H
 7602  0000000                   .ENDIF
 7603  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7604  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7605  0000000                   .ENDIF
 7606  0000000                   .IF	(CHIPSERIES = 'N589D')
 7607  0000000                   	RESUME_PLAY_SP_CHANNEL 01H
 7608  0000000                   .ENDIF
 7609  0000000                   	ENDM
 7610  0000000                   ;------------------------------------------------------------------------------	
 7611  0000000                   RESUME_EVO2 MACRO
 7612  0000000                   .IF	(CHIPSERIES = 'N589A')
 7613  0000000                   	RESUME_PLAY_SP_CHANNEL 04H
 7614  0000000                   .ENDIF
 7615  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7616  0000000                   	RESUME_PLAY_SP_CHANNEL 03H
 7617  0000000                   .ENDIF
 7618  0000000                   .IF	(CHIPSERIES = 'N589D')
 7619  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7620  0000000                   .ENDIF
 7621  0000000                   	ENDM
 7622  0000000                   ;------------------------------------------------------------------------------	
 7623  0000000                   RESUME_EVO3 MACRO
 7624  0000000                   .IF	(CHIPSERIES = 'N589A')
 7625  0000000                   	RESUME_PLAY_SP_CHANNEL 05H
 7626  0000000                   .ENDIF
 7627  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')





 7628  0000000                   	RESUME_PLAY_SP_CHANNEL 04H
 7629  0000000                   .ENDIF
 7630  0000000                   .IF	(CHIPSERIES = 'N589D')
 7631  0000000                   	RESUME_PLAY_SP_CHANNEL 03H
 7632  0000000                   .ENDIF
 7633  0000000                   	ENDM
 7634  0000000                   ;------------------------------------------------------------------------------	
 7635  0000000                   RESUME_ALL MACRO
 7636  0000000                   	.IF (WITH_SP .EQ. 1)
 7637  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7638  0000000                   	RESUME_CH1
 7639  0000000                   	.ENDIF
 7640  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7641  0000000                   	RESUME_CH2
 7642  0000000                   	.ENDIF
 7643  0000000                   	.IF (WITH_SP_NUM .GT. 2)
 7644  0000000                   	RESUME_CH3
 7645  0000000                   	.ENDIF
 7646  0000000                   	.ENDIF ;WITH_SP
 7647  0000000                   	.IF (WITH_MS .EQ. 1)
 7648  0000000                   	RESUME_MS
 7649  0000000                   	.ENDIF ;WITH_MS
 7650  0000000                   	ENDM
 7651  0000000                   ;===============================================================================
 7652  0000000                   PLAY8 MACRO SENTENCE_START
 7653  0000000                   	PSF_RESPONSE_LIMIT
 7654  0000000                   	JSR HWE_READY_PROC
 7655  0000000                   	PHP
 7656  0000000                   	SEI
 7657  0000000                   
 7658  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7659  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7660  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7661  0000000                   	.ELSE
 7662  0000000                   	.ENDIF
 7663  0000000                   	LDA	#.LOW.SENTENCE_START
 7664  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7665  0000000                   	LDA	#.HIGH.SENTENCE_START
 7666  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7667  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7668  0000000                   
 7669  0000000                   	HWE_SET_PLAY_COMMAND
 7670  0000000                   
 7671  0000000                   	PLP
 7672  0000000                   	JSR CHK_HANDSHAKE_PROC
 7673  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7674  0000000                   	ENDM
 7675  0000000                   ;------------------------------------------------------------------------------
 7676  0000000                   PLAY8TAILON	MACRO	SENTENCE_START
 7677  0000000                   	PSF_RESPONSE_LIMIT
 7678  0000000                   	JSR HWE_READY_PROC
 7679  0000000                   	PHP
 7680  0000000                   	SEI
 7681  0000000                   
 7682  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7683  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7684  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3





 7685  0000000                   	.ELSE
 7686  0000000                   	.ENDIF
 7687  0000000                   	LDA	#.LOW.SENTENCE_START
 7688  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7689  0000000                   	LDA	#.HIGH.SENTENCE_START
 7690  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7691  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7692  0000000                   
 7693  0000000                   	HWE_SET_PLAY_COMMAND
 7694  0000000                   
 7695  0000000                   ;JSR PLAY_PHRASE_PROCEDURE
 7696  0000000                   ;EXTERN PRE_PLAY_PHRASE_TAIL_ON
 7697  0000000                   ;JSR PRE_PLAY_PHRASE_TAIL_ON
 7698  0000000                   
 7699  0000000                   	PLP
 7700  0000000                   	JSR CHK_HANDSHAKE_PROC
 7701  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7702  0000000                   	ENDM	
 7703  0000000                   ;------------------------------------------------------------------------------
 7704  0000000                   PLAY8TAILOFF	MACRO	SENTENCE_START
 7705  0000000                   	PSF_RESPONSE_LIMIT
 7706  0000000                   	JSR HWE_READY_PROC
 7707  0000000                   	PHP
 7708  0000000                   	SEI
 7709  0000000                   
 7710  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7711  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7712  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7713  0000000                   	.ELSE
 7714  0000000                   	.ENDIF
 7715  0000000                   	LDA	#.LOW.SENTENCE_START
 7716  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7717  0000000                   	LDA	#.HIGH.SENTENCE_START
 7718  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7719  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7720  0000000                   
 7721  0000000                   	HWE_SET_PLAY_COMMAND
 7722  0000000                   
 7723  0000000                   ;JSR PLAY_PHRASE_PROCEDURE
 7724  0000000                   ;EXTERN PRE_PLAY_PHRASE_TAIL_OFF
 7725  0000000                   ;JSR PRE_PLAY_PHRASE_TAIL_OFF
 7726  0000000                   
 7727  0000000                   	PLP
 7728  0000000                   	JSR CHK_HANDSHAKE_PROC
 7729  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7730  0000000                   	ENDM
 7731  0000000                   ;------------------------------------------------------------------------------
 7732  0000000                   .IF(WITH_PLAYE .EQ. 1)
 7733  0000000                   PLAY8E MACRO SENTENCE_START
 7734  0000000                   	PSF_RESPONSE_LIMIT
 7735  0000000                   	JSR HWE_READY_PROC
 7736  0000000                   	PHP
 7737  0000000                   	SEI
 7738  0000000                   
 7739  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7740  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7741  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3





 7742  0000000                   	.ELSE
 7743  0000000                   	.ENDIF
 7744  0000000                   	LDA	#.LOW.SENTENCE_START
 7745  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7746  0000000                   	LDA	#.HIGH.SENTENCE_START
 7747  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7748  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7749  0000000                   
 7750  0000000                   	HWE_SET_PLAY_COMMAND
 7751  0000000                   
 7752  0000000                   	PLP
 7753  0000000                   	JSR CHK_HANDSHAKE_PROC
 7754  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7755  0000000                   	ENDM
 7756  0000000                   ;------------------------------------------------------------------------------	
 7757  0000000                   PLAY8ETAILON	MACRO	SENTENCE_START
 7758  0000000                   	PSF_RESPONSE_LIMIT
 7759  0000000                   	JSR HWE_READY_PROC
 7760  0000000                   	PHP
 7761  0000000                   	SEI
 7762  0000000                   
 7763  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7764  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7765  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7766  0000000                   	.ELSE
 7767  0000000                   	.ENDIF
 7768  0000000                   	LDA	#.LOW.SENTENCE_START
 7769  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7770  0000000                   	LDA	#.HIGH.SENTENCE_START
 7771  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7772  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7773  0000000                   
 7774  0000000                   	HWE_SET_PLAY_COMMAND
 7775  0000000                   
 7776  0000000                   ;JSR PLAY_PHRASE_PROCEDURE
 7777  0000000                   ;EXTERN PRE_PLAY_PHRASE_TAIL_ON
 7778  0000000                   ;JSR PRE_PLAY_PHRASE_TAIL_ON
 7779  0000000                   
 7780  0000000                   	PLP
 7781  0000000                   	JSR CHK_HANDSHAKE_PROC
 7782  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7783  0000000                   	ENDM
 7784  0000000                   ;------------------------------------------------------------------------------
 7785  0000000                   PLAY8ETAILOFF	MACRO	SENTENCE_START
 7786  0000000                   	PSF_RESPONSE_LIMIT
 7787  0000000                   	JSR HWE_READY_PROC
 7788  0000000                   	PHP
 7789  0000000                   	SEI
 7790  0000000                   
 7791  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7792  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7793  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7794  0000000                   	.ELSE
 7795  0000000                   	.ENDIF
 7796  0000000                   	LDA	#.LOW.SENTENCE_START
 7797  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7798  0000000                   	LDA	#.HIGH.SENTENCE_START





 7799  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7800  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7801  0000000                   
 7802  0000000                   	HWE_SET_PLAY_COMMAND
 7803  0000000                   
 7804  0000000                   	PLP
 7805  0000000                   	JSR CHK_HANDSHAKE_PROC
 7806  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7807  0000000                   	ENDM
 7808  0000000                   .ENDIF
 7809  0000000                   ;===============================================================================
 7810  0000000                   ;===============================================================================
 7811  0000000                   .IF (WITH_PLAY_INDEX .EQ. 1)
 7812  0000000                   PLAY_INDEX MACRO	PLAYINDEX
 7813  0000000                   	PSF_RESPONSE_LIMIT
 7814  0000000                   	JSR HWE_READY_PROC
 7815  0000000                   	PHP
 7816  0000000                   	SEI
 7817  0000000                   
 7818  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7819  0000000                   
 7820  0000000                   	LDA #.LOW.PLAYINDEX
 7821  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7822  0000000                   	LDA #.HIGH.PLAYINDEX
 7823  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7824  0000000                   
 7825  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7826  0000000                   	PLP
 7827  0000000                   	JSR CHK_HANDSHAKE_PROC
 7828  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7829  0000000                   	ENDM
 7830  0000000                   ;------------------------------------------------------------------------------
 7831  0000000                   PLAY_INDEX_RAM MACRO	PLAYINDEX_RAM
 7832  0000000                   	PSF_RESPONSE_LIMIT
 7833  0000000                   	JSR HWE_READY_PROC
 7834  0000000                   	PHP
 7835  0000000                   	SEI
 7836  0000000                   
 7837  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7838  0000000                   
 7839  0000000                   	LDA PLAYINDEX_RAM
 7840  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7841  0000000                   	LDA PLAYINDEX_RAM+1
 7842  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7843  0000000                   
 7844  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7845  0000000                   	PLP
 7846  0000000                   	JSR CHK_HANDSHAKE_PROC
 7847  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7848  0000000                   	ENDM
 7849  0000000                   .ENDIF
 7850  0000000                   ;------------------------------------------------------------------------------
 7851  0000000                   PLAYW_INDEX MACRO	PLAYINDEX
 7852  0000000                   	PSF_RESPONSE_LIMIT
 7853  0000000                   	JSR HWE_READY_PROC
 7854  0000000                   	PHP
 7855  0000000                   	SEI





 7856  0000000                   
 7857  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7858  0000000                   
 7859  0000000                   	LDA #.LOW.PLAYINDEX
 7860  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7861  0000000                   	LDA #.HIGH.PLAYINDEX
 7862  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7863  0000000                   
 7864  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7865  0000000                   	PLP
 7866  0000000                   	JSR CHK_HANDSHAKE_PROC
 7867  0000000                   
 7868  0000000                   	LDA HWE_PLAYBYIDX_BA+4
 7869  0000000                   	STA PLAYBI_WAIT
 7870  0000000                   
 7871  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7872  0000000                   	ENDM
 7873  0000000                   ;------------------------------------------------------------------------------
 7874  0000000                   PLAYW_INDEX_RAM MACRO	PLAYINDEX_RAM
 7875  0000000                   	PSF_RESPONSE_LIMIT
 7876  0000000                   	JSR HWE_READY_PROC
 7877  0000000                   	PHP
 7878  0000000                   	SEI
 7879  0000000                   
 7880  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7881  0000000                   
 7882  0000000                   	LDA PLAYINDEX_RAM
 7883  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7884  0000000                   	LDA PLAYINDEX_RAM+1
 7885  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7886  0000000                   
 7887  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7888  0000000                   	PLP
 7889  0000000                   	JSR CHK_HANDSHAKE_PROC
 7890  0000000                   
 7891  0000000                   	LDA HWE_PLAYBYIDX_BA+4
 7892  0000000                   	STA PLAYBI_WAIT
 7893  0000000                   
 7894  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7895  0000000                   	ENDM
 7896  0000000                   ;------------------------------------------------------------------------------	
 7897  0000000                   PLAYBYINDEX_WAIT_LOOP MACRO
 7898  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 7899  0000000                   .ELSE
 7900  0000000                   .IF (WITH_PLAY_INDEX .EQ. 1)
 7901  0000000                   _xPLAYBI_WAIT_LOOP_#:
 7902  0000000                   .IFDEF WDTIMER
 7903  0000000                   	LDA #WDTC_CLR
 7904  0000000                   	STA !WDTC
 7905  0000000                   .ENDIF
 7906  0000000                   	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 0)
 7907  0000000                   	CAP_SENSOR_ACTION    
 7908  0000000                   	CAP_SENSOR_KEY_DETECTION
 7909  0000000                   	.ENDIF
 7910  0000000                   
 7911  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7912  0000000                   	N55P_EXPANDER_PROCESS





 7913  0000000                   	.ENDIF
 7914  0000000                   
 7915  0000000                   	REFRESH_STATUS
 7916  0000000                   	LDA <GLOBAL_PLAY
 7917  0000000                   	BIT <PLAYBI_WAIT
 7918  0000000                   	BNE _xPLAYBI_WAIT_LOOP_#
 7919  0000000                   
 7920  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H) 
 7921  0000000                   	LDA <PLAYBI_WAIT
 7922  0000000                   	BIT #3FH
 7923  0000000                   	BEQ _xPLAYBI_WAIT_END#
 7924  0000000                   	N55P_EXPANDER_PROCESS_RUNTIME
 7925  0000000                   _xPLAYBI_WAIT_END#:
 7926  0000000                   .ENDIF
 7927  0000000                   .ENDIF
 7928  0000000                   .ENDIF
 7929  0000000                   	ENDM
 7930  0000000                   .ENDIF
 7931  0000000                   ;===============================================================================
 7932  0000000                   HWE_CTRL_STOP_CHANNEL_RAM MACRO CHANNEL_RAM
 7933  0000000                   	LDA CHANNEL_RAM
 7934  0000000                   	CMP #FFH
 7935  0000000                   	BEQ 3
 7936  0000000                   	JMP NEXT_STOP_SP
 7937  0000000                   	STOP_PLAY_ALL	;ALL
 7938  0000000                   	JMP HWE_CTRL_STOP_CHANNEL_RAM_END
 7939  0000000                   NEXT_STOP_SP:
 7940  0000000                   	LDA CHANNEL_RAM
 7941  0000000                   	CMP #02H
 7942  0000000                   	BCC 3
 7943  0000000                   	JMP NEXT_STOP_MS
 7944  0000000                   	STOP_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 7945  0000000                   	JMP HWE_CTRL_STOP_CHANNEL_RAM_END
 7946  0000000                   NEXT_STOP_MS:
 7947  0000000                   	LDA CHANNEL_RAM
 7948  0000000                   	CMP #02H
 7949  0000000                   	BEQ 3
 7950  0000000                   	JMP NEXT_STOP_EVO
 7951  0000000                   	STOP_MS
 7952  0000000                   	JMP HWE_CTRL_STOP_CHANNEL_RAM_END
 7953  0000000                   NEXT_STOP_EVO:
 7954  0000000                   	LDA CHANNEL_RAM
 7955  0000000                   	SEC
 7956  0000000                   	SBC #3
 7957  0000000                   	STA CHANNEL_RAM
 7958  0000000                   	STOP_PLAY_EVO_CHANNEL_RAM CHANNEL_RAM
 7959  0000000                   HWE_CTRL_STOP_CHANNEL_RAM_END:
 7960  0000000                   
 7961  0000000                   	ENDM	
 7962  0000000                   ;------------------------------------------------------------------------------
 7963  0000000                   STOP_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 7964  0000000                   	LDA !HWENG
 7965  0000000                   	BIT #01H
 7966  0000000                   	BNE 3
 7967  0000000                   	JMP STOP_PLAY_SP_CHANNEL_NEXT#
 7968  0000000                   
 7969  0000000                   	JSR HWE_READY_PROC





 7970  0000000                   	LDY #CHANNEL_ID
 7971  0000000                   	EXTERN STOP_PLAY_Y_SP_API
 7972  0000000                   	JSR STOP_PLAY_Y_SP_API
 7973  0000000                   
 7974  0000000                   STOP_PLAY_SP_CHANNEL_NEXT#:	
 7975  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7976  0000000                   .IFDEF WDTIMER
 7977  0000000                   	LDA #WDTC_CLR
 7978  0000000                   	STA !WDTC
 7979  0000000                   .ENDIF ;WDTIMER
 7980  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 7981  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 7982  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED
 7983  0000000                   	ENDM
 7984  0000000                   ;------------------------------------------------------------------------------
 7985  0000000                   STOP_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 7986  0000000                   	LDA !HWENG
 7987  0000000                   	BIT #01H
 7988  0000000                   	BNE 3
 7989  0000000                   	JMP STOP_PLAY_SP_CHANNEL_RAM_NEXT#
 7990  0000000                   
 7991  0000000                   	JSR HWE_READY_PROC
 7992  0000000                   	LDY CHANNEL_ID_RAM
 7993  0000000                   	EXTERN STOP_PLAY_Y_SP_API
 7994  0000000                   	JSR STOP_PLAY_Y_SP_API
 7995  0000000                   
 7996  0000000                   STOP_PLAY_SP_CHANNEL_RAM_NEXT#:	
 7997  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7998  0000000                   .IFDEF WDTIMER
 7999  0000000                   	LDA #WDTC_CLR
 8000  0000000                   	STA !WDTC
 8001  0000000                   .ENDIF ;WDTIMER
 8002  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8003  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8004  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED
 8005  0000000                   	ENDM
 8006  0000000                   ;------------------------------------------------------------------------------	
 8007  0000000                   STOP_PLAY_EVO_CHANNEL MACRO CHANNEL_ID
 8008  0000000                   .IF(WITH_EVO .EQ. 1)
 8009  0000000                   	LDA !HWENG
 8010  0000000                   	BIT #01H
 8011  0000000                   	BNE 3
 8012  0000000                   	JMP STOP_PLAY_EVO_CHANNEL_NEXT#
 8013  0000000                   
 8014  0000000                   	JSR HWE_READY_PROC
 8015  0000000                   
 8016  0000000                   	LDY #CHANNEL_ID
 8017  0000000                   
 8018  0000000                   	EXTERN STOP_PLAY_Y_EVO_API
 8019  0000000                   	JSR STOP_PLAY_Y_EVO_API
 8020  0000000                   .ENDIF
 8021  0000000                   
 8022  0000000                   STOP_PLAY_EVO_CHANNEL_NEXT#:
 8023  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8024  0000000                   .IFDEF WDTIMER
 8025  0000000                   	LDA #WDTC_CLR
 8026  0000000                   	STA !WDTC





 8027  0000000                   .ENDIF ;WDTIMER
 8028  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8029  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8030  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED	
 8031  0000000                   	ENDM
 8032  0000000                   ;------------------------------------------------------------------------------
 8033  0000000                   STOP_PLAY_EVO_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 8034  0000000                   
 8035  0000000                   .IF(WITH_EVO .EQ. 1)
 8036  0000000                   	LDA !HWENG
 8037  0000000                   	BIT #01H
 8038  0000000                   	BNE 3
 8039  0000000                   	JMP STOP_PLAY_EVO_CHANNEL_RAM_NEXT#
 8040  0000000                   
 8041  0000000                   	JSR HWE_READY_PROC
 8042  0000000                   
 8043  0000000                   	LDY CHANNEL_ID_RAM
 8044  0000000                   	EXTERN STOP_PLAY_Y_EVO_API
 8045  0000000                   	JSR STOP_PLAY_Y_EVO_API
 8046  0000000                   .ENDIF
 8047  0000000                   
 8048  0000000                   STOP_PLAY_EVO_CHANNEL_RAM_NEXT#:
 8049  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8050  0000000                   .IFDEF WDTIMER
 8051  0000000                   	LDA #WDTC_CLR
 8052  0000000                   	STA !WDTC
 8053  0000000                   .ENDIF ;WDTIMER
 8054  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8055  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8056  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED
 8057  0000000                   	ENDM
 8058  0000000                   ;------------------------------------------------------------------------------
 8059  0000000                   .IF (WITH_SP .EQ. 1)
 8060  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 8061  0000000                   STOP_CH1 MACRO
 8062  0000000                   
 8063  0000000                   	STOP_PLAY_SP_CHANNEL 00H
 8064  0000000                   
 8065  0000000                   	ENDM
 8066  0000000                   	.ENDIF
 8067  0000000                   ;------------------------------------------------------------------------------
 8068  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 8069  0000000                   STOP_CH2 MACRO
 8070  0000000                   	STOP_PLAY_SP_CHANNEL 01H
 8071  0000000                   
 8072  0000000                   	ENDM
 8073  0000000                   	.ENDIF
 8074  0000000                   .ENDIF
 8075  0000000                   ;------------------------------------------------------------------------------
 8076  0000000                   STOP_CH3 MACRO
 8077  0000000                   	STOP_PLAY_SP_CHANNEL 02H
 8078  0000000                   	ENDM
 8079  0000000                   ;------------------------------------------------------------------------------	
 8080  0000000                   STOP_MS MACRO
 8081  0000000                   .IF (WITH_MS .EQ. 1)
 8082  0000000                   	STOP_PLAY_SP_CHANNEL 02H
 8083  0000000                   .ENDIF ;WITH_MS





 8084  0000000                   
 8085  0000000                   	ENDM
 8086  0000000                   ;------------------------------------------------------------------------------	
 8087  0000000                   STOP_PLAY_MS MACRO
 8088  0000000                   	PSF_RESPONSE_LIMIT
 8089  0000000                   	STOP_MS
 8090  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 8091  0000000                   	ENDM
 8092  0000000                   ;------------------------------------------------------------------------------
 8093  0000000                   STOP_EVO1 MACRO
 8094  0000000                   	STOP_PLAY_EVO_CHANNEL 00H
 8095  0000000                   
 8096  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8097  0000000                   .IFDEF WDTIMER
 8098  0000000                   	LDA #WDTC_CLR
 8099  0000000                   	STA !WDTC
 8100  0000000                   .ENDIF  
 8101  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8102  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8103  0000000                   .ENDIF 	
 8104  0000000                   	ENDM
 8105  0000000                   ;------------------------------------------------------------------------------	
 8106  0000000                   STOP_EVO2 MACRO
 8107  0000000                   	STOP_PLAY_EVO_CHANNEL 01H
 8108  0000000                   
 8109  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8110  0000000                   .IFDEF WDTIMER
 8111  0000000                   	LDA #WDTC_CLR
 8112  0000000                   	STA !WDTC
 8113  0000000                   .ENDIF  
 8114  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8115  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8116  0000000                   .ENDIF 
 8117  0000000                   	ENDM
 8118  0000000                   ;------------------------------------------------------------------------------	
 8119  0000000                   STOP_EVO3 MACRO
 8120  0000000                   	STOP_PLAY_EVO_CHANNEL 02H
 8121  0000000                   
 8122  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8123  0000000                   .IFDEF WDTIMER
 8124  0000000                   	LDA #WDTC_CLR
 8125  0000000                   	STA !WDTC
 8126  0000000                   .ENDIF  
 8127  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8128  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8129  0000000                   .ENDIF 
 8130  0000000                   	ENDM
 8131  0000000                   ;------------------------------------------------------------------------------	
 8132  0000000                   STOP_ALL_SP	MACRO
 8133  0000000                   	JSR HWE_READY_PROC
 8134  0000000                   	EXTERN STOP_ALL_SP_API
 8135  0000000                   	JSR STOP_ALL_SP_API
 8136  0000000                   	ENDM
 8137  0000000                   ;------------------------------------------------------------------------------	
 8138  0000000                   STOP_ALL MACRO
 8139  0000000                   	LDA !HWENG
 8140  0000000                   	BIT #01H





 8141  0000000                   	BNE 3
 8142  0000000                   	JMP END_STOP_ALL#
 8143  0000000                   
 8144  0000000                   	JSR HWE_READY_PROC
 8145  0000000                   	EXTERN STOP_PLAY_ALL_API
 8146  0000000                   	JSR STOP_PLAY_ALL_API
 8147  0000000                   END_STOP_ALL#:
 8148  0000000                   	ENDM
 8149  0000000                   ;------------------------------------------------------------------------------		
 8150  0000000                   STOP_PLAY_ALL MACRO
 8151  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 8152  0000000                   .ELSE
 8153  0000000                   	PSF_RESPONSE_LIMIT
 8154  0000000                   	STOP_ALL
 8155  0000000                   
 8156  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 8157  0000000                   .ENDIF
 8158  0000000                   	ENDM
 8159  0000000                   ;===============================================================================	
 8160  0000000                   MUTE_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 8161  0000000                   	JSR HWE_READY_PROC
 8162  0000000                   	PHP
 8163  0000000                   	SEI
 8164  0000000                   
 8165  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_MUTE
 8166  0000000                   
 8167  0000000                   	PLP
 8168  0000000                   	JSR CHK_HANDSHAKE_PROC
 8169  0000000                   	ENDM
 8170  0000000                   ;------------------------------------------------------------------------------	
 8171  0000000                   MUTE_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 8172  0000000                   	JSR HWE_READY_PROC
 8173  0000000                   	PHP
 8174  0000000                   	SEI
 8175  0000000                   
 8176  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_MUTE
 8177  0000000                   
 8178  0000000                   	PLP
 8179  0000000                   	JSR CHK_HANDSHAKE_PROC
 8180  0000000                   	ENDM
 8181  0000000                   ;------------------------------------------------------------------------------
 8182  0000000                   .IF (WITH_SP .EQ. 1)
 8183  0000000                   ;;	.IF (WITH_SP_NUM .GT. 0)
 8184  0000000                   MUTE_CH1 MACRO
 8185  0000000                   	MUTE_PLAY_SP_CHANNEL 00H
 8186  0000000                   	ENDM
 8187  0000000                   ;------------------------------------------------------------------------------	
 8188  0000000                   MUTE_CH2 MACRO
 8189  0000000                   	MUTE_PLAY_SP_CHANNEL 01H
 8190  0000000                   	ENDM
 8191  0000000                   .ENDIF ;WITH_SP
 8192  0000000                   ;------------------------------------------------------------------------------	
 8193  0000000                   MUTE_CH3 MACRO
 8194  0000000                   	MUTE_PLAY_SP_CHANNEL 02H
 8195  0000000                   	ENDM
 8196  0000000                   ;------------------------------------------------------------------------------	
 8197  0000000                   MUTE_MS MACRO





 8198  0000000                   	MUTE_PLAY_SP_CHANNEL 02H
 8199  0000000                   	ENDM
 8200  0000000                   ;===============================================================================	
 8201  0000000                   UNMUTE_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 8202  0000000                   	JSR HWE_READY_PROC
 8203  0000000                   	PHP
 8204  0000000                   	SEI
 8205  0000000                   
 8206  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_UNMUTE
 8207  0000000                   
 8208  0000000                   	PLP
 8209  0000000                   	JSR CHK_HANDSHAKE_PROC
 8210  0000000                   	ENDM
 8211  0000000                   ;------------------------------------------------------------------------------
 8212  0000000                   UNMUTE_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 8213  0000000                   	JSR HWE_READY_PROC
 8214  0000000                   	PHP
 8215  0000000                   	SEI
 8216  0000000                   
 8217  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_UNMUTE
 8218  0000000                   
 8219  0000000                   	PLP
 8220  0000000                   	JSR CHK_HANDSHAKE_PROC
 8221  0000000                   	ENDM
 8222  0000000                   ;------------------------------------------------------------------------------
 8223  0000000                   ;;.IF (WITH_SP .EQ. 1)
 8224  0000000                   ;;	.IF (WITH_SP_NUM .GT. 0)	
 8225  0000000                   UNMUTE_CH1 MACRO
 8226  0000000                   	UNMUTE_PLAY_SP_CHANNEL 00H
 8227  0000000                   
 8228  0000000                   	ENDM
 8229  0000000                   ;;	.ENDIF
 8230  0000000                   ;------------------------------------------------------------------------------	
 8231  0000000                   UNMUTE_CH2 MACRO
 8232  0000000                   	UNMUTE_PLAY_SP_CHANNEL 01H
 8233  0000000                   
 8234  0000000                   	ENDM
 8235  0000000                   ;------------------------------------------------------------------------------
 8236  0000000                   UNMUTE_CH3 MACRO
 8237  0000000                   	UNMUTE_PLAY_SP_CHANNEL 02H
 8238  0000000                   	ENDM
 8239  0000000                   ;------------------------------------------------------------------------------
 8240  0000000                   UNMUTE_MS MACRO
 8241  0000000                   	UNMUTE_PLAY_SP_CHANNEL 02H
 8242  0000000                   	ENDM
 8243  0000000                   ;;.ENDIF
 8244  0000000                   ;===============================================================================
 8245  0000000                   HWE_CTRL_GLOBAL_VOL_RAM MACRO ENABLE_RAM,CHANNEL_RAM
 8246  0000000                   	LDA ENABLE_RAM
 8247  0000000                   	CMP #01H
 8248  0000000                   	BEQ EN_GLOBAL_VOL#
 8249  0000000                   	EN_SP_EQU_VOL_RAM CHANNEL_RAM
 8250  0000000                   	JMP RETURN#
 8251  0000000                   EN_GLOBAL_VOL#:
 8252  0000000                   	DIS_SP_EQU_VOL_RAM CHANNEL_RAM
 8253  0000000                   RETURN#:
 8254  0000000                   	ENDM





 8255  0000000                   ;------------------------------------------------------------------------------
 8256  0000000                   HWE_CTRL_GLOBAL_VOLM_RAM MACRO ENABLE_RAM,CHANNEL_RAM
 8257  0000000                   	LDA ENABLE_RAM
 8258  0000000                   	CMP #01H
 8259  0000000                   	BEQ EN_GLOBAL_VOLM#
 8260  0000000                   	EN_GLOBALVOL_VOLMX_RAM CHANNEL_RAM
 8261  0000000                   	JMP RETURN#
 8262  0000000                   EN_GLOBAL_VOLM#:
 8263  0000000                   	DIS_GLOBALVOL_VOLMX_RAM CHANNEL_RAM
 8264  0000000                   RETURN#:
 8265  0000000                   	ENDM
 8266  0000000                   ;------------------------------------------------------------------------------
 8267  0000000                   DIS_SP_EQU_VOL MACRO CH_ID
 8268  0000000                   	JSR HWE_READY_PROC
 8269  0000000                   	PHP
 8270  0000000                   	SEI
 8271  0000000                   
 8272  0000000                   	HWE_SET_COMMAND CH_ID, CMD_EN_GLOBAL_VOL
 8273  0000000                   
 8274  0000000                   	PLP
 8275  0000000                   	JSR CHK_HANDSHAKE_PROC
 8276  0000000                   	ENDM
 8277  0000000                   ;------------------------------------------------------------------------------
 8278  0000000                   DIS_SP_EQU_VOL_RAM MACRO CH_ID_RAM
 8279  0000000                   	JSR HWE_READY_PROC
 8280  0000000                   	PHP
 8281  0000000                   	SEI
 8282  0000000                   
 8283  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_EN_GLOBAL_VOL
 8284  0000000                   
 8285  0000000                   	PLP
 8286  0000000                   	JSR CHK_HANDSHAKE_PROC
 8287  0000000                   	ENDM
 8288  0000000                   ;------------------------------------------------------------------------------
 8289  0000000                   EN_GLOBALVOL_VOL1 MACRO
 8290  0000000                   	DIS_SP_EQU_VOL 00H
 8291  0000000                   	ENDM
 8292  0000000                   ;------------------------------------------------------------------------------
 8293  0000000                   EN_GLOBALVOL_VOL2 MACRO
 8294  0000000                   	DIS_SP_EQU_VOL 01H
 8295  0000000                   	ENDM
 8296  0000000                   ;------------------------------------------------------------------------------
 8297  0000000                   EN_GLOBALVOL_VOL3 MACRO
 8298  0000000                   	DIS_SP_EQU_VOL 02H
 8299  0000000                   	ENDM
 8300  0000000                   ;------------------------------------------------------------------------------
 8301  0000000                   .IF (WITH_MS .EQ. 1)
 8302  0000000                   EN_GLOBALVOL_VOLM MACRO
 8303  0000000                   	DIS_SP_EQU_VOL 02H
 8304  0000000                   	ENDM
 8305  0000000                   ;------------------------------------------------------------------------------
 8306  0000000                   EN_GLOBAL_CHANNEL_VOLM MACRO CHANNEL
 8307  0000000                   	DIS_SP_EQU_VOL CHANNEL+10H
 8308  0000000                   	ENDM
 8309  0000000                   ;------------------------------------------------------------------------------
 8310  0000000                   EN_GLOBALVOL_VOLM1 MACRO
 8311  0000000                   	EN_GLOBALVOL_VOLMX 0001H





 8312  0000000                   	ENDM
 8313  0000000                   ;------------------------------------------------------------------------------
 8314  0000000                   EN_GLOBALVOL_VOLM2 MACRO
 8315  0000000                   	EN_GLOBALVOL_VOLMX 0002H
 8316  0000000                   	ENDM
 8317  0000000                   ;------------------------------------------------------------------------------
 8318  0000000                   EN_GLOBALVOL_VOLM3 MACRO
 8319  0000000                   	EN_GLOBALVOL_VOLMX 0004H
 8320  0000000                   	ENDM
 8321  0000000                   ;------------------------------------------------------------------------------	
 8322  0000000                   EN_GLOBALVOL_VOLM4 MACRO
 8323  0000000                   	EN_GLOBALVOL_VOLMX 0008H
 8324  0000000                   	ENDM
 8325  0000000                   ;------------------------------------------------------------------------------	
 8326  0000000                   EN_GLOBALVOL_VOLM5 MACRO
 8327  0000000                   	EN_GLOBALVOL_VOLMX 0010H
 8328  0000000                   	ENDM
 8329  0000000                   ;------------------------------------------------------------------------------	
 8330  0000000                   EN_GLOBALVOL_VOLM6 MACRO
 8331  0000000                   	EN_GLOBALVOL_VOLMX 0020H
 8332  0000000                   	ENDM
 8333  0000000                   ;------------------------------------------------------------------------------	
 8334  0000000                   EN_GLOBALVOL_VOLM7 MACRO
 8335  0000000                   	EN_GLOBALVOL_VOLMX 0040H
 8336  0000000                   	ENDM
 8337  0000000                   ;------------------------------------------------------------------------------	
 8338  0000000                   EN_GLOBALVOL_VOLM8 MACRO
 8339  0000000                   	EN_GLOBALVOL_VOLMX 0080H
 8340  0000000                   	ENDM
 8341  0000000                   ;------------------------------------------------------------------------------	
 8342  0000000                   EN_GLOBALVOL_VOLM9 MACRO
 8343  0000000                   	EN_GLOBALVOL_VOLMX 0100H
 8344  0000000                   	ENDM
 8345  0000000                   ;------------------------------------------------------------------------------	
 8346  0000000                   EN_GLOBALVOL_VOLM10 MACRO
 8347  0000000                   	EN_GLOBALVOL_VOLMX 0200H
 8348  0000000                   	ENDM
 8349  0000000                   ;------------------------------------------------------------------------------	
 8350  0000000                   EN_GLOBALVOL_VOLM11 MACRO
 8351  0000000                   	EN_GLOBALVOL_VOLMX 0400H
 8352  0000000                   	ENDM
 8353  0000000                   ;------------------------------------------------------------------------------	
 8354  0000000                   EN_GLOBALVOL_VOLM12 MACRO
 8355  0000000                   	EN_GLOBALVOL_VOLMX 0800H
 8356  0000000                   	ENDM
 8357  0000000                   ;------------------------------------------------------------------------------	
 8358  0000000                   EN_GLOBALVOL_VOLM13 MACRO
 8359  0000000                   	EN_GLOBALVOL_VOLMX 1000H
 8360  0000000                   	ENDM
 8361  0000000                   ;------------------------------------------------------------------------------	
 8362  0000000                   EN_GLOBALVOL_VOLM14 MACRO
 8363  0000000                   	EN_GLOBALVOL_VOLMX 2000H
 8364  0000000                   	ENDM
 8365  0000000                   ;------------------------------------------------------------------------------	
 8366  0000000                   EN_GLOBALVOL_VOLM15 MACRO
 8367  0000000                   	EN_GLOBALVOL_VOLMX 4000H
 8368  0000000                   	ENDM





 8369  0000000                   ;------------------------------------------------------------------------------	
 8370  0000000                   EN_GLOBALVOL_VOLM16 MACRO
 8371  0000000                   	EN_GLOBALVOL_VOLMX 8000H
 8372  0000000                   	ENDM
 8373  0000000                   ;------------------------------------------------------------------------------
 8374  0000000                   EN_GLOBALVOL_VOLMX MACRO MS_CH_FLAG
 8375  0000000                   
 8376  0000000                   	ENDM
 8377  0000000                   ;------------------------------------------------------------------------------
 8378  0000000                   EN_GLOBALVOL_VOLMX_RAM MACRO MS_CH_FLAG_RAM
 8379  0000000                   	JSR HWE_READY_PROC
 8380  0000000                   
 8381  0000000                   	PHP
 8382  0000000                   	SEI
 8383  0000000                   
 8384  0000000                   	LDA	MS_CH_FLAG_RAM
 8385  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8386  0000000                   	LDA	MS_CH_FLAG_RAM+1
 8387  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 8388  0000000                   
 8389  0000000                   	LDA #10H
 8390  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 8391  0000000                   	LDA #CMD_EN_GLOBAL_VOL
 8392  0000000                   	JSR SEND_CMD_PROC
 8393  0000000                   
 8394  0000000                   	PLP
 8395  0000000                   	JSR CHK_HANDSHAKE_PROC
 8396  0000000                   	ENDM
 8397  0000000                   .ENDIF ;WITH_MS
 8398  0000000                   ;===============================================================================		
 8399  0000000                   EN_SP_EQU_VOL MACRO CH_ID
 8400  0000000                   	JSR HWE_READY_PROC
 8401  0000000                   	PHP
 8402  0000000                   	SEI
 8403  0000000                   
 8404  0000000                   	HWE_SET_COMMAND CH_ID, CMD_DIS_GLOBAL_VOL
 8405  0000000                   
 8406  0000000                   	PLP
 8407  0000000                   	JSR CHK_HANDSHAKE_PROC
 8408  0000000                   	ENDM
 8409  0000000                   ;------------------------------------------------------------------------------
 8410  0000000                   EN_SP_EQU_VOL_RAM MACRO CH_ID_RAM
 8411  0000000                   	JSR HWE_READY_PROC
 8412  0000000                   	PHP
 8413  0000000                   	SEI
 8414  0000000                   
 8415  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_DIS_GLOBAL_VOL
 8416  0000000                   
 8417  0000000                   	PLP
 8418  0000000                   	JSR CHK_HANDSHAKE_PROC
 8419  0000000                   	ENDM
 8420  0000000                   ;------------------------------------------------------------------------------
 8421  0000000                   DIS_GLOBALVOL_VOL1 MACRO
 8422  0000000                   	EN_SP_EQU_VOL 00H
 8423  0000000                   	ENDM
 8424  0000000                   ;------------------------------------------------------------------------------
 8425  0000000                   DIS_GLOBALVOL_VOL2 MACRO





 8426  0000000                   	EN_SP_EQU_VOL 01H
 8427  0000000                   	ENDM
 8428  0000000                   ;------------------------------------------------------------------------------
 8429  0000000                   DIS_GLOBALVOL_VOL3 MACRO
 8430  0000000                   	EN_SP_EQU_VOL 02H
 8431  0000000                   	ENDM
 8432  0000000                   ;------------------------------------------------------------------------------
 8433  0000000                   .IF (WITH_MS .EQ. 1)
 8434  0000000                   DIS_GLOBALVOL_VOLM MACRO
 8435  0000000                   	EN_SP_EQU_VOL 02H
 8436  0000000                   	ENDM
 8437  0000000                   ;------------------------------------------------------------------------------
 8438  0000000                   DIS_GLOBAL_CHANNEL_VOLM MACRO CHANNEL
 8439  0000000                   	EN_SP_EQU_VOL CHANNEL+10H
 8440  0000000                   	ENDM
 8441  0000000                   ;------------------------------------------------------------------------------
 8442  0000000                   DIS_GLOBALVOL_VOLM1 MACRO
 8443  0000000                   	DIS_GLOBALVOL_VOLMX 0001H
 8444  0000000                   	ENDM
 8445  0000000                   ;------------------------------------------------------------------------------
 8446  0000000                   DIS_GLOBALVOL_VOLM2 MACRO
 8447  0000000                   	DIS_GLOBALVOL_VOLMX 0002H
 8448  0000000                   	ENDM
 8449  0000000                   ;------------------------------------------------------------------------------
 8450  0000000                   DIS_GLOBALVOL_VOLM3 MACRO
 8451  0000000                   	DIS_GLOBALVOL_VOLMX 0004H
 8452  0000000                   	ENDM
 8453  0000000                   ;------------------------------------------------------------------------------
 8454  0000000                   DIS_GLOBALVOL_VOLM4 MACRO
 8455  0000000                   	DIS_GLOBALVOL_VOLMX 0008H
 8456  0000000                   	ENDM
 8457  0000000                   ;------------------------------------------------------------------------------
 8458  0000000                   DIS_GLOBALVOL_VOLM5 MACRO
 8459  0000000                   	DIS_GLOBALVOL_VOLMX 0010H
 8460  0000000                   	ENDM
 8461  0000000                   ;------------------------------------------------------------------------------
 8462  0000000                   DIS_GLOBALVOL_VOLM6 MACRO
 8463  0000000                   	DIS_GLOBALVOL_VOLMX 0020H
 8464  0000000                   	ENDM
 8465  0000000                   ;------------------------------------------------------------------------------
 8466  0000000                   DIS_GLOBALVOL_VOLM7 MACRO
 8467  0000000                   	DIS_GLOBALVOL_VOLMX 0040H
 8468  0000000                   	ENDM
 8469  0000000                   ;------------------------------------------------------------------------------
 8470  0000000                   DIS_GLOBALVOL_VOLM8 MACRO
 8471  0000000                   	DIS_GLOBALVOL_VOLMX 0080H
 8472  0000000                   	ENDM
 8473  0000000                   ;------------------------------------------------------------------------------
 8474  0000000                   DIS_GLOBALVOL_VOLM9 MACRO
 8475  0000000                   	DIS_GLOBALVOL_VOLMX 0100H
 8476  0000000                   	ENDM
 8477  0000000                   ;------------------------------------------------------------------------------
 8478  0000000                   DIS_GLOBALVOL_VOLM10 MACRO
 8479  0000000                   	DIS_GLOBALVOL_VOLMX 0200H
 8480  0000000                   	ENDM
 8481  0000000                   ;------------------------------------------------------------------------------
 8482  0000000                   DIS_GLOBALVOL_VOLM11 MACRO





 8483  0000000                   	DIS_GLOBALVOL_VOLMX 0400H
 8484  0000000                   	ENDM
 8485  0000000                   ;------------------------------------------------------------------------------
 8486  0000000                   DIS_GLOBALVOL_VOLM12 MACRO
 8487  0000000                   	DIS_GLOBALVOL_VOLMX 0800H
 8488  0000000                   	ENDM
 8489  0000000                   ;------------------------------------------------------------------------------
 8490  0000000                   DIS_GLOBALVOL_VOLM13 MACRO
 8491  0000000                   	DIS_GLOBALVOL_VOLMX 1000H
 8492  0000000                   	ENDM
 8493  0000000                   ;------------------------------------------------------------------------------
 8494  0000000                   DIS_GLOBALVOL_VOLM14 MACRO
 8495  0000000                   	DIS_GLOBALVOL_VOLMX 2000H
 8496  0000000                   	ENDM
 8497  0000000                   ;------------------------------------------------------------------------------
 8498  0000000                   DIS_GLOBALVOL_VOLM15 MACRO
 8499  0000000                   	DIS_GLOBALVOL_VOLMX 4000H
 8500  0000000                   	ENDM
 8501  0000000                   ;------------------------------------------------------------------------------
 8502  0000000                   DIS_GLOBALVOL_VOLM16 MACRO
 8503  0000000                   	DIS_GLOBALVOL_VOLMX 8000H
 8504  0000000                   	ENDM
 8505  0000000                   ;------------------------------------------------------------------------------
 8506  0000000                   DIS_GLOBALVOL_VOLMX MACRO MS_CH_FLAG
 8507  0000000                   	JSR HWE_READY_PROC
 8508  0000000                   
 8509  0000000                   	PHP
 8510  0000000                   	SEI
 8511  0000000                   
 8512  0000000                   	LDA	#.LOW.MS_CH_FLAG
 8513  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8514  0000000                   	LDA	#.HIGH.MS_CH_FLAG
 8515  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 8516  0000000                   
 8517  0000000                   	LDA #10H
 8518  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 8519  0000000                   	LDA #CMD_DIS_GLOBAL_VOL
 8520  0000000                   	JSR SEND_CMD_PROC
 8521  0000000                   
 8522  0000000                   	PLP
 8523  0000000                   	JSR CHK_HANDSHAKE_PROC
 8524  0000000                   	ENDM
 8525  0000000                   ;------------------------------------------------------------------------------
 8526  0000000                   DIS_GLOBALVOL_VOLMX_RAM MACRO MS_CH_FLAG_RAM
 8527  0000000                   	JSR HWE_READY_PROC
 8528  0000000                   
 8529  0000000                   	PHP
 8530  0000000                   	SEI
 8531  0000000                   
 8532  0000000                   	LDA	MS_CH_FLAG_RAM
 8533  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8534  0000000                   	LDA	MS_CH_FLAG_RAM+1
 8535  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 8536  0000000                   
 8537  0000000                   	LDA #10H
 8538  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 8539  0000000                   	LDA #CMD_DIS_GLOBAL_VOL





 8540  0000000                   	JSR SEND_CMD_PROC
 8541  0000000                   
 8542  0000000                   	PLP
 8543  0000000                   	JSR CHK_HANDSHAKE_PROC
 8544  0000000                   	ENDM
 8545  0000000                   .ENDIF ;WITH MS
 8546  0000000                   ;===============================================================================
 8547  0000000                   HWE_CTRL_GLOBAL_SR_RAM MACRO ENABLE_RAM, CHANNEL_RAM
 8548  0000000                   	LDA ENABLE_RAM
 8549  0000000                   	CMP #01H
 8550  0000000                   	BNE 3
 8551  0000000                   	JMP EN_GLOBAL_SR#
 8552  0000000                   	DIS_GLOBALSR_SR_RAM CHANNEL_RAM
 8553  0000000                   	JMP RETURN#
 8554  0000000                   EN_GLOBAL_SR#:
 8555  0000000                   	EN_GLOBALSR_SR_RAM CHANNEL_RAM
 8556  0000000                   RETURN#:
 8557  0000000                   	ENDM
 8558  0000000                   ;------------------------------------------------------------------------------
 8559  0000000                   EN_GLOBALSR_SR MACRO CHANNEL_ID
 8560  0000000                   	JSR HWE_READY_PROC
 8561  0000000                   	PHP
 8562  0000000                   	SEI
 8563  0000000                   
 8564  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_EN_GLOBAL_SR
 8565  0000000                   
 8566  0000000                   	PLP
 8567  0000000                   	JSR CHK_HANDSHAKE_PROC
 8568  0000000                   	ENDM
 8569  0000000                   ;------------------------------------------------------------------------------
 8570  0000000                   EN_GLOBALSR_SR_RAM MACRO CHANNEL_ID_RAM
 8571  0000000                   	JSR HWE_READY_PROC
 8572  0000000                   	PHP
 8573  0000000                   	SEI
 8574  0000000                   
 8575  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_EN_GLOBAL_SR
 8576  0000000                   
 8577  0000000                   	PLP
 8578  0000000                   	JSR CHK_HANDSHAKE_PROC
 8579  0000000                   	ENDM
 8580  0000000                   ;------------------------------------------------------------------------------
 8581  0000000                   EN_GLOBALSR_SR1 MACRO
 8582  0000000                   	EN_GLOBALSR_SR 0H
 8583  0000000                   	ENDM
 8584  0000000                   ;------------------------------------------------------------------------------
 8585  0000000                   EN_GLOBALSR_SR2 MACRO
 8586  0000000                   	EN_GLOBALSR_SR 1H
 8587  0000000                   	ENDM
 8588  0000000                   ;------------------------------------------------------------------------------	
 8589  0000000                   EN_GLOBALSR_SR3 MACRO
 8590  0000000                   	EN_GLOBALSR_SR 2H
 8591  0000000                   	ENDM
 8592  0000000                   ;===============================================================================	
 8593  0000000                   DIS_GLOBALSR_SR MACRO CHANNEL_ID
 8594  0000000                   	JSR HWE_READY_PROC
 8595  0000000                   	PHP
 8596  0000000                   	SEI





 8597  0000000                   
 8598  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_DIS_GLOBAL_SR
 8599  0000000                   
 8600  0000000                   	PLP
 8601  0000000                   	JSR CHK_HANDSHAKE_PROC
 8602  0000000                   	ENDM
 8603  0000000                   ;------------------------------------------------------------------------------
 8604  0000000                   DIS_GLOBALSR_SR_RAM MACRO CHANNEL_ID_RAM
 8605  0000000                   	JSR HWE_READY_PROC
 8606  0000000                   	PHP
 8607  0000000                   	SEI
 8608  0000000                   
 8609  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_DIS_GLOBAL_SR
 8610  0000000                   
 8611  0000000                   	PLP
 8612  0000000                   	JSR CHK_HANDSHAKE_PROC
 8613  0000000                   	ENDM
 8614  0000000                   ;------------------------------------------------------------------------------
 8615  0000000                   DIS_GLOBALSR_SR1 MACRO
 8616  0000000                   	DIS_GLOBALSR_SR 00H
 8617  0000000                   	ENDM
 8618  0000000                   ;------------------------------------------------------------------------------
 8619  0000000                   DIS_GLOBALSR_SR2 MACRO
 8620  0000000                   	DIS_GLOBALSR_SR 01H
 8621  0000000                   	ENDM
 8622  0000000                   ;------------------------------------------------------------------------------	
 8623  0000000                   DIS_GLOBALSR_SR3 MACRO
 8624  0000000                   	DIS_GLOBALSR_SR 02H
 8625  0000000                   	ENDM
 8626  0000000                   ;==============================================================================
 8627  0000000                   ; Play In Reverse
 8628  0000000                   ;==============================================================================
 8629  0000000                   SET_PLAY_REVERSE MACRO CHANNEL_ID, ENABLE
 8630  0000000                   	JSR HWE_READY_PROC
 8631  0000000                   	PHP
 8632  0000000                   	SEI
 8633  0000000                   
 8634  0000000                   	LDA	#ENABLE
 8635  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8636  0000000                   	HWE_SET_COMMAND (CHANNEL_ID-1), CMD_PLAY_IN_REVERSE_SP
 8637  0000000                   
 8638  0000000                   	PLP
 8639  0000000                   	JSR CHK_HANDSHAKE_PROC
 8640  0000000                   	ENDM
 8641  0000000                   ;------------------------------------------------------------------------------	
 8642  0000000                   EN_PLAY_REVERSE MACRO CHANNEL_ID
 8643  0000000                   	SET_PLAY_REVERSE CHANNEL_ID, 1
 8644  0000000                   	ENDM
 8645  0000000                   ;------------------------------------------------------------------------------	
 8646  0000000                   DIS_PLAY_REVERSE MACRO CHANNEL_ID
 8647  0000000                   	SET_PLAY_REVERSE CHANNEL_ID, 2
 8648  0000000                   	ENDM
 8649  0000000                   ;==============================================================================
 8650  0000000                   ; Set instrument of specific MIDI channel
 8651  0000000                   ;==============================================================================
 8652  0000000                   EN_GLOBALINS_M MACRO
 8653  0000000                   	JSR HWE_READY_PROC





 8654  0000000                   	PHP
 8655  0000000                   	SEI
 8656  0000000                   
 8657  0000000                   	HWE_SET_COMMAND 2, CMD_EN_GLOBAL_INS
 8658  0000000                   
 8659  0000000                   	PLP
 8660  0000000                   	JSR CHK_HANDSHAKE_PROC
 8661  0000000                   	ENDM
 8662  0000000                   ;------------------------------------------------------------------------------
 8663  0000000                   DIS_GLOBALINS_M MACRO
 8664  0000000                   	JSR HWE_READY_PROC
 8665  0000000                   	PHP
 8666  0000000                   	SEI
 8667  0000000                   
 8668  0000000                   	HWE_SET_COMMAND 2, CMD_DIS_GLOBAL_INS
 8669  0000000                   
 8670  0000000                   	PLP
 8671  0000000                   	JSR CHK_HANDSHAKE_PROC
 8672  0000000                   	ENDM
 8673  0000000                   ;------------------------------------------------------------------------------	
 8674  0000000                   EN_GLOBLA_INS MACRO
 8675  0000000                   	EN_GLOBALINS_M
 8676  0000000                   	ENDM
 8677  0000000                   ;------------------------------------------------------------------------------	
 8678  0000000                   DIS_GLOBLA_INS MACRO
 8679  0000000                   	DIS_GLOBALINS_M
 8680  0000000                   	ENDM
 8681  0000000                   ;------------------------------------------------------------------------------		
 8682  0000000                   SET_CHANNEL_INSTRUMENT MACRO MIDI_CH_ID, INS_ID
 8683  0000000                   	.IF (WITH_MS .EQ. 1H)
 8684  0000000                   	JSR HWE_READY_PROC
 8685  0000000                   	PHP
 8686  0000000                   	SEI
 8687  0000000                   
 8688  0000000                   ;HWE_SET_PARAMETER0 MIDI_CH_ID
 8689  0000000                   ;HWE_SET_PARAMETER1 INS_ID
 8690  0000000                   	HWE_SET_PARAMETER0 INS_ID
 8691  0000000                   
 8692  0000000                   	HWE_SET_COMMAND (MIDI_CH_ID-1), CMD_SET_EVP
 8693  0000000                   
 8694  0000000                   	PLP
 8695  0000000                   	JSR CHK_HANDSHAKE_PROC
 8696  0000000                   
 8697  0000000                   	.ENDIF
 8698  0000000                   	ENDM
 8699  0000000                   ;------------------------------------------------------------------------------		
 8700  0000000                   SET_CHANNEL_INSTRUMENT_BY_RAM MACRO MIDI_CH_ID, INS_ID_RAM
 8701  0000000                   	.IF (WITH_MS .EQ. 1H)
 8702  0000000                   	JSR HWE_READY_PROC
 8703  0000000                   	PHP
 8704  0000000                   	SEI
 8705  0000000                   
 8706  0000000                   ;HWE_SET_PARAMETER0 MIDI_CH_ID
 8707  0000000                   ;HWE_SET_PARAMETER1 INS_ID
 8708  0000000                   	HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8709  0000000                   
 8710  0000000                   	HWE_SET_COMMAND (MIDI_CH_ID-1), CMD_SET_EVP





 8711  0000000                   
 8712  0000000                   	PLP
 8713  0000000                   	JSR CHK_HANDSHAKE_PROC
 8714  0000000                   
 8715  0000000                   	.ENDIF
 8716  0000000                   	ENDM
 8717  0000000                   ;------------------------------------------------------------------------------
 8718  0000000                   SET_CHANNEL_INSTRUMENT_RAM MACRO MIDI_CH_ID_RAM, INS_ID_RAM
 8719  0000000                   	JSR HWE_READY_PROC
 8720  0000000                   	PHP
 8721  0000000                   	SEI
 8722  0000000                   
 8723  0000000                   ;HWE_SET_PARAMETER1_RAM INS_ID_RAM
 8724  0000000                   	HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8725  0000000                   
 8726  0000000                   ;HWE_SET_COMMAND_RAM MIDI_CH_ID_RAM, CMD_SET_EVP
 8727  0000000                   
 8728  0000000                   	LDA MIDI_CH_ID_RAM
 8729  0000000                   	DEC A
 8730  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 8731  0000000                   	LDA #CMD_SET_EVP
 8732  0000000                   	JSR SEND_CMD_PROC
 8733  0000000                   
 8734  0000000                   	PLP
 8735  0000000                   	JSR CHK_HANDSHAKE_PROC
 8736  0000000                   
 8737  0000000                   	ENDM
 8738  0000000                   ;------------------------------------------------------------------------------	
 8739  0000000                   SET_EVP1 MACRO NEW_EVP
 8740  0000000                   	SET_CHANNEL_INSTRUMENT 01H, NEW_EVP
 8741  0000000                   ENDM
 8742  0000000                   ;------------------------------------------------------------------------------	
 8743  0000000                   SET_EVP2 MACRO NEW_EVP
 8744  0000000                   	SET_CHANNEL_INSTRUMENT 02H, NEW_EVP
 8745  0000000                   ENDM
 8746  0000000                   ;------------------------------------------------------------------------------	
 8747  0000000                   SET_EVP3 MACRO NEW_EVP
 8748  0000000                   	SET_CHANNEL_INSTRUMENT 03H, NEW_EVP
 8749  0000000                   ENDM
 8750  0000000                   ;------------------------------------------------------------------------------	
 8751  0000000                   SET_EVP4 MACRO NEW_EVP
 8752  0000000                   	SET_CHANNEL_INSTRUMENT 04H, NEW_EVP
 8753  0000000                   ENDM
 8754  0000000                   ;------------------------------------------------------------------------------	
 8755  0000000                   SET_EVP5 MACRO NEW_EVP
 8756  0000000                   	SET_CHANNEL_INSTRUMENT 05H, NEW_EVP
 8757  0000000                   ENDM
 8758  0000000                   ;------------------------------------------------------------------------------	
 8759  0000000                   SET_EVP6 MACRO NEW_EVP
 8760  0000000                   	SET_CHANNEL_INSTRUMENT 06H, NEW_EVP
 8761  0000000                   ENDM
 8762  0000000                   ;------------------------------------------------------------------------------	
 8763  0000000                   SET_EVP7 MACRO NEW_EVP
 8764  0000000                   	SET_CHANNEL_INSTRUMENT 07H, NEW_EVP
 8765  0000000                   ENDM
 8766  0000000                   ;------------------------------------------------------------------------------	
 8767  0000000                   SET_EVP8 MACRO NEW_EVP





 8768  0000000                   	SET_CHANNEL_INSTRUMENT 08H, NEW_EVP
 8769  0000000                   ENDM
 8770  0000000                   ;------------------------------------------------------------------------------	
 8771  0000000                   SET_EVP9 MACRO NEW_EVP
 8772  0000000                   	SET_CHANNEL_INSTRUMENT 09H, NEW_EVP
 8773  0000000                   ENDM
 8774  0000000                   ;------------------------------------------------------------------------------	
 8775  0000000                   SET_EVP10 MACRO NEW_EVP
 8776  0000000                   	SET_CHANNEL_INSTRUMENT 0AH, NEW_EVP
 8777  0000000                   ENDM
 8778  0000000                   ;------------------------------------------------------------------------------	
 8779  0000000                   SET_EVP11 MACRO NEW_EVP
 8780  0000000                   	SET_CHANNEL_INSTRUMENT 0BH, NEW_EVP
 8781  0000000                   ENDM
 8782  0000000                   ;------------------------------------------------------------------------------	
 8783  0000000                   SET_EVP12 MACRO NEW_EVP
 8784  0000000                   	SET_CHANNEL_INSTRUMENT 0CH, NEW_EVP
 8785  0000000                   ENDM
 8786  0000000                   ;------------------------------------------------------------------------------	
 8787  0000000                   SET_EVP13 MACRO NEW_EVP
 8788  0000000                   	SET_CHANNEL_INSTRUMENT 0DH, NEW_EVP
 8789  0000000                   ENDM
 8790  0000000                   ;------------------------------------------------------------------------------	
 8791  0000000                   SET_EVP14 MACRO NEW_EVP
 8792  0000000                   	SET_CHANNEL_INSTRUMENT 0EH, NEW_EVP
 8793  0000000                   ENDM
 8794  0000000                   ;------------------------------------------------------------------------------	
 8795  0000000                   SET_EVP15 MACRO NEW_EVP
 8796  0000000                   	SET_CHANNEL_INSTRUMENT 0FH, NEW_EVP
 8797  0000000                   ENDM
 8798  0000000                   ;------------------------------------------------------------------------------	
 8799  0000000                   SET_EVP16 MACRO NEW_EVP
 8800  0000000                   	SET_CHANNEL_INSTRUMENT 10H, NEW_EVP
 8801  0000000                   ENDM
 8802  0000000                   ;------------------------------------------------------------------------------	
 8803  0000000                   SET_EVP1_RAM MACRO NEW_EVP_RAM
 8804  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 01H, NEW_EVP_RAM
 8805  0000000                   ENDM
 8806  0000000                   ;------------------------------------------------------------------------------	
 8807  0000000                   SET_EVP2_RAM MACRO NEW_EVP_RAM
 8808  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 02H, NEW_EVP_RAM
 8809  0000000                   ENDM
 8810  0000000                   ;------------------------------------------------------------------------------	
 8811  0000000                   SET_EVP3_RAM MACRO NEW_EVP_RAM
 8812  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 03H, NEW_EVP_RAM
 8813  0000000                   ENDM
 8814  0000000                   ;------------------------------------------------------------------------------	
 8815  0000000                   SET_EVP4_RAM MACRO NEW_EVP_RAM
 8816  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 04H, NEW_EVP_RAM
 8817  0000000                   ENDM
 8818  0000000                   ;------------------------------------------------------------------------------	
 8819  0000000                   SET_EVP5_RAM MACRO NEW_EVP_RAM
 8820  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 05H, NEW_EVP_RAM
 8821  0000000                   ENDM
 8822  0000000                   ;------------------------------------------------------------------------------	
 8823  0000000                   SET_EVP6_RAM MACRO NEW_EVP_RAM
 8824  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 06H, NEW_EVP_RAM





 8825  0000000                   ENDM
 8826  0000000                   ;------------------------------------------------------------------------------	
 8827  0000000                   SET_EVP7_RAM MACRO NEW_EVP_RAM
 8828  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 07H, NEW_EVP_RAM
 8829  0000000                   ENDM
 8830  0000000                   ;------------------------------------------------------------------------------	
 8831  0000000                   SET_EVP8_RAM MACRO NEW_EVP_RAM
 8832  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 08H, NEW_EVP_RAM
 8833  0000000                   ENDM
 8834  0000000                   ;------------------------------------------------------------------------------	
 8835  0000000                   SET_EVP9_RAM MACRO NEW_EVP_RAM
 8836  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 09H, NEW_EVP_RAM
 8837  0000000                   ENDM
 8838  0000000                   ;------------------------------------------------------------------------------	
 8839  0000000                   SET_EVP10_RAM MACRO NEW_EVP_RAM
 8840  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0AH, NEW_EVP_RAM
 8841  0000000                   ENDM
 8842  0000000                   ;------------------------------------------------------------------------------	
 8843  0000000                   SET_EVP11_RAM MACRO NEW_EVP_RAM
 8844  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0BH, NEW_EVP_RAM
 8845  0000000                   ENDM
 8846  0000000                   ;------------------------------------------------------------------------------	
 8847  0000000                   SET_EVP12_RAM MACRO NEW_EVP_RAM
 8848  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0CH, NEW_EVP_RAM
 8849  0000000                   ENDM
 8850  0000000                   ;------------------------------------------------------------------------------	
 8851  0000000                   SET_EVP13_RAM MACRO NEW_EVP_RAM
 8852  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0DH, NEW_EVP_RAM
 8853  0000000                   ENDM
 8854  0000000                   ;------------------------------------------------------------------------------	
 8855  0000000                   SET_EVP14_RAM MACRO NEW_EVP_RAM
 8856  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0EH, NEW_EVP_RAM
 8857  0000000                   ENDM
 8858  0000000                   ;------------------------------------------------------------------------------	
 8859  0000000                   SET_EVP15_RAM MACRO NEW_EVP_RAM
 8860  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0FH, NEW_EVP_RAM
 8861  0000000                   ENDM
 8862  0000000                   ;------------------------------------------------------------------------------	
 8863  0000000                   SET_EVP16_RAM MACRO NEW_EVP_RAM
 8864  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 10H, NEW_EVP_RAM
 8865  0000000                   ENDM
 8866  0000000                   ;===============================================================================
 8867  0000000                   EXT_NOTE_ON MACRO CH_ID, MIDI_CH, NOTE, VELOCITY
 8868  0000000                   	JSR HWE_READY_PROC
 8869  0000000                   	PHP
 8870  0000000                   	SEI
 8871  0000000                   
 8872  0000000                   ;HWE_SET_PARAMETER0 INS_ID
 8873  0000000                   	HWE_SET_PARAMETER1 NOTE
 8874  0000000                   	HWE_SET_PARAMETER2 (MIDI_CH-1)
 8875  0000000                   	HWE_SET_PARAMETER3 VELOCITY
 8876  0000000                   
 8877  0000000                   	HWE_SET_COMMAND CH_ID, CMD_NOTE_ON
 8878  0000000                   
 8879  0000000                   	PLP
 8880  0000000                   	JSR CHK_HANDSHAKE_PROC
 8881  0000000                   	ENDM





 8882  0000000                   ;------------------------------------------------------------------------------
 8883  0000000                   EXT_NOTE_ON_RAM MACRO CH_ID_RAM, MIDI_CH_RAM, NOTE_RAM, VELOCITY_RAM
 8884  0000000                   	JSR HWE_READY_PROC
 8885  0000000                   	PHP
 8886  0000000                   	SEI
 8887  0000000                   
 8888  0000000                   ;HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8889  0000000                   	HWE_SET_PARAMETER1_RAM NOTE_RAM
 8890  0000000                   ;DEC MIDI_CH_RAM
 8891  0000000                   	HWE_SET_PARAMETER2_RAM MIDI_CH_RAM
 8892  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+2
 8893  0000000                   	HWE_SET_PARAMETER3_RAM VELOCITY_RAM
 8894  0000000                   
 8895  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_NOTE_ON
 8896  0000000                   
 8897  0000000                   	PLP
 8898  0000000                   	JSR CHK_HANDSHAKE_PROC
 8899  0000000                   	ENDM
 8900  0000000                   ;------------------------------------------------------------------------------
 8901  0000000                   EXT_NOTE_ON_WCF1 MACRO MIDI_CH, NOTE, VELOCITY
 8902  0000000                   	.IF (WITH_MS .EQ. 1H)
 8903  0000000                   	.IF (WITH_MS_EXT_MIDI .EQ. 1H)
 8904  0000000                   		PSF_RESPONSE_LIMIT
 8905  0000000                   		EXT_NOTE_ON 2, MIDI_CH, NOTE, VELOCITY
 8906  0000000                   
 8907  0000000                   		PSF_RESPONSE_LIMIT_RELEASE
 8908  0000000                   	.ENDIF
 8909  0000000                   	.ENDIF
 8910  0000000                   	ENDM
 8911  0000000                   ;------------------------------------------------------------------------------
 8912  0000000                   NOTE_ON MACRO MIDI_CH, NOTE, VELOCITY
 8913  0000000                   	EXT_NOTE_ON 2, MIDI_CH, NOTE, VELOCITY
 8914  0000000                   	ENDM
 8915  0000000                   ;===============================================================================
 8916  0000000                   EXT_NOTE_OFF MACRO CHANNEL_ID, MIDI_CH, NOTE
 8917  0000000                   	JSR HWE_READY_PROC
 8918  0000000                   	PHP
 8919  0000000                   	SEI
 8920  0000000                   
 8921  0000000                   ;HWE_SET_PARAMETER0 INS_ID
 8922  0000000                   	HWE_SET_PARAMETER1 NOTE
 8923  0000000                   	HWE_SET_PARAMETER2 (MIDI_CH-1)
 8924  0000000                   
 8925  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_NOTE_OFF
 8926  0000000                   
 8927  0000000                   	PLP
 8928  0000000                   	JSR CHK_HANDSHAKE_PROC
 8929  0000000                   	ENDM
 8930  0000000                   ;------------------------------------------------------------------------------
 8931  0000000                   EXT_NOTE_OFF_RAM MACRO CH_ID_RAM, MIDI_CH_RAM, NOTE_RAM
 8932  0000000                   	JSR HWE_READY_PROC
 8933  0000000                   	PHP
 8934  0000000                   	SEI
 8935  0000000                   
 8936  0000000                   ;HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8937  0000000                   	HWE_SET_PARAMETER1_RAM NOTE_RAM
 8938  0000000                   	HWE_SET_PARAMETER2_RAM MIDI_CH_RAM





 8939  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+2
 8940  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_NOTE_OFF
 8941  0000000                   
 8942  0000000                   	PLP
 8943  0000000                   	JSR CHK_HANDSHAKE_PROC
 8944  0000000                   	ENDM
 8945  0000000                   ;------------------------------------------------------------------------------
 8946  0000000                   EXT_NOTE_OFF_WCF1 MACRO MIDI_CH,NOTE
 8947  0000000                   	.IF (WITH_MS .EQ. 1H)
 8948  0000000                   	.IF (WITH_MS_EXT_MIDI .EQ. 1H)
 8949  0000000                   		PSF_RESPONSE_LIMIT
 8950  0000000                   		EXT_NOTE_OFF 2, MIDI_CH, NOTE
 8951  0000000                   
 8952  0000000                   		PSF_RESPONSE_LIMIT_RELEASE
 8953  0000000                   	.ENDIF
 8954  0000000                   	.ENDIF
 8955  0000000                   	ENDM
 8956  0000000                   ;------------------------------------------------------------------------------
 8957  0000000                   NOTE_OFF MACRO MIDI_CH,NOTE
 8958  0000000                   	EXT_NOTE_OFF 2, MIDI_CH, NOTE
 8959  0000000                   	ENDM
 8960  0000000                   ;===============================================================================
 8961  0000000                   SET_EXT_NOTE_VOL MACRO MIDI_CH, VOLUME
 8962  0000000                   	JSR HWE_READY_PROC
 8963  0000000                   	PHP
 8964  0000000                   	SEI
 8965  0000000                   
 8966  0000000                   	HWE_SET_PARAMETER0 VOLUME
 8967  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_IMMEDIATELY
 8968  0000000                   
 8969  0000000                   	HWE_SET_COMMAND (MIDI_CH-1)+10H, CMD_EXT_NOTE_VOL
 8970  0000000                   
 8971  0000000                   	PLP
 8972  0000000                   	JSR CHK_HANDSHAKE_PROC
 8973  0000000                   	ENDM
 8974  0000000                   ;------------------------------------------------------------------------------
 8975  0000000                   SET_EXT_NOTE_VOL_RAM MACRO MIDI_CH, VOLUME_RAM
 8976  0000000                   	JSR HWE_READY_PROC
 8977  0000000                   	PHP
 8978  0000000                   	SEI
 8979  0000000                   
 8980  0000000                   	HWE_SET_PARAMETER0_RAM VOLUME_RAM
 8981  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_IMMEDIATELY
 8982  0000000                   
 8983  0000000                   	HWE_SET_COMMAND (MIDI_CH-1)+10H, CMD_EXT_NOTE_VOL
 8984  0000000                   
 8985  0000000                   	PLP
 8986  0000000                   	JSR CHK_HANDSHAKE_PROC
 8987  0000000                   	ENDM
 8988  0000000                   ;===============================================================================
 8989  0000000                   CHK_EXT_NOTE_BUSY MACRO
 8990  0000000                   
 8991  0000000                   	JSR HWE_READY_PROC
 8992  0000000                   	PHP
 8993  0000000                   	SEI
 8994  0000000                   	HWE_SET_PARAMETER0 0		; clear var
 8995  0000000                   	HWE_SET_COMMAND 2H, CMD_CHK_EXT_NOTE_BUSY





 8996  0000000                   	PLP
 8997  0000000                   	JSR CHK_HANDSHAKE_PROC
 8998  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER 
 8999  0000000                   	ENDM
 9000  0000000                   ;------------------------------------------------------------------------------
 9001  0000000                   CHK_EXT_NOTE_BUSY_RAM MACRO NOTEBUSYNUM
 9002  0000000                   
 9003  0000000                   	JSR HWE_READY_PROC
 9004  0000000                   	PHP
 9005  0000000                   	SEI
 9006  0000000                   	HWE_SET_PARAMETER0 0		; clear var
 9007  0000000                   	HWE_SET_COMMAND 2H, CMD_CHK_EXT_NOTE_BUSY
 9008  0000000                   	PLP
 9009  0000000                   	JSR CHK_HANDSHAKE_PROC
 9010  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER 
 9011  0000000                   	STA NOTEBUSYNUM
 9012  0000000                   	ENDM
 9013  0000000                   ;===============================================================================
 9014  0000000                   SET_TEMPO MACRO DT_DEC_AMOUNT,DT_DEC_FRACTION
 9015  0000000                   	JSR HWE_READY_PROC
 9016  0000000                   	PHP
 9017  0000000                   	SEI
 9018  0000000                   
 9019  0000000                   	HWE_SET_PARAMETER0 DT_DEC_FRACTION
 9020  0000000                   	HWE_SET_PARAMETER1 DT_DEC_AMOUNT
 9021  0000000                   
 9022  0000000                   	HWE_SET_COMMAND 2, CMD_SET_TEMPO
 9023  0000000                   
 9024  0000000                   	PLP
 9025  0000000                   	JSR CHK_HANDSHAKE_PROC
 9026  0000000                   	ENDM
 9027  0000000                   ;------------------------------------------------------------------------------	
 9028  0000000                   SET_TEMPO_BY_RAM MACRO DT_DEC_AMOUNT_RAM, DT_DEC_FRACTION_RAM
 9029  0000000                   	JSR HWE_READY_PROC
 9030  0000000                   	PHP
 9031  0000000                   	SEI
 9032  0000000                   
 9033  0000000                   	HWE_SET_PARAMETER0_RAM DT_DEC_FRACTION_RAM
 9034  0000000                   	HWE_SET_PARAMETER1_RAM DT_DEC_AMOUNT_RAM
 9035  0000000                   
 9036  0000000                   	HWE_SET_COMMAND 2, CMD_SET_TEMPO
 9037  0000000                   
 9038  0000000                   	PLP
 9039  0000000                   	JSR CHK_HANDSHAKE_PROC
 9040  0000000                   	ENDM
 9041  0000000                   ;------------------------------------------------------------------------------	
 9042  0000000                   SET_TEMPO_RAM MACRO DT_DEC_AMOUNT_RAM
 9043  0000000                   ; RAM:YYYYYXXX(8-bits)  YYYYY³fraction  XXX³integer
 9044  0000000                   	JSR HWE_READY_PROC
 9045  0000000                   	PHP
 9046  0000000                   	SEI
 9047  0000000                   
 9048  0000000                   	LDA	DT_DEC_AMOUNT_RAM
 9049  0000000                   	LSR A
 9050  0000000                   	LSR A
 9051  0000000                   	LSR A
 9052  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER





 9053  0000000                   
 9054  0000000                   	LDA	DT_DEC_AMOUNT_RAM
 9055  0000000                   	AND #7
 9056  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 9057  0000000                   
 9058  0000000                   	HWE_SET_COMMAND 2, CMD_SET_TEMPO
 9059  0000000                   
 9060  0000000                   	PLP
 9061  0000000                   	JSR CHK_HANDSHAKE_PROC
 9062  0000000                   	ENDM
 9063  0000000                   ;==============================================================================
 9064  0000000                   ; Set pitch offset
 9065  0000000                   ;==============================================================================
 9066  0000000                   SET_PITCH_OFFSET MACRO PITCH_OFFSET
 9067  0000000                   ; PITCH_OFFSET[7]: 	= 0 ¡÷ pitch shift up. = 1 ¡÷ pitch shift down
 9068  0000000                   	SET_PITCH_OFFSET_M1 PITCH_OFFSET
 9069  0000000                   	ENDM
 9070  0000000                   ;------------------------------------------------------------------------------
 9071  0000000                   SET_PITCH_OFFSET_RAM MACRO PITCH_OFFSET_RAM	
 9072  0000000                   	SET_PITCH_OFFSET_RAM_M1 PITCH_OFFSET_RAM	
 9073  0000000                   	ENDM
 9074  0000000                   ;------------------------------------------------------------------------------	
 9075  0000000                   SET_PITCH_OFFSET_M1 MACRO PITCH_OFFSET
 9076  0000000                   	JSR HWE_READY_PROC
 9077  0000000                   	PHP
 9078  0000000                   	SEI
 9079  0000000                   
 9080  0000000                   	HWE_SET_PARAMETER0 PITCH_OFFSET
 9081  0000000                   	HWE_SET_PARAMETER1 1				; Pitch offset value is MSB
 9082  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9083  0000000                   
 9084  0000000                   	PLP
 9085  0000000                   	JSR CHK_HANDSHAKE_PROC
 9086  0000000                   	ENDM
 9087  0000000                   ;------------------------------------------------------------------------------	
 9088  0000000                   SET_PITCH_OFFSET_RAM_M1 MACRO PITCH_OFFSET_RAM
 9089  0000000                   	JSR HWE_READY_PROC
 9090  0000000                   	PHP
 9091  0000000                   	SEI
 9092  0000000                   
 9093  0000000                   	HWE_SET_PARAMETER0_RAM PITCH_OFFSET_RAM
 9094  0000000                   	HWE_SET_PARAMETER1 1				; Pitch offset value is MSB
 9095  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9096  0000000                   
 9097  0000000                   	PLP
 9098  0000000                   	JSR CHK_HANDSHAKE_PROC
 9099  0000000                   	ENDM
 9100  0000000                   ;------------------------------------------------------------------------------	
 9101  0000000                   SET_PITCH_OFFSET_M2 MACRO PITCH_OFFSET
 9102  0000000                   	JSR HWE_READY_PROC
 9103  0000000                   	PHP
 9104  0000000                   	SEI
 9105  0000000                   
 9106  0000000                   	HWE_SET_PARAMETER0 PITCH_OFFSET
 9107  0000000                   	HWE_SET_PARAMETER1 0				; Pitch offset value is 2's complement
 9108  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9109  0000000                   





 9110  0000000                   	PLP
 9111  0000000                   	JSR CHK_HANDSHAKE_PROC
 9112  0000000                   	ENDM
 9113  0000000                   ;------------------------------------------------------------------------------	
 9114  0000000                   SET_PITCH_OFFSET_RAM_M2 MACRO PITCH_OFFSET_RAM
 9115  0000000                   	JSR HWE_READY_PROC
 9116  0000000                   	PHP
 9117  0000000                   	SEI
 9118  0000000                   
 9119  0000000                   	HWE_SET_PARAMETER0_RAM PITCH_OFFSET_RAM
 9120  0000000                   	HWE_SET_PARAMETER1 0				; Pitch offset value is 2's complement
 9121  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9122  0000000                   
 9123  0000000                   	PLP
 9124  0000000                   	JSR CHK_HANDSHAKE_PROC
 9125  0000000                   	ENDM
 9126  0000000                   ;------------------------------------------------------------------------------	
 9127  0000000                   EN_GLOBLA_PITCH_OFFSET MACRO
 9128  0000000                   	JSR HWE_READY_PROC
 9129  0000000                   	PHP
 9130  0000000                   	SEI
 9131  0000000                   
 9132  0000000                   	HWE_SET_COMMAND 2, CMD_EN_GLOBAL_PITCH_OFFSET
 9133  0000000                   
 9134  0000000                   	PLP
 9135  0000000                   	JSR CHK_HANDSHAKE_PROC
 9136  0000000                   	ENDM
 9137  0000000                   ;------------------------------------------------------------------------------	
 9138  0000000                   DIS_GLOBLA_PITCH_OFFSET MACRO
 9139  0000000                   	JSR HWE_READY_PROC
 9140  0000000                   	PHP
 9141  0000000                   	SEI
 9142  0000000                   
 9143  0000000                   	HWE_SET_COMMAND 2, CMD_DIS_GLOBAL_PITCH_OFFSET
 9144  0000000                   
 9145  0000000                   	PLP
 9146  0000000                   	JSR CHK_HANDSHAKE_PROC
 9147  0000000                   	ENDM
 9148  0000000                   ;==============================================================================
 9149  0000000                   ; Enable/Disable vibrato
 9150  0000000                   ;==============================================================================
 9151  0000000                   HWE_CTRL_VIBRATO_RAM MACRO ENABLE_RAM
 9152  0000000                   	LDA ENABLE_RAM
 9153  0000000                   	CMP #01H
 9154  0000000                   	BNE 3
 9155  0000000                   	JMP EN_VIBRATO#
 9156  0000000                   	DIS_VIBRATO
 9157  0000000                   	JMP RETURN#
 9158  0000000                   EN_VIBRATO#:
 9159  0000000                   	EN_VIBRATO
 9160  0000000                   RETURN#:
 9161  0000000                   	ENDM
 9162  0000000                   ;------------------------------------------------------------------------------
 9163  0000000                   .IF (WITH_VIBRATO .EQ. 1)
 9164  0000000                   EN_VIBRATO MACRO
 9165  0000000                   	JSR HWE_READY_PROC
 9166  0000000                   	PHP





 9167  0000000                   	SEI
 9168  0000000                   
 9169  0000000                   	LDA #2
 9170  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9171  0000000                   	LDA #CMD_EN_VIBRATO
 9172  0000000                   	JSR SEND_CMD_PROC
 9173  0000000                   
 9174  0000000                   	PLP
 9175  0000000                   	JSR CHK_HANDSHAKE_PROC
 9176  0000000                   	ENDM
 9177  0000000                   ;------------------------------------------------------------------------------
 9178  0000000                   DIS_VIBRATO MACRO
 9179  0000000                   	JSR HWE_READY_PROC
 9180  0000000                   	PHP
 9181  0000000                   	SEI
 9182  0000000                   
 9183  0000000                   	LDA #2
 9184  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9185  0000000                   	LDA #CMD_DIS_VIBRATO
 9186  0000000                   	JSR SEND_CMD_PROC
 9187  0000000                   
 9188  0000000                   	PLP
 9189  0000000                   	JSR CHK_HANDSHAKE_PROC
 9190  0000000                   	ENDM
 9191  0000000                   .ENDIF
 9192  0000000                   ;===============================================================================	
 9193  0000000                   ; Enable/Disable Note On Modulation
 9194  0000000                   ;===============================================================================
 9195  0000000                   .IF (WITH_MS_EXT_MIDI .EQ. 1H)
 9196  0000000                   EN_NOTE_ON_MODULATION MACRO
 9197  0000000                   	JSR HWE_READY_PROC
 9198  0000000                   	PHP
 9199  0000000                   	SEI
 9200  0000000                   
 9201  0000000                   	LDA #2
 9202  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9203  0000000                   	LDA #CMD_EN_MODULATION
 9204  0000000                   	JSR SEND_CMD_PROC
 9205  0000000                   
 9206  0000000                   	PLP
 9207  0000000                   	JSR CHK_HANDSHAKE_PROC
 9208  0000000                   	ENDM
 9209  0000000                   ;------------------------------------------------------------------------------	
 9210  0000000                   DIS_NOTE_ON_MODULATION MACRO
 9211  0000000                   	JSR HWE_READY_PROC
 9212  0000000                   	PHP
 9213  0000000                   	SEI
 9214  0000000                   
 9215  0000000                   	LDA #2
 9216  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9217  0000000                   	LDA #CMD_DIS_MODULATION
 9218  0000000                   	JSR SEND_CMD_PROC
 9219  0000000                   
 9220  0000000                   	PLP
 9221  0000000                   	JSR CHK_HANDSHAKE_PROC
 9222  0000000                   	ENDM
 9223  0000000                   .ENDIF





 9224  0000000                   ;===============================================================================	
 9225  0000000                   ; Note On Pitch Bend
 9226  0000000                   ;===============================================================================
 9227  0000000                   NOTE_ON_PITCH_BEND MACRO LEVEL
 9228  0000000                   	JSR HWE_READY_PROC
 9229  0000000                   	PHP
 9230  0000000                   	SEI
 9231  0000000                   
 9232  0000000                   	HWE_SET_PARAMETER0 LEVEL
 9233  0000000                   	HWE_SET_COMMAND 2, CMD_SET_NOTE_PITCH_BEND
 9234  0000000                   
 9235  0000000                   	PLP
 9236  0000000                   	JSR CHK_HANDSHAKE_PROC
 9237  0000000                   	ENDM
 9238  0000000                   ;------------------------------------------------------------------------------	
 9239  0000000                   NOTE_ON_PITCH_BEND_RAM MACRO LEVEL_RAM
 9240  0000000                   	JSR HWE_READY_PROC
 9241  0000000                   	PHP
 9242  0000000                   	SEI
 9243  0000000                   
 9244  0000000                   	HWE_SET_PARAMETER0_RAM LEVEL_RAM
 9245  0000000                   	HWE_SET_COMMAND 2, CMD_SET_NOTE_PITCH_BEND
 9246  0000000                   
 9247  0000000                   	PLP
 9248  0000000                   	JSR CHK_HANDSHAKE_PROC
 9249  0000000                   	ENDM
 9250  0000000                   ;===============================================================================
 9251  0000000                   ;;.IF (WITH_ONEKEYONENOTE .EQ. 1)
 9252  0000000                   EN_ONEKEYONENOTE MACRO CH_ID
 9253  0000000                   	JSR HWE_READY_PROC
 9254  0000000                   	PHP
 9255  0000000                   	SEI
 9256  0000000                   
 9257  0000000                   	HWE_SET_COMMAND 10H+(CH_ID-1), CMD_EN_ONEKEYONENOTE
 9258  0000000                   
 9259  0000000                   	PLP
 9260  0000000                   	JSR CHK_HANDSHAKE_PROC
 9261  0000000                   	ENDM
 9262  0000000                   ;------------------------------------------------------------------------------
 9263  0000000                   EN_ONEKEYONENOTE_RAM MACRO CH_ID_RAM
 9264  0000000                   	JSR HWE_READY_PROC
 9265  0000000                   	PHP
 9266  0000000                   	SEI
 9267  0000000                   
 9268  0000000                   	CLC
 9269  0000000                   	LDA CH_ID_RAM
 9270  0000000                   	ADC #(10H-1)
 9271  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 9272  0000000                   	LDA #CMD_EN_ONEKEYONENOTE
 9273  0000000                   	JSR SEND_CMD_PROC
 9274  0000000                   
 9275  0000000                   	PLP
 9276  0000000                   	JSR CHK_HANDSHAKE_PROC
 9277  0000000                   
 9278  0000000                   	ENDM
 9279  0000000                   ;------------------------------------------------------------------------------
 9280  0000000                   DIS_ONEKEYONENOTE MACRO





 9281  0000000                   	JSR HWE_READY_PROC
 9282  0000000                   	PHP
 9283  0000000                   	SEI
 9284  0000000                   
 9285  0000000                   	HWE_SET_COMMAND 2, CMD_DIS_ONEKEYONENOTE
 9286  0000000                   
 9287  0000000                   	PLP
 9288  0000000                   	JSR CHK_HANDSHAKE_PROC
 9289  0000000                   	ENDM
 9290  0000000                   ;------------------------------------------------------------------------------
 9291  0000000                   ONEKEYONENOTE_NEXT MACRO
 9292  0000000                   	JSR HWE_READY_PROC
 9293  0000000                   	PHP
 9294  0000000                   	SEI
 9295  0000000                   
 9296  0000000                   	HWE_SET_COMMAND 2, CMD_ONEKEYONENOTE_NEXT
 9297  0000000                   
 9298  0000000                   	PLP
 9299  0000000                   	JSR CHK_HANDSHAKE_PROC
 9300  0000000                   	ENDM
 9301  0000000                   ;;.ENDIF
 9302  0000000                   ;===============================================================================
 9303  0000000                   SET_START MACRO 
 9304  0000000                   
 9305  0000000                   	ENDM
 9306  0000000                   ;----------------------------------------------------------------
 9307  0000000                   GOTO_START MACRO 
 9308  0000000                   
 9309  0000000                   	ENDM
 9310  0000000                   ;===============================================================================
 9311  0000000                   .IF (WITH_SP_SKIP .EQ. 1)	
 9312  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL MACRO CHANNEL_ID,INDEX
 9313  0000000                   
 9314  0000000                   ; Index 0 is not currently supported
 9315  0000000                   	LDA #INDEX
 9316  0000000                   	BNE 3
 9317  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL#
 9318  0000000                   
 9319  0000000                   	PSF_RESPONSE_LIMIT
 9320  0000000                   	JSR HWE_READY_PROC
 9321  0000000                   	PHP
 9322  0000000                   	SEI
 9323  0000000                   
 9324  0000000                   	HWE_SET_PARAMETER0 (INDEX-1)
 9325  0000000                   	HWE_SET_PARAMETER1 0
 9326  0000000                   
 9327  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9328  0000000                   
 9329  0000000                   	PLP
 9330  0000000                   	JSR CHK_HANDSHAKE_PROC
 9331  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9332  0000000                   
 9333  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL#:
 9334  0000000                   	ENDM
 9335  0000000                   ;----------------------------------------------------------------
 9336  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_RAM MACRO CHANNEL_ID, INDEX_RAM
 9337  0000000                   





 9338  0000000                   ; Index 0 is not currently supported
 9339  0000000                   	LDA INDEX_RAM
 9340  0000000                   	BNE 3
 9341  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL_RAM#
 9342  0000000                   
 9343  0000000                   	PSF_RESPONSE_LIMIT
 9344  0000000                   	JSR HWE_READY_PROC
 9345  0000000                   	PHP
 9346  0000000                   	SEI
 9347  0000000                   
 9348  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9349  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+0
 9350  0000000                   	HWE_SET_PARAMETER1 0
 9351  0000000                   
 9352  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9353  0000000                   
 9354  0000000                   	PLP
 9355  0000000                   	JSR CHK_HANDSHAKE_PROC
 9356  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9357  0000000                   
 9358  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL_RAM#:
 9359  0000000                   	ENDM
 9360  0000000                   ;----------------------------------------------------------------
 9361  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX MACRO CHANNEL_ID,INDEX
 9362  0000000                   
 9363  0000000                   ; Index 0 is not currently supported
 9364  0000000                   	LDA #.LOW.INDEX
 9365  0000000                   	BEQ 3
 9366  0000000                   	JMP SET_PLAY_SEGMENT_SP_CHANNEL_EX_CONT#
 9367  0000000                   	LDA #.HIGH.INDEX
 9368  0000000                   	BNE 3
 9369  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL_EX#
 9370  0000000                   
 9371  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX_CONT#:
 9372  0000000                   
 9373  0000000                   	PSF_RESPONSE_LIMIT
 9374  0000000                   	JSR HWE_READY_PROC
 9375  0000000                   	PHP
 9376  0000000                   	SEI
 9377  0000000                   
 9378  0000000                   	HWE_SET_PARAMETER0 .LOW.(INDEX-1)
 9379  0000000                   	HWE_SET_PARAMETER1 .HIGH.(INDEX-1)
 9380  0000000                   
 9381  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9382  0000000                   
 9383  0000000                   	PLP
 9384  0000000                   	JSR CHK_HANDSHAKE_PROC
 9385  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9386  0000000                   
 9387  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL_EX#:
 9388  0000000                   	ENDM
 9389  0000000                   ;----------------------------------------------------------------
 9390  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM MACRO CHANNEL_ID, INDEX_RAM
 9391  0000000                   
 9392  0000000                   ; Index 0 is not currently supported
 9393  0000000                   	LDA INDEX_RAM
 9394  0000000                   	BEQ 3





 9395  0000000                   	JMP SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM_CONT#
 9396  0000000                   	LDA INDEX_RAM+1
 9397  0000000                   	BNE 3
 9398  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM#
 9399  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM_CONT#:
 9400  0000000                   
 9401  0000000                   	PSF_RESPONSE_LIMIT
 9402  0000000                   	JSR HWE_READY_PROC
 9403  0000000                   	PHP
 9404  0000000                   	SEI
 9405  0000000                   
 9406  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9407  0000000                   	HWE_SET_PARAMETER1_RAM INDEX_RAM+1
 9408  0000000                   
 9409  0000000                   	SEC
 9410  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER
 9411  0000000                   	SBC #1
 9412  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9413  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER+1
 9414  0000000                   	SBC #0
 9415  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 9416  0000000                   
 9417  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9418  0000000                   
 9419  0000000                   	PLP
 9420  0000000                   	JSR CHK_HANDSHAKE_PROC
 9421  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9422  0000000                   
 9423  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM#:
 9424  0000000                   	ENDM
 9425  0000000                   ;----------------------------------------------------------------
 9426  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL MACRO CHANNEL_ID,INDEX
 9427  0000000                   
 9428  0000000                   ; Index 0 is not currently supported
 9429  0000000                   	LDA #INDEX
 9430  0000000                   	BNE 3
 9431  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL#
 9432  0000000                   
 9433  0000000                   	PSF_RESPONSE_LIMIT
 9434  0000000                   	JSR HWE_READY_PROC
 9435  0000000                   	PHP
 9436  0000000                   	SEI
 9437  0000000                   
 9438  0000000                   	HWE_SET_PARAMETER0 (INDEX-1)
 9439  0000000                   	HWE_SET_PARAMETER1 0
 9440  0000000                   
 9441  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9442  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9443  0000000                   .ENDIF
 9444  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9445  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9446  0000000                   .ENDIF
 9447  0000000                   .IF	(CHIPSERIES = 'N589D')
 9448  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9449  0000000                   .ENDIF
 9450  0000000                   	PLP
 9451  0000000                   	JSR CHK_HANDSHAKE_PROC





 9452  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9453  0000000                   
 9454  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL#:
 9455  0000000                   	ENDM
 9456  0000000                   ;----------------------------------------------------------------
 9457  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_RAM MACRO CHANNEL_ID, INDEX_RAM
 9458  0000000                   
 9459  0000000                   ; Index 0 is not currently supported
 9460  0000000                   	LDA INDEX_RAM
 9461  0000000                   	BNE 3
 9462  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL_RAM#
 9463  0000000                   
 9464  0000000                   	PSF_RESPONSE_LIMIT
 9465  0000000                   	JSR HWE_READY_PROC
 9466  0000000                   	PHP
 9467  0000000                   	SEI
 9468  0000000                   
 9469  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9470  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+0
 9471  0000000                   	HWE_SET_PARAMETER1 0
 9472  0000000                   
 9473  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9474  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9475  0000000                   .ENDIF
 9476  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9477  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9478  0000000                   .ENDIF
 9479  0000000                   .IF	(CHIPSERIES = 'N589D')
 9480  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9481  0000000                   .ENDIF
 9482  0000000                   	PLP
 9483  0000000                   	JSR CHK_HANDSHAKE_PROC
 9484  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9485  0000000                   
 9486  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL_RAM#:
 9487  0000000                   	ENDM
 9488  0000000                   ;----------------------------------------------------------------
 9489  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX MACRO CHANNEL_ID,INDEX
 9490  0000000                   
 9491  0000000                   ; Index 0 is not currently supported
 9492  0000000                   	LDA #.LOW.INDEX
 9493  0000000                   	BEQ 3
 9494  0000000                   	JMP SET_PLAY_SEGMENT_EVO_CHANNEL_EX_CONT#
 9495  0000000                   	LDA #.HIGH.INDEX
 9496  0000000                   	BNE 3
 9497  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX#
 9498  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX_CONT#:
 9499  0000000                   
 9500  0000000                   	PSF_RESPONSE_LIMIT
 9501  0000000                   	JSR HWE_READY_PROC
 9502  0000000                   	PHP
 9503  0000000                   	SEI
 9504  0000000                   
 9505  0000000                   	HWE_SET_PARAMETER0 .LOW.(INDEX-1)
 9506  0000000                   	HWE_SET_PARAMETER1 .HIGH.(INDEX-1)
 9507  0000000                   
 9508  0000000                   .IF	(CHIPSERIES = 'N589A')	





 9509  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9510  0000000                   .ENDIF
 9511  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9512  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9513  0000000                   .ENDIF
 9514  0000000                   .IF	(CHIPSERIES = 'N589D')
 9515  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9516  0000000                   .ENDIF
 9517  0000000                   	PLP
 9518  0000000                   	JSR CHK_HANDSHAKE_PROC
 9519  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9520  0000000                   
 9521  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX#:
 9522  0000000                   	ENDM
 9523  0000000                   ;----------------------------------------------------------------
 9524  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM MACRO CHANNEL_ID, INDEX_RAM
 9525  0000000                   
 9526  0000000                   ; Index 0 is not currently supported
 9527  0000000                   	LDA INDEX_RAM
 9528  0000000                   	BEQ 3
 9529  0000000                   	JMP SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM_CONT#
 9530  0000000                   	LDA INDEX_RAM+1
 9531  0000000                   	BNE 3
 9532  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM#
 9533  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM_CONT#:
 9534  0000000                   
 9535  0000000                   	PSF_RESPONSE_LIMIT
 9536  0000000                   	JSR HWE_READY_PROC
 9537  0000000                   	PHP
 9538  0000000                   	SEI
 9539  0000000                   
 9540  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9541  0000000                   	HWE_SET_PARAMETER1_RAM INDEX_RAM+1
 9542  0000000                   
 9543  0000000                   	SEC
 9544  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER
 9545  0000000                   	SBC #1
 9546  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9547  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER+1
 9548  0000000                   	SBC #0
 9549  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 9550  0000000                   
 9551  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9552  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9553  0000000                   .ENDIF
 9554  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9555  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9556  0000000                   .ENDIF
 9557  0000000                   .IF	(CHIPSERIES = 'N589D')
 9558  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9559  0000000                   .ENDIF
 9560  0000000                   	PLP
 9561  0000000                   	JSR CHK_HANDSHAKE_PROC
 9562  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9563  0000000                   
 9564  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM#:
 9565  0000000                   	ENDM





 9566  0000000                   ;----------------------------------------------------------------
 9567  0000000                   SET_PLAY_SEGMENT_CH1 MACRO INDEX
 9568  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL 1, INDEX
 9569  0000000                   	ENDM
 9570  0000000                   ;----------------------------------------------------------------	
 9571  0000000                   SET_PLAY_SEGMENT_CH2 MACRO INDEX
 9572  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL 2, INDEX
 9573  0000000                   	ENDM
 9574  0000000                   ;----------------------------------------------------------------	
 9575  0000000                   SET_PLAY_SEGMENT_EVO1 MACRO INDEX
 9576  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL 1, INDEX
 9577  0000000                   	ENDM
 9578  0000000                   ;----------------------------------------------------------------	
 9579  0000000                   SET_PLAY_SEGMENT_EVO2 MACRO INDEX
 9580  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL 2, INDEX
 9581  0000000                   	ENDM
 9582  0000000                   ;----------------------------------------------------------------	
 9583  0000000                   SET_PLAY_SEGMENT_CH1_RAM MACRO INDEX_RAM
 9584  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_RAM 1, INDEX_RAM
 9585  0000000                   	ENDM
 9586  0000000                   ;----------------------------------------------------------------	
 9587  0000000                   SET_PLAY_SEGMENT_CH2_RAM MACRO INDEX_RAM
 9588  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_RAM 2, INDEX_RAM
 9589  0000000                   	ENDM
 9590  0000000                   ;----------------------------------------------------------------	
 9591  0000000                   SET_PLAY_SEGMENT_EVO1_RAM MACRO INDEX_RAM
 9592  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_RAM 1, INDEX_RAM
 9593  0000000                   	ENDM
 9594  0000000                   ;----------------------------------------------------------------	
 9595  0000000                   SET_PLAY_SEGMENT_EVO2_RAM MACRO INDEX_RAM
 9596  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_RAM 2, INDEX_RAM
 9597  0000000                   	ENDM
 9598  0000000                   ;----------------------------------------------------------------
 9599  0000000                   SET_PLAY_SEGMENT_CH1_EX MACRO INDEX
 9600  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX 1, INDEX
 9601  0000000                   	ENDM
 9602  0000000                   ;----------------------------------------------------------------	
 9603  0000000                   SET_PLAY_SEGMENT_CH2_EX MACRO INDEX
 9604  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX 2, INDEX
 9605  0000000                   	ENDM
 9606  0000000                   ;----------------------------------------------------------------	
 9607  0000000                   SET_PLAY_SEGMENT_EVO1_EX MACRO INDEX
 9608  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX 1, INDEX
 9609  0000000                   	ENDM
 9610  0000000                   ;----------------------------------------------------------------	
 9611  0000000                   SET_PLAY_SEGMENT_EVO2_EX MACRO INDEX
 9612  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX 2, INDEX
 9613  0000000                   	ENDM
 9614  0000000                   ;----------------------------------------------------------------	
 9615  0000000                   SET_PLAY_SEGMENT_CH1_EX_RAM MACRO INDEX_RAM
 9616  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM 1, INDEX_RAM
 9617  0000000                   	ENDM
 9618  0000000                   ;----------------------------------------------------------------	
 9619  0000000                   SET_PLAY_SEGMENT_CH2_EX_RAM MACRO INDEX_RAM
 9620  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM 2, INDEX_RAM
 9621  0000000                   	ENDM
 9622  0000000                   ;----------------------------------------------------------------	





 9623  0000000                   SET_PLAY_SEGMENT_EVO1_EX_RAM MACRO INDEX_RAM
 9624  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM 1, INDEX_RAM
 9625  0000000                   	ENDM
 9626  0000000                   ;----------------------------------------------------------------	
 9627  0000000                   SET_PLAY_SEGMENT_EVO2_EX_RAM MACRO INDEX_RAM
 9628  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM 2, INDEX_RAM
 9629  0000000                   	ENDM
 9630  0000000                   ;----------------------------------------------------------------
 9631  0000000                   .ENDIF
 9632  0000000                   ;===============================================================================
 9633  0000000                   COLOR_FLY_INIT MACRO
 9634  0000000                   ;COLOR_FLY_EN MACRO
 9635  0000000                   	JSR HWE_READY_PROC
 9636  0000000                   	PHP
 9637  0000000                   	SEI
 9638  0000000                   
 9639  0000000                   	HWE_SET_COMMAND 0, CMD_EN_COLORFLY
 9640  0000000                   
 9641  0000000                   	PLP
 9642  0000000                   	JSR CHK_HANDSHAKE_PROC
 9643  0000000                   
 9644  0000000                   	ENDM
 9645  0000000                   ;----------------------------------------------------------------		
 9646  0000000                   COLOR_FLY_STOP MACRO
 9647  0000000                   ;COLOR_FLY_DIS MACRO	
 9648  0000000                   	JSR HWE_READY_PROC
 9649  0000000                   	PHP
 9650  0000000                   	SEI
 9651  0000000                   
 9652  0000000                   	HWE_SET_COMMAND 0, CMD_DIS_COLORFLY
 9653  0000000                   
 9654  0000000                   	PLP
 9655  0000000                   	JSR CHK_HANDSHAKE_PROC
 9656  0000000                   
 9657  0000000                   	ENDM
 9658  0000000                   ;----------------------------------------------------------------	
 9659  0000000                   COLOR_FLY_TARGET MACRO GROUP, COLOR_INDEX
 9660  0000000                   	JSR HWE_READY_PROC
 9661  0000000                   	PHP
 9662  0000000                   	SEI
 9663  0000000                   	HWE_SET_PARAMETER0 GROUP-1
 9664  0000000                   	HWE_SET_PARAMETER1 COLOR_INDEX
 9665  0000000                   
 9666  0000000                   	HWE_SET_COMMAND 10H, CMD_SET_COLORFLY_PARAM
 9667  0000000                   	PLP
 9668  0000000                   	JSR CHK_HANDSHAKE_PROC
 9669  0000000                   
 9670  0000000                   	ENDM
 9671  0000000                   ;----------------------------------------------------------------	
 9672  0000000                   COLOR_FLY_TARGET_RAM MACRO GROUP_RAM, COLOR_INDEX_RAM
 9673  0000000                   	JSR HWE_READY_PROC
 9674  0000000                   	PHP
 9675  0000000                   	SEI
 9676  0000000                   ;HWE_SET_PARAMETER0_RAM GROUP_RAM
 9677  0000000                   	LDA GROUP_RAM
 9678  0000000                   	DEC A
 9679  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER





 9680  0000000                   	HWE_SET_PARAMETER1_RAM COLOR_INDEX_RAM
 9681  0000000                   
 9682  0000000                   	HWE_SET_COMMAND 10H, CMD_SET_COLORFLY_PARAM
 9683  0000000                   	PLP
 9684  0000000                   	JSR CHK_HANDSHAKE_PROC
 9685  0000000                   
 9686  0000000                   	ENDM
 9687  0000000                   ;----------------------------------------------------------------	
 9688  0000000                   COLOR_FLY_SPEED MACRO GROUP, MORPHING_TIME
 9689  0000000                   	JSR HWE_READY_PROC
 9690  0000000                   	PHP
 9691  0000000                   	SEI
 9692  0000000                   	HWE_SET_PARAMETER0 GROUP-1
 9693  0000000                   	HWE_SET_PARAMETER1 .LOW.MORPHING_TIME
 9694  0000000                   	HWE_SET_PARAMETER2 .HIGH.MORPHING_TIME
 9695  0000000                   
 9696  0000000                   	HWE_SET_COMMAND 20H, CMD_SET_COLORFLY_PARAM
 9697  0000000                   	PLP
 9698  0000000                   	JSR CHK_HANDSHAKE_PROC
 9699  0000000                   	ENDM
 9700  0000000                   ;----------------------------------------------------------------	
 9701  0000000                   COLOR_FLY_SPEED_RAM MACRO GROUP_RAM, MORPHING_TIME_RAM
 9702  0000000                   	JSR HWE_READY_PROC
 9703  0000000                   	PHP
 9704  0000000                   	SEI
 9705  0000000                   ;HWE_SET_PARAMETER0_RAM GROUP_RAM
 9706  0000000                   	LDA GROUP_RAM
 9707  0000000                   	DEC A
 9708  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9709  0000000                   	HWE_SET_PARAMETER1_RAM MORPHING_TIME_RAM
 9710  0000000                   	HWE_SET_PARAMETER2_RAM MORPHING_TIME_RAM+1
 9711  0000000                   
 9712  0000000                   	HWE_SET_COMMAND 20H, CMD_SET_COLORFLY_PARAM
 9713  0000000                   	PLP
 9714  0000000                   	JSR CHK_HANDSHAKE_PROC
 9715  0000000                   	ENDM
 9716  0000000                   ;----------------------------------------------------------------	
 9717  0000000                   COLORFLY_ACTION MACRO
 9718  0000000                   	LDA #04H
 9719  0000000                   	TSB !INTRF
 9720  0000000                   	ENDM
 9721  0000000                   ;===============================================================================
 9722  0000000                   EN_SPEECH_CHANGER MACRO
 9723  0000000                   	JSR HWE_READY_PROC
 9724  0000000                   	LDA #04H
 9725  0000000                   	TSB HWE_CTRL_BA
 9726  0000000                   	JSR HWE_TABLE_ALT1_BA_PROC
 9727  0000000                   	ENDM
 9728  0000000                   ;----------------------------------------------------------------
 9729  0000000                   DIS_SPEECH_CHANGER MACRO
 9730  0000000                   	JSR HWE_READY_PROC
 9731  0000000                   	LDA #04H
 9732  0000000                   	TRB HWE_CTRL_BA
 9733  0000000                   	JSR HWE_TABLE_BA_PROC
 9734  0000000                   	ENDM
 9735  0000000                   ;----------------------------------------------------------------
 9736  0000000                   CH1_CHANGER_SPEED MACRO RATIO





 9737  0000000                   	JSR HWE_READY_PROC
 9738  0000000                   	PHP
 9739  0000000                   	SEI
 9740  0000000                   	HWE_SET_PARAMETER0 .LOW.RATIO
 9741  0000000                   	HWE_SET_PARAMETER1 .HIGH.RATIO
 9742  0000000                   
 9743  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_SPEED_SP
 9744  0000000                   	PLP
 9745  0000000                   	JSR CHK_HANDSHAKE_PROC
 9746  0000000                   
 9747  0000000                   	ENDM
 9748  0000000                   ;----------------------------------------------------------------
 9749  0000000                   CH1_CHANGER_SPEED_RAM MACRO RATIO_RAM
 9750  0000000                   	JSR HWE_READY_PROC
 9751  0000000                   	PHP
 9752  0000000                   	SEI
 9753  0000000                   	HWE_SET_PARAMETER0_RAM RATIO_RAM
 9754  0000000                   	HWE_SET_PARAMETER1_RAM RATIO_RAM+1
 9755  0000000                   
 9756  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_SPEED_SP
 9757  0000000                   	PLP
 9758  0000000                   	JSR CHK_HANDSHAKE_PROC
 9759  0000000                   
 9760  0000000                   	ENDM
 9761  0000000                   ;----------------------------------------------------------------
 9762  0000000                   CH1_CHANGER_PITCH MACRO LEVEL
 9763  0000000                   	JSR HWE_READY_PROC
 9764  0000000                   	PHP
 9765  0000000                   	SEI
 9766  0000000                   	HWE_SET_PARAMETER0 LEVEL
 9767  0000000                   
 9768  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_PITCH_SP
 9769  0000000                   	PLP
 9770  0000000                   	JSR CHK_HANDSHAKE_PROC
 9771  0000000                   
 9772  0000000                   	ENDM
 9773  0000000                   ;----------------------------------------------------------------
 9774  0000000                   CH1_CHANGER_PITCH_RAM MACRO LEVEL_RAM
 9775  0000000                   	JSR HWE_READY_PROC
 9776  0000000                   	PHP
 9777  0000000                   	SEI
 9778  0000000                   	HWE_SET_PARAMETER0_RAM LEVEL_RAM
 9779  0000000                   
 9780  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_PITCH_SP
 9781  0000000                   	PLP
 9782  0000000                   	JSR CHK_HANDSHAKE_PROC
 9783  0000000                   
 9784  0000000                   	ENDM
 9785  0000000                   
 9786  0000000                   
 9787  0000000                   
 9788  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\FLASH_MACROS.INI.APP"
 9789  0000000                   ;***********************************************************************
 9790  0000000                   ;* @file		FLASH_MACROS.ini
 9791  0000000                   ;* @versioin	2.1
 9792  0000000                   ;* @date		2020-01-20
 9793  0000000                   ;* brief 		The file provides all the ISP functions





 9794  0000000                   ;***********************************************************************
 9795  0000000                   
 9796  0000000                   	CHIP	65C02
 9797  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\ISP_MACROS.INI.APP"
 9798  0000000                   ;========================================================
 9799  0000000                   ;-----ISP------------------------------------------------
 9800  0000000                   IS_ILLEGAL_DATA_FORMAT MACRO SADDR
 9801  0000000                   	LDX #0
 9802  0000000                   ; mask sure the address is 4 bytes alignment.
 9803  0000000                   	LDA #.LOW.SADDR
 9804  0000000                   	AND #03H
 9805  0000000                   	BEQ IS_ILLEGAL_DATA_END#
 9806  0000000                   
 9807  0000000                   ERROR_DATA_FORMAT#:
 9808  0000000                   	LDX #E1H
 9809  0000000                   IS_ILLEGAL_DATA_END#:
 9810  0000000                   	TXA
 9811  0000000                   	ENDM
 9812  0000000                   ;----------------------------------------------------
 9813  0000000                   IS_ILLEGAL_PAGE_FORMAT MACRO SADDR
 9814  0000000                   	LDX #0
 9815  0000000                   ; mask sure the address is 512 bytes alignment.
 9816  0000000                   	LDA #.LOW.SADDR
 9817  0000000                   	AND #FFH
 9818  0000000                   	BNE ERROR_PAGE_FORMAT#
 9819  0000000                   	LDA #.HIGH.SADDR
 9820  0000000                   	AND #01H
 9821  0000000                   	BNE ERROR_PAGE_FORMAT#
 9822  0000000                   	JMP IS_ILLEGAL_PAGE_END#
 9823  0000000                   
 9824  0000000                   ERROR_PAGE_FORMAT#:
 9825  0000000                   	LDX #E2H
 9826  0000000                   IS_ILLEGAL_PAGE_END#:
 9827  0000000                   	TXA
 9828  0000000                   	ENDM
 9829  0000000                   ;----------------------------------------------------
 9830  0000000                   IS_ILLEGAL_DATA MACRO SADDR
 9831  0000000                   ; mask sure the address is 4 bytes alignment.
 9832  0000000                   	LDA #.LOW.SADDR
 9833  0000000                   	AND #03H
 9834  0000000                   	BEQ IS_ILLEGAL_DATA_END#
 9835  0000000                   	LDA #1
 9836  0000000                   IS_ILLEGAL_DATA_END#:
 9837  0000000                   	ENDM
 9838  0000000                   
 9839  0000000                   ;----------------------------------------------------
 9840  0000000                   IS_ILLEGAL_DATA_DP MACRO PADDR3
 9841  0000000                   ; mask sure the address is 4 bytes alignment.
 9842  0000000                   	LDA PADDR3
 9843  0000000                   	AND #03H
 9844  0000000                   	BEQ IS_ILLEGAL_DATA_END#
 9845  0000000                   	LDA #1
 9846  0000000                   IS_ILLEGAL_DATA_END#:
 9847  0000000                   	ENDM
 9848  0000000                   
 9849  0000000                   ;--------------------------------------------------------
 9850  0000000                   ; @beief	ISP unlock





 9851  0000000                   ;--------------------------------------------------------
 9852  0000000                   ISP_UNLOCK MACRO
 9853  0000000                   .IFDEF DATA_FLASH_SIZE_512
 9854  0000000                   	ISP_UNLOCK1
 9855  0000000                   .ELSE
 9856  0000000                   	.IFDEF DATA_FLASH_SIZE_1024
 9857  0000000                   		ISP_UNLOCK1
 9858  0000000                   	.ELSE
 9859  0000000                   		ISP_UNLOCK2
 9860  0000000                   	.ENDIF
 9861  0000000                   .ENDIF
 9862  0000000                   	ENDM
 9863  0000000                   
 9864  0000000                   ;----------------------------------------------------
 9865  0000000                   ISP_UNLOCK1 MACRO
 9866  0000000                   	LDA #59H
 9867  0000000                   	STA !ISPULK1
 9868  0000000                   	LDA #16H
 9869  0000000                   	STA !ISPULK1
 9870  0000000                   	LDA #88H
 9871  0000000                   	STA !ISPULK1
 9872  0000000                   	ENDM
 9873  0000000                   ;----------------------------------------------------
 9874  0000000                   ISP_UNLOCK2 MACRO
 9875  0000000                   	LDA #A6H
 9876  0000000                   	STA !ISPULK
 9877  0000000                   	LDA #E9H
 9878  0000000                   	STA !ISPULK
 9879  0000000                   	LDA #77H
 9880  0000000                   	STA !ISPULK
 9881  0000000                   	ENDM
 9882  0000000                   ;--------------------------------------------------------
 9883  0000000                   ; @beief	ISP lock
 9884  0000000                   ;--------------------------------------------------------
 9885  0000000                   ISP_LOCK MACRO
 9886  0000000                   .IFDEF DATA_FLASH_SIZE_512
 9887  0000000                   	ISP_LOCK1
 9888  0000000                   .ELSE
 9889  0000000                   	.IFDEF DATA_FLASH_SIZE_1024
 9890  0000000                   		ISP_LOCK1
 9891  0000000                   	.ELSE
 9892  0000000                   		ISP_LOCK2
 9893  0000000                   	.ENDIF
 9894  0000000                   .ENDIF
 9895  0000000                   	ENDM
 9896  0000000                   ;----------------------------------------------------
 9897  0000000                   ISP_LOCK1 MACRO
 9898  0000000                   	STZ !ISPULK1
 9899  0000000                   	ENDM
 9900  0000000                   ;----------------------------------------------------
 9901  0000000                   ISP_LOCK2 MACRO
 9902  0000000                   	STZ !ISPULK
 9903  0000000                   	ENDM	
 9904  0000000                   ;--------------------------------------------------------
 9905  0000000                   ; @brief	Set address
 9906  0000000                   ;--------------------------------------------------------
 9907  0000000                   ISP_SET_ADDR MACRO SENTENCE_ADDR





 9908  0000000                   	LDA	#.LOW.SENTENCE_ADDR
 9909  0000000                   	STA ISPADR0
 9910  0000000                   	LDA	#.HIGH.SENTENCE_ADDR
 9911  0000000                   	STA ISPADR1
 9912  0000000                   	LDA	#.HIGH8.SENTENCE_ADDR
 9913  0000000                   	STA ISPADR2
 9914  0000000                   	ENDM
 9915  0000000                   ;----------------------------------------------------	
 9916  0000000                   ISP_SET_ADDR_DP MACRO PDATA3
 9917  0000000                   	LDA PDATA3
 9918  0000000                   	STA ISPADR0
 9919  0000000                   	LDA PDATA3+1
 9920  0000000                   	STA ISPADR1
 9921  0000000                   	LDA PDATA3+2
 9922  0000000                   	STA ISPADR2
 9923  0000000                   	ENDM
 9924  0000000                   ;----------------------------------------------------
 9925  0000000                   ISP_SET_ADDR_DP_ILI MACRO PDATA
 9926  0000000                   	LDY #0
 9927  0000000                   	LDA (PDATA), Y
 9928  0000000                   	STA ISPADR0
 9929  0000000                   	LDY #1
 9930  0000000                   	LDA (PDATA), Y
 9931  0000000                   	STA ISPADR1
 9932  0000000                   	LDY #2
 9933  0000000                   	LDA (PDATA), Y
 9934  0000000                   	STA ISPADR2
 9935  0000000                   	ENDM	
 9936  0000000                   ;--------------------------------------------------------
 9937  0000000                   ; @brief	Set data
 9938  0000000                   ;--------------------------------------------------------	
 9939  0000000                   ISP_SET_DATA MACRO SENTENCE_DATA
 9940  0000000                   	LDA	#.LOW.SENTENCE_DATA
 9941  0000000                   	STA ISPDAT0
 9942  0000000                   	LDA	#.HIGH.SENTENCE_DATA
 9943  0000000                   	STA ISPDAT1
 9944  0000000                   	LDA	#.HIGH8.SENTENCE_DATA
 9945  0000000                   	STA ISPDAT2
 9946  0000000                   	LDA	#.SEGHIGH.SENTENCE_DATA
 9947  0000000                   	STA ISPDAT3
 9948  0000000                   	ENDM
 9949  0000000                   
 9950  0000000                   ;--------------------------------------------------
 9951  0000000                   ISP_SET_DATA_DP MACRO PDATA4
 9952  0000000                   	LDA PDATA4
 9953  0000000                   	STA ISPDAT0
 9954  0000000                   	LDA PDATA4+1
 9955  0000000                   	STA ISPDAT1
 9956  0000000                   	LDA PDATA4+2
 9957  0000000                   	STA ISPDAT2
 9958  0000000                   	LDA PDATA4+3
 9959  0000000                   	STA ISPDAT3
 9960  0000000                   	ENDM
 9961  0000000                   
 9962  0000000                   ;----------------------------------------------------	
 9963  0000000                   ISP_SET_DATA_DP_ILI MACRO PDATA
 9964  0000000                   	LDY #0





 9965  0000000                   	LDA (PDATA), Y
 9966  0000000                   	STA ISPDAT0
 9967  0000000                   	LDY #1
 9968  0000000                   	LDA (PDATA), Y
 9969  0000000                   	STA ISPDAT1
 9970  0000000                   	LDY #2
 9971  0000000                   	LDA (PDATA), Y
 9972  0000000                   	STA ISPDAT2
 9973  0000000                   	LDY #3
 9974  0000000                   	LDA (PDATA), Y
 9975  0000000                   	STA ISPDAT3
 9976  0000000                   	ENDM
 9977  0000000                   ;----------------------------------------------------	
 9978  0000000                   ISP_SET_DATA_DP_ILI_X MACRO PDATA, NUM
 9979  0000000                   
 9980  0000000                   	LDY #0
 9981  0000000                   ISP_SET_DATA_DP_ILI_X_LOOP#:
 9982  0000000                   	LDA (PDATA), Y
 9983  0000000                   	STA ISPDAT0, Y
 9984  0000000                   
 9985  0000000                   	INY
 9986  0000000                   	CPY NUM
 9987  0000000                   	BEQ ISP_SET_DATA_DP_ILI_X_LOOP_END#
 9988  0000000                   
 9989  0000000                   	JMP ISP_SET_DATA_DP_ILI_X_LOOP#
 9990  0000000                   
 9991  0000000                   ISP_SET_DATA_DP_ILI_X_LOOP_END#:
 9992  0000000                   
 9993  0000000                   	ENDM	
 9994  0000000                   ;--------------------------------------------------------
 9995  0000000                   ; @brief	Get data
 9996  0000000                   ;--------------------------------------------------------	
 9997  0000000                   ISP_GET_DATA_DP MACRO PDATA4
 9998  0000000                   	LDA ISPDAT0
 9999  0000000                   	STA PDATA4
10000  0000000                   	LDA ISPDAT1
10001  0000000                   	STA PDATA4+1
10002  0000000                   	LDA ISPDAT2
10003  0000000                   	STA PDATA4+2
10004  0000000                   	LDA ISPDAT3
10005  0000000                   	STA PDATA4+3
10006  0000000                   
10007  0000000                   	ENDM
10008  0000000                   ;----------------------------------------------------	
10009  0000000                   ISP_GET_DATA_DP_X MACRO PDATA, NUM
10010  0000000                   
10011  0000000                   	LDY #0
10012  0000000                   ISP_GET_DATA_DP_X_LOOP#:
10013  0000000                   	LDA ISPDAT0,Y
10014  0000000                   	STA PDATA,Y
10015  0000000                   
10016  0000000                   	INY
10017  0000000                   	CPY NUM
10018  0000000                   	BEQ ISP_GET_DATA_DP_X_LOOP_END#
10019  0000000                   
10020  0000000                   	JMP ISP_GET_DATA_DP_X_LOOP#
10021  0000000                   





10022  0000000                   ISP_GET_DATA_DP_X_LOOP_END#:
10023  0000000                   	ENDM
10024  0000000                   ;----------------------------------------------------	
10025  0000000                   ISP_GET_DATA_DP_ILI MACRO PDATA
10026  0000000                   	LDY #0
10027  0000000                   	LDA ISPDAT0
10028  0000000                   	STA (PDATA),Y
10029  0000000                   	LDY #1
10030  0000000                   	LDA ISPDAT1
10031  0000000                   	STA (PDATA),Y
10032  0000000                   	LDY #2
10033  0000000                   	LDA ISPDAT2
10034  0000000                   	STA (PDATA),Y
10035  0000000                   	LDY #3
10036  0000000                   	LDA ISPDAT3
10037  0000000                   	STA (PDATA),Y
10038  0000000                   
10039  0000000                   	ENDM
10040  0000000                   ;----------------------------------------------------	
10041  0000000                   ISP_GET_DATA_DP_ILI_X MACRO PDATA, NUM
10042  0000000                   
10043  0000000                   	LDY #0
10044  0000000                   ISP_GET_DATA_DP_ILI_X_LOOP#:
10045  0000000                   	LDA ISPDAT0,Y
10046  0000000                   	STA (PDATA),Y
10047  0000000                   
10048  0000000                   	INY
10049  0000000                   	CPY NUM
10050  0000000                   	BEQ ISP_GET_DATA_DP_ILI_X_LOOP_END#
10051  0000000                   
10052  0000000                   	JMP ISP_GET_DATA_DP_ILI_X_LOOP#
10053  0000000                   
10054  0000000                   ISP_GET_DATA_DP_ILI_X_LOOP_END#:
10055  0000000                   	ENDM
10056  0000000                   ;--------------------------------------------------------
10057  0000000                   ; @brief	ISP read data
10058  0000000                   ;--------------------------------------------------------
10059  0000000                   ISP_READ_DATA MACRO SADDR, PDATA4
10060  0000000                   	ISP_UNLOCK
10061  0000000                   
10062  0000000                   	ISP_SET_ADDR SADDR
10063  0000000                   
10064  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10065  0000000                   	TSB !ISPCON
10066  0000000                   	LDA #ISP_CMD_READ
10067  0000000                   	STA !ISPCMD	
10068  0000000                   
10069  0000000                   	LDA #ISP_DONE
10070  0000000                   	TSB !ISPTRG
10071  0000000                   
10072  0000000                   	LDA !ISPCON
10073  0000000                   	AND #ISP_ERR_FLAG
10074  0000000                   	BEQ POLLING_ISP_READ_TRG#
10075  0000000                   	LDA #01H
10076  0000000                   	JMP	ISP_READ_DATA_END#
10077  0000000                   
10078  0000000                   POLLING_ISP_READ_TRG#:





10079  0000000                   	LDA !ISPTRG
10080  0000000                   	AND #ISP_DONE
10081  0000000                   	BNE POLLING_ISP_READ_TRG#
10082  0000000                   
10083  0000000                   	ISP_GET_DATA_DP PDATA4
10084  0000000                   
10085  0000000                   READ_OK#:
10086  0000000                   	LDA #00H
10087  0000000                   
10088  0000000                   ISP_READ_DATA_END#:
10089  0000000                   	PHA
10090  0000000                   	ISP_LOCK
10091  0000000                   	PLA
10092  0000000                   	ENDM
10093  0000000                   
10094  0000000                   ;----------------------------------------------------
10095  0000000                   ISP_READ_DATA_DP MACRO PADDR3, PDATA4
10096  0000000                   	ISP_UNLOCK
10097  0000000                   
10098  0000000                   	ISP_SET_ADDR_DP PADDR3
10099  0000000                   
10100  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10101  0000000                   	TSB !ISPCON
10102  0000000                   	LDA #ISP_CMD_READ
10103  0000000                   	STA !ISPCMD	
10104  0000000                   
10105  0000000                   	LDA #ISP_DONE
10106  0000000                   	TSB !ISPTRG
10107  0000000                   
10108  0000000                   	LDA !ISPCON
10109  0000000                   	AND #ISP_ERR_FLAG
10110  0000000                   	BEQ POLLING_ISP_READ_TRG#
10111  0000000                   	LDA #01H
10112  0000000                   	JMP	ISP_READ_DATA_END#
10113  0000000                   
10114  0000000                   POLLING_ISP_READ_TRG#:
10115  0000000                   	LDA !ISPTRG
10116  0000000                   	AND #ISP_DONE
10117  0000000                   	BNE POLLING_ISP_READ_TRG#
10118  0000000                   
10119  0000000                   	ISP_GET_DATA_DP PDATA4
10120  0000000                   
10121  0000000                   READ_OK#:
10122  0000000                   	LDA #00H
10123  0000000                   
10124  0000000                   ISP_READ_DATA_END#:
10125  0000000                   	PHA
10126  0000000                   	ISP_LOCK
10127  0000000                   	PLA
10128  0000000                   	ENDM
10129  0000000                   ;----------------------------------------------------
10130  0000000                   ISP_READ_DATA_DP_X MACRO PADDR3, PDATA, NUM
10131  0000000                   	ISP_UNLOCK
10132  0000000                   
10133  0000000                   	ISP_SET_ADDR_DP PADDR3
10134  0000000                   
10135  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)





10136  0000000                   	TSB !ISPCON
10137  0000000                   	LDA #ISP_CMD_READ
10138  0000000                   	STA !ISPCMD	
10139  0000000                   
10140  0000000                   	LDA #ISP_DONE
10141  0000000                   	TSB !ISPTRG
10142  0000000                   
10143  0000000                   	LDA !ISPCON
10144  0000000                   	AND #ISP_ERR_FLAG
10145  0000000                   	BEQ POLLING_ISP_READ_TRG#
10146  0000000                   	LDA #01H
10147  0000000                   	JMP	ISP_READ_DATA_END#
10148  0000000                   
10149  0000000                   POLLING_ISP_READ_TRG#:
10150  0000000                   	LDA !ISPTRG
10151  0000000                   	AND #ISP_DONE
10152  0000000                   	BNE POLLING_ISP_READ_TRG#
10153  0000000                   
10154  0000000                   	ISP_GET_DATA_DP_X PDATA, NUM
10155  0000000                   
10156  0000000                   READ_OK#:
10157  0000000                   	LDA #00H
10158  0000000                   
10159  0000000                   ISP_READ_DATA_END#:
10160  0000000                   	PHA
10161  0000000                   	ISP_LOCK
10162  0000000                   	PLA
10163  0000000                   
10164  0000000                   	ENDM
10165  0000000                   ;----------------------------------------------------
10166  0000000                   ISP_READ_DATA_DP_ILI MACRO PADDR3, PDATA
10167  0000000                   	ISP_UNLOCK
10168  0000000                   
10169  0000000                   	ISP_SET_ADDR_DP PADDR3
10170  0000000                   
10171  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10172  0000000                   	TSB !ISPCON
10173  0000000                   	LDA #ISP_CMD_READ
10174  0000000                   	STA !ISPCMD	
10175  0000000                   
10176  0000000                   	LDA #ISP_DONE
10177  0000000                   	TSB !ISPTRG
10178  0000000                   
10179  0000000                   	LDA !ISPCON
10180  0000000                   	AND #ISP_ERR_FLAG
10181  0000000                   	BEQ POLLING_ISP_READ_TRG#
10182  0000000                   	LDA #01H
10183  0000000                   	JMP	ISP_READ_DATA_END#
10184  0000000                   
10185  0000000                   POLLING_ISP_READ_TRG#:
10186  0000000                   	LDA !ISPTRG
10187  0000000                   	AND #ISP_DONE
10188  0000000                   	BNE POLLING_ISP_READ_TRG#
10189  0000000                   
10190  0000000                   	ISP_GET_DATA_DP_ILI .LOW.PDATA
10191  0000000                   
10192  0000000                   READ_OK#:





10193  0000000                   	LDA #00H
10194  0000000                   
10195  0000000                   ISP_READ_DATA_END#:
10196  0000000                   	PHA
10197  0000000                   	ISP_LOCK
10198  0000000                   	PLA
10199  0000000                   
10200  0000000                   	ENDM
10201  0000000                   ;----------------------------------------------------
10202  0000000                   ISP_READ_DATA_DP_ILI_X MACRO PADDR3, PDATA, NUM
10203  0000000                   	ISP_UNLOCK
10204  0000000                   
10205  0000000                   	ISP_SET_ADDR_DP PADDR3
10206  0000000                   
10207  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10208  0000000                   	TSB !ISPCON
10209  0000000                   	LDA #ISP_CMD_READ
10210  0000000                   	STA !ISPCMD	
10211  0000000                   
10212  0000000                   	LDA #ISP_DONE
10213  0000000                   	TSB !ISPTRG
10214  0000000                   
10215  0000000                   	LDA !ISPCON
10216  0000000                   	AND #ISP_ERR_FLAG
10217  0000000                   	BEQ POLLING_ISP_READ_TRG#
10218  0000000                   	LDA #01H
10219  0000000                   	JMP	ISP_READ_DATA_END#
10220  0000000                   
10221  0000000                   POLLING_ISP_READ_TRG#:
10222  0000000                   	LDA !ISPTRG
10223  0000000                   	AND #ISP_DONE
10224  0000000                   	BNE POLLING_ISP_READ_TRG#
10225  0000000                   
10226  0000000                   	ISP_GET_DATA_DP_ILI_X .LOW.PDATA, NUM
10227  0000000                   
10228  0000000                   READ_OK#:
10229  0000000                   	LDA #00H
10230  0000000                   
10231  0000000                   ISP_READ_DATA_END#:
10232  0000000                   	PHA
10233  0000000                   	ISP_LOCK
10234  0000000                   	PLA
10235  0000000                   
10236  0000000                   	ENDM
10237  0000000                   ;--------------------------------------------------------
10238  0000000                   ; @brief	ISP verify data
10239  0000000                   ;--------------------------------------------------------
10240  0000000                   ISP_VERIFY_DATA MACRO SADDR, PDATA4
10241  0000000                   	ISP_UNLOCK
10242  0000000                   
10243  0000000                   	ISP_SET_ADDR SADDR
10244  0000000                   
10245  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10246  0000000                   	TSB !ISPCON
10247  0000000                   	LDA #ISP_CMD_READ
10248  0000000                   	STA !ISPCMD	
10249  0000000                   





10250  0000000                   	LDA #ISP_DONE
10251  0000000                   	TSB !ISPTRG
10252  0000000                   
10253  0000000                   	LDA !ISPCON
10254  0000000                   	AND #ISP_ERR_FLAG
10255  0000000                   	BEQ POLLING_ISP_READ_TRG#
10256  0000000                   	LDA #01H
10257  0000000                   	JMP	ISP_VERIFY_DATA_END#
10258  0000000                   
10259  0000000                   POLLING_ISP_READ_TRG#:
10260  0000000                   	LDA !ISPTRG
10261  0000000                   	AND #ISP_DONE
10262  0000000                   	BNE POLLING_ISP_READ_TRG#
10263  0000000                   
10264  0000000                   ; VERIFY DATA
10265  0000000                   	PHX
10266  0000000                   	LDX #0
10267  0000000                   VERIFY_DAT_LOOP#:
10268  0000000                   	LDA ISPDAT0,X
10269  0000000                   	CMP PDATA4,X
10270  0000000                   	BEQ 3
10271  0000000                   	JMP VERIFY_NG#
10272  0000000                   
10273  0000000                   	INX
10274  0000000                   	CPX #4
10275  0000000                   	BEQ 3 
10276  0000000                   	JMP VERIFY_DAT_LOOP#
10277  0000000                   VERIFY_OK#:
10278  0000000                   	LDA #00H
10279  0000000                   	JMP VERIFY_DATA_END#
10280  0000000                   VERIFY_NG#:
10281  0000000                   	LDA #04H
10282  0000000                   VERIFY_DATA_END#
10283  0000000                   	PLX
10284  0000000                   
10285  0000000                   ISP_VERIFY_DATA_END#:
10286  0000000                   	PHA
10287  0000000                   	ISP_LOCK
10288  0000000                   	PLA
10289  0000000                   	ENDM
10290  0000000                   ;----------------------------------------------------
10291  0000000                   ISP_VERIFY_DATA_DP MACRO PADDR3, PDATA4
10292  0000000                   	ISP_UNLOCK
10293  0000000                   
10294  0000000                   	ISP_SET_ADDR_DP PADDR3
10295  0000000                   
10296  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10297  0000000                   	TSB !ISPCON
10298  0000000                   	LDA #ISP_CMD_READ
10299  0000000                   	STA !ISPCMD
10300  0000000                   
10301  0000000                   	LDA #ISP_DONE
10302  0000000                   	TSB !ISPTRG
10303  0000000                   
10304  0000000                   	LDA !ISPCON
10305  0000000                   	AND #ISP_ERR_FLAG
10306  0000000                   	BEQ POLLING_ISP_READ_TRG#





10307  0000000                   	LDA #01H
10308  0000000                   	JMP	ISP_VERIFY_DATA_DP_END#
10309  0000000                   
10310  0000000                   POLLING_ISP_READ_TRG#:
10311  0000000                   	LDA !ISPTRG
10312  0000000                   	AND #ISP_DONE
10313  0000000                   	BNE POLLING_ISP_READ_TRG#
10314  0000000                   
10315  0000000                   ; VERIFY DATA
10316  0000000                   	PHX
10317  0000000                   	LDX #0
10318  0000000                   VERIFY_DAT_LOOP#:
10319  0000000                   	LDA ISPDAT0,X
10320  0000000                   	CMP PDATA4,X
10321  0000000                   	BEQ 3
10322  0000000                   	JMP VERIFY_NG#
10323  0000000                   
10324  0000000                   	INX
10325  0000000                   	CPX #4
10326  0000000                   	BEQ 3 
10327  0000000                   	JMP VERIFY_DAT_LOOP#
10328  0000000                   VERIFY_OK#:
10329  0000000                   	LDA #00H
10330  0000000                   	JMP VERIFY_DATA_END#
10331  0000000                   VERIFY_NG#:
10332  0000000                   	LDA #04H
10333  0000000                   VERIFY_DATA_END#
10334  0000000                   	PLX
10335  0000000                   
10336  0000000                   ISP_VERIFY_DATA_DP_END#:
10337  0000000                   	PHA
10338  0000000                   	ISP_LOCK
10339  0000000                   	PLA
10340  0000000                   	ENDM
10341  0000000                   ;----------------------------------------------------
10342  0000000                   ISP_VERIFY_DATA_DP_ILI MACRO PADDR3, PDATA4
10343  0000000                   	ISP_UNLOCK
10344  0000000                   
10345  0000000                   	ISP_SET_ADDR_DP PADDR3
10346  0000000                   
10347  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10348  0000000                   	TSB !ISPCON
10349  0000000                   	LDA #ISP_CMD_READ
10350  0000000                   	STA !ISPCMD
10351  0000000                   
10352  0000000                   	LDA #ISP_DONE
10353  0000000                   	TSB !ISPTRG
10354  0000000                   
10355  0000000                   	LDA !ISPCON
10356  0000000                   	AND #ISP_ERR_FLAG
10357  0000000                   	BEQ POLLING_ISP_READ_TRG#
10358  0000000                   	LDA #01H
10359  0000000                   	JMP	ISP_VERIFY_DATA_DP_ILI_END#
10360  0000000                   
10361  0000000                   POLLING_ISP_READ_TRG#:
10362  0000000                   	LDA !ISPTRG
10363  0000000                   	AND #ISP_DONE





10364  0000000                   	BNE POLLING_ISP_READ_TRG#
10365  0000000                   
10366  0000000                   ; VERIFY DATA
10367  0000000                   	PHY
10368  0000000                   	LDY #0
10369  0000000                   VERIFY_DAT_LOOP#:
10370  0000000                   	LDA ISPDAT0,Y
10371  0000000                   	CMP (PDATA4),Y
10372  0000000                   	BEQ 3
10373  0000000                   	JMP VERIFY_NG#
10374  0000000                   
10375  0000000                   	INY
10376  0000000                   	CPY #4
10377  0000000                   	BEQ 3 
10378  0000000                   	JMP VERIFY_DAT_LOOP#
10379  0000000                   VERIFY_OK#:
10380  0000000                   	LDA #00H
10381  0000000                   	JMP VERIFY_DATA_END#
10382  0000000                   VERIFY_NG#:
10383  0000000                   	LDA #04H
10384  0000000                   VERIFY_DATA_END#
10385  0000000                   	PLY
10386  0000000                   
10387  0000000                   ISP_VERIFY_DATA_DP_ILI_END#:
10388  0000000                   	PHA
10389  0000000                   	ISP_LOCK
10390  0000000                   	PLA
10391  0000000                   	ENDM
10392  0000000                   ;----------------------------------------------------
10393  0000000                   ISP_VERIFY_DATA_DP_ILI_X MACRO PADDR3, PDATA4, NUM
10394  0000000                   	ISP_UNLOCK
10395  0000000                   
10396  0000000                   	ISP_SET_ADDR_DP PADDR3
10397  0000000                   
10398  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10399  0000000                   	TSB !ISPCON
10400  0000000                   	LDA #ISP_CMD_READ
10401  0000000                   	STA !ISPCMD
10402  0000000                   
10403  0000000                   	LDA #ISP_DONE
10404  0000000                   	TSB !ISPTRG
10405  0000000                   
10406  0000000                   	LDA !ISPCON
10407  0000000                   	AND #ISP_ERR_FLAG
10408  0000000                   	BEQ POLLING_ISP_READ_TRG#
10409  0000000                   	LDA #01H
10410  0000000                   	JMP	ISP_VERIFY_DATA_DP_ILI_X_END#
10411  0000000                   
10412  0000000                   POLLING_ISP_READ_TRG#:
10413  0000000                   	LDA !ISPTRG
10414  0000000                   	AND #ISP_DONE
10415  0000000                   	BNE POLLING_ISP_READ_TRG#
10416  0000000                   
10417  0000000                   ; VERIFY DATA
10418  0000000                   	PHY
10419  0000000                   	LDY #0
10420  0000000                   VERIFY_DAT_LOOP#:





10421  0000000                   	LDA ISPDAT0,Y
10422  0000000                   	CMP (PDATA4),Y
10423  0000000                   	BEQ 3
10424  0000000                   	JMP VERIFY_NG#
10425  0000000                   
10426  0000000                   	INY
10427  0000000                   	CPY NUM
10428  0000000                   	BEQ 3 
10429  0000000                   	JMP VERIFY_DAT_LOOP#
10430  0000000                   VERIFY_OK#:
10431  0000000                   	LDA #00H
10432  0000000                   	JMP VERIFY_DATA_END#
10433  0000000                   VERIFY_NG#:
10434  0000000                   	LDA #04H
10435  0000000                   VERIFY_DATA_END#
10436  0000000                   	PLY
10437  0000000                   
10438  0000000                   ISP_VERIFY_DATA_DP_ILI_X_END#:
10439  0000000                   	PHA
10440  0000000                   	ISP_LOCK
10441  0000000                   	PLA
10442  0000000                   	ENDM
10443  0000000                   ;--------------------------------------------------------
10444  0000000                   ; @brief	ISP write data
10445  0000000                   ;--------------------------------------------------------
10446  0000000                   ISP_WRITE_DATA MACRO SADDR, PDATA4
10447  0000000                   	ISP_UNLOCK
10448  0000000                   
10449  0000000                   	ISP_SET_DATA_DP PDATA4
10450  0000000                   	ISP_SET_ADDR SADDR
10451  0000000                   
10452  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10453  0000000                   	TSB !ISPCON
10454  0000000                   	LDA #ISP_CMD_PROGRAM
10455  0000000                   	STA !ISPCMD	
10456  0000000                   
10457  0000000                   	LDA #ISP_DONE
10458  0000000                   	TSB !ISPTRG
10459  0000000                   
10460  0000000                   	LDA !ISPCON
10461  0000000                   	AND #ISP_ERR_FLAG
10462  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10463  0000000                   	LDA #03H
10464  0000000                   	JMP	ISP_WRITE_DATA_END#
10465  0000000                   
10466  0000000                   POLLING_ISP_WRITE_TRG#:
10467  0000000                   	LDA !ISPTRG
10468  0000000                   	AND #ISP_DONE
10469  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10470  0000000                   
10471  0000000                   WRITE_OK#:
10472  0000000                   	LDA #00H
10473  0000000                   
10474  0000000                   ISP_WRITE_DATA_END#:
10475  0000000                   	PHA
10476  0000000                   	ISP_LOCK
10477  0000000                   	PLA





10478  0000000                   	ENDM
10479  0000000                   ;----------------------------------------------------
10480  0000000                   ISP_WRITE_DATA_DP MACRO PADDR3, PDATA4
10481  0000000                   	ISP_UNLOCK
10482  0000000                   
10483  0000000                   	ISP_SET_DATA_DP PDATA4
10484  0000000                   	ISP_SET_ADDR_DP PADDR3
10485  0000000                   
10486  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10487  0000000                   	TSB !ISPCON
10488  0000000                   	LDA #ISP_CMD_PROGRAM
10489  0000000                   	STA !ISPCMD	
10490  0000000                   
10491  0000000                   	LDA #ISP_DONE
10492  0000000                   	TSB !ISPTRG
10493  0000000                   
10494  0000000                   	LDA !ISPCON
10495  0000000                   	AND #ISP_ERR_FLAG
10496  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10497  0000000                   	LDA #03H
10498  0000000                   	JMP	ISP_WRITE_DATA_END#
10499  0000000                   
10500  0000000                   POLLING_ISP_WRITE_TRG#:
10501  0000000                   	LDA !ISPTRG
10502  0000000                   	AND #ISP_DONE
10503  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10504  0000000                   
10505  0000000                   WRITE_OK#:
10506  0000000                   	LDA #00H
10507  0000000                   
10508  0000000                   ISP_WRITE_DATA_END#:
10509  0000000                   	PHA
10510  0000000                   	ISP_LOCK
10511  0000000                   	PLA
10512  0000000                   	ENDM
10513  0000000                   
10514  0000000                   ;----------------------------------------------------
10515  0000000                   ISP_WRITE_DATA_DP_ILI MACRO PADDR3, PDATA
10516  0000000                   	ISP_UNLOCK
10517  0000000                   
10518  0000000                   	ISP_SET_DATA_DP_ILI .LOW.PDATA
10519  0000000                   	ISP_SET_ADDR_DP PADDR3
10520  0000000                   
10521  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10522  0000000                   	TSB !ISPCON
10523  0000000                   	LDA #ISP_CMD_PROGRAM
10524  0000000                   	STA !ISPCMD	
10525  0000000                   
10526  0000000                   	LDA #ISP_DONE
10527  0000000                   	TSB !ISPTRG
10528  0000000                   
10529  0000000                   	LDA !ISPCON
10530  0000000                   	AND #ISP_ERR_FLAG
10531  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10532  0000000                   	LDA #03H
10533  0000000                   	JMP	ISP_WRITE_DATA_END#
10534  0000000                   





10535  0000000                   POLLING_ISP_WRITE_TRG#:
10536  0000000                   	LDA !ISPTRG
10537  0000000                   	AND #ISP_DONE
10538  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10539  0000000                   
10540  0000000                   WRITE_OK#:
10541  0000000                   	LDA #00H
10542  0000000                   
10543  0000000                   ISP_WRITE_DATA_END#:
10544  0000000                   	PHA
10545  0000000                   	ISP_LOCK
10546  0000000                   	PLA
10547  0000000                   	ENDM
10548  0000000                   ;----------------------------------------------------
10549  0000000                   ISP_WRITE_DATA_DP_ILI_X MACRO PADDR3, PDATA, NUM
10550  0000000                   	ISP_UNLOCK
10551  0000000                   
10552  0000000                   	LDA #FFH
10553  0000000                   	STA !ISPDAT0
10554  0000000                   	STA !ISPDAT1
10555  0000000                   	STA !ISPDAT2
10556  0000000                   	STA !ISPDAT3
10557  0000000                   
10558  0000000                   	ISP_SET_DATA_DP_ILI_X .LOW.PDATA, NUM
10559  0000000                   	ISP_SET_ADDR_DP PADDR3
10560  0000000                   
10561  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10562  0000000                   	TSB !ISPCON
10563  0000000                   	LDA #ISP_CMD_PROGRAM
10564  0000000                   	STA !ISPCMD	
10565  0000000                   
10566  0000000                   	LDA #ISP_DONE
10567  0000000                   	TSB !ISPTRG
10568  0000000                   
10569  0000000                   	LDA !ISPCON
10570  0000000                   	AND #ISP_ERR_FLAG
10571  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10572  0000000                   	LDA #03H
10573  0000000                   	JMP	ISP_WRITE_DATA_END#
10574  0000000                   
10575  0000000                   POLLING_ISP_WRITE_TRG#:
10576  0000000                   	LDA !ISPTRG
10577  0000000                   	AND #ISP_DONE
10578  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10579  0000000                   
10580  0000000                   WRITE_OK#:
10581  0000000                   	LDA #00H
10582  0000000                   
10583  0000000                   ISP_WRITE_DATA_END#:
10584  0000000                   	PHA
10585  0000000                   	ISP_LOCK
10586  0000000                   	PLA
10587  0000000                   	ENDM
10588  0000000                   ;--------------------------------------------------------
10589  0000000                   ; @brief	ISP erase page
10590  0000000                   ;--------------------------------------------------------
10591  0000000                   ISP_ERASE_PAGE MACRO SADDR





10592  0000000                   	ISP_UNLOCK
10593  0000000                   
10594  0000000                   	ISP_SET_ADDR SADDR
10595  0000000                   
10596  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10597  0000000                   	TSB !ISPCON
10598  0000000                   	LDA #ISP_CMD_ERASE_PAGE
10599  0000000                   	STA !ISPCMD	
10600  0000000                   
10601  0000000                   	LDA #ISP_DONE
10602  0000000                   	TSB !ISPTRG
10603  0000000                   
10604  0000000                   	LDA !ISPCON
10605  0000000                   	AND #ISP_ERR_FLAG
10606  0000000                   	BEQ POLLING_ISP_ERASE_TRG#
10607  0000000                   	LDA #05H
10608  0000000                   	JMP	ISP_ERASE_PAGE_END#
10609  0000000                   
10610  0000000                   POLLING_ISP_ERASE_TRG#:
10611  0000000                   	LDA !ISPTRG
10612  0000000                   	AND #ISP_DONE
10613  0000000                   	BNE POLLING_ISP_ERASE_TRG#
10614  0000000                   
10615  0000000                   ERASE_OK#:
10616  0000000                   	LDA #00H
10617  0000000                   
10618  0000000                   ISP_ERASE_PAGE_END#:
10619  0000000                   	PHA
10620  0000000                   	ISP_LOCK
10621  0000000                   	PLA
10622  0000000                   	ENDM
10623  0000000                   ;----------------------------------------------------
10624  0000000                   ISP_ERASE_PAGE_DP MACRO PADDR3
10625  0000000                   	ISP_UNLOCK
10626  0000000                   
10627  0000000                   	ISP_SET_ADDR_DP PADDR3
10628  0000000                   
10629  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10630  0000000                   	TSB !ISPCON
10631  0000000                   	LDA #ISP_CMD_ERASE_PAGE
10632  0000000                   	STA !ISPCMD	
10633  0000000                   
10634  0000000                   	LDA #ISP_DONE
10635  0000000                   	TSB !ISPTRG
10636  0000000                   
10637  0000000                   	LDA !ISPCON
10638  0000000                   	AND #ISP_ERR_FLAG
10639  0000000                   	BEQ POLLING_ISP_ERASE_TRG#
10640  0000000                   	LDA #05H
10641  0000000                   	JMP	ISP_ERASE_PAGE_END#
10642  0000000                   
10643  0000000                   POLLING_ISP_ERASE_TRG#:
10644  0000000                   	LDA !ISPTRG
10645  0000000                   	AND #ISP_DONE
10646  0000000                   	BNE POLLING_ISP_ERASE_TRG#
10647  0000000                   
10648  0000000                   ERASE_OK#:





10649  0000000                   	LDA #00H
10650  0000000                   
10651  0000000                   ISP_ERASE_PAGE_END#:
10652  0000000                   	PHA
10653  0000000                   	ISP_LOCK
10654  0000000                   	PLA
10655  0000000                   	ENDM
10656  0000000                   
10657  0000000                   ;--------------------------------------------------------
10658  0000000                   ; @brief	ISP read ID	
10659  0000000                   ;--------------------------------------------------------
10660  0000000                   ISP_READ_CID MACRO PDATA
10661  0000000                   	ISP_UNLOCK
10662  0000000                   
10663  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10664  0000000                   	TSB !ISPCON
10665  0000000                   	LDA #ISP_CMD_CID
10666  0000000                   	STA !ISPCMD	
10667  0000000                   
10668  0000000                   	LDA #ISP_DONE
10669  0000000                   	TSB !ISPTRG
10670  0000000                   
10671  0000000                   	LDA !ISPCON
10672  0000000                   	AND #ISP_ERR_FLAG
10673  0000000                   	BEQ POLLING_ISP_READ_CID_TRG#
10674  0000000                   	JMP	ISP_READ_CID_END#
10675  0000000                   
10676  0000000                   POLLING_ISP_READ_CID_TRG#:
10677  0000000                   	LDA !ISPTRG
10678  0000000                   	AND #ISP_DONE
10679  0000000                   	BNE POLLING_ISP_READ_TRG#
10680  0000000                   
10681  0000000                   	LDA !ISPDAT0
10682  0000000                   	STA PDATA
10683  0000000                   
10684  0000000                   ISP_READ_CID_END#:
10685  0000000                   	ISP_LOCK
10686  0000000                   	ENDM
10687  0000000                   ;----------------------------------------------------
10688  0000000                   ISP_READ_DID MACRO PDATA
10689  0000000                   	ISP_UNLOCK
10690  0000000                   
10691  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10692  0000000                   	TSB !ISPCON
10693  0000000                   	LDA #ISP_CMD_DID
10694  0000000                   	STA !ISPCMD	
10695  0000000                   
10696  0000000                   	LDA #ISP_DONE
10697  0000000                   	TSB !ISPTRG
10698  0000000                   
10699  0000000                   	LDA !ISPCON
10700  0000000                   	AND #ISP_ERR_FLAG
10701  0000000                   	BEQ POLLING_ISP_READ_DID_TRG#
10702  0000000                   	JMP	ISP_READ_DID_END#
10703  0000000                   
10704  0000000                   POLLING_ISP_READ_DID_TRG#:
10705  0000000                   	LDA !ISPTRG





10706  0000000                   	AND #ISP_DONE
10707  0000000                   	BNE POLLING_ISP_READ_TRG#
10708  0000000                   
10709  0000000                   	LDA !ISPDAT0
10710  0000000                   	STA PDATA
10711  0000000                   
10712  0000000                   ISP_READ_DID_END#:
10713  0000000                   	ISP_LOCK
10714  0000000                   
10715  0000000                   	ENDM
10716  0000000                   
10717  0000000                   
10718  0000000                   
10719  0000000                   	EXTERN FLASH_ERASE_PAGE_PROC
10720  0000000                   	EXTERN FLASH_READ_PAGE_PROC
10721  0000000                   	EXTERN FLASH_WRITE_PAGE_PROC
10722  0000000                   	EXTERN FLASH_COPY_PAGE_PROC
10723  0000000                   	EXTERN FLASH_BLANK_CHECK_PAGE_PROC
10724  0000000                   	EXTERN FLASH_BACKUP_REPLACE_PAGE_PROC
10725  0000000                   	EXTERN FLASH_PAGE_INJECT_ID_PROC
10726  0000000                   
10727  0000000                   	EXTERN PROTECTION_PAGE_READ_PROC
10728  0000000                   	EXTERN PROTECTION_PAGE_UPDATE_PROC
10729  0000000                   
10730  0000000                   	EXTERN FLASH_SECTION_UPDATE_PROC
10731  0000000                   	EXTERN FLASH_SECTION_READ_PROC
10732  0000000                   ;-------------------------------------------;
10733  0000000                   ; Defince                               	;
10734  0000000                   ;-------------------------------------------;
10735  0000000                   .IF (WITH_ISP_READ_WRITE .EQ. 1)
10736  0000000                   SRC_BUF4				EQU		ISP_TEMP
10737  0000000                   DST_PAGE_START_ADDR3	EQU		ISP_TEMP+4
10738  0000000                   SRC_LEN2				EQU		ISP_TEMP+7
10739  0000000                   .ENDIF
10740  0000000                   .IF (WITH_ISP_UPDATE .EQ. 1)
10741  0000000                   DST_BUF4				EQU		ISP_TEMP+9
10742  0000000                   SRC_PAGE_START_ADDR3	EQU		ISP_TEMP+13
10743  0000000                   OFFSET2					EQU		ISP_TEMP+16
10744  0000000                   COUNT2					EQU 	ISP_TEMP+18
10745  0000000                   .ENDIF
10746  0000000                   .IF (WITH_PROTECTION_PAGE_UPDATE .EQ. 1)
10747  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 1)	
10748  0000000                   OFFSET_TEMP				EQU		ISP_TEMP+20
10749  0000000                   LEN_TEMP				EQU		ISP_TEMP+22
10750  0000000                   PBUF_TEMP				EQU		ISP_TEMP+24
10751  0000000                   .ENDIF
10752  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 2)
10753  0000000                   NOW_SECTION_INDEX		EQU			ISP_TEMP+20
10754  0000000                   UPDATE_SECTION_STATUS	EQU			ISP_TEMP+21
10755  0000000                   NP_INDEX				EQU			ISP_TEMP+22
10756  0000000                   SP_INDEX				EQU			ISP_TEMP+23
10757  0000000                   PBUF_TEMP				EQU			ISP_TEMP+24
10758  0000000                   SECTION_OFFSET			EQU			OFFSET2
10759  0000000                   .ENDIF
10760  0000000                   .ENDIF
10761  0000000                   
10762  0000000                   NU_ID					EQU		19H





10763  0000000                   PAGE_SIZE				EQU 	512
10764  0000000                   
10765  0000000                   
10766  0000000                   ;--------------------------------------------------------
10767  0000000                   ; @brief	Read flash
10768  0000000                   ;--------------------------------------------------------
10769  0000000                   FLASH_READ MACRO DST_ADDR, LEN, SRC_PBUF
10770  0000000                   	FLASH_READ_PAGE_DP DST_ADDR, 0, LEN, SRC_PBUF
10771  0000000                   	ENDM
10772  0000000                   ;--------------------------------------------------------
10773  0000000                   ; @brief	Read flash
10774  0000000                   ;--------------------------------------------------------
10775  0000000                   FLASH_READ_RAM MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10776  0000000                   	FLASH_READ_DP_RAM DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10777  0000000                   	ENDM
10778  0000000                   ;--------------------------------------------------------
10779  0000000                   ; @brief	Read flash
10780  0000000                   ;--------------------------------------------------------
10781  0000000                   FLASH_READ_RAM_ILI MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10782  0000000                   	FLASH_READ_DP_RAM_ILI DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10783  0000000                   	ENDM
10784  0000000                   ;--------------------------------------------------------
10785  0000000                   ; @brief	Read flash page
10786  0000000                   ;--------------------------------------------------------
10787  0000000                   FLASH_READ_PAGE MACRO DST_ADDR, DST_OFFSET, LEN, SRC_PBUF
10788  0000000                   	FLASH_READ_PAGE_DP DST_ADDR, DST_OFFSET, LEN, SRC_PBUF
10789  0000000                   	ENDM
10790  0000000                   ;--------------------------------------------------------
10791  0000000                   ; @brief	Read flash page
10792  0000000                   ;--------------------------------------------------------
10793  0000000                   FLASH_READ_PAGE_RAM MACRO DST_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10794  0000000                   	FLASH_READ_PAGE_DP_RAM DST_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10795  0000000                   	ENDM
10796  0000000                   ;--------------------------------------------------------
10797  0000000                   ; @brief	Read flash page with ram buf
10798  0000000                   ; @param	Destination page address, count, offset, and 
10799  0000000                   ;			pointer to buffer
10800  0000000                   ;--------------------------------------------------------
10801  0000000                   FLASH_READ_PAGE_DP MACRO DST_ADDR, DST_OFFSET, LEN, SRC_PBUF
10802  0000000                   	MOV16_16 SRC_LEN2, LEN
10803  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_ADDR
10804  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, DST_OFFSET
10805  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10806  0000000                   
10807  0000000                   	JSR FLASH_READ_PAGE_PROC
10808  0000000                   
10809  0000000                   	ENDM
10810  0000000                   ;--------------------------------------------------------
10811  0000000                   ; @brief	Read flash page with ram buf
10812  0000000                   ; @param	Destination page address, count, offset, and 
10813  0000000                   ;			pointer to buffer
10814  0000000                   ;--------------------------------------------------------
10815  0000000                   FLASH_READ_PAGE_DP_RAM MACRO DST_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10816  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10817  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10818  0000000                   	ADD24_16_DP DST_PAGE_START_ADDR3, DST_OFFSET_RAM
10819  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF





10820  0000000                   
10821  0000000                   	JSR FLASH_READ_PAGE_PROC
10822  0000000                   	ENDM
10823  0000000                   ;--------------------------------------------------------
10824  0000000                   FLASH_READ_DP_RAM MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10825  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10826  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10827  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10828  0000000                   
10829  0000000                   	JSR FLASH_READ_PAGE_PROC
10830  0000000                   	ENDM
10831  0000000                   ;--------------------------------------------------------
10832  0000000                   FLASH_READ_DP_RAM_ILI MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10833  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10834  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10835  0000000                   	LDA .LOW.SRC_PBUF
10836  0000000                   	STA SRC_BUF4
10837  0000000                   	LDA .HIGH.SRC_PBUF
10838  0000000                   	STA SRC_BUF4+1
10839  0000000                   
10840  0000000                   	JSR FLASH_READ_PAGE_PROC
10841  0000000                   	ENDM
10842  0000000                   ;--------------------------------------------------------
10843  0000000                   ;FLASH_READ_PAGE_PROC MACRO
10844  0000000                   ;PHP
10845  0000000                   ;SEI
10846  0000000                   ;
10847  0000000                   ;READ_FLASH_LOOP#:
10848  0000000                   ;LDA SRC_LEN2+1;
10849  0000000                   ;CMP #00
10850  0000000                   ;BCC READ_FLASH_PROC_1#
10851  0000000                   ;BNE READ_FLASH_PROC_2#
10852  0000000                   ;LDA SRC_LEN2
10853  0000000                   ;CMP #04H
10854  0000000                   ;BCS READ_FLASH_PROC_2# ; if NUM1L >= NUM2L then NUM1 >= NUM2
10855  0000000                   ;
10856  0000000                   ;READ_FLASH_PROC_1#:
10857  0000000                   ;LDA SRC_LEN2
10858  0000000                   ;BNE 3
10859  0000000                   ;JMP END_FLAGH_READ_PAGE_DP_OK#
10860  0000000                   ;
10861  0000000                   ;;read data (<4B) 
10862  0000000                   ;ISP_READ_DATA_DP_ILI_X DST_PAGE_START_ADDR3, SRC_BUF4, SRC_LEN2
10863  0000000                   ;BEQ 3
10864  0000000                   ;JMP END_FLASH_READ_PAGE_DP#
10865  0000000                   ;
10866  0000000                   ;JMP END_FLAGH_READ_PAGE_DP_OK#
10867  0000000                   ;
10868  0000000                   ;READ_FLASH_PROC_2#:
10869  0000000                   ;;read data (4B) 
10870  0000000                   ;ISP_READ_DATA_DP_ILI DST_PAGE_START_ADDR3, SRC_BUF4
10871  0000000                   ;BEQ 3
10872  0000000                   ;JMP END_FLASH_READ_PAGE_DP#
10873  0000000                   ;
10874  0000000                   ;;accumulate address
10875  0000000                   ;DNLOAD_ADDR_INC#:
10876  0000000                   ;;accumulate destination address





10877  0000000                   ;ADD24_24 DST_PAGE_START_ADDR3, 4
10878  0000000                   ;
10879  0000000                   ;;accumlate pointer to buffer
10880  0000000                   ;ADD16_16 SRC_BUF4, 4
10881  0000000                   ;
10882  0000000                   ;;accumlate count
10883  0000000                   ;SBC16_16 SRC_LEN2, 4
10884  0000000                   ;JMP READ_FLASH_LOOP#
10885  0000000                   ;
10886  0000000                   ;END_FLAGH_READ_PAGE_DP_OK#:
10887  0000000                   ;LDA #00H
10888  0000000                   ;END_FLASH_READ_PAGE_DP#:
10889  0000000                   ;PLP
10890  0000000                   ;
10891  0000000                   ;ENDM
10892  0000000                   ;--------------------------------------------------------
10893  0000000                   ; @brief	Blank flash page
10894  0000000                   ;--------------------------------------------------------
10895  0000000                   FLASH_BLANK_PAGE MACRO DST_ADDR, LEN
10896  0000000                   	MOV16_16 SRC_LEN2, LEN
10897  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_ADDR
10898  0000000                   
10899  0000000                   	JSR FLASH_BLANK_CHECK_PAGE_PROC
10900  0000000                   
10901  0000000                   	ENDM
10902  0000000                   ;--------------------------------------------------------
10903  0000000                   ; @brief	Blank flash page
10904  0000000                   ;--------------------------------------------------------
10905  0000000                   FLASH_BLANK_PAGE_RAM MACRO DST_ADDR_RAM, LEN_RAM
10906  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10907  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10908  0000000                   
10909  0000000                   	JSR FLASH_BLANK_CHECK_PAGE_PROC
10910  0000000                   
10911  0000000                   	ENDM
10912  0000000                   ;--------------------------------------------------------
10913  0000000                   ; @brief	Erase flash page
10914  0000000                   ; @param	
10915  0000000                   ;--------------------------------------------------------
10916  0000000                   FLASH_ERASE_PAGE MACRO DST_PAGE_ADDR
10917  0000000                   
10918  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
10919  0000000                   	JSR FLASH_ERASE_PAGE_PROC
10920  0000000                   
10921  0000000                   	ENDM
10922  0000000                   ;--------------------------------------------------------
10923  0000000                   ; @brief	Erase flash page
10924  0000000                   ; @param	
10925  0000000                   ;--------------------------------------------------------
10926  0000000                   FLASH_ERASE_PAGE_RAM MACRO DST_PAGE_ADDR_RAM
10927  0000000                   
10928  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
10929  0000000                   	JSR FLASH_ERASE_PAGE_PROC
10930  0000000                   
10931  0000000                   	ENDM
10932  0000000                   ;--------------------------------------------------------
10933  0000000                   ; @brief	Write flash





10934  0000000                   ;--------------------------------------------------------
10935  0000000                   FLASH_WRITE MACRO DST_ADDR, LEN, SRC_PBUF
10936  0000000                   	FLASH_WRITE_PAGE_DP DST_ADDR, 0, LEN, SRC_PBUF
10937  0000000                   	ENDM
10938  0000000                   ;--------------------------------------------------------
10939  0000000                   ; @brief	Write flash
10940  0000000                   ;--------------------------------------------------------
10941  0000000                   FLASH_WRITE_RAM MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10942  0000000                   	FLASH_WRITE_DP_RAM DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10943  0000000                   	ENDM
10944  0000000                   ;--------------------------------------------------------
10945  0000000                   ; @brief	Write flash
10946  0000000                   ;--------------------------------------------------------
10947  0000000                   FLASH_WRITE_RAM_ILI MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10948  0000000                   	FLASH_WRITE_DP_RAM_ILI DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10949  0000000                   	ENDM
10950  0000000                   ;--------------------------------------------------------
10951  0000000                   ; @brief	Write flash page
10952  0000000                   ; @param	
10953  0000000                   ;--------------------------------------------------------
10954  0000000                   FLASH_WRITE_PAGE MACRO DST_PAGE_ADDR, DST_OFFSET, LEN, SRC_PBUF
10955  0000000                   	FLASH_WRITE_PAGE_DP DST_PAGE_ADDR, DST_OFFSET, LEN, SRC_PBUF
10956  0000000                   	ENDM
10957  0000000                   ;--------------------------------------------------------
10958  0000000                   ; @brief	Write flash page
10959  0000000                   ; @param	
10960  0000000                   ;--------------------------------------------------------
10961  0000000                   FLASH_WRITE_PAGE_RAM MACRO DST_PAGE_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10962  0000000                   	FLASH_WRITE_PAGE_DP_RAM DST_PAGE_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10963  0000000                   	ENDM
10964  0000000                   ;--------------------------------------------------------
10965  0000000                   ; @brief	Write flash page with ram buf
10966  0000000                   ; @param	Destination page address, count, offset, and 
10967  0000000                   ;			pointer to buffer
10968  0000000                   ;--------------------------------------------------------
10969  0000000                   FLASH_WRITE_PAGE_DP MACRO DST_PAGE_ADDR, DST_OFFSET, LEN, SRC_PBUF
10970  0000000                   	MOV16_16 SRC_LEN2, LEN
10971  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
10972  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, DST_OFFSET
10973  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10974  0000000                   
10975  0000000                   	JSR FLASH_WRITE_PAGE_PROC
10976  0000000                   	ENDM
10977  0000000                   ;--------------------------------------------------------
10978  0000000                   ; @brief	Write flash page with ram buf
10979  0000000                   ; @param	Destination page address, count, offset, and 
10980  0000000                   ;			pointer to buffer
10981  0000000                   ;--------------------------------------------------------
10982  0000000                   FLASH_WRITE_PAGE_DP_RAM MACRO DST_PAGE_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10983  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10984  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
10985  0000000                   	ADD24_16_DP DST_PAGE_START_ADDR3, DST_OFFSET_RAM
10986  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10987  0000000                   
10988  0000000                   	JSR FLASH_WRITE_PAGE_PROC
10989  0000000                   	ENDM
10990  0000000                   ;--------------------------------------------------------





10991  0000000                   ; @brief	Write flash page with ram buf
10992  0000000                   ; @param	Destination page address, count, offset, and 
10993  0000000                   ;			pointer to buffer
10994  0000000                   ;--------------------------------------------------------
10995  0000000                   FLASH_WRITE_DP_RAM MACRO DST_PAGE_ADDR_RAM, LEN_RAM, SRC_PBUF
10996  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10997  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
10998  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10999  0000000                   
11000  0000000                   	JSR FLASH_WRITE_PAGE_PROC
11001  0000000                   	ENDM
11002  0000000                   
11003  0000000                   ;--------------------------------------------------------
11004  0000000                   ; @brief	Write flash page with ram buf
11005  0000000                   ; @param	Destination page address, count, offset, and 
11006  0000000                   ;			pointer to buffer
11007  0000000                   ;--------------------------------------------------------
11008  0000000                   FLASH_WRITE_DP_RAM_ILI MACRO DST_PAGE_ADDR_RAM, LEN_RAM, SRC_PBUF
11009  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
11010  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
11011  0000000                   
11012  0000000                   	LDA .LOW.SRC_PBUF
11013  0000000                   	STA SRC_BUF4
11014  0000000                   	LDA .HIGH.SRC_PBUF
11015  0000000                   	STA SRC_BUF4+1
11016  0000000                   
11017  0000000                   	JSR FLASH_WRITE_PAGE_PROC
11018  0000000                   	ENDM
11019  0000000                   
11020  0000000                   ;--------------------------------------------------------
11021  0000000                   ; @brief	Copy flash page
11022  0000000                   ;--------------------------------------------------------		
11023  0000000                   FLASH_COPY_PAGE MACRO DST_PAGE_ADDR, SRC_PAGE_ADDR
11024  0000000                   
11025  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
11026  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11027  0000000                   
11028  0000000                   	STZ16 COUNT2
11029  0000000                   
11030  0000000                   	JSR FLASH_COPY_PAGE_PROC
11031  0000000                   
11032  0000000                   	ENDM
11033  0000000                   ;--------------------------------------------------------
11034  0000000                   ; @brief	Copy flash page
11035  0000000                   ;--------------------------------------------------------		
11036  0000000                   FLASH_COPY_PAGE_RAM MACRO DST_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM
11037  0000000                   	PHP
11038  0000000                   	SEI
11039  0000000                   
11040  0000000                   ;IS_ILLEGAL_PAGE_FORMAT DST_PAGE_ADDR
11041  0000000                   ;BEQ 3
11042  0000000                   ;JMP FLASH_COPY_PAGE_ERROR#
11043  0000000                   
11044  0000000                   ;IS_ILLEGAL_PAGE_FORMAT SRC_PAGE_ADDR
11045  0000000                   ;BEQ 3
11046  0000000                   ;JMP FLASH_COPY_PAGE_ERROR#
11047  0000000                   





11048  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
11049  0000000                   	MOV24_24_DP SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR_RAM
11050  0000000                   
11051  0000000                   	STZ16 COUNT2
11052  0000000                   
11053  0000000                   ;eraes flash page before program data
11054  0000000                   	ISP_ERASE_PAGE_DP DST_PAGE_START_ADDR3
11055  0000000                   	BEQ 3
11056  0000000                   	JMP END_COPY_FLASH_PAGE#
11057  0000000                   
11058  0000000                   COPY_LOOP#:
11059  0000000                   
11060  0000000                   ;read data (4B)
11061  0000000                   	ISP_READ_DATA_DP SRC_PAGE_START_ADDR3, SRC_BUF4
11062  0000000                   	BEQ 3
11063  0000000                   	JMP END_COPY_FLASH_PAGE#
11064  0000000                   
11065  0000000                   ;program data (4B)
11066  0000000                   	ISP_WRITE_DATA_DP DST_PAGE_START_ADDR3, SRC_BUF4
11067  0000000                   	BEQ 3
11068  0000000                   	JMP END_COPY_FLASH_PAGE#
11069  0000000                   
11070  0000000                   ;verify data (4B)
11071  0000000                   	ISP_VERIFY_DATA_DP DST_PAGE_START_ADDR3, SRC_BUF4
11072  0000000                   	BEQ 3
11073  0000000                   	JMP END_COPY_FLASH_PAGE#
11074  0000000                   
11075  0000000                   ;accumlate source address
11076  0000000                   	ADD24_24 SRC_PAGE_START_ADDR3, 4
11077  0000000                   
11078  0000000                   ;accumlate destination address
11079  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, 4
11080  0000000                   
11081  0000000                   ;accumlate count
11082  0000000                   	ADD16_16 COUNT2, 4
11083  0000000                   
11084  0000000                   LAST_CHECK#:
11085  0000000                   	LDA !COUNT2+1
11086  0000000                   	CMP #.HIGH.PAGE_SIZE
11087  0000000                   	BEQ 3
11088  0000000                   	JMP COPY_LOOP#
11089  0000000                   	LDA !COUNT2
11090  0000000                   	CMP #.LOW.PAGE_SIZE
11091  0000000                   	BEQ 3
11092  0000000                   	JMP COPY_LOOP#
11093  0000000                   	JMP END_COPY_FLASH_PAGE_OK#
11094  0000000                   
11095  0000000                   END_COPY_FLASH_PAGE_OK#:
11096  0000000                   	LDA #00H
11097  0000000                   END_COPY_FLASH_PAGE#:
11098  0000000                   	PLP
11099  0000000                   	ENDM
11100  0000000                   ;--------------------------------------------------------
11101  0000000                   ; @brief	MODIFY flash page
11102  0000000                   ;--------------------------------------------------------
11103  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11104  0000000                   





11105  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR
11106  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11107  0000000                   
11108  0000000                   	MOV16_16 OFFSET2, DST_OFFSET
11109  0000000                   	MOV16_16 SRC_LEN2, SRC_LEN
11110  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11111  0000000                   
11112  0000000                   	JSR FLASH_BACKUP_REPLACE_PAGE_PROC
11113  0000000                   
11114  0000000                   	ENDM
11115  0000000                   ;--------------------------------------------------------
11116  0000000                   ; @brief	MODIFY flash page
11117  0000000                   ;--------------------------------------------------------
11118  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP_RAM MACRO BACKUP_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11119  0000000                   
11120  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR_RAM
11121  0000000                   	MOV24_24_DP SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR_RAM
11122  0000000                   
11123  0000000                   	MOV16_16_DP OFFSET2, DST_OFFSET_RAM
11124  0000000                   	MOV16_16_DP SRC_LEN2, SRC_LEN_RAM
11125  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11126  0000000                   
11127  0000000                   
11128  0000000                   	JSR FLASH_BACKUP_REPLACE_PAGE_PROC
11129  0000000                   
11130  0000000                   	ENDM
11131  0000000                   ;--------------------------------------------------------
11132  0000000                   ; @brief	MODIFY flash page
11133  0000000                   ;--------------------------------------------------------
11134  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP_RAM2 MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11135  0000000                   
11136  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR
11137  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11138  0000000                   
11139  0000000                   	MOV16_16_DP OFFSET2, DST_OFFSET_RAM
11140  0000000                   	MOV16_16_DP SRC_LEN2, SRC_LEN_RAM
11141  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11142  0000000                   
11143  0000000                   	JSR FLASH_BACKUP_REPLACE_PAGE_PROC
11144  0000000                   
11145  0000000                   	ENDM
11146  0000000                   ;--------------------------------------------------------
11147  0000000                   ; @brief	MODIFY flash page
11148  0000000                   ;--------------------------------------------------------
11149  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP_RAM2_ILI MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11150  0000000                   	PHP
11151  0000000                   	SEI
11152  0000000                   
11153  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR
11154  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11155  0000000                   
11156  0000000                   	MOV16_16_DP OFFSET2, DST_OFFSET_RAM
11157  0000000                   	MOV16_16_DP SRC_LEN2, SRC_LEN_RAM
11158  0000000                   ;MOV16_16 SRC_BUF4, SRC_PBUF
11159  0000000                   
11160  0000000                   	LDA .LOW.SRC_PBUF
11161  0000000                   	STA SRC_BUF4





11162  0000000                   	LDA .HIGH.SRC_PBUF
11163  0000000                   	STA SRC_BUF4+1
11164  0000000                   
11165  0000000                   	STZ16 COUNT2
11166  0000000                   
11167  0000000                   ;eraes flash page before program data
11168  0000000                   	ISP_ERASE_PAGE_DP DST_PAGE_START_ADDR3
11169  0000000                   	BEQ 3
11170  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11171  0000000                   
11172  0000000                   BACKUP_LOOP#:
11173  0000000                   ;read data (4B)
11174  0000000                   	ISP_READ_DATA_DP SRC_PAGE_START_ADDR3, DST_BUF4
11175  0000000                   	BEQ 3
11176  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11177  0000000                   
11178  0000000                   REPLACE#:
11179  0000000                   ;the current offset is the replacement offset?
11180  0000000                   	LDA OFFSET2+1
11181  0000000                   	CMP COUNT2+1
11182  0000000                   	BNE END_REPLACE#
11183  0000000                   	LDA OFFSET2
11184  0000000                   	CMP COUNT2
11185  0000000                   	BNE END_REPLACE#
11186  0000000                   
11187  0000000                   	LDA SRC_LEN2+1;
11188  0000000                       CMP #00
11189  0000000                       BCC REPLACE2_FLASH_PROC_1#
11190  0000000                       BNE REPLACE2_FLASH_PROC_2#
11191  0000000                       LDA SRC_LEN2
11192  0000000                       CMP #04H
11193  0000000                       BCS REPLACE2_FLASH_PROC_2#
11194  0000000                   
11195  0000000                   REPLACE2_FLASH_PROC_1#:
11196  0000000                   ;replace data (<4B)
11197  0000000                   	LDA SRC_LEN2
11198  0000000                   	BNE 3
11199  0000000                   	JMP END_REPLACE#
11200  0000000                   
11201  0000000                   	LDY SRC_LEN2
11202  0000000                   REPLACE_LOOP1#:
11203  0000000                   	DEY
11204  0000000                   	LDA (.LOW.SRC_BUF4),Y
11205  0000000                   	STA DST_BUF4,Y
11206  0000000                   	CPY #0
11207  0000000                   	BNE REPLACE_LOOP1#
11208  0000000                   
11209  0000000                   	JMP END_REPLACE#
11210  0000000                   
11211  0000000                   REPLACE2_FLASH_PROC_2#:
11212  0000000                   ;replace data (4B)
11213  0000000                   	LDY #4
11214  0000000                   REPLACE_LOOP#:
11215  0000000                   	DEY
11216  0000000                   	LDA (.LOW.SRC_BUF4),Y
11217  0000000                   	STA DST_BUF4,Y
11218  0000000                   	CPY #0





11219  0000000                   	BNE REPLACE_LOOP#
11220  0000000                   
11221  0000000                   ADD_REPLACE#:
11222  0000000                   ;SBC16_16 SRC_LEN2, 4
11223  0000000                   	ADD16_16 OFFSET2, 4
11224  0000000                   
11225  0000000                   ;accumlate replacement length
11226  0000000                   	SBC16_16 SRC_LEN2, 4
11227  0000000                   
11228  0000000                   ;accumlate pointer to buffer
11229  0000000                   	ADD16_16 SRC_BUF4, 4
11230  0000000                   
11231  0000000                   END_REPLACE#:		
11232  0000000                   
11233  0000000                   ;write data (4B)
11234  0000000                   	ISP_WRITE_DATA_DP DST_PAGE_START_ADDR3, DST_BUF4
11235  0000000                   	BEQ 3
11236  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11237  0000000                   
11238  0000000                   	ISP_VERIFY_DATA_DP DST_PAGE_START_ADDR3, DST_BUF4
11239  0000000                   	BEQ 3
11240  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11241  0000000                   
11242  0000000                   ;accumlate source address
11243  0000000                   	ADD24_24 SRC_PAGE_START_ADDR3, 4
11244  0000000                   
11245  0000000                   ;accumlate destination address
11246  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, 4
11247  0000000                   
11248  0000000                   ;accumlate count
11249  0000000                   	ADD16_16 COUNT2, 4
11250  0000000                   
11251  0000000                   	LDA !DST_PAGE_START_ADDR3+2
11252  0000000                   	CMP #.HIGH8.(BACKUP_PAGE_ADDR+PAGE_SIZE)
11253  0000000                   	BEQ 3
11254  0000000                   	JMP BACKUP_LOOP#
11255  0000000                   	LDA !DST_PAGE_START_ADDR3+1
11256  0000000                   	CMP #.HIGH.(BACKUP_PAGE_ADDR+PAGE_SIZE)
11257  0000000                   	BEQ 3
11258  0000000                   	JMP BACKUP_LOOP#
11259  0000000                   	LDA !DST_PAGE_START_ADDR3
11260  0000000                   	CMP #.LOW.(BACKUP_PAGE_ADDR+PAGE_SIZE)
11261  0000000                   	BEQ 3
11262  0000000                   	JMP BACKUP_LOOP#
11263  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP_OK#
11264  0000000                   
11265  0000000                   END_FLASH_BACKUP_REPLACE_PAGE_DP_OK#:	
11266  0000000                   	LDA #00H		; SUCCESS!
11267  0000000                   END_FLASH_BACKUP_REPLACE_PAGE_DP#:
11268  0000000                   	PLP
11269  0000000                   	ENDM
11270  0000000                   ;--------------------------------------------------------
11271  0000000                   ; @brief	Update flash page
11272  0000000                   ; @param	
11273  0000000                   ;--------------------------------------------------------
11274  0000000                   FLASH_UPDATE_PAGE MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11275  0000000                   	FLASH_UPDATE_PAGE_DP BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF





11276  0000000                   	ENDM
11277  0000000                   ;--------------------------------------------------------
11278  0000000                   ; @brief	Update flash page with ram buf
11279  0000000                   ; @param	backup and source page address, target offset, 
11280  0000000                   ;			count, and pointer to buffer
11281  0000000                   ;--------------------------------------------------------
11282  0000000                   FLASH_UPDATE_PAGE_DP MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11283  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11284  0000000                   	CMP #0
11285  0000000                   	BEQ 3
11286  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP#
11287  0000000                   
11288  0000000                   	FLASH_COPY_PAGE SRC_PAGE_ADDR, BACKUP_PAGE_ADDR
11289  0000000                   	CMP #0
11290  0000000                   	BEQ 3
11291  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP#
11292  0000000                   
11293  0000000                   END_FLASH_UPDATE_PAGE_DP_OK#:
11294  0000000                   	LDA #00H
11295  0000000                   END_FLASH_UPDATE_PAGE_DP#:
11296  0000000                   	ENDM
11297  0000000                   ;--------------------------------------------------------
11298  0000000                   ; @brief	
11299  0000000                   ; @param	
11300  0000000                   ;--------------------------------------------------------
11301  0000000                   FLASH_UPDATE_PAGE_DP_RAM MACRO BACKUP_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11302  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP_RAM BACKUP_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11303  0000000                   	CMP #0
11304  0000000                   	BEQ 3
11305  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11306  0000000                   
11307  0000000                   	FLASH_COPY_PAGE_RAM SRC_PAGE_ADDR_RAM, BACKUP_PAGE_ADDR_RAM
11308  0000000                   	CMP #0
11309  0000000                   	BEQ 3
11310  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11311  0000000                   
11312  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_OK#
11313  0000000                   	LDA #00H
11314  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM#:
11315  0000000                   	ENDM
11316  0000000                   ;--------------------------------------------------------
11317  0000000                   ; @brief	
11318  0000000                   ; @param	
11319  0000000                   ;--------------------------------------------------------
11320  0000000                   FLASH_UPDATE_PAGE_DP_RAM2 MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11321  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP_RAM2 BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11322  0000000                   	CMP #0
11323  0000000                   	BEQ 3
11324  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11325  0000000                   
11326  0000000                   	FLASH_COPY_PAGE SRC_PAGE_ADDR, BACKUP_PAGE_ADDR
11327  0000000                   	CMP #0
11328  0000000                   	BEQ 3
11329  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11330  0000000                   
11331  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_OK#:
11332  0000000                   	LDA #00H





11333  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM#:
11334  0000000                   	ENDM
11335  0000000                   ;--------------------------------------------------------
11336  0000000                   ; @brief	
11337  0000000                   ; @param	
11338  0000000                   ;--------------------------------------------------------
11339  0000000                   FLASH_UPDATE_PAGE_DP_RAM2_ILI MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11340  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP_RAM_ILI BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11341  0000000                   	CMP #0
11342  0000000                   	BEQ 3
11343  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM_ILI#
11344  0000000                   
11345  0000000                   	FLASH_COPY_PAGE SRC_PAGE_ADDR, BACKUP_PAGE_ADDR
11346  0000000                   	CMP #0
11347  0000000                   	BEQ 3
11348  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM_ILI#
11349  0000000                   
11350  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_ILI_OK#:
11351  0000000                   	LDA #00H
11352  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_ILI#:
11353  0000000                   	ENDM
11354  0000000                   ;--------------------------------------------------------
11355  0000000                   ; @brief Read protection page
11356  0000000                   ; @param
11357  0000000                   ;
11358  0000000                   ;--------------------------------------------------------
11359  0000000                   .IF (WITH_PROTECTION_PAGE_UPDATE .EQ. 1)
11360  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 1)
11361  0000000                   PROTECTION_PAGE_READ MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11362  0000000                   
11363  0000000                   	MOV16_16 OFFSET_TEMP, DST_OFFSET
11364  0000000                   	MOV16_16 LEN_TEMP, SRC_LEN
11365  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11366  0000000                   
11367  0000000                   	JSR PROTECTION_PAGE_READ_PROC
11368  0000000                   
11369  0000000                   	ENDM
11370  0000000                   
11371  0000000                   ;--------------------------------------------------------
11372  0000000                   ; @brief Update protection page
11373  0000000                   ; @param
11374  0000000                   ;
11375  0000000                   ;--------------------------------------------------------
11376  0000000                   PROTECTION_PAGE_UPDATE MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11377  0000000                   
11378  0000000                   	MOV16_16 OFFSET_TEMP, DST_OFFSET
11379  0000000                   	MOV16_16 LEN_TEMP, SRC_LEN
11380  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11381  0000000                   
11382  0000000                   	JSR PROTECTION_PAGE_UPDATE_PROC
11383  0000000                   
11384  0000000                   	ENDM
11385  0000000                   ;--------------------------------------------------------
11386  0000000                   ; @brief Update protection page
11387  0000000                   ; @param
11388  0000000                   ;
11389  0000000                   ;--------------------------------------------------------





11390  0000000                   PROTECTION_PAGE_READ_RAM MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11391  0000000                   
11392  0000000                   	MOV16_16_DP OFFSET_TEMP, DST_OFFSET_RAM
11393  0000000                   	MOV16_16_DP LEN_TEMP, SRC_LEN_RAM
11394  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11395  0000000                   
11396  0000000                   	JSR PROTECTION_PAGE_READ_PROC
11397  0000000                   
11398  0000000                   	ENDM
11399  0000000                   ;--------------------------------------------------------	
11400  0000000                   PROTECTION_PAGE_UPDATE_RAM MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11401  0000000                   
11402  0000000                   	MOV16_16_DP OFFSET_TEMP, DST_OFFSET_RAM
11403  0000000                   	MOV16_16_DP LEN_TEMP, SRC_LEN_RAM
11404  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11405  0000000                   
11406  0000000                   	JSR PROTECTION_PAGE_UPDATE_PROC
11407  0000000                   
11408  0000000                   	ENDM
11409  0000000                   ;--------------------------------------------------------
11410  0000000                   PROTECTION_PAGE_INJECT_ID MACRO DST_PAGE_ADDR
11411  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
11412  0000000                   	JSR FLASH_PAGE_INJECT_ID_PROC
11413  0000000                   	ENDM
11414  0000000                   
11415  0000000                   .ENDIF
11416  0000000                   .ENDIF
11417  0000000                   ;--------------------------------------------------------
11418  0000000                   ;--------------------------------------------------------
11419  0000000                   .IF (WITH_PROTECTION_PAGE_UPDATE .EQ. 1)
11420  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 2)
11421  0000000                   ;--------------------------------------------------------
11422  0000000                   PROTECTION_PAGE_SECTION_UPDATE MACRO SRC_PBUF
11423  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11424  0000000                   	JSR FLASH_SECTION_UPDATE_PROC
11425  0000000                   
11426  0000000                   	ENDM
11427  0000000                   ;--------------------------------------------------------
11428  0000000                   PROTECTION_PAGE_SECTION_READ MACRO SRC_PBUF
11429  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11430  0000000                   	JSR FLASH_SECTION_READ_PROC
11431  0000000                   
11432  0000000                   	ENDM
11433  0000000                   .ENDIF
11434  0000000                   .ENDIF
11435  0000000                   
11436  0000000                   
11437  0000000                   
11438  0000000                   
11439  0000000                   	.IF (WITH_FW_CAP_SENSOR_KEYS .GT. 0)
11440  0000000                       	.IF (WITH_PSF_PROJECT .EQ. 0)
11441  0000000                   ;---------------------------------
11442  0000000                   ; Cap Include File
11443  0000000                   ;---------------------------------
11444  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\CAP_SENSOR_MACRO.INI.APP"
11445  0000000                       	.ENDIF
11446  0000000                       .ENDIF





11447  0000000                   
11448  0000000                   ;----------------------------------------------------------------------------------------------
11449  0000000                   
11450  0000000                   ;==============================================================================
11451  0000000                   ; Constants
11452  0000000                   ;==============================================================================
11453  0000000                   RR0	EQU	00H
11454  0000000                   RR1	EQU	01H
11455  0000000                   
11456  0000000                   ;==============================================================================
11457  0000000                   ; Macros
11458  0000000                   ;==============================================================================
11459  0000000                   SPECIAL_REGISTERS_INIT MACRO
11460  0000000                   
11461  0000000                   ; init UIO
11462  0000000                   	EXTERN	UIO_INIT
11463  0000000                   	JSR 	UIO_INIT
11464  0000000                   
11465  0000000                   ; init SLD
11466  0000000                   .IF (WITH_SLD_ENABLE .EQ. 1)
11467  0000000                   	EXTERN	SLD_INIT
11468  0000000                   	JSR 	SLD_INIT
11469  0000000                   .ENDIF
11470  0000000                   
11471  0000000                   ; init N55P
11472  0000000                   ;.IF (WITH_PSF_PROJECT .EQ. 0H)
11473  0000000                   	.IF (N55P_DEVICE_NUM .GT. 0H)
11474  0000000                   	EXTERN	UIO_N55P_INIT
11475  0000000                   	JSR 	UIO_N55P_INIT
11476  0000000                   	.ENDIF
11477  0000000                   ;.ENDIF
11478  0000000                   
11479  0000000                   	ENDM
11480  0000000                   
11481  0000000                   
11482  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SLD_SR.ASM.APP"
11483  0000000                   	CHIP	65C02
11484  0000000                   
11485  0000000                   
11486  0000000                   	SYMBOLS
11487  0000000                   	LINKLIST
11488  0000000                   	DEBUG  	ASM
11489  0000000                   	LINEAR	ON
11490  0000000                   	LONGA	OFF
11491  0000000                   	LONGI	OFF
11492  0000000                   
11493  0000000                   	PUBLIC SLD_COMMAND_ADDR_TABLE
11494  0000000                   	PUBLIC SLD_RELOAD_PROCESS
11495  0000000                   	PUBLIC SLD_INIT
11496  0000000                   	PUBLIC SLD_STOP
11497  0000000                   	PUBLIC SLD_ENABLE_PIN
11498  0000000                   	PUBLIC SLD_DISABLE_PIN
11499  0000000                   
11500  0000000                   	EXTERN SLD_RELOAD_PROCESS_RET
11501  0000000                   
11502  0000000                   ;------------------------------------------------------------------------------
11503  0000000                   ; UIO Service Routine Variables





11504  0000000                   ;------------------------------------------------------------------------------
11505  0000000                   
11506  0000000                   ;------------------------------------------------------------------------------
11507  0000000                   ; UIO Service Routine Constants
11508  0000000                   ;------------------------------------------------------------------------------
11509  0000000                   SLD_FIFO_INT_NUM		EQU	16
11510  0000000                   SLD_DATA_NUM			EQU	16
11511  0000000                   SLD_DATA_NUM_FIRST		EQU	32
11512  0000000                   
11513  0000000                   ;------------------------------------------------------------------------------
11514  0000000                   ; UIO Service Routine Macros
11515  0000000                   ;------------------------------------------------------------------------------
11516  0000000                   INIT_ONE_WIRE_IO0 MACRO
11517  0000000                   ; Set BP00 output low
11518  0000000                   	LDA #01H
11519  0000000                   	TSB !BP0M
11520  0000000                   	TRB !BP0R
11521  0000000                   	TRB !BP0D
11522  0000000                   
11523  0000000                   	LDA #02H 
11524  0000000                   	TRB !SLDC1
11525  0000000                   	ENDM
11526  0000000                   ;--------------------------------------
11527  0000000                   INIT_ONE_WIRE_IO1 MACRO
11528  0000000                   ; Set BP20 output low
11529  0000000                   	LDA #01H
11530  0000000                   	TSB !BP2M
11531  0000000                   	TRB !BP2R
11532  0000000                   	TRB !BP2D
11533  0000000                   
11534  0000000                   	LDA #02H 
11535  0000000                   	TSB !SLDC1
11536  0000000                   	ENDM
11537  0000000                   ;--------------------------------------
11538  0000000                   INIT_TWO_WIRE_IO MACRO
11539  0000000                   ; Set BP20, BP21 output low
11540  0000000                   	LDA #03H
11541  0000000                   	TSB !BP2M
11542  0000000                   	TRB !BP2R
11543  0000000                   	TRB !BP2D
11544  0000000                   
11545  0000000                   	ENDM	
11546  0000000                   ;--------------------------------------
11547  0000000                   EN_ONE_WIRE MACRO
11548  0000000                   	LDA #01H
11549  0000000                   	TSB !SLDC0
11550  0000000                   	ENDM
11551  0000000                   ;--------------------------------------
11552  0000000                   DIS_ONE_WIRE MACRO
11553  0000000                   	LDA #01H
11554  0000000                   	TRB !SLDC0
11555  0000000                   	ENDM
11556  0000000                   ;--------------------------------------
11557  0000000                   EN_TWO_WIRE MACRO
11558  0000000                   	LDA #02H
11559  0000000                   	TSB !SLDC0
11560  0000000                   	ENDM





11561  0000000                   ;--------------------------------------
11562  0000000                   DIS_TWO_WIRE MACRO
11563  0000000                   	LDA #02H
11564  0000000                   	TRB !SLDC0
11565  0000000                   	ENDM
11566  0000000                   ;--------------------------------------
11567  0000000                   SET_PATTERN_PERIOD MACRO HIDA1_VAL, LODA1_VAL, HIDA0_VAL, LODA0_VAL
11568  0000000                   	LDA #HIDA1_VAL
11569  0000000                   	STA !HIDA1
11570  0000000                   	LDA #LODA1_VAL
11571  0000000                   	STA !LODA1
11572  0000000                   	LDA #HIDA0_VAL
11573  0000000                   	STA !HIDA0
11574  0000000                   	LDA #LODA0_VAL
11575  0000000                   	STA !LODA0
11576  0000000                   	ENDM
11577  0000000                   ;--------------------------------------
11578  0000000                   STOP_SLD_DATA_OUTPUT MACRO
11579  0000000                   	LDA #04H	; Start data output
11580  0000000                   	TRB !SLDC0
11581  0000000                   	ENDM
11582  0000000                   ;--------------------------------------
11583  0000000                   SET_FIFO_INT_NUM MACRO NUM
11584  0000000                   	LDA #NUM
11585  0000000                   	STA !SDTH
11586  0000000                   	ENDM
11587  0000000                   ;--------------------------------------
11588  0000000                   SET_SLD_INT MACRO
11589  0000000                   	LDA #01H
11590  0000000                   	TSB !IEF1
11591  0000000                   	ENDM
11592  0000000                   ;--------------------------------------
11593  0000000                   CLR_SLD_INT MACRO
11594  0000000                   	LDA #01H
11595  0000000                   	TRB !IEF1
11596  0000000                   	ENDM
11597  0000000                   ;--------------------------------------
11598  0000000                   RESET_SLD_FIFO MACRO
11599  0000000                   	LDA #20H
11600  0000000                   	TSB !SLDC0		; Reset SLCD FIFO
11601  0000000                   	ENDM
11602  0000000                   START_SLD_DATA_OUTPUT MACRO
11603  0000000                   	LDA #04H	; Start data output
11604  0000000                   	TSB !SLDC0
11605  0000000                   	ENDM
11606  0000000                   ;--------------------------------------
11607  0000000                   CHK_SLD_FIFO_EMPTY MACRO
11608  0000000                   ;Z=1 empty
11609  0000000                   ;Z=0 not empty
11610  0000000                   	LDA #80H
11611  0000000                   	BIT !SLDC0
11612  0000000                   CHK_SLD_EMPTY_END#:
11613  0000000                   	ENDM
11614  0000000                   ;--------------------------------------
11615  0000000                   CHK_SLD_FIFO_FULL MACRO
11616  0000000                   ;Z=1 full
11617  0000000                   ;Z=0 not full





11618  0000000                   	LDA #40H
11619  0000000                   	BIT !SLDC0
11620  0000000                   CHK_SLD_FULL_END#:
11621  0000000                   	ENDM
11622  0000000                   ;------------------------------------------------------------------------------
11623  0000000                   ; UIO Service Routine Tables
11624  0000000                   ;------------------------------------------------------------------------------
11625  0000000                       CODE: SECTION
11626  0000000                   SLD_COMMAND_ADDR_TABLE:
11627  0000000                   .IF (WITH_SLD_ENABLE .EQ. 1)
11628  0000000                       DW SLD_VALUE
11629  0000000                       DW SLD_STOP
11630  0000000                       DW SLD_START
11631  0000000                   .ELSE
11632  0000000  0000            	DW 0
11633  0000002  0000            	DW 0
11634  0000004  0000            	DW 0
11635  0000006                   .ENDIF
11636  0000006                       ENDS
11637  0000006                   ;--------------------------------------------------------
11638  0000006                       CODE: SECTION
11639  0000006                   SLD_INIT:
11640  0000006                   .IF (WITH_SLD_ENABLE .EQ. 1)
11641  0000006                   	.IF (WITH_SLD_SWITCH .EQ. 1)
11642  0000006                   	INIT_ONE_WIRE_IO1						; Initial SLD1
11643  0000006                   	.ELSE
11644  0000006                   	INIT_ONE_WIRE_IO0						; Initial SLD0
11645  0000006                   	.ENDIF
11646  0000006                   
11647  0000006                   	LDA #01H
11648  0000006                   	.IF (SLD_ORDER_BIT .EQ. 1)
11649  0000006                   	TSB !SLDC1
11650  0000006                   	.ELSE
11651  0000006                   	TRB !SLDC1
11652  0000006                   	.ENDIF
11653  0000006                   
11654  0000006                   	RTS
11655  0000006                   .ENDIF
11656  0000006                   	ENDS
11657  0000006                   
11658  0000006                   ;--------------------------------------------------------
11659  0000006                   	CODE: SECTION
11660  0000006                   SLD_START:
11661  0000006                   .IF (WITH_SLD_ENABLE .EQ. 1)
11662  0000006                   ; DA period = (HIDA1 or LODA1 or HIDA0 or LODA0) * (2/HIRC)
11663  0000006                   ; For 40MHz OSC, (2/HIRC) = 48.8ns
11664  0000006                   
11665  0000006                   	.IF (SLD_CTL_TYPE .EQ. 0)
11666  0000006                   	SET_PATTERN_PERIOD SLD_ONE_WIRE_HIDA1,SLD_ONE_WIRE_LODA1,SLD_ONE_WIRE_HIDA0,SLD_ONE_WIRE_LODA0
11667  0000006                   	.ELSE
11668  0000006                   	LDA SLD_TWO_WIRE_CLK_RATE
11669  0000006                   	TSB !SLDC0
11670  0000006                   	.ENDIF
11671  0000006                   	SET_FIFO_INT_NUM SLD_FIFO_INT_NUM
11672  0000006                   
11673  0000006                   	CLR_SLD_INT
11674  0000006                   	RESET_SLD_FIFO





11675  0000006                   	RTS
11676  0000006                   .ENDIF
11677  0000006                   	ENDS
11678  0000006                   ;--------------------------------------------------------
11679  0000006                   	CODE: SECTION          
11680  0000006                   SLD_STOP:
11681  0000006                   .IF (WITH_SLD_ENABLE .EQ. 1)
11682  0000006                   	CLR_SLD_INT
11683  0000006                   
11684  0000006                   	STOP_SLD_DATA_OUTPUT
11685  0000006                   	RTS
11686  0000006                   .ENDIF	
11687  0000006                   	ENDS
11688  0000006                   ;--------------------------------------------------------
11689  0000006                   	CODE: SECTION          
11690  0000006                   SLD_VALUE:
11691  0000006                   .IF (WITH_SLD_ENABLE .EQ. 1)
11692  0000006                   	LDA <SLD_STATUS_FLAG
11693  0000006                   	BIT #80H
11694  0000006                   	BNE QUIT_SLD_VALUE
11695  0000006                   
11696  0000006                   	LDA !BANK
11697  0000006                   	PHA
11698  0000006                   
11699  0000006                   	.IF (SLD_CTL_TYPE .EQ. 0)
11700  0000006                   	EN_ONE_WIRE
11701  0000006                   	.ELSE
11702  0000006                   	EN_TWO_WIRE
11703  0000006                   	.ENDIF
11704  0000006                   
11705  0000006                   	STOP_SLD_DATA_OUTPUT		; Stop series LED data output
11706  0000006                   	SET_SLD_INT					; Enable serial LED trigger interrupt
11707  0000006                   
11708  0000006                   	LDA HWE_SLD_LEN_BA
11709  0000006                   	STA <SLD_TOTAL_LEN
11710  0000006                   	LDA HWE_SLD_LEN_BA+1
11711  0000006                   	STA <SLD_TOTAL_LEN+1
11712  0000006                   
11713  0000006                   	LDA HWE_SLD_ADDR_BA
11714  0000006                   	STA <SLD_PADDR
11715  0000006                   	LDA HWE_SLD_ADDR_BA+1
11716  0000006                   	STA <SLD_PADDR+1
11717  0000006                   	LDA HWE_SLD_ADDR_BA+2
11718  0000006                   	STA <SLD_PADDR+2
11719  0000006                   	STA !BANK
11720  0000006                   
11721  0000006                   	LDA <SLD_TOTAL_LEN+1
11722  0000006                   	BNE SLD_DATA_GT_32B
11723  0000006                   	LDA <SLD_TOTAL_LEN
11724  0000006                   	CMP #SLD_DATA_NUM_FIRST
11725  0000006                   	BCS SLD_DATA_GT_32B
11726  0000006                   	JMP SLD_DATA_NON_GT_32B
11727  0000006                   
11728  0000006                   SLD_DATA_GT_32B:
11729  0000006                   ; The amount of data sent is greater than 32 bytes
11730  0000006                   	LDA #SLD_DATA_NUM_FIRST
11731  0000006                   	STA <SLD_DATA_LEN





11732  0000006                   
11733  0000006                   ;SBC16_16_DP SLD_TOTAL_LEN, SLD_DATA_LEN
11734  0000006                   	SEC
11735  0000006                   	LDA <SLD_TOTAL_LEN
11736  0000006                   	SBC <SLD_DATA_LEN
11737  0000006                   	STA <SLD_TOTAL_LEN
11738  0000006                   	LDA <SLD_TOTAL_LEN+1
11739  0000006                   	SBC <SLD_DATA_LEN+1
11740  0000006                   	STA <SLD_TOTAL_LEN+1
11741  0000006                   	JMP SLD_VALUE_CONT
11742  0000006                   
11743  0000006                   SLD_DATA_NON_GT_32B:
11744  0000006                   ; The amount of data sent is not greater than 32 bytes
11745  0000006                   	LDA <SLD_TOTAL_LEN
11746  0000006                   	STA <SLD_DATA_LEN
11747  0000006                   
11748  0000006                   	STZ <SLD_TOTAL_LEN
11749  0000006                   
11750  0000006                   SLD_VALUE_CONT:
11751  0000006                   FIRST_RELOAD1:
11752  0000006                   	LDA (<SLD_PADDR)
11753  0000006                   	STA !SLDAT					; Reload series LED data
11754  0000006                   
11755  0000006                   	INC	<SLD_PADDR
11756  0000006                   	BNE	FIRST_RELOAD1_CONT
11757  0000006                   	INC	<SLD_PADDR+1
11758  0000006                   	BNE	FIRST_RELOAD1_CONT
11759  0000006                   ROM_BANK_INC:
11760  0000006                   	INC	!BANK
11761  0000006                   	LDA	#80H
11762  0000006                   	STA <SLD_PADDR+1
11763  0000006                   	INC <SLD_PADDR+2
11764  0000006                   
11765  0000006                   FIRST_RELOAD1_CONT:
11766  0000006                   	DEC <SLD_DATA_LEN
11767  0000006                   
11768  0000006                   	BNE FIRST_RELOAD1
11769  0000006                   
11770  0000006                   	START_SLD_DATA_OUTPUT		; Start series LED data output
11771  0000006                   
11772  0000006                   	PLA
11773  0000006                   	STA !BANK
11774  0000006                   
11775  0000006                   QUIT_SLD_VALUE:
11776  0000006                   	RTS
11777  0000006                   .ENDIF
11778  0000006                   ;--------------------------------------------------------
11779  0000006                   SLD_ENABLE_PIN:
11780  0000006                   .IF (WITH_SLD_ENABLE .EQ. 1)
11781  0000006                   	LDA #7FH
11782  0000006                   	AND <SLD_STATUS_FLAG
11783  0000006                   	STA <SLD_STATUS_FLAG
11784  0000006                   	EN_ONE_WIRE
11785  0000006                   .ENDIF
11786  0000006  60           	RTS
11787  0000007                   ;--------------------------------------------------------
11788  0000007                   SLD_DISABLE_PIN:





11789  0000007                   .IF (WITH_SLD_ENABLE .EQ. 1)
11790  0000007                   	LDA #80H
11791  0000007                   	ORA <SLD_STATUS_FLAG
11792  0000007                   	STA <SLD_STATUS_FLAG
11793  0000007                   	DIS_ONE_WIRE
11794  0000007                   .ENDIF
11795  0000007  60           	RTS
11796  0000008                   ;--------------------------------------------------------
11797  0000008                   SLD_STOP_KEEP_LEVEL_PIN:
11798  0000008                   .IF (WITH_SLD_SWITCH .EQ. 1)
11799  0000008                   .ELSE
11800  0000008                   .ENDIF
11801  0000008  60           	RTS
11802  0000009                   ;--------------------------------------------------------
11803  0000009                   SLD_RELOAD_PROCESS:
11804  0000009                   .IF (WITH_SLD_ENABLE .EQ. 1)
11805  0000009                   	LDA <SLD_STATUS_FLAG
11806  0000009                   	BIT #80H
11807  0000009                   	BNE QUIT_SLD_RELOAD_PROCESS
11808  0000009                   
11809  0000009                   	LDA !BANK
11810  0000009                   	PHA
11811  0000009                   	LDA SLD_PADDR+2
11812  0000009                   	STA !BANK
11813  0000009                   
11814  0000009                   SLD_RELOAD_CHK:
11815  0000009                   	LDA <SLD_TOTAL_LEN+1
11816  0000009                   	BNE SLD_RELOAD
11817  0000009                   	LDA <SLD_TOTAL_LEN			; Check if the Frame data has been written
11818  0000009                   	BEQ SLD_FIFO_EMPTY_CHK
11819  0000009                   	JMP SLD_RELOAD
11820  0000009                   
11821  0000009                   SLD_FIFO_EMPTY_CHK:
11822  0000009                   	CHK_SLD_FIFO_EMPTY			; Check if the FIFO is empty
11823  0000009                   	BEQ SLD_ISR_END
11824  0000009                   
11825  0000009                   	LDA #01H					; Disable series LED trigger interrupt
11826  0000009                   	TRB !IEF1
11827  0000009                   
11828  0000009                   	JMP SLD_ISR_END
11829  0000009                   
11830  0000009                   SLD_RELOAD:
11831  0000009                   	LDA <SLD_TOTAL_LEN+1;
11832  0000009                       CMP #00
11833  0000009                       BCC SLD_RELOAD_REMAINDER
11834  0000009                       BNE SLD_RELOAD_INTEGER
11835  0000009                       LDA <SLD_TOTAL_LEN
11836  0000009                       CMP #SLD_DATA_NUM
11837  0000009                       BCS SLD_RELOAD_INTEGER
11838  0000009                   SLD_RELOAD_REMAINDER:
11839  0000009                   	LDA <SLD_TOTAL_LEN
11840  0000009                   	STA <SLD_DATA_LEN
11841  0000009                   
11842  0000009                   	STZ <SLD_TOTAL_LEN+1
11843  0000009                   	STZ <SLD_TOTAL_LEN
11844  0000009                   
11845  0000009                   	JMP SLD_RELOAD_LOOP





11846  0000009                   SLD_RELOAD_INTEGER:
11847  0000009                   	LDA #SLD_DATA_NUM
11848  0000009                   	STA <SLD_DATA_LEN
11849  0000009                   
11850  0000009                   ;SBC16_16 SLD_TOTAL_LEN, SLD_DATA_NUM
11851  0000009                   	SEC
11852  0000009                   	LDA <SLD_TOTAL_LEN
11853  0000009                   	SBC #.LOW.SLD_DATA_NUM
11854  0000009                   	STA <SLD_TOTAL_LEN
11855  0000009                   	LDA <SLD_TOTAL_LEN+1
11856  0000009                   	SBC #0
11857  0000009                   	STA <SLD_TOTAL_LEN+1
11858  0000009                   
11859  0000009                   SLD_RELOAD_LOOP:
11860  0000009                   	LDA (<SLD_PADDR)
11861  0000009                   	STA !SLDAT				; Reload series LED data
11862  0000009                   
11863  0000009                   	INC	<SLD_PADDR
11864  0000009                   	BNE	SLD_RELOAD_LOOP_CONT
11865  0000009                   	INC	<SLD_PADDR+1
11866  0000009                   	BNE	SLD_RELOAD_LOOP_CONT
11867  0000009                   ROM_BANK_INC2:
11868  0000009                   	INC	!BANK
11869  0000009                   	LDA	#80H
11870  0000009                   	STA <SLD_PADDR+1
11871  0000009                   	INC <SLD_PADDR+2
11872  0000009                   SLD_RELOAD_LOOP_CONT:
11873  0000009                   	DEC <SLD_DATA_LEN
11874  0000009                   	BNE SLD_RELOAD_LOOP
11875  0000009                   
11876  0000009                   SLD_ISR_END:
11877  0000009                   	PLA
11878  0000009                   	STA !BANK
11879  0000009                   QUIT_SLD_RELOAD_PROCESS:
11880  0000009                   	JMP SLD_RELOAD_PROCESS_RET
11881  0000009                   .ENDIF	
11882  0000009                   	ENDS
11883  0000009                   
11884  0000009                   .PUBLIC UIO_COMMAND_ADDR_TABLE
11885  0000009                   .PUBLIC UIO_INIT
11886  0000009                   .PUBLIC UIO_N55P_INIT
11887  0000009                   .PUBLIC UIO_N55P_ENTER_SLEEP
11888  0000009                   .PUBLIC UIO_N55P_WAKE_UP
11889  0000009                   .PUBLIC UIO_START
11890  0000009                   .PUBLIC UIO_STOP
11891  0000009                   .PUBLIC BAM_EVENT_ADDR_OFFSET_TABLE
11892  0000009                   .PUBLIC BAM_CH_BIT_TABLE
11893  0000009                   .PUBLIC BAM_EVENT_ADDR_SP1
11894  0000009                   .PUBLIC UIO_EVENT_CH_FLAG
11895  0000009                       CODE: SECTION
11896  0000009                   UIO_COMMAND_ADDR_TABLE:
11897  0000009                   BAM_EVENT_ADDR_OFFSET_TABLE:
11898  0000009                   BAM_CH_BIT_TABLE:
11899  0000009                   UIO_INIT:
11900  0000009                   UIO_START:
11901  0000009                   UIO_STOP:
11902  0000009                   UIO_N55P_INIT:





11903  0000009                   UIO_N55P_ENTER_SLEEP:
11904  0000009                   UIO_N55P_WAKE_UP:
11905  0000009  60               RTS
11906  000000A                       ENDS
11907  000000A                   
11908  000000A                       UIO_USED_RAM: SECTION
11909  0000000                   BAM_EVENT_ADDR_SP1: DS 0
11910  0000000                   UIO_EVENT_CH_FLAG: DS 0
11911  0000000                   .PUBLIC DUTY_LEVEL_ARRAY
11912  0000000                   .PUBLIC UIO_PIN_CH_FLAG_ARRAY
11913  0000000                   .PUBLIC UIO_EN_MULTI_PIN_ARRAY
11914  0000000                   DUTY_LEVEL_ARRAY: DS 0
11915  0000000                   UIO_PIN_CH_FLAG_ARRAY: DS 0
11916  0000000                   UIO_EN_MULTI_PIN_ARRAY: DS 0
11917  0000000                       ENDS
11918  000000A                   
11919  000000A                   .PUBLIC SLD_COMMAND_ADDR_TABLE
11920  000000A                   .PUBLIC UIO_PIN_NUM
11921  000000A                   UIO_PIN_NUM: EQU 0
11922  000000A                   	UIO_TABLE: SECTION
11923  0000000                   .PUBLIC UIO_USED_PIN_TABLE
11924  0000000                   .PUBLIC UIO_MULTI_PIN_TABLE
11925  0000000                   .PUBLIC UIO_PIN_TABLE
11926  0000000                   UIO_USED_PIN_TABLE:
11927  0000000                   UIO_MULTI_PIN_TABLE:
11928  0000000                   UIO_PIN_TABLE:
11929  0000000                   .PUBLIC UIO_SET_PIN_STOP_VALUE_TABLE
11930  0000000                   .PUBLIC UIO_SET_DIS_PIN_STOP_VALUE_TABLE
11931  0000000                   .PUBLIC UIO_SET_PIN_ENABLE_VALUE_TABLE
11932  0000000                   UIO_SET_PIN_STOP_VALUE_TABLE:
11933  0000000                   UIO_SET_DIS_PIN_STOP_VALUE_TABLE:
11934  0000000                   UIO_SET_PIN_ENABLE_VALUE_TABLE:
11935  0000000                   .PUBLIC UIO_PIN_RAM_OFFSET_TABLE
11936  0000000                   UIO_PIN_RAM_OFFSET_TABLE:
11937  0000000                   		ENDS
11938  000000A                   
11939  000000A                   ;**The following is audio external**
11940  000000A                   ;**The following is sentence label**
11941  000000A                   ;**The following is INIT_DECODE_SPEECH label**
11942  000000A                   	EXT_PROGRAM: SECTION
11943  0000000                   	ENDS
11944  000000A                   
		Line(s) Assembled : 11944
		Error(s): 0
		Warn(s) : 0
		Begin Assembling Time : Thu Sep 02 11:49:15 2021
		End   Assembling Time : Thu Sep 02 11:49:15 2021

