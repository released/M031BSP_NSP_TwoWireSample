Wed Sep 15 14:46:16 2021







	Macro Assembler  -  Version 1.00.0
		-----------------------------------------------

		Input  Filename : D:\SourceCode\_Avery_M031\M031BSP_NSP_TwoWireSample\NSP_project\RINGRING_NSP480A\CpuIf\UserCmd.asm.app
		Output Filename : D:\SourceCode\_Avery_M031\M031BSP_NSP_TwoWireSample\NSP_project\RINGRING_NSP480A\CpuIf\Code_Release\UserCmd.oc


    1  0000000                   	CHIP	65C02
    2  0000000                   
    3  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\PGM_HEAD.INI.APP"
    4  0000000                   	SYMBOLS
    5  0000000                   	LINKLIST
    6  0000000                   	DEBUG  	ASM
    7  0000000                   	LINEAR	ON
    8  0000000                   	LONGA	OFF
    9  0000000                   	LONGI	OFF
   10  0000000                   
   11  0000000                   ;FOR *.LIC
   12  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SYS_DEF_EQU.INI.APP"
   13  0000000                   	SYMBOLS
   14  0000000                   	LINKLIST
   15  0000000                   	DEBUG  	ASM
   16  0000000                   	LINEAR	ON
   17  0000000                   	LONGA	OFF
   18  0000000                   	LONGI	OFF
   19  0000000                   
   20  0000000                   ;====================================================
   21  0000000                   ;====================================================
   22  0000000                   CHECKSUM_ADDR		EQU 00H
   23  0000000                   CHECKSUM_ADDR1		EQU 01H
   24  0000000                   CHECK_RESULT		EQU	02H
   25  0000000                   CHECKSUM_33TH		EQU 107EH
   26  0000000                   CHECKSUM_34TH		EQU 107FH
   27  0000000                   
   28  0000000                   ;====================================================
   29  0000000                   INT0_PORT	EQU 		01H
   30  0000000                   INT0_TMA	EQU 		02H
   31  0000000                   INT0_RESUME	EQU			04H
   32  0000000                   INT0_INTRF	EQU			08H		
   33  0000000                   INT0_TMG	EQU 		10H
   34  0000000                   INT0_FXF10	EQU 		20H
   35  0000000                   INT0_FXF13	EQU 		40H
   36  0000000                   INT0_FXF15	EQU 		80H
   37  0000000                   
   38  0000000                   INT1_SLD	EQU 		01H
   39  0000000                   INT1_ADC	EQU 		04H
   40  0000000                   INT1_LRCT	EQU 		08H
   41  0000000                   
   42  0000000                   TMA_IR_TX		EQU		80H
   43  0000000                   TMG_TOUCH		EQU		10H
   44  0000000                   
   45  0000000                   SYNF_ABANDON	EQU		01H
   46  0000000                   SYNF_END		EQU		08H





   47  0000000                   SYNF_PCM		EQU		10H
   48  0000000                   SYNF_SILENCE	EQU		20H
   49  0000000                   SYNF_EVENT		EQU		40H
   50  0000000                   SYNF_GAIN		EQU		80H
   51  0000000                   SYNV_VOL_BYPASS	EQU		80H
   52  0000000                   
   53  0000000                   PWMC_BP0_DIV1	EQU		00H
   54  0000000                   PWMC_BP0_DIV2	EQU		01H
   55  0000000                   PWMC_BP0_DIV4	EQU		02H
   56  0000000                   PWMC_BP0_DIV32	EQU		03H
   57  0000000                   PWMC_BP0_DIV64	EQU		04H
   58  0000000                   PWMC_BP0_DIV128	EQU		05H
   59  0000000                   PWMC_BP0_DIV256	EQU		06H
   60  0000000                   PWMC_BP0_DIV512	EQU		07H
   61  0000000                   PWMC_BP1_DIV1	EQU		00H
   62  0000000                   PWMC_BP1_DIV2	EQU		10H
   63  0000000                   PWMC_BP1_DIV4	EQU		20H
   64  0000000                   PWMC_BP1_DIV32	EQU		30H
   65  0000000                   PWMC_BP1_DIV64	EQU		40H
   66  0000000                   PWMC_BP1_DIV128	EQU		50H
   67  0000000                   PWMC_BP1_DIV256	EQU		60H
   68  0000000                   PWMC_BP1_DIV512	EQU		70H
   69  0000000                   
   70  0000000                   ;BP00_PWM	EQU		01H
   71  0000000                   ;BP01_PWM	EQU		02H
   72  0000000                   ;BP02_PWM	EQU		04H
   73  0000000                   ;BP03_PWM	EQU		08H
   74  0000000                   ;BP04_PWM	EQU		10H
   75  0000000                   ;BP05_PWM	EQU		20H
   76  0000000                   ;BP10_PWM	EQU		01H
   77  0000000                   ;BP11_PWM	EQU		02H
   78  0000000                   ;BP12_PWM	EQU		04H
   79  0000000                   
   80  0000000                   RSTF_WDT	EQU		02H
   81  0000000                   
   82  0000000                   WAKEF_PORT	EQU		01H
   83  0000000                   WAKEF_LRC	EQU		02H
   84  0000000                   WAKEF_IRWU	EQU		04H
   85  0000000                   WAKEF_RESETB	EQU		08H
   86  0000000                   WAKEF_LVR	EQU		10H
   87  0000000                   WAKEF_POR	EQU		20H
   88  0000000                   WAKEF_RST_SRC	EQU		80H
   89  0000000                   
   90  0000000                   STOP_FLAG	EQU		5AH
   91  0000000                   WDTC_CLR	EQU		01H
   92  0000000                   
   93  0000000                   LVDC_EN		EQU		01H
   94  0000000                   LDVC_21V	EQU		01H
   95  0000000                   LDVC_24V	EQU		03H
   96  0000000                   LDVC_27V	EQU		05H
   97  0000000                   LDVC_30V	EQU		07H
   98  0000000                   LDVC_33V	EQU		09H
   99  0000000                   LDVC_EXT	EQU		0BH
  100  0000000                   LDVC_DETECT	EQU		80H
  101  0000000                   
  102  0000000                   CAPS_SINK	EQU		08H
  103  0000000                   CAPS_2UA	EQU		00H





  104  0000000                   CAPS_4UA	EQU		10H	
  105  0000000                   CAPS_6UA	EQU		20H
  106  0000000                   CAPS_8UA	EQU		30H
  107  0000000                   CAPS_EN		EQU		40H
  108  0000000                   
  109  0000000                   LRCC_EN		EQU		01H
  110  0000000                   LRCC_IR_WAKEUP	EQU		02H
  111  0000000                   LRCC_IR_DHI	EQU		40H
  112  0000000                   LRCC_IR_RX	EQU		80H
  113  0000000                   
  114  0000000                   IRWD_DIV8	EQU		00H
  115  0000000                   IRWD_DIV32	EQU		01H
  116  0000000                   IRWD_DIV128	EQU		02H
  117  0000000                   IRWD_DIV512	EQU		03H
  118  0000000                   
  119  0000000                   SPIC_EN		EQU		01H
  120  0000000                   SPIC_DIV1	EQU		00H
  121  0000000                   SPIC_DIV2	EQU		20H
  122  0000000                   SPIC_DIV4	EQU		40H
  123  0000000                   SPIC_DIV8	EQU		60H
  124  0000000                   SPIC_DONE	EQU		80H
  125  0000000                   
  126  0000000                   ADRC_EN		EQU		01H
  127  0000000                   ADRC_START	EQU		02H
  128  0000000                   ADRC_BP14	EQU		00H
  129  0000000                   ADRC_BP15	EQU		04H
  130  0000000                   ADRC_BP16	EQU		08H
  131  0000000                   ADRC_BP17	EQU		0CH
  132  0000000                   ADRC_BP14_AN	EQU		10H
  133  0000000                   ADRC_BP15_AN	EQU		24H
  134  0000000                   ADRC_BP16_AN	EQU		48H
  135  0000000                   ADRC_BP17_AN	EQU		8CH
  136  0000000                   
  137  0000000                   LDOEN_EN	EQU		01H
  138  0000000                   
  139  0000000                   ISP_EN				EQU	01H
  140  0000000                   ISP_EN_PP			EQU 02H
  141  0000000                   ISP_EN_USRCFG		EQU 04H
  142  0000000                   ISP_ERR_FLAG		EQU 08H
  143  0000000                   ISP_DONE			EQU 01H
  144  0000000                   ISP_CMD_STAND		EQU	30H
  145  0000000                   ISP_CMD_READ		EQU	00H
  146  0000000                   ISP_CMD_PROGRAM		EQU 21H
  147  0000000                   ISP_CMD_ERASE_PAGE	EQU	22H
  148  0000000                   ISP_CMD_CID			EQU 0BH
  149  0000000                   ISP_CMD_DID			EQU 0CH
  150  0000000                   
  151  0000000                   ; 
  152  0000000                   ;
  153  0000000                   ; |----------------------|
  154  0000000                   ; |         Stack        |
  155  0000000                   ; |----------------------| SHM_RAM_BEGIN
  156  0000000                   ; | HW Engine Shared RAM |  
  157  0000000                   ; |----------------------| RAM_END (SHM_RAM_END)
  158  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  159  0000000                   
  160  0000000                   .IF	 (PARTNO='N589B080').OR.(PARTNO='N589C080').OR.(PARTNO='N589D080').OR.(PARTNO='N589D081')





  161  0000000                   SYS_PQ				EQU (1FH << 1)
  162  0000000                   .ENDIF
  163  0000000                   .IF	 (PARTNO='N589B120').OR.(PARTNO='N589C120').OR.(PARTNO='N589D120').OR.(PARTNO='N589D121')
  164  0000000                   SYS_PQ				EQU (27H << 1)
  165  0000000                   .ENDIF
  166  0000000                   .IF	 (PARTNO='N589A080').OR.(PARTNO='N589B170').OR.(PARTNO='N589C170').OR.(PARTNO='N589D170').OR.(PARTNO='N589D171')
  167  0000000                   SYS_PQ				EQU (2FH << 1)
  168  0000000                   .ENDIF
  169  0000000                   .IF	 (PARTNO='N589A150').OR.(PARTNO='N589B200').OR.(PARTNO='N589C200').OR.(PARTNO='N589D200').OR.(PARTNO='N589D201')
  170  0000000                   SYS_PQ				EQU (3FH << 1)
  171  0000000                   .ENDIF
  172  0000000                   .IF	 (PARTNO='N589A200').OR.(PARTNO='N589B250').OR.(PARTNO='N589C250').OR.(PARTNO='N589D250').OR.(PARTNO='N589D251')
  173  0000000                   SYS_PQ				EQU (4FH << 1)
  174  0000000                   .ENDIF
  175  0000000                   .IF	 (PARTNO='N589A280').OR.(PARTNO='N589B340').OR.(PARTNO='N589C340').OR.(PARTNO='N589D340').OR.(PARTNO='N589D341')
  176  0000000                   SYS_PQ				EQU (5FH << 1)
  177  0000000                   .ENDIF
  178  0000000                   .IF	 (PARTNO='N589D481')
  179  0000000                   SYS_PQ				EQU (7FH << 1)
  180  0000000                   .ENDIF
  181  0000000                   
  182  0000000                   .IF	 (PARTNO='N589A400').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589C480')
  183  0000000                   SYS_PQ				EQU 07FH
  184  0000000                   .ENDIF
  185  0000000                   .IF	 (PARTNO='N589A600').OR.(PARTNO='N589B650').OR.(PARTNO='N589C650').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N')
  186  0000000                   SYS_PQ				EQU 0BFH
  187  0000000                   .ENDIF
  188  0000000                   .IF	 (PARTNO='N589A900').OR.(PARTNO='N589B960').OR.(PARTNO='N589C960').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
  189  0000000                   SYS_PQ				EQU 0FFH
  190  0000000                   .ENDIF
  191  0000000                   
  192  0000000                   RAM_BEGIN		EQU 00H
  193  0000000                   
  194  0000000                   .IF (CHIPSERIES = 'N589A').OR.(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
  195  0000000                   RAM_END			EQU 1FFH
  196  0000000                   .ENDIF
  197  0000000                   
  198  0000000                   .IF (CHIPSERIES = 'N589D')
  199  0000000                   	.IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
  200  0000000                   RAM_END			EQU 17FH
  201  0000000                   	.ENDIF
  202  0000000                   	.IF	(MAINBODY='A960')
  203  0000000                   RAM_END			EQU 1FFH
  204  0000000                   	.ENDIF
  205  0000000                   .ENDIF
  206  0000000                   
  207  0000000                   DPD_RAM_BEGIN	EQU 0F00H		
  208  0000000                   DPD_RAM_END		EQU 0F1FH
  209  0000000                   
  210  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  211  0000000                   
  212  0000000                   ;====================================================
  213  0000000                   ; A340 & D171 & D481 series
  214  0000000                   ;====================================================
  215  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
  216  0000000                   SFR_BASE	EQU 	0F80H
  217  0000000                   





  218  0000000                   INTRF		EQU		0FB8H
  219  0000000                   HWENG		EQU		0FBAH
  220  0000000                   CFGULK		EQU		0FBBH
  221  0000000                   SYSCFG0		EQU		0FBCH
  222  0000000                   SYSCFG1		EQU		0FBDH
  223  0000000                   SYSCFG2		EQU		0FBEH
  224  0000000                   SYSCFG3		EQU		0FBFH
  225  0000000                   SYSCFG4		EQU		0FBCH
  226  0000000                   SYSCFG5		EQU		0FC4H
  227  0000000                   SYSCFG6		EQU		0FB4H
  228  0000000                   SYSCFG7		EQU		0FCCH
  229  0000000                   
  230  0000000                   BP0			EQU		0F80H
  231  0000000                   BP0R		EQU		0F80H
  232  0000000                   BP0D		EQU		0F84H
  233  0000000                   BP0M		EQU		0F88H
  234  0000000                   BP0EN		EQU		0F98H
  235  0000000                   
  236  0000000                   BP1			EQU		0F81H
  237  0000000                   BP1R		EQU		0F81H
  238  0000000                   BP1D		EQU		0F85H
  239  0000000                   BP1M		EQU		0F89H
  240  0000000                   BP1EN		EQU		0F99H
  241  0000000                   
  242  0000000                   ;.IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589A900').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C080').OR.(PARTNO='N589C120').OR.(PARTNO='N589C170').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D080').OR.(PARTNO='N589D120').OR.(PARTNO='N589D170').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  243  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20')
  244  0000000                   BP2			EQU		0F82H
  245  0000000                   BP2R		EQU		0F82H
  246  0000000                   BP2D		EQU		0F86H
  247  0000000                   BP2M		EQU		0F8AH
  248  0000000                   BP2EN		EQU		0F9AH
  249  0000000                   BP2MF0		EQU		0F9EH
  250  0000000                   BP2MF1		EQU		0F9FH
  251  0000000                   ;.ENDIF
  252  0000000                   ;.ENDIF
  253  0000000                   
  254  0000000                   ;.IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  255  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
  256  0000000                   BP3			EQU		0F83H
  257  0000000                   BP3R		EQU		0F83H
  258  0000000                   BP3D		EQU		0F87H
  259  0000000                   BP3M		EQU		0F8BH
  260  0000000                   BP3EN		EQU		0F9BH
  261  0000000                   ;.ENDIF
  262  0000000                   ;.ENDIF
  263  0000000                   
  264  0000000                   TMAC		EQU		0FA0H
  265  0000000                   TMAV		EQU		0FA1H
  266  0000000                   TMAO		EQU		0FA2H
  267  0000000                   
  268  0000000                   TMGC		EQU		0FA9H
  269  0000000                   TMGVL		EQU		0FAAH
  270  0000000                   TMGVH		EQU		0FABH
  271  0000000                   TMGOL		EQU		0FACH
  272  0000000                   TMGOH		EQU		0FADH
  273  0000000                   
  274  0000000                   IEF0		EQU		0F90H





  275  0000000                   EVF0		EQU		0F92H
  276  0000000                   IEF1		EQU		0F91H
  277  0000000                   EVF1		EQU		0F93H
  278  0000000                   
  279  0000000                   PCMH		EQU		0FB5H
  280  0000000                   VOL			EQU		0FB6H
  281  0000000                   CHGC		EQU		0FB7H
  282  0000000                   
  283  0000000                   BANK		EQU		0F8CH
  284  0000000                   WAKEF		EQU		0F8DH
  285  0000000                   RSTF	   	EQU     0F8FH
  286  0000000                   WDTC		EQU		0F96H
  287  0000000                   
  288  0000000                   PWMC		EQU		0FC0H
  289  0000000                   PWM0EN		EQU		0FC2H
  290  0000000                   PWV00		EQU		0FC5H
  291  0000000                   PWV01		EQU		0FC6H
  292  0000000                   PWV02		EQU		0FC7H
  293  0000000                   PWV03		EQU		0FC8H
  294  0000000                   PWV04		EQU		0FC9H
  295  0000000                   PWV05		EQU		0FCAH
  296  0000000                   PWM1EN		EQU		0FC3H
  297  0000000                   PWV10		EQU		0FCDH
  298  0000000                   PWV11		EQU		0FCEH
  299  0000000                   PWV12		EQU		0FCFH
  300  0000000                   
  301  0000000                   PWM_G0_MASK	EQU		0FCH
  302  0000000                   PWM_G1_MASK	EQU		0F3H
  303  0000000                   PWM_G2_MASK	EQU		0CFH
  304  0000000                   PWM_G3_MASK	EQU		03FH
  305  0000000                   PWM_G4_MASK	EQU		0FCH
  306  0000000                   PWM_G5_MASK	EQU		0F3H
  307  0000000                   
  308  0000000                   BP00_PWM	EQU		01H
  309  0000000                   BP01_PWM	EQU		02H
  310  0000000                   BP02_PWM	EQU		04H
  311  0000000                   BP03_PWM	EQU		08H
  312  0000000                   BP04_PWM	EQU		10H
  313  0000000                   BP05_PWM	EQU		20H
  314  0000000                   BP06_PWM	EQU		40H
  315  0000000                   BP07_PWM	EQU		80H
  316  0000000                   BP10_PWM	EQU		01H
  317  0000000                   BP11_PWM	EQU		02H
  318  0000000                   BP12_PWM	EQU		04H
  319  0000000                   BP13_PWM	EQU		08H
  320  0000000                   BP32_PWM	EQU		04H
  321  0000000                   BP33_PWM	EQU		08H
  322  0000000                   BP34_PWM	EQU		10H
  323  0000000                   BP35_PWM	EQU		20H
  324  0000000                   BP36_PWM	EQU		40H
  325  0000000                   BP37_PWM	EQU		80H
  326  0000000                   
  327  0000000                   LDOEN		EQU		0FAFH
  328  0000000                   
  329  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  330  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
  331  0000000                   SPIC		EQU		0FD8H





  332  0000000                   SPIB		EQU		0FD9H
  333  0000000                   SPIBN		EQU		0FDAH
  334  0000000                   .ENDIF
  335  0000000                   .ENDIF
  336  0000000                   
  337  0000000                   .IF (PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
  338  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='LQFP48')
  339  0000000                   IRMF0		EQU		0F9DH
  340  0000000                   .ENDIF
  341  0000000                   .ENDIF
  342  0000000                   IRWS		EQU		0FDCH
  343  0000000                   IRWD		EQU		0FDDH
  344  0000000                   IRWSB		EQU		0FDEH
  345  0000000                   
  346  0000000                   CAPS		EQU		0FAEH
  347  0000000                   LVDC		EQU		0F97H
  348  0000000                   
  349  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340')
  350  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28')
  351  0000000                   ADRC		EQU		0FB0H
  352  0000000                   ADR			EQU		0FB2H
  353  0000000                   .ENDIF
  354  0000000                   .ENDIF
  355  0000000                   
  356  0000000                   LRCC		EQU		0FDBH
  357  0000000                   
  358  0000000                   IMAGEP00	EQU		0FE0H
  359  0000000                   IMAGEP01	EQU		0FE1H
  360  0000000                   IMAGEP02	EQU		0FE2H
  361  0000000                   IMAGEP03	EQU		0FE3H
  362  0000000                   IMAGEP10	EQU		0FE4H
  363  0000000                   IMAGEP11	EQU		0FE5H
  364  0000000                   IMAGEP12	EQU		0FE6H
  365  0000000                   IMAGEP13	EQU		0FE7H
  366  0000000                   
  367  0000000                   IMAGEP20	EQU		0FD4H		
  368  0000000                   IMAGEP21	EQU		0FD5H
  369  0000000                   IMAGEP22	EQU		0FD6H
  370  0000000                   IMAGEP23	EQU		0FD7H
  371  0000000                   
  372  0000000                   ISPCON		EQU		0FE8H
  373  0000000                   ISPADR0		EQU		0FE9H
  374  0000000                   ISPADR1		EQU		0FEAH
  375  0000000                   ISPADR2		EQU		0FEBH
  376  0000000                   ISPDAT0		EQU		0FECH
  377  0000000                   ISPDAT1		EQU		0FEDH
  378  0000000                   ISPDAT2		EQU		0FEEH
  379  0000000                   ISPDAT3		EQU		0FEFH
  380  0000000                   ISPCMD		EQU		0FF0H
  381  0000000                   ISPTRG		EQU		0FF1H
  382  0000000                   ISPULK		EQU		0FF2H
  383  0000000                   ISPEPT		EQU		0FF3H
  384  0000000                   ISPULK1		EQU		0FF4H
  385  0000000                   
  386  0000000                   .ENDIF
  387  0000000                   ;====================================================
  388  0000000                   ; A960 series





  389  0000000                   ;====================================================
  390  0000000                   .IF	(MAINBODY='A960')
  391  0000000                   SFR_BASE	EQU 	0F80H
  392  0000000                   
  393  0000000                   INTRF		EQU		0FB8H
  394  0000000                   HWENG		EQU		0FBAH
  395  0000000                   CFGULK		EQU		0FBBH
  396  0000000                   SYSCFG0		EQU		0FBCH
  397  0000000                   SYSCFG1		EQU		0FBDH
  398  0000000                   SYSCFG2		EQU		0FBEH
  399  0000000                   SYSCFG3		EQU		0FBFH
  400  0000000                   SYSCFG4		EQU		0FBCH
  401  0000000                   SYSCFG5		EQU		0FC4H
  402  0000000                   SYSCFG6		EQU		0FB4H
  403  0000000                   SYSCFG7		EQU		0FCCH
  404  0000000                   SYSCFG8		EQU		0FCBH
  405  0000000                   
  406  0000000                   BP0			EQU		0F80H
  407  0000000                   BP0R		EQU		0F80H
  408  0000000                   BP0D		EQU		0F84H
  409  0000000                   BP0M		EQU		0F88H
  410  0000000                   BP0EN		EQU		0F98H
  411  0000000                   
  412  0000000                   BP1			EQU		0F81H
  413  0000000                   BP1R		EQU		0F81H
  414  0000000                   BP1D		EQU		0F85H
  415  0000000                   BP1M		EQU		0F89H
  416  0000000                   BP1EN		EQU		0F99H
  417  0000000                   
  418  0000000                   ;.IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
  419  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
  420  0000000                   BP2			EQU		0F82H
  421  0000000                   BP2R		EQU		0F82H
  422  0000000                   BP2D		EQU		0F86H
  423  0000000                   BP2M		EQU		0F8AH
  424  0000000                   BP2EN		EQU		0F9AH
  425  0000000                   BP2MF0		EQU		0F9EH
  426  0000000                   BP2MF1		EQU		0F9FH
  427  0000000                   ;.ENDIF
  428  0000000                   ;.ENDIF
  429  0000000                   
  430  0000000                   ;.IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
  431  0000000                   ;.IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
  432  0000000                   BP3			EQU		0F83H
  433  0000000                   BP3R		EQU		0F83H
  434  0000000                   BP3D		EQU		0F87H
  435  0000000                   BP3M		EQU		0F8BH
  436  0000000                   BP3EN		EQU		0F9BH
  437  0000000                   ;.ENDIF
  438  0000000                   ;.ENDIF
  439  0000000                   
  440  0000000                   TMAC		EQU		0FA0H
  441  0000000                   TMAV		EQU		0FA1H
  442  0000000                   TMAO		EQU		0FA2H
  443  0000000                   
  444  0000000                   TMGC		EQU		0FA9H
  445  0000000                   TMGVL		EQU		0FAAH





  446  0000000                   TMGVH		EQU		0FABH
  447  0000000                   TMGOL		EQU		0FACH
  448  0000000                   TMGOH		EQU		0FADH
  449  0000000                   
  450  0000000                   IEF0		EQU		0F90H
  451  0000000                   EVF0		EQU		0F92H
  452  0000000                   IEF1		EQU		0F91H
  453  0000000                   EVF1		EQU		0F93H
  454  0000000                   
  455  0000000                   PCMH		EQU		0FB5H
  456  0000000                   VOL			EQU		0FB6H
  457  0000000                   CHGC		EQU		0FB7H
  458  0000000                   
  459  0000000                   BANK		EQU		0F8CH
  460  0000000                   WAKEF		EQU		0F8DH
  461  0000000                   RSTF	   	EQU     0F8FH
  462  0000000                   WDTC		EQU		0F96H
  463  0000000                   
  464  0000000                   
  465  0000000                   PWMC		EQU		0FC0H
  466  0000000                   PWMEN		EQU		0FC1H
  467  0000000                   PWMOA		EQU		0FC2H
  468  0000000                   PWMOB		EQU		0FC3H
  469  0000000                   PWV0		EQU		0FC5H
  470  0000000                   PWV1		EQU		0FC6H
  471  0000000                   PWV2		EQU		0FC7H
  472  0000000                   PWV3		EQU		0FC8H
  473  0000000                   PWV4		EQU		0FC9H
  474  0000000                   PWV5		EQU		0FCAH
  475  0000000                   
  476  0000000                   PWM_G0_MASK	EQU		0FCH
  477  0000000                   PWM_G1_MASK	EQU		0F3H
  478  0000000                   PWM_G2_MASK	EQU		0CFH
  479  0000000                   PWM_G3_MASK	EQU		03FH
  480  0000000                   PWM_G4_MASK	EQU		0FCH
  481  0000000                   PWM_G5_MASK	EQU		0F3H
  482  0000000                   
  483  0000000                   BP00_PWM	EQU		01H
  484  0000000                   BP01_PWM	EQU		02H
  485  0000000                   BP02_PWM	EQU		04H
  486  0000000                   BP03_PWM	EQU		08H
  487  0000000                   BP04_PWM	EQU		10H
  488  0000000                   BP05_PWM	EQU		20H
  489  0000000                   BP06_PWM	EQU		40H
  490  0000000                   BP07_PWM	EQU		80H
  491  0000000                   BP10_PWM	EQU		01H
  492  0000000                   BP11_PWM	EQU		02H
  493  0000000                   BP12_PWM	EQU		04H
  494  0000000                   BP13_PWM	EQU		08H
  495  0000000                   BP32_PWM	EQU		04H
  496  0000000                   BP33_PWM	EQU		08H
  497  0000000                   BP34_PWM	EQU		10H
  498  0000000                   BP35_PWM	EQU		20H
  499  0000000                   BP36_PWM	EQU		40H
  500  0000000                   BP37_PWM	EQU		80H
  501  0000000                   
  502  0000000                   PWM_G0_BP00	EQU		00H





  503  0000000                   PWM_G0_BP06	EQU		01H
  504  0000000                   PWM_G0_BP32	EQU		02H
  505  0000000                   PWM_G1_BP01	EQU		00H
  506  0000000                   PWM_G1_BP07	EQU		04H
  507  0000000                   PWM_G1_BP33	EQU		08H
  508  0000000                   PWM_G2_BP02	EQU		00H
  509  0000000                   PWM_G2_BP10	EQU		10H
  510  0000000                   PWM_G2_BP34	EQU		20H
  511  0000000                   PWM_G3_BP03	EQU		00H
  512  0000000                   PWM_G3_BP11	EQU		40H
  513  0000000                   PWM_G3_BP35	EQU		80H
  514  0000000                   PWM_G4_BP04	EQU		00H
  515  0000000                   PWM_G4_BP12	EQU		01H
  516  0000000                   PWM_G4_BP36	EQU		02H
  517  0000000                   PWM_G5_BP05	EQU		00H
  518  0000000                   PWM_G5_BP13	EQU		04H
  519  0000000                   PWM_G5_BP37	EQU		08H
  520  0000000                   
  521  0000000                   ;LDOEN		EQU		0FAFH
  522  0000000                   
  523  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
  524  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20')
  525  0000000                   SPIC		EQU		0FD8H
  526  0000000                   SPIB		EQU		0FD9H
  527  0000000                   SPIBN		EQU		0FDAH
  528  0000000                   .ENDIF
  529  0000000                   .ENDIF
  530  0000000                   
  531  0000000                   IRWS		EQU		0FDCH
  532  0000000                   IRWD		EQU		0FDDH
  533  0000000                   IRWSB		EQU		0FDEH
  534  0000000                   
  535  0000000                   CAPS		EQU		0FAEH
  536  0000000                   LVDC		EQU		0F97H
  537  0000000                   
  538  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
  539  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
  540  0000000                   ADRC		EQU		0FB0H
  541  0000000                   ADR			EQU		0FB2H
  542  0000000                   .ENDIF
  543  0000000                   .ENDIF
  544  0000000                   
  545  0000000                   LRCC		EQU		0FDBH
  546  0000000                   
  547  0000000                   SLDC0		EQU		0F70H
  548  0000000                   SLDC1		EQU		0F71H
  549  0000000                   HIDA1		EQU		0F72H
  550  0000000                   LODA1		EQU		0F73H
  551  0000000                   HIDA0		EQU		0F74H
  552  0000000                   LODA0		EQU		0F75H
  553  0000000                   SDTH		EQU		0F76H
  554  0000000                   SLDAT		EQU		0F77H
  555  0000000                   
  556  0000000                   UMODE		EQU		0F78H
  557  0000000                   TXSTS		EQU		0F79H
  558  0000000                   RXSTS		EQU		0F7AH
  559  0000000                   BRDIVH		EQU		0F7BH





  560  0000000                   BRDIVL		EQU		0F7CH
  561  0000000                   URTHD		EQU		0F7DH
  562  0000000                   URDATA		EQU		0F7EH
  563  0000000                   TDLY		EQU		0F7FH
  564  0000000                   
  565  0000000                   IMAGEP00	EQU		0FE0H
  566  0000000                   IMAGEP01	EQU		0FE1H
  567  0000000                   IMAGEP02	EQU		0FE2H
  568  0000000                   IMAGEP03	EQU		0FE3H
  569  0000000                   IMAGEP10	EQU		0FE4H
  570  0000000                   IMAGEP11	EQU		0FE5H
  571  0000000                   IMAGEP12	EQU		0FE6H
  572  0000000                   IMAGEP13	EQU		0FE7H
  573  0000000                   
  574  0000000                   IMAGEP20	EQU		0FD4H		
  575  0000000                   IMAGEP21	EQU		0FD5H
  576  0000000                   IMAGEP22	EQU		0FD6H
  577  0000000                   IMAGEP23	EQU		0FD7H
  578  0000000                   
  579  0000000                   ISPCON		EQU		0FE8H
  580  0000000                   ISPADR0		EQU		0FE9H
  581  0000000                   ISPADR1		EQU		0FEAH
  582  0000000                   ISPADR2		EQU		0FEBH
  583  0000000                   ISPDAT0		EQU		0FECH
  584  0000000                   ISPDAT1		EQU		0FEDH
  585  0000000                   ISPDAT2		EQU		0FEEH
  586  0000000                   ISPDAT3		EQU		0FEFH
  587  0000000                   ISPCMD		EQU		0FF0H
  588  0000000                   ISPTRG		EQU		0FF1H
  589  0000000                   ISPULK		EQU		0FF2H
  590  0000000                   ISPEPT		EQU		0FF3H
  591  0000000                   ISPULK1		EQU		0FF4H
  592  0000000                   
  593  0000000                   .ENDIF
  594  0000000                   
  595  0000000                   
  596  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\N55P242_DEFINE.INI.APP"
  597  0000000                   ;----IO REGUSTER----------
  598  0000000                   BPA0			EQU	00H
  599  0000000                   BPB0			EQU	01H
  600  0000000                   BPC0			EQU	02H
  601  0000000                   BPA1			EQU	00H
  602  0000000                   BPB1			EQU	01H
  603  0000000                   BPC1			EQU	02H
  604  0000000                   
  605  0000000                   ;----IO REGUSTER----------
  606  0000000                   ; BUFFER  Data of GPA/B/C
  607  0000000                   ;-------------------------
  608  0000000                   P242BPA_B		EQU	00H
  609  0000000                   P242BPB_B		EQU	01H
  610  0000000                   P242BPC_B		EQU	02H
  611  0000000                   
  612  0000000                   ;-------------------------
  613  0000000                   ; DIRECTION  Data of GPA/B/C
  614  0000000                   ;-------------------------
  615  0000000                   P242BPA_D		EQU	04H
  616  0000000                   P242BPB_D		EQU	05H





  617  0000000                   P242BPC_D		EQU	06H
  618  0000000                   
  619  0000000                   ;-------------------------
  620  0000000                   ; ATTRIBUTE   Data of GPA/B/C
  621  0000000                   ;-------------------------
  622  0000000                   P242BPA_A		EQU	08H
  623  0000000                   P242BPB_A		EQU	09H
  624  0000000                   P242BPC_A		EQU	0AH
  625  0000000                   
  626  0000000                   ;-------------------------
  627  0000000                   ; PIN data   Data of GPA/B/C
  628  0000000                   ;-------------------------
  629  0000000                   P242BPA_P		EQU	0CH
  630  0000000                   P242BPB_P		EQU	0DH
  631  0000000                   P242BPC_P		EQU	0EH
  632  0000000                   
  633  0000000                   
  634  0000000                   
  635  0000000                   ;-----------------WAKE UP--------------------------
  636  0000000                   ;WAKEN[7] ,KCAEN[6], KCBEN[5], KCCEN[4] ; R/W 
  637  0000000                   ;PAC[3], PBC[2], PCC[1], WKFLG[0]  ; Read Only
  638  0000000                   ;--------------------------------------------------
  639  0000000                   ;WAKEN[7]: Wakeup enable bit.
  640  0000000                   ;KCA/B/C_EN :Wakeup enable bit of GPA/B/C
  641  0000000                   ;PAC/PBC/PCC : Change bit GPA/B/C :1: change; 0: no change.
  642  0000000                   ;WKFLG :Only when PAC, PBC and PCC bits are all ¡§0¡¨s is WKFLG bit set to ¡§0¡¨
  643  0000000                   ;--------------------------------------------------
  644  0000000                   P242WKCTL		EQU	0FH
  645  0000000                   
  646  0000000                   ;----RESET------------------
  647  0000000                   P242RESET		EQU	4FH    ; Write Only
  648  0000000                   
  649  0000000                   ;----Device Select----------
  650  0000000                   P242DVSL0		EQU	4CH    ; Write Only
  651  0000000                   P242DVSL1		EQU	4DH    ; Write Only
  652  0000000                   
  653  0000000                   ;----Test Mode--------------
  654  0000000                   ;TEST[7] : 
  655  0000000                   ;---------------------------
  656  0000000                   P242TEST		EQU	4EH    ; R/W
  657  0000000                   
  658  0000000                   
  659  0000000                   
  660  0000000                   ;---AND REGISTER----------
  661  0000000                   ;----For Buffer ----------
  662  0000000                   P242AND_BPA_B		EQU	10H
  663  0000000                   P242AND_BPB_B		EQU	11H
  664  0000000                   P242AND_BPC_B		EQU	12H
  665  0000000                   
  666  0000000                   ;--- For Direction --------
  667  0000000                   P242AND_BPA_D		EQU	14H
  668  0000000                   P242AND_BPB_D		EQU	15H
  669  0000000                   P242AND_BPC_D		EQU	16H
  670  0000000                   
  671  0000000                   ;--- For Attribute  -------
  672  0000000                   P242AND_BPA_A		EQU	18H
  673  0000000                   P242AND_BPB_A		EQU	19H





  674  0000000                   P242AND_BPC_A		EQU	1AH
  675  0000000                   
  676  0000000                   ;---OR REGISTER----------
  677  0000000                   ;----For Buffer ----------
  678  0000000                   P242OR_BPA_B		EQU	20H
  679  0000000                   P242OR_BPB_B		EQU	21H
  680  0000000                   P242OR_BPC_B		EQU	22H
  681  0000000                   
  682  0000000                   ;--- For Direction --------
  683  0000000                   P242OR_BPA_D		EQU	24H
  684  0000000                   P242OR_BPB_D		EQU	25H
  685  0000000                   P242OR_BPC_D		EQU	26H
  686  0000000                   
  687  0000000                   ;--- For Attribute  -------
  688  0000000                   P242OR_BPA_A		EQU	28H
  689  0000000                   P242OR_BPB_A		EQU	29H
  690  0000000                   P242OR_BPC_A		EQU	2AH
  691  0000000                   
  692  0000000                   ;---XOR REGISTER----------
  693  0000000                   ;--- For Attribute  -------
  694  0000000                   P242XOR_BPA_B		EQU	30H
  695  0000000                   P242XOR_BPB_B		EQU	31H
  696  0000000                   P242XOR_BPC_B		EQU	32H
  697  0000000                   
  698  0000000                   ;--- For Direction --------
  699  0000000                   P242XOR_BPA_D		EQU	34H
  700  0000000                   P242XOR_BPB_D		EQU	35H
  701  0000000                   P242XOR_BPC_D		EQU	36H
  702  0000000                   
  703  0000000                   ;--- For Attribute  -------
  704  0000000                   P242XOR_BPA_A		EQU	38H
  705  0000000                   P242XOR_BPB_A		EQU	39H
  706  0000000                   P242XOR_BPC_A		EQU	3AH
  707  0000000                   
  708  0000000                   ;---------------------------
  709  0000000                   ; Constant/Normal Current/
  710  0000000                   ; Current Control of GPA/B/C
  711  0000000                   ;---------------------------
  712  0000000                   P242CNST_BPA		EQU	40H
  713  0000000                   P242CNST_BPB		EQU	41H
  714  0000000                   P242CNST_BPC		EQU	42H
  715  0000000                   
  716  0000000                   ;---PWM REGISTER----------
  717  0000000                   ;   For BPA0~BPA7 
  718  0000000                   ;-------------------------
  719  0000000                   ; Writ Only
  720  0000000                   ;-------------------------
  721  0000000                   P242PWM_BPA0		EQU	50H
  722  0000000                   P242PWM_BPA1		EQU	51H
  723  0000000                   P242PWM_BPA2		EQU	52H
  724  0000000                   P242PWM_BPA3		EQU	53H
  725  0000000                   P242PWM_BPA4		EQU	54H
  726  0000000                   P242PWM_BPA5		EQU	55H
  727  0000000                   P242PWM_BPA6		EQU	56H
  728  0000000                   P242PWM_BPA7		EQU	57H
  729  0000000                   
  730  0000000                   





  731  0000000                   ;---PWM REGISTER----------
  732  0000000                   ;   For BPB0~BPB7 
  733  0000000                   ;-------------------------
  734  0000000                   ; Writ Only
  735  0000000                   ;-------------------------
  736  0000000                   P242PWM_BPB0		EQU	58H
  737  0000000                   P242PWM_BPB1		EQU	59H
  738  0000000                   P242PWM_BPB2		EQU	5AH
  739  0000000                   P242PWM_BPB3		EQU	5BH
  740  0000000                   P242PWM_BPB4		EQU	5CH
  741  0000000                   P242PWM_BPB5		EQU	5DH
  742  0000000                   P242PWM_BPB6		EQU	5EH
  743  0000000                   P242PWM_BPB7		EQU	5FH
  744  0000000                   
  745  0000000                   ;---PWM REGISTER----------
  746  0000000                   ;   For BPC0~BPC7 
  747  0000000                   ;-------------------------
  748  0000000                   ; Writ Only
  749  0000000                   ;-------------------------
  750  0000000                   P242PWM_BPC0		EQU	60H
  751  0000000                   P242PWM_BPC1		EQU	61H
  752  0000000                   P242PWM_BPC2		EQU	62H
  753  0000000                   P242PWM_BPC3		EQU	63H
  754  0000000                   P242PWM_BPC4		EQU	64H
  755  0000000                   P242PWM_BPC5		EQU	65H
  756  0000000                   P242PWM_BPC6		EQU	66H
  757  0000000                   P242PWM_BPC7		EQU	67H
  758  0000000                   
  759  0000000                   ;---ENABLE PWM REGISTER----------
  760  0000000                   ;   For BPA/B/C0~7 
  761  0000000                   ;--------------------------------
  762  0000000                   P242PWMEN_BPA		EQU	78H
  763  0000000                   P242PWMEN_BPB		EQU	79H
  764  0000000                   P242PWMEN_BPC		EQU	7AH
  765  0000000                   
  766  0000000                   ;---PWM CLK REGISTER----------
  767  0000000                   ;   For BPA0~3, BPA4~7
  768  0000000                   ;   For BPB0~3, BPB4~7
  769  0000000                   ;   For BPB0~3, BPB4~7
  770  0000000                   ;--------------------------------
  771  0000000                   P242PWMCK_BPA		EQU	7DH   ; MSB 4bit for BPB, LSB 4bit for BPA
  772  0000000                   P242PWMCK_BPB		EQU	7DH   ; BPA/B same address 7DH
  773  0000000                   P242PWMCK_BPC		EQU	7EH   ; only LSB 4bits for BPC
  774  0000000                   
  775  0000000                   ;===========================================
  776  0000000                   ; Control Symbol Definition
  777  0000000                   ;===========================================
  778  0000000                   ;--------Wake up way-------
  779  0000000                   BY_MISO		EQU	00H
  780  0000000                   BY_PIN		EQU	01H
  781  0000000                   
  782  0000000                   ;--------external port-----
  783  0000000                   XBPA		EQU	0800H   ;.HIGH. For WakeUp bit
  784  0000000                   XBPB		EQU	0401H
  785  0000000                   XBPC		EQU	0202H
  786  0000000                   ;--------------------------
  787  0000000                   ;-------PWM pin------------





  788  0000000                   XPWM0		EQU	0100H
  789  0000000                   XPWM1		EQU	0201H
  790  0000000                   XPWM2		EQU	0402H
  791  0000000                   XPWM3		EQU	0803H
  792  0000000                   XPWM4		EQU	1004H
  793  0000000                   XPWM5		EQU	2005H
  794  0000000                   XPWM6		EQU	4006H
  795  0000000                   XPWM7		EQU	8007H
  796  0000000                   ;--------------------------
  797  0000000                   ;-------PIN pin------------
  798  0000000                   
  799  0000000                   XPIN_ALL	EQU 	00FFh
  800  0000000                   XPINALL		EQU 	00FFh
  801  0000000                   
  802  0000000                   XPIN0		EQU	0001H
  803  0000000                   XPIN1		EQU	0002H
  804  0000000                   XPIN2		EQU	0004H
  805  0000000                   XPIN3		EQU	0008H
  806  0000000                   XPIN4		EQU	0010H
  807  0000000                   XPIN5		EQU	0020H
  808  0000000                   XPIN6		EQU	0040H
  809  0000000                   XPIN7		EQU	0080H
  810  0000000                   ;-------PIN pin------------
  811  0000000                   
  812  0000000                   ;--------------------------
  813  0000000                   
  814  0000000                   ;-------PWM Clock Divider------------
  815  0000000                   ; 00: GPA0~GPA3 PWM clock is Fosc/1.
  816  0000000                   ; 01: GPA0~GPA3 PWM clock is Fosc/2.
  817  0000000                   ; 10: GPA0~GPA3 PWM clock is Fosc/4.
  818  0000000                   ; 11: GPA0~GPA3 PWM clock is Fosc/32
  819  0000000                   ;------------------------------------
  820  0000000                   XPWMA03_DIV1		EQU	00H
  821  0000000                   XPWMA03_DIV2		EQU	01H
  822  0000000                   XPWMA03_DIV4		EQU	02H
  823  0000000                   XPWMA03_DIV32		EQU	03H
  824  0000000                   XPWMA47_DIV1		EQU	00H<<2
  825  0000000                   XPWMA47_DIV2		EQU	01H<<2
  826  0000000                   XPWMA47_DIV4		EQU	02H<<2
  827  0000000                   XPWMA47_DIV32		EQU	03H<<2
  828  0000000                   
  829  0000000                   XPWMB03_DIV1		EQU	00H<<4
  830  0000000                   XPWMB03_DIV2		EQU	01H<<4
  831  0000000                   XPWMB03_DIV4		EQU	02H<<4
  832  0000000                   XPWMB03_DIV32		EQU	03H<<4
  833  0000000                   XPWMB47_DIV1		EQU	00H<<6
  834  0000000                   XPWMB47_DIV2		EQU	01H<<6
  835  0000000                   XPWMB47_DIV4		EQU	02H<<6
  836  0000000                   XPWMB47_DIV32		EQU	03H<<6
  837  0000000                   
  838  0000000                   XPWMC03_DIV1		EQU	00H
  839  0000000                   XPWMC03_DIV2		EQU	01H
  840  0000000                   XPWMC03_DIV4		EQU	02H
  841  0000000                   XPWMC03_DIV32		EQU	03H
  842  0000000                   XPWMC47_DIV1		EQU	00H<<2
  843  0000000                   XPWMC47_DIV2		EQU	01H<<2
  844  0000000                   XPWMC47_DIV4		EQU	02H<<2





  845  0000000                   XPWMC47_DIV32		EQU	03H<<2
  846  0000000                   
  847  0000000                   ;=====================================================
  848  0000000                   ; Other Symobol Definition
  849  0000000                   ;=====================================================
  850  0000000                   ;----------input mode ---------
  851  0000000                   ;float low - A=1,D=0,B=0
  852  0000000                   M_IP_FL		EQU	FF0000H
  853  0000000                   M_IP0_FL	EQU	010000H
  854  0000000                   M_IP1_FL	EQU	020000H
  855  0000000                   M_IP2_FL	EQU	040000H
  856  0000000                   M_IP3_FL	EQU	080000H
  857  0000000                   M_IP4_FL	EQU	100000H
  858  0000000                   M_IP5_FL	EQU	200000H
  859  0000000                   M_IP6_FL	EQU	400000H
  860  0000000                   M_IP7_FL	EQU	800000H
  861  0000000                   
  862  0000000                   ;float high - A=0,D=0,B=0(Default)
  863  0000000                   M_IP_FH		EQU	000000H
  864  0000000                   M_IP0_FH	EQU	000000H
  865  0000000                   M_IP1_FH	EQU	000000H
  866  0000000                   M_IP2_FH	EQU	000000H
  867  0000000                   M_IP3_FH	EQU	000000H
  868  0000000                   M_IP4_FH	EQU	000000H
  869  0000000                   M_IP5_FH	EQU	000000H
  870  0000000                   M_IP6_FH	EQU	000000H
  871  0000000                   M_IP7_FH	EQU	000000H
  872  0000000                   
  873  0000000                   ;pull low - A=1,D=0,B=1
  874  0000000                   M_IP_PL		EQU	FF00FFH
  875  0000000                   M_IP0_PL	EQU	010001H
  876  0000000                   M_IP1_PL	EQU	020002H
  877  0000000                   M_IP2_PL	EQU	040004H
  878  0000000                   M_IP3_PL	EQU	080008H
  879  0000000                   M_IP4_PL	EQU	100010H
  880  0000000                   M_IP5_PL	EQU	200020H
  881  0000000                   M_IP6_PL	EQU	400040H
  882  0000000                   M_IP7_PL	EQU	800080H
  883  0000000                   
  884  0000000                   ;pull high - A=0,D=0,B=1
  885  0000000                   M_IP_PH		EQU	0000FFH
  886  0000000                   M_IP0_PH	EQU	000001H
  887  0000000                   M_IP1_PH	EQU	000002H
  888  0000000                   M_IP2_PH	EQU	000004H
  889  0000000                   M_IP3_PH	EQU	000008H
  890  0000000                   M_IP4_PH	EQU	000010H
  891  0000000                   M_IP5_PH	EQU	000020H
  892  0000000                   M_IP6_PH	EQU	000040H
  893  0000000                   M_IP7_PH	EQU	000080H
  894  0000000                   
  895  0000000                   ;----------output mode ---------
  896  0000000                   ;CMOS high - A=0,D=1,B=1
  897  0000000                   M_OP_CM_H	EQU	00FFFFH
  898  0000000                   M_OP0_CM_H	EQU	000101H
  899  0000000                   M_OP1_CM_H	EQU	000202H
  900  0000000                   M_OP2_CM_H	EQU	000404H
  901  0000000                   M_OP3_CM_H	EQU	000808H





  902  0000000                   M_OP4_CM_H	EQU	001010H
  903  0000000                   M_OP5_CM_H	EQU	002020H
  904  0000000                   M_OP6_CM_H	EQU	004040H
  905  0000000                   M_OP7_CM_H	EQU	008080H
  906  0000000                   
  907  0000000                   ;CMOS low - A=0,D=1,B=0
  908  0000000                   M_OP_CM_L	EQU	00FF00H
  909  0000000                   M_OP0_CM_L	EQU	000100H
  910  0000000                   M_OP1_CM_L	EQU	000200H
  911  0000000                   M_OP2_CM_L	EQU	000400H
  912  0000000                   M_OP3_CM_L	EQU	000800H
  913  0000000                   M_OP4_CM_L	EQU	001000H
  914  0000000                   M_OP5_CM_L	EQU	002000H
  915  0000000                   M_OP6_CM_L	EQU	004000H
  916  0000000                   M_OP7_CM_L	EQU	008000H
  917  0000000                   
  918  0000000                   ;Inverted CMOS high - A=1,D=1,B=0
  919  0000000                   M_OP_ICM_H	EQU	FFFF00H
  920  0000000                   M_OP0_ICM_H	EQU	010100H
  921  0000000                   M_OP1_ICM_H	EQU	020200H
  922  0000000                   M_OP2_ICM_H	EQU	040400H
  923  0000000                   M_OP3_ICM_H	EQU	080800H
  924  0000000                   M_OP4_ICM_H	EQU	101000H
  925  0000000                   M_OP5_ICM_H	EQU	202000H
  926  0000000                   M_OP6_ICM_H	EQU	404000H
  927  0000000                   M_OP7_ICM_H	EQU	808000H
  928  0000000                   
  929  0000000                   ;Inverted CMOS low - A=1,D=1,B=1
  930  0000000                   M_OP_ICM_L	EQU	FFFFFFH
  931  0000000                   M_OP0_ICM_L	EQU	010101H
  932  0000000                   M_OP1_ICM_L	EQU	020202H
  933  0000000                   M_OP2_ICM_L	EQU	040404H
  934  0000000                   M_OP3_ICM_L	EQU	080808H
  935  0000000                   M_OP4_ICM_L	EQU	101010H
  936  0000000                   M_OP5_ICM_L	EQU	202020H
  937  0000000                   M_OP6_ICM_L	EQU	404040H
  938  0000000                   M_OP7_ICM_L	EQU	808080H
  939  0000000                   
  940  0000000                   ;------set output value ---------
  941  0000000                   ;set CMOS low: AND BUF
  942  0000000                   S_OPALL		EQU	FFH
  943  0000000                   S_OP0		EQU	01H
  944  0000000                   S_OP1		EQU	02H
  945  0000000                   S_OP2		EQU	04H
  946  0000000                   S_OP3		EQU	08H
  947  0000000                   S_OP4		EQU	10H
  948  0000000                   S_OP5		EQU	20H
  949  0000000                   S_OP6		EQU	40H
  950  0000000                   S_OP7		EQU	80H
  951  0000000                   ;========================================================
  952  0000000                   
  953  0000000                   	INCLUDE	"D:\SOURCECODE\_AVERY_M031\M031BSP_NSP_TWOWIRESAMPLE\NSP_PROJECT\RINGRING_NSP480A\CPUIF\CONFIGURATION.INI.APP"
  954  0000000                   LOCAL_TEST						EQU 0
  955  0000000                   ;--------------------------------------------------------------------------
  956  0000000                   ; Configurations : New add
  957  0000000                   ;--------------------------------------------------------------------------
  958  0000000                   ; share ram





  959  0000000                   SHM_RAM_BEGIN		EQU 160H
  960  0000000                   SHM_RAM_END			EQU 1EFH
  961  0000000                   
  962  0000000                   ; stack
  963  0000000                   STACK_END   		EQU 145H
  964  0000000                   
  965  0000000                   HWE_STACK_BEGIN		EQU 1F0H
  966  0000000                   
  967  0000000                   ; spi flash
  968  0000000                   WITH_SPI_SWITCH 	EQU 1
  969  0000000                   
  970  0000000                   ; share timing
  971  0000000                   ; Modified ---------- HIRC_CLK_6502		EQU 0FFH
  972  0000000                   HIRC_CLK_6502 EQU 07FH
  973  0000000                   ; Modified ---------- HIRC_CLK_HWE		EQU 17FH
  974  0000000                   HIRC_CLK_HWE  EQU 1FFH
  975  0000000                   
  976  0000000                   ;--------------------------------------------------------------------------
  977  0000000                   ; Configurations : Configurations config features for di-fferent libraries.
  978  0000000                   ;--------------------------------------------------------------------------
  979  0000000                   WITH_CHIP_SERIES				EQU 0
  980  0000000                   ;0:	N588M
  981  0000000                   ;1:	N588K
  982  0000000                   
  983  0000000                   WITH_VOL_ADJ					EQU 1
  984  0000000                   ; There will be 2 libraries for each chip series such as W566B,W566C,....
  985  0000000                   ; One library with Volume Adjustment, another one without Volume Adjustment.
  986  0000000                   ; 0: WITHOUT VOL ADJ.
  987  0000000                   ; 1: WITH S/W VOL ADJ.
  988  0000000                   ; 2: WITH H/W VOL ADJ.
  989  0000000                   
  990  0000000                   WITH_MULTI_CHANNEL				EQU  0
  991  0000000                   ; There will be 2 libraries 
  992  0000000                   ; One library with 16HQ, another one without 16HQ
  993  0000000                   ; 0: WITHOUT 16HQ.
  994  0000000                   ; 1: WITH 16HQ.	
  995  0000000                   
  996  0000000                   WITH_VOL_REDUCE					EQU 0	
  997  0000000                   
  998  0000000                   WITH_16BIT_MODE					EQU 0
  999  0000000                   ; Some with 65C816 uC, some with 65C02.
 1000  0000000                   WITH_32K_BANK					EQU 1
 1001  0000000                   ;some with bank (ex:W567,W588), some without (ex:W566,W5691)
 1002  0000000                   WITH_T_BUFFER					EQU 0
 1003  0000000                   ;T-buffer is the buffer for latch decoded output PCM
 1004  0000000                   WITH_READ_DATA_TYPE 			EQU 0
 1005  0000000                   ; 0 : from ROM
 1006  0000000                   ; 1 : from FI-FO
 1007  0000000                   WITH_PCM_OUTPUT_TYPE			EQU 0
 1008  0000000                   ; 0 : unsigned PCM
 1009  0000000                   ; 1 : signed PCM (2' complement) 
 1010  0000000                   ; 2 : signed magnitude
 1011  0000000                   WITH_PCM_OUTPUT_SIZE			EQU 2
 1012  0000000                   ; 1 : 1 BYTE
 1013  0000000                   ; 2 : 2 BYTE	
 1014  0000000                   WITH_CMD						EQU 0
 1015  0000000                   ; for W569 chips that CPU send command to uC for next operations





 1016  0000000                   
 1017  0000000                   WITH_FW_MIXER					EQU 0
 1018  0000000                   ; I-f a timer mix several channels but output to a T-buffer/Mixer output.
 1019  0000000                   ; A firmware mixer will be needed.
 1020  0000000                   WITH_COMPRESSED_MIDI			EQU 2
 1021  0000000                   WITH_MULTIPLIER					EQU 0
 1022  0000000                   ; 0 : FW
 1023  0000000                   ; 1 : 9*7
 1024  0000000                   ; 2 : 9*8
 1025  0000000                   WITH_HEAD_TAIL_PROCESS			EQU 1
 1026  0000000                   
 1027  0000000                   ;-------------------------------------------------
 1028  0000000                   ; for melody symbol definition
 1029  0000000                   ;-------------------------------------------------
 1030  0000000                   ENV_SHARP_DECAY_AMOUNT				EQU 4
 1031  0000000                   
 1032  0000000                   WITH_ALL_MIXER_SFR				EQU 0
 1033  0000000                   ; Following defines T-buffer registers
 1034  0000000                   
 1035  0000000                   ;USED ACCOMPANY WITH SP_LO_T_INDEX_TABLE & SP_HI_T_INDEX_TABLE
 1036  0000000                   SP_START_SIM_BUF_VS0A			EQU 0
 1037  0000000                   SP_START_SIM_BUF_VS1A			EQU 0
 1038  0000000                   SP_START_SIM_BUF_VS2A			EQU 0
 1039  0000000                   SP_START_SIM_BUF_VS0B 			EQU 0
 1040  0000000                   SP_START_SIM_BUF_VS1B			EQU 0
 1041  0000000                   
 1042  0000000                   
 1043  0000000                   ; Following options used for ISR.
 1044  0000000                   ; Please disable VS0D->VS0C->VS2B->VS1B->VSF->VSE->...>VS0A 
 1045  0000000                   WITH_ISR_VS0A					EQU 1
 1046  0000000                   WITH_ISR_VS0B					EQU 0
 1047  0000000                   WITH_ISR_VS1A					EQU 0
 1048  0000000                   WITH_ISR_VS1B					EQU 0
 1049  0000000                   WITH_ISR_VS2A					EQU 0
 1050  0000000                   WITH_ISR_VS2B					EQU 0
 1051  0000000                   
 1052  0000000                   
 1053  0000000                   ; Following options used for selecting speech channels.
 1054  0000000                   ; Please disable VS0D->VS0C->VS2B->VS1B->VSF->VSE->...>VS0A 
 1055  0000000                   WITH_VS0A						EQU 1
 1056  0000000                   WITH_VS0B						EQU 0
 1057  0000000                   WITH_VS1A						EQU 0
 1058  0000000                   WITH_VS1B						EQU 0
 1059  0000000                   WITH_VS2A						EQU 0
 1060  0000000                   WITH_VS2B						EQU 0
 1061  0000000                   WITH_VS0C						EQU 0
 1062  0000000                   WITH_VS0D						EQU 0
 1063  0000000                   WITH_VS3						EQU 0
 1064  0000000                   WITH_VS4						EQU 0
 1065  0000000                   WITH_VS5						EQU 0
 1066  0000000                   WITH_VS6						EQU 0
 1067  0000000                   WITH_VS7						EQU 0
 1068  0000000                   WITH_VS8						EQU 0
 1069  0000000                   WITH_VS9						EQU 0
 1070  0000000                   WITH_VSA						EQU 0
 1071  0000000                   WITH_VSB						EQU 0
 1072  0000000                   WITH_VSC						EQU 0





 1073  0000000                   WITH_VSD						EQU 0
 1074  0000000                   WITH_VSE						EQU 0
 1075  0000000                   WITH_VSF						EQU 0
 1076  0000000                   
 1077  0000000                   WITH_MD4						EQU 0
 1078  0000000                   WITH_HNM4						EQU 0
 1079  0000000                   WITH_NM4						EQU 0
 1080  0000000                   WITH_NM4S						EQU 0
 1081  0000000                   WITH_MDM						EQU 0
 1082  0000000                   WITH_APM						EQU 0
 1083  0000000                   WITH_LP8						EQU 0
 1084  0000000                   WITH_VC4						EQU 0
 1085  0000000                   WITH_MDR						EQU 0
 1086  0000000                   
 1087  0000000                   WITH_E2A						EQU 0
 1088  0000000                   WITH_EMM						EQU 0
 1089  0000000                   WITH_MD6						EQU 0
 1090  0000000                   WITH_P10						EQU 0
 1091  0000000                   WITH_PC8						EQU 0
 1092  0000000                   
 1093  0000000                   WITH_SIL						EQU 1
 1094  0000000                   WITH_VMDPC8						EQU 0
 1095  0000000                   WITH_PCSPC8						EQU 0
 1096  0000000                   WITH_TONE						EQU 0
 1097  0000000                   WITH_HQPC8						EQU 0
 1098  0000000                   
 1099  0000000                   WITH_HQ567						EQU 0
 1100  0000000                   WITH_VMD567						EQU 0
 1101  0000000                   WITH_HQ567_HW						EQU 0
 1102  0000000                   WITH_HQ569_HW						EQU 0
 1103  0000000                   WITH_YAD						EQU 0
 1104  0000000                   WITH_P16						EQU 0
 1105  0000000                   WITH_VC8						EQU 0
 1106  0000000                   WITH_PC8VMDPCS						EQU 0
 1107  0000000                   WITH_LP8VMDPCS						EQU 0
 1108  0000000                   WITH_P16VMDPCS						EQU 0
 1109  0000000                   ;--------------------------------------------------------------------------
 1110  0000000                   ; Options
 1111  0000000                   ;--------------------------------------------------------------------------
 1112  0000000                   WITH_POLYPHONY					EQU 0
 1113  0000000                   WITH_MIDI_CHANNEL				EQU 0
 1114  0000000                   WITH_VOL_ADJ_MS					EQU 0
 1115  0000000                   
 1116  0000000                   WITH_PAUSE_RESUME				EQU 1
 1117  0000000                   WITH_CHANNEL_PRESSURE				EQU 0
 1118  0000000                   WITH_NOTE_OFFSET				EQU 0
 1119  0000000                   WITH_CHANGE_TEMPO				EQU 0
 1120  0000000                   WITH_ONEKEYONENOTE  				EQU 1
 1121  0000000                   WITH_VELOCITY					EQU 0
 1122  0000000                   WITH_MS_EXT_MIDI				EQU 0
 1123  0000000                   WITH_SYNC_CH1_MS				EQU 0
 1124  0000000                   ; Disable this feature will save 5 bytes RAM.
 1125  0000000                   WITH_GLOBAL_CHANNEL_VOLM 			EQU 0
 1126  0000000                   WITH_GLOBAL_CHANNEL_INS   			EQU 0
 1127  0000000                   
 1128  0000000                   WITH_PITCH_BEND					EQU 0
 1129  0000000                   WITH_VIBRATO                                 	EQU 0





 1130  0000000                   WITH_MODULATION_DEPTH                         	EQU 0
 1131  0000000                   WITH_CHANNEL_SUSTAIN				EQU 0
 1132  0000000                   WITH_SP_MIDI					EQU 0
 1133  0000000                   WITH_PERCUSSION					EQU 0
 1134  0000000                   WITH_DYNAMIC_CH					EQU 0
 1135  0000000                   WITH_MS_ENABLE_CHANNEL				EQU 0
 1136  0000000                   ; Disable this feature will save 2 bytes RAM.
 1137  0000000                   
 1138  0000000                   WITH_SP							EQU 1
 1139  0000000                   ; Disable speech channels to save code size.
 1140  0000000                   WITH_MS							EQU 0
 1141  0000000                   ; Disable melody channels to save RAM and code size.
 1142  0000000                   WITH_EVO						EQU 0
 1143  0000000                   ; Disable EVO channels to save RAM and code size.
 1144  0000000                   
 1145  0000000                   ;------for speaker output type-----------------------------------------
 1146  0000000                   WITH_SPEAKER_OUTPUT_TYPE 			EQU 	1
 1147  0000000                   WITH_SPEAKER_SWITCH      			EQU     0  
 1148  0000000                   
 1149  0000000                   WITH_SIM_SP                                     EQU     0 
 1150  0000000                   WITH_SIM_TYPE					EQU	1
 1151  0000000                   ;0:W55F
 1152  0000000                   ;1:SPI
 1153  0000000                   WITH_EXT32MBIT					EQU	0
 1154  0000000                   WITH_EXT64M_SPI					EQU 	0
 1155  0000000                   
 1156  0000000                   WITH_SP_NUM                                     EQU     1
 1157  0000000                   WITH_ONE_HQ					EQU	0
 1158  0000000                   WITH_PLAYE					EQU 	1
 1159  0000000                   
 1160  0000000                   
 1161  0000000                   
 1162  0000000                   ; Following Options speci-fy what format can be played in each individual channel.
 1163  0000000                   ; Properly disable some formats for channels can save RAM and code size.
 1164  0000000                   WITH_VS0A_SIL					EQU 1
 1165  0000000                   WITH_VS0B_SIL					EQU 0
 1166  0000000                   WITH_VS1A_SIL					EQU 0
 1167  0000000                   WITH_VS1B_SIL					EQU 0
 1168  0000000                   WITH_VS2A_SIL					EQU 0
 1169  0000000                   WITH_VS2B_SIL					EQU 0
 1170  0000000                   
 1171  0000000                   WITH_VS0A_MD4					EQU 0
 1172  0000000                   WITH_VS0B_MD4					EQU 0
 1173  0000000                   WITH_VS1A_MD4					EQU 0
 1174  0000000                   WITH_VS1B_MD4					EQU 0
 1175  0000000                   WITH_VS2A_MD4					EQU 0
 1176  0000000                   WITH_VS2B_MD4					EQU 0
 1177  0000000                   
 1178  0000000                   WITH_VS0A_HNM4					EQU 0
 1179  0000000                   WITH_VS0B_HNM4					EQU 0
 1180  0000000                   WITH_VS1A_HNM4					EQU 0
 1181  0000000                   WITH_VS1B_HNM4					EQU 0
 1182  0000000                   WITH_VS2A_HNM4					EQU 0
 1183  0000000                   WITH_VS2B_HNM4					EQU 0
 1184  0000000                   
 1185  0000000                   WITH_VS0A_NM4					EQU 0
 1186  0000000                   WITH_VS0B_NM4					EQU 0





 1187  0000000                   WITH_VS1A_NM4					EQU 0
 1188  0000000                   WITH_VS1B_NM4					EQU 0
 1189  0000000                   WITH_VS2A_NM4					EQU 0
 1190  0000000                   WITH_VS2B_NM4					EQU 0
 1191  0000000                   
 1192  0000000                   WITH_VS0A_NM4S					EQU 0
 1193  0000000                   WITH_VS0B_NM4S					EQU 0
 1194  0000000                   WITH_VS1A_NM4S					EQU 0
 1195  0000000                   WITH_VS1B_NM4S					EQU 0
 1196  0000000                   WITH_VS2A_NM4S					EQU 0
 1197  0000000                   WITH_VS2B_NM4S					EQU 0
 1198  0000000                   
 1199  0000000                   WITH_VS0A_MDM					EQU 0
 1200  0000000                   WITH_VS0B_MDM					EQU 0
 1201  0000000                   WITH_VS1A_MDM					EQU 0
 1202  0000000                   WITH_VS1B_MDM					EQU 0
 1203  0000000                   WITH_VS2A_MDM					EQU 0
 1204  0000000                   WITH_VS2B_MDM					EQU 0
 1205  0000000                   
 1206  0000000                   WITH_VS0A_APM					EQU 0
 1207  0000000                   WITH_VS0B_APM					EQU 0
 1208  0000000                   WITH_VS1A_APM					EQU 0
 1209  0000000                   WITH_VS1B_APM					EQU 0
 1210  0000000                   WITH_VS2A_APM					EQU 0
 1211  0000000                   WITH_VS2B_APM					EQU 0
 1212  0000000                   
 1213  0000000                   WITH_VS0A_LP8					EQU 0
 1214  0000000                   WITH_VS0B_LP8					EQU 0
 1215  0000000                   WITH_VS1A_LP8					EQU 0
 1216  0000000                   WITH_VS1B_LP8					EQU 0
 1217  0000000                   WITH_VS2A_LP8					EQU 0
 1218  0000000                   WITH_VS2B_LP8					EQU 0
 1219  0000000                   
 1220  0000000                   WITH_VS0A_VC4					EQU 0
 1221  0000000                   WITH_VS0B_VC4					EQU 0
 1222  0000000                   WITH_VS1A_VC4					EQU 0
 1223  0000000                   WITH_VS1B_VC4					EQU 0
 1224  0000000                   WITH_VS2A_VC4					EQU 0
 1225  0000000                   WITH_VS2B_VC4					EQU 0
 1226  0000000                   
 1227  0000000                   WITH_VS0A_MDR					EQU 0
 1228  0000000                   WITH_VS0B_MDR					EQU 0
 1229  0000000                   WITH_VS1A_MDR					EQU 0
 1230  0000000                   WITH_VS1B_MDR					EQU 0
 1231  0000000                   WITH_VS2A_MDR					EQU 0
 1232  0000000                   WITH_VS2B_MDR					EQU 0
 1233  0000000                   
 1234  0000000                   WITH_VS0A_E2A					EQU 0
 1235  0000000                   WITH_VS0B_E2A					EQU 0
 1236  0000000                   WITH_VS1A_E2A					EQU 0
 1237  0000000                   WITH_VS1B_E2A					EQU 0
 1238  0000000                   WITH_VS2A_E2A					EQU 0
 1239  0000000                   WITH_VS2B_E2A					EQU 0
 1240  0000000                   
 1241  0000000                   WITH_VS0A_EMM					EQU 0
 1242  0000000                   WITH_VS0B_EMM					EQU 0
 1243  0000000                   WITH_VS1A_EMM					EQU 0





 1244  0000000                   WITH_VS1B_EMM					EQU 0
 1245  0000000                   WITH_VS2A_EMM					EQU 0
 1246  0000000                   WITH_VS2B_EMM					EQU 0
 1247  0000000                   
 1248  0000000                   WITH_VS0A_MD6					EQU 0
 1249  0000000                   WITH_VS0B_MD6					EQU 0
 1250  0000000                   WITH_VS1A_MD6					EQU 0
 1251  0000000                   WITH_VS1B_MD6					EQU 0
 1252  0000000                   WITH_VS2A_MD6					EQU 0
 1253  0000000                   WITH_VS2B_MD6					EQU 0
 1254  0000000                   
 1255  0000000                   WITH_VS0A_P10					EQU 0
 1256  0000000                   WITH_VS0B_P10					EQU 0
 1257  0000000                   WITH_VS1A_P10					EQU 0
 1258  0000000                   WITH_VS1B_P10					EQU 0
 1259  0000000                   WITH_VS2A_P10					EQU 0
 1260  0000000                   WITH_VS2B_P10					EQU 0
 1261  0000000                   
 1262  0000000                   WITH_VS0A_PC8					EQU 0
 1263  0000000                   WITH_VS0B_PC8					EQU 0
 1264  0000000                   WITH_VS1A_PC8					EQU 0
 1265  0000000                   WITH_VS1B_PC8					EQU 0
 1266  0000000                   WITH_VS2A_PC8					EQU 0
 1267  0000000                   WITH_VS2B_PC8					EQU 0
 1268  0000000                   
 1269  0000000                   ; PC8 type VMD, disable to save code size.
 1270  0000000                   WITH_VS0A_VMDPC8				EQU 0
 1271  0000000                   WITH_VS0B_VMDPC8				EQU 0
 1272  0000000                   WITH_VS1A_VMDPC8				EQU 0
 1273  0000000                   WITH_VS1B_VMDPC8				EQU 0
 1274  0000000                   WITH_VS2A_VMDPC8				EQU 0
 1275  0000000                   WITH_VS2B_VMDPC8				EQU 0
 1276  0000000                   
 1277  0000000                   ; PC8 type PCS, disable to save code size.
 1278  0000000                   WITH_VS0A_PCSPC8				EQU 0
 1279  0000000                   WITH_VS0B_PCSPC8				EQU 0
 1280  0000000                   WITH_VS1A_PCSPC8				EQU 0
 1281  0000000                   WITH_VS1B_PCSPC8				EQU 0
 1282  0000000                   WITH_VS2A_PCSPC8				EQU 0
 1283  0000000                   WITH_VS2B_PCSPC8				EQU 0
 1284  0000000                   
 1285  0000000                   ; I-f there is HQ melody, disable TONE save nothing.
 1286  0000000                   WITH_VS0A_TONE					EQU 0
 1287  0000000                   WITH_VS0B_TONE					EQU 0
 1288  0000000                   WITH_VS1A_TONE					EQU 0
 1289  0000000                   WITH_VS1B_TONE					EQU 0
 1290  0000000                   WITH_VS2A_TONE					EQU 0
 1291  0000000                   WITH_VS2B_TONE					EQU 0
 1292  0000000                   
 1293  0000000                   ; W566/W588(PC8) type HQ, disable to save code size.
 1294  0000000                   WITH_VS0A_HQPC8					EQU 0
 1295  0000000                   WITH_VS0B_HQPC8					EQU 0
 1296  0000000                   WITH_VS1A_HQPC8					EQU 0
 1297  0000000                   WITH_VS1B_HQPC8					EQU 0
 1298  0000000                   WITH_VS2A_HQPC8					EQU 0
 1299  0000000                   WITH_VS2B_HQPC8					EQU 0
 1300  0000000                   





 1301  0000000                   WITH_CH0_EVO					EQU 0
 1302  0000000                   WITH_CH1_EVO					EQU 0
 1303  0000000                   WITH_CH2_EVO					EQU 0
 1304  0000000                   
 1305  0000000                   
 1306  0000000                   WITH_FILTER					EQU 0
 1307  0000000                   WITH_NOISE_SHAPING				EQU 0
 1308  0000000                   ;NoiseShapingEnableCondition
 1309  0000000                   ;0 - not support noise shaping
 1310  0000000                   ;1 - support noise shaping
 1311  0000000                   ;2 - only PWM support shaping
 1312  0000000                   
 1313  0000000                   WITH_DAC_ENABLE					EQU 0
 1314  0000000                   WITH_SP0XL_RESOLUTION				EQU 1
 1315  0000000                   ; 1 - 16 bit
 1316  0000000                   ; 2 - 14 bit
 1317  0000000                   ; 3 - 12 bit
 1318  0000000                   WITH_SPEN_EFFECTIVE_BITS       			EQU 7
 1319  0000000                   ;X X X X PWM_NS DAC_MA PWM DAC  
 1320  0000000                   WITH_RDPC_VALUE         			EQU 0
 1321  0000000                   
 1322  0000000                   WITH_MS_CODA					EQU 0
 1323  0000000                   WITH_SP_MIDI_SIMUL 				EQU 1	
 1324  0000000                   ;SpeechMidiSimultaneously
 1325  0000000                   WITH_SP_SKIP                       		EQU 1
 1326  0000000                   WITH_SP_GLOBAL_SR                       	EQU 1
 1327  0000000                   
 1328  0000000                   WITH_RAM_OVER_STACK				EQU 	0
 1329  0000000                   WITH_STACK_SIZE					EQU	32
 1330  0000000                   WITH_HWENGINE_SHARED_RAM_SIZE			EQU	58
 1331  0000000                   
 1332  0000000                   TONE_2KHZ_TMC	EQU 7
 1333  0000000                   TONE_2KHZ_TMV 	EQU 159
 1334  0000000                   
 1335  0000000                   WITH_COLOR_FLY_CURVENUMS	EQU 0
 1336  0000000                   
 1337  0000000                   WITH_SPI_GPIO                                   EQU     0
 1338  0000000                   WITH_SPI_SPIO                                   EQU     0
 1339  0000000                   ;SPIOEnable
 1340  0000000                   
 1341  0000000                   SPI_COMMAND_ENABLE    	EQU	0
 1342  0000000                   SPI_CLOCK_RATE        	EQU	0
 1343  0000000                   I2C_COMMAND_ENABLE	EQU	0
 1344  0000000                   
 1345  0000000                   WITH_ISP_READ_WRITE	EQU	1
 1346  0000000                   WITH_ISP_UPDATE		EQU 	1
 1347  0000000                   WITH_PROTECTION_PAGE_UPDATE	EQU 0
 1348  0000000                   WITH_BOOT_LOADER	EQU 	0
 1349  0000000                   
 1350  0000000                   BLOCK_NUM                       EQU         128
 1351  0000000                   
 1352  0000000                   PROTECTION_PAGE_WORKING_MODE    EQU        1
 1353  0000000                   
 1354  0000000                   
 1355  0000000                   WITH_PSF_PROJECT	EQU	0
 1356  0000000                   WITH_PLAY_INDEX     EQU 0
 1357  0000000                   





 1358  0000000                   ; IO EXPANDER SETTING
 1359  0000000                   N55P_DEVICE_NUM		EQU       0          
 1360  0000000                   ;N55PDeviceNum:0/1/2
 1361  0000000                   N55P_DEVICE_UIO_USED	EQU       00H
 1362  0000000                   N55P_DEVICE0_CNSTA    EQU       00H          
 1363  0000000                   N55P_DEVICE0_CNSTB    EQU       00H          
 1364  0000000                   N55P_DEVICE0_CNSTC    EQU       00H          
 1365  0000000                   N55P_DEVICE0_PCKAB    EQU       00H     
 1366  0000000                   N55P_DEVICE0_PCKCD    EQU       00H         
 1367  0000000                   
 1368  0000000                   N55P_DEVICE1_CNSTA    EQU       00H          
 1369  0000000                   N55P_DEVICE1_CNSTB    EQU       00H          
 1370  0000000                   N55P_DEVICE1_CNSTC    EQU       00H          
 1371  0000000                   N55P_DEVICE1_PCKAB    EQU       00H     
 1372  0000000                   N55P_DEVICE1_PCKCD    EQU       00H     
 1373  0000000                   
 1374  0000000                   AVAILABLE_DPD_RAM     EQU       20H
 1375  0000000                   
 1376  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1377  0000000                   ; Cap-Sensor Library
 1378  0000000                   ; 
 1379  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1380  0000000                   WITH_FW_CAP_SENSOR_KEYS         EQU 0
 1381  0000000                   
 1382  0000000                   WITH_TOUCH_WAKEUP_EN            EQU 0
 1383  0000000                   
 1384  0000000                   TOUCH_WAKEUP_EN                 EQU 0
 1385  0000000                   
 1386  0000000                   WITH_TOUCH_WAKEUP_KEYNUMS       EQU 0
 1387  0000000                   
 1388  0000000                   CAP_SENSOR_CURRENT_SOURCE       EQU 00H
 1389  0000000                   
 1390  0000000                   CAP_SENSOR_SLEEP_TIME           EQU 00H
 1391  0000000                   
 1392  0000000                   CAP_SENSOR_TMG_DIV              EQU 00H
 1393  0000000                   
 1394  0000000                   CAP_GET_INIT_AVG                EQU 0
 1395  0000000                   
 1396  0000000                   CAP_AVG_WITH_CHECK_BUSY         EQU 0
 1397  0000000                   
 1398  0000000                   
 1399  0000000                   WITH_FW_SEN_OPTION_PIN           EQU         0
 1400  0000000                   CAP_Sensitivity_Sel_Num           EQU         0
 1401  0000000                   WITH_CAPSENSOR_MULTISENTABLE     EQU         1
 1402  0000000                   
 1403  0000000                   CAP_SENSOR_DEBOUNCE             EQU          00H
 1404  0000000                   
 1405  0000000                   CAP_SENSOR_TBL0_KEY0_TH              EQU 100
 1406  0000000                   CAP_SENSOR_TBL0_KEY1_TH              EQU 100
 1407  0000000                   CAP_SENSOR_TBL0_KEY2_TH              EQU 100
 1408  0000000                   CAP_SENSOR_TBL0_KEY3_TH              EQU 100
 1409  0000000                   CAP_SENSOR_TBL0_KEY4_TH              EQU 100
 1410  0000000                   CAP_SENSOR_TBL0_KEY5_TH              EQU 100
 1411  0000000                   CAP_SENSOR_TBL0_KEY6_TH              EQU 100
 1412  0000000                   CAP_SENSOR_TBL0_KEY7_TH              EQU 100
 1413  0000000                   CAP_SENSOR_TBL0_KEY8_TH              EQU 100
 1414  0000000                   CAP_SENSOR_TBL0_KEY9_TH              EQU 100





 1415  0000000                   CAP_SENSOR_TBL0_KEY10_TH             EQU 100
 1416  0000000                   CAP_SENSOR_TBL0_KEY11_TH             EQU 100
 1417  0000000                   CAP_SENSOR_TBL0_KEY12_TH             EQU 100
 1418  0000000                   CAP_SENSOR_TBL0_KEY13_TH             EQU 100
 1419  0000000                   CAP_SENSOR_TBL0_KEY14_TH             EQU 100
 1420  0000000                   CAP_SENSOR_TBL0_KEY15_TH             EQU 100
 1421  0000000                   CAP_SENSOR_TBL0_KEY16_TH             EQU 100
 1422  0000000                   CAP_SENSOR_TBL0_KEY17_TH             EQU 100
 1423  0000000                   CAP_SENSOR_TBL0_KEY18_TH             EQU 100
 1424  0000000                   CAP_SENSOR_TBL0_KEY19_TH             EQU 100
 1425  0000000                   CAP_SENSOR_TBL0_KEY20_TH             EQU 100
 1426  0000000                   CAP_SENSOR_TBL0_KEY21_TH             EQU 100
 1427  0000000                   CAP_SENSOR_TBL0_KEY22_TH             EQU 100
 1428  0000000                   CAP_SENSOR_TBL0_KEY23_TH             EQU 100
 1429  0000000                   
 1430  0000000                   CAP_SENSOR_TBL0_KEY0_TH_UNTOUCHED              EQU 50
 1431  0000000                   CAP_SENSOR_TBL0_KEY1_TH_UNTOUCHED              EQU 50
 1432  0000000                   CAP_SENSOR_TBL0_KEY2_TH_UNTOUCHED              EQU 50
 1433  0000000                   CAP_SENSOR_TBL0_KEY3_TH_UNTOUCHED              EQU 50
 1434  0000000                   CAP_SENSOR_TBL0_KEY4_TH_UNTOUCHED              EQU 50
 1435  0000000                   CAP_SENSOR_TBL0_KEY5_TH_UNTOUCHED              EQU 50
 1436  0000000                   CAP_SENSOR_TBL0_KEY6_TH_UNTOUCHED              EQU 50
 1437  0000000                   CAP_SENSOR_TBL0_KEY7_TH_UNTOUCHED              EQU 50
 1438  0000000                   CAP_SENSOR_TBL0_KEY8_TH_UNTOUCHED              EQU 50
 1439  0000000                   CAP_SENSOR_TBL0_KEY9_TH_UNTOUCHED              EQU 50
 1440  0000000                   CAP_SENSOR_TBL0_KEY10_TH_UNTOUCHED             EQU 50
 1441  0000000                   CAP_SENSOR_TBL0_KEY11_TH_UNTOUCHED             EQU 50
 1442  0000000                   CAP_SENSOR_TBL0_KEY12_TH_UNTOUCHED             EQU 50
 1443  0000000                   CAP_SENSOR_TBL0_KEY13_TH_UNTOUCHED             EQU 50
 1444  0000000                   CAP_SENSOR_TBL0_KEY14_TH_UNTOUCHED             EQU 50
 1445  0000000                   CAP_SENSOR_TBL0_KEY15_TH_UNTOUCHED             EQU 50
 1446  0000000                   CAP_SENSOR_TBL0_KEY16_TH_UNTOUCHED             EQU 50
 1447  0000000                   CAP_SENSOR_TBL0_KEY17_TH_UNTOUCHED             EQU 50
 1448  0000000                   CAP_SENSOR_TBL0_KEY18_TH_UNTOUCHED             EQU 50
 1449  0000000                   CAP_SENSOR_TBL0_KEY19_TH_UNTOUCHED             EQU 50
 1450  0000000                   CAP_SENSOR_TBL0_KEY20_TH_UNTOUCHED             EQU 50
 1451  0000000                   CAP_SENSOR_TBL0_KEY21_TH_UNTOUCHED             EQU 50
 1452  0000000                   CAP_SENSOR_TBL0_KEY22_TH_UNTOUCHED             EQU 50
 1453  0000000                   CAP_SENSOR_TBL0_KEY23_TH_UNTOUCHED             EQU 50
 1454  0000000                   
 1455  0000000                   CAP_SENSOR_TBL0_KEY0_TH_NOISEFILTER              EQU 12
 1456  0000000                   CAP_SENSOR_TBL0_KEY1_TH_NOISEFILTER              EQU 12
 1457  0000000                   CAP_SENSOR_TBL0_KEY2_TH_NOISEFILTER              EQU 12
 1458  0000000                   CAP_SENSOR_TBL0_KEY3_TH_NOISEFILTER              EQU 12
 1459  0000000                   CAP_SENSOR_TBL0_KEY4_TH_NOISEFILTER              EQU 12
 1460  0000000                   CAP_SENSOR_TBL0_KEY5_TH_NOISEFILTER              EQU 12
 1461  0000000                   CAP_SENSOR_TBL0_KEY6_TH_NOISEFILTER              EQU 12
 1462  0000000                   CAP_SENSOR_TBL0_KEY7_TH_NOISEFILTER              EQU 12
 1463  0000000                   CAP_SENSOR_TBL0_KEY8_TH_NOISEFILTER              EQU 12
 1464  0000000                   CAP_SENSOR_TBL0_KEY9_TH_NOISEFILTER              EQU 12
 1465  0000000                   CAP_SENSOR_TBL0_KEY10_TH_NOISEFILTER             EQU 12
 1466  0000000                   CAP_SENSOR_TBL0_KEY11_TH_NOISEFILTER             EQU 12
 1467  0000000                   CAP_SENSOR_TBL0_KEY12_TH_NOISEFILTER             EQU 12
 1468  0000000                   CAP_SENSOR_TBL0_KEY13_TH_NOISEFILTER             EQU 12
 1469  0000000                   CAP_SENSOR_TBL0_KEY14_TH_NOISEFILTER             EQU 12
 1470  0000000                   CAP_SENSOR_TBL0_KEY15_TH_NOISEFILTER             EQU 12
 1471  0000000                   CAP_SENSOR_TBL0_KEY16_TH_NOISEFILTER             EQU 12





 1472  0000000                   CAP_SENSOR_TBL0_KEY17_TH_NOISEFILTER             EQU 12
 1473  0000000                   CAP_SENSOR_TBL0_KEY18_TH_NOISEFILTER             EQU 12
 1474  0000000                   CAP_SENSOR_TBL0_KEY19_TH_NOISEFILTER             EQU 12
 1475  0000000                   CAP_SENSOR_TBL0_KEY20_TH_NOISEFILTER             EQU 12
 1476  0000000                   CAP_SENSOR_TBL0_KEY21_TH_NOISEFILTER             EQU 12
 1477  0000000                   CAP_SENSOR_TBL0_KEY22_TH_NOISEFILTER             EQU 12
 1478  0000000                   CAP_SENSOR_TBL0_KEY23_TH_NOISEFILTER             EQU 12
 1479  0000000                   
 1480  0000000                   
 1481  0000000                   AVG_ADJ_CNT_NUM               EQU 0
 1482  0000000                   
 1483  0000000                   
 1484  0000000                   CAP_SENSOR_SEL_PIN0     EQU 0
 1485  0000000                   CAP_SENSOR_SEL_PIN1     EQU 0
 1486  0000000                   CAP_SENSOR_SEL_PIN2     EQU 0
 1487  0000000                   CAP_SENSOR_SEL_PIN3     EQU 0
 1488  0000000                   
 1489  0000000                   
 1490  0000000                   CAP_RTP_DISABLE         EQU 1
 1491  0000000                   CAP_CHARGE_MODE         EQU 1
 1492  0000000                   CAP_SKIP_FIRST_SUM      EQU 1
 1493  0000000                   
 1494  0000000                   ;;;; Selection Pin for sleep time table
 1495  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1496  0000000                   CAP_SleepTime_Sel_Num       EQU 0
 1497  0000000                   WITH_SLEEP_SEL_PIN_NUM      EQU 0
 1498  0000000                   
 1499  0000000                   CAP_SENSOR_ST_SEL_PIN0     EQU 0
 1500  0000000                   CAP_SENSOR_ST_SEL_PIN1     EQU 0
 1501  0000000                   CAP_SENSOR_ST_SEL_PIN2     EQU 0
 1502  0000000                   CAP_SENSOR_ST_SEL_PIN3     EQU 0
 1503  0000000                   
 1504  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX0              EQU 79
 1505  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX1              EQU 0
 1506  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX2              EQU 0
 1507  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX3              EQU 0
 1508  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX4              EQU 0
 1509  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX5              EQU 0
 1510  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX6              EQU 0
 1511  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX7              EQU 0
 1512  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX8              EQU 0
 1513  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX9              EQU 0
 1514  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX10             EQU 0
 1515  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX11             EQU 0
 1516  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX12             EQU 0
 1517  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX13             EQU 0
 1518  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX14             EQU 0
 1519  0000000                   CAP_SENSOR_SLEEP_TIME_INDEX15             EQU 0
 1520  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1521  0000000                   
 1522  0000000                   CAP_SCAN_NUBER          EQU 16
 1523  0000000                   ;;;; Cap Sensor
 1524  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1525  0000000                   CAP_SENSOR_KEY0_BP              EQU 0
 1526  0000000                   CAP_SENSOR_KEY1_BP              EQU 0
 1527  0000000                   CAP_SENSOR_KEY2_BP              EQU 0
 1528  0000000                   CAP_SENSOR_KEY3_BP              EQU 0





 1529  0000000                   CAP_SENSOR_KEY4_BP              EQU 0
 1530  0000000                   CAP_SENSOR_KEY5_BP              EQU 0
 1531  0000000                   CAP_SENSOR_KEY6_BP              EQU 0
 1532  0000000                   CAP_SENSOR_KEY7_BP              EQU 0
 1533  0000000                   CAP_SENSOR_KEY8_BP              EQU 0
 1534  0000000                   CAP_SENSOR_KEY9_BP              EQU 0
 1535  0000000                   CAP_SENSOR_KEY10_BP             EQU 0
 1536  0000000                   CAP_SENSOR_KEY11_BP             EQU 0
 1537  0000000                   CAP_SENSOR_KEY12_BP             EQU 0
 1538  0000000                   CAP_SENSOR_KEY13_BP             EQU 0
 1539  0000000                   CAP_SENSOR_KEY14_BP             EQU 0
 1540  0000000                   CAP_SENSOR_KEY15_BP             EQU 0
 1541  0000000                   CAP_SENSOR_KEY16_BP             EQU 0
 1542  0000000                   CAP_SENSOR_KEY17_BP             EQU 0
 1543  0000000                   CAP_SENSOR_KEY18_BP             EQU 0
 1544  0000000                   CAP_SENSOR_KEY19_BP             EQU 0
 1545  0000000                   CAP_SENSOR_KEY20_BP             EQU 0
 1546  0000000                   CAP_SENSOR_KEY21_BP             EQU 0
 1547  0000000                   CAP_SENSOR_KEY22_BP             EQU 0
 1548  0000000                   CAP_SENSOR_KEY23_BP             EQU 0
 1549  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1550  0000000                   
 1551  0000000                   
 1552  0000000                   ;;;; UART
 1553  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1554  0000000                   WITH_UART_TX                     EQU         0
 1555  0000000                   WITH_UART_RX                     EQU         0
 1556  0000000                   WITH_UART_SWITCH                 EQU         0
 1557  0000000                   UART_BAUDRATE_DIVIDER            EQU         354
 1558  0000000                   TDLY_VALUE                       EQU         0
 1559  0000000                   PARITY_BIT                       EQU         0
 1560  0000000                   UART_TXDLY_CNT                   EQU         3
 1561  0000000                   
 1562  0000000                   
 1563  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1564  0000000                   
 1565  0000000                   ;;;; Address LED
 1566  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1567  0000000                   WITH_SLD_ENABLE			EQU		00H
 1568  0000000                   WITH_SLD_SWITCH 		EQU		00H
 1569  0000000                   SLD_CTL_TYPE			EQU		00H
 1570  0000000                   SLD_ORDER_BIT			EQU		01H
 1571  0000000                   SLD_ONE_WIRE_HIDA0		EQU		06H
 1572  0000000                   SLD_ONE_WIRE_HIDA1		EQU		0CH
 1573  0000000                   SLD_ONE_WIRE_LODA0		EQU		12H
 1574  0000000                   SLD_ONE_WIRE_LODA1		EQU		0CH
 1575  0000000                   SLD_TWO_WIRE_CLK_RATE	EQU		00H         
 1576  0000000                   
 1577  0000000                   ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 1578  0000000                   
 1579  0000000                   	INCLUDE	"D:\SOURCECODE\_AVERY_M031\M031BSP_NSP_TWOWIRESAMPLE\NSP_PROJECT\RINGRING_NSP480A\CPUIF\RAMVAR.INI.APP"
 1580  0000000                   ;  1WITH_SPI_SWITCH
 1581  0000000                   ;  0WITH_CHIP_SERIES
 1582  0000000                   ;  1WITH_VOL_ADJ
 1583  0000000                   ;  0WITH_MULTI_CHANNEL
 1584  0000000                   ;  0WITH_VOL_REDUCE
 1585  0000000                   ;  0WITH_16BIT_MODE





 1586  0000000                   ;  1WITH_32K_BANK
 1587  0000000                   ;  0WITH_T_BUFFER
 1588  0000000                   ;  0WITH_READ_DATA_TYPE
 1589  0000000                   ;  0WITH_PCM_OUTPUT_TYPE
 1590  0000000                   ;  2WITH_PCM_OUTPUT_SIZE
 1591  0000000                   ;  0WITH_CMD
 1592  0000000                   ;  0WITH_FW_MIXER
 1593  0000000                   ;  2WITH_COMPRESSED_MIDI
 1594  0000000                   ;  0WITH_MULTIPLIER
 1595  0000000                   ;  1WITH_HEAD_TAIL_PROCESS
 1596  0000000                   ;  0WITH_ALL_MIXER_SFR
 1597  0000000                   ;  1WITH_ISR_VS0A
 1598  0000000                   ;  0WITH_ISR_VS0B
 1599  0000000                   ;  0WITH_ISR_VS1A
 1600  0000000                   ;  0WITH_ISR_VS1B
 1601  0000000                   ;  0WITH_ISR_VS2A
 1602  0000000                   ;  0WITH_ISR_VS2B
 1603  0000000                   ;  1WITH_VS0A
 1604  0000000                   ;  0WITH_VS0B
 1605  0000000                   ;  0WITH_VS1A
 1606  0000000                   ;  0WITH_VS1B
 1607  0000000                   ;  0WITH_VS2A
 1608  0000000                   ;  0WITH_VS2B
 1609  0000000                   ;  0WITH_VS0C
 1610  0000000                   ;  0WITH_VS0D
 1611  0000000                   ;  0WITH_VS3
 1612  0000000                   ;  0WITH_VS4
 1613  0000000                   ;  0WITH_VS5
 1614  0000000                   ;  0WITH_VS6
 1615  0000000                   ;  0WITH_VS7
 1616  0000000                   ;  0WITH_VS8
 1617  0000000                   ;  0WITH_VS9
 1618  0000000                   ;  0WITH_VSA
 1619  0000000                   ;  0WITH_VSB
 1620  0000000                   ;  0WITH_VSC
 1621  0000000                   ;  0WITH_VSD
 1622  0000000                   ;  0WITH_VSE
 1623  0000000                   ;  0WITH_VSF
 1624  0000000                   ;  0WITH_MD4
 1625  0000000                   ;  0WITH_HNM4
 1626  0000000                   ;  0WITH_NM4
 1627  0000000                   ;  0WITH_NM4S
 1628  0000000                   ;  0WITH_MDM
 1629  0000000                   ;  0WITH_APM
 1630  0000000                   ;  0WITH_LP8
 1631  0000000                   ;  0WITH_VC4
 1632  0000000                   ;  0WITH_MDR
 1633  0000000                   ;  0WITH_E2A
 1634  0000000                   ;  0WITH_EMM
 1635  0000000                   ;  0WITH_MD6
 1636  0000000                   ;  0WITH_P10
 1637  0000000                   ;  0WITH_PC8
 1638  0000000                   ;  1WITH_SIL
 1639  0000000                   ;  0WITH_VMDPC8
 1640  0000000                   ;  0WITH_PCSPC8
 1641  0000000                   ;  0WITH_TONE
 1642  0000000                   ;  0WITH_HQPC8





 1643  0000000                   ;  0WITH_HQ567
 1644  0000000                   ;  0WITH_VMD567
 1645  0000000                   ;  0WITH_HQ567_HW
 1646  0000000                   ;  0WITH_HQ569_HW
 1647  0000000                   ;  0WITH_YAD
 1648  0000000                   ;  0WITH_P16
 1649  0000000                   ;  0WITH_VC8
 1650  0000000                   ;  0WITH_PC8VMDPCS
 1651  0000000                   ;  0WITH_LP8VMDPCS
 1652  0000000                   ;  0WITH_P16VMDPCS
 1653  0000000                   ;  0WITH_POLYPHONY
 1654  0000000                   ;  0WITH_MIDI_CHANNEL
 1655  0000000                   ;  0WITH_VOL_ADJ_MS
 1656  0000000                   ;  1WITH_PAUSE_RESUME
 1657  0000000                   ;  0WITH_CHANNEL_PRESSURE
 1658  0000000                   ;  0WITH_NOTE_OFFSET
 1659  0000000                   ;  0WITH_CHANGE_TEMPO
 1660  0000000                   ;  1WITH_ONEKEYONENOTE
 1661  0000000                   ;  0WITH_VELOCITY
 1662  0000000                   ;  0WITH_MS_EXT_MIDI
 1663  0000000                   ;  0WITH_SYNC_CH1_MS
 1664  0000000                   ;  0WITH_GLOBAL_CHANNEL_VOLM
 1665  0000000                   ;  0WITH_GLOBAL_CHANNEL_INS
 1666  0000000                   ;  0WITH_PITCH_BEND
 1667  0000000                   ;  0WITH_VIBRATO
 1668  0000000                   ;  0WITH_MODULATION_DEPTH
 1669  0000000                   ;  0WITH_CHANNEL_SUSTAIN
 1670  0000000                   ;  0WITH_SP_MIDI
 1671  0000000                   ;  0WITH_PERCUSSION
 1672  0000000                   ;  0WITH_DYNAMIC_CH
 1673  0000000                   ;  0WITH_MS_ENABLE_CHANNEL
 1674  0000000                   ;  1WITH_SP
 1675  0000000                   ;  0WITH_MS
 1676  0000000                   ;  0WITH_EVO
 1677  0000000                   ;  1WITH_SPEAKER_OUTPUT_TYPE
 1678  0000000                   ;  0WITH_SPEAKER_SWITCH
 1679  0000000                   ;  0WITH_SIM_SP
 1680  0000000                   ;  1WITH_SIM_TYPE
 1681  0000000                   ;  0WITH_EXT32MBIT
 1682  0000000                   ;  0WITH_EXT64M_SPI
 1683  0000000                   ;  1WITH_SP_NUM
 1684  0000000                   ;  0WITH_ONE_HQ
 1685  0000000                   ;  1WITH_PLAYE
 1686  0000000                   ;  1WITH_VS0A_SIL
 1687  0000000                   ;  0WITH_VS0B_SIL
 1688  0000000                   ;  0WITH_VS1A_SIL
 1689  0000000                   ;  0WITH_VS1B_SIL
 1690  0000000                   ;  0WITH_VS2A_SIL
 1691  0000000                   ;  0WITH_VS2B_SIL
 1692  0000000                   ;  0WITH_VS0A_MD4
 1693  0000000                   ;  0WITH_VS0B_MD4
 1694  0000000                   ;  0WITH_VS1A_MD4
 1695  0000000                   ;  0WITH_VS1B_MD4
 1696  0000000                   ;  0WITH_VS2A_MD4
 1697  0000000                   ;  0WITH_VS2B_MD4
 1698  0000000                   ;  0WITH_VS0A_HNM4
 1699  0000000                   ;  0WITH_VS0B_HNM4





 1700  0000000                   ;  0WITH_VS1A_HNM4
 1701  0000000                   ;  0WITH_VS1B_HNM4
 1702  0000000                   ;  0WITH_VS2A_HNM4
 1703  0000000                   ;  0WITH_VS2B_HNM4
 1704  0000000                   ;  0WITH_VS0A_NM4
 1705  0000000                   ;  0WITH_VS0B_NM4
 1706  0000000                   ;  0WITH_VS1A_NM4
 1707  0000000                   ;  0WITH_VS1B_NM4
 1708  0000000                   ;  0WITH_VS2A_NM4
 1709  0000000                   ;  0WITH_VS2B_NM4
 1710  0000000                   ;  0WITH_VS0A_NM4S
 1711  0000000                   ;  0WITH_VS0B_NM4S
 1712  0000000                   ;  0WITH_VS1A_NM4S
 1713  0000000                   ;  0WITH_VS1B_NM4S
 1714  0000000                   ;  0WITH_VS2A_NM4S
 1715  0000000                   ;  0WITH_VS2B_NM4S
 1716  0000000                   ;  0WITH_VS0A_MDM
 1717  0000000                   ;  0WITH_VS0B_MDM
 1718  0000000                   ;  0WITH_VS1A_MDM
 1719  0000000                   ;  0WITH_VS1B_MDM
 1720  0000000                   ;  0WITH_VS2A_MDM
 1721  0000000                   ;  0WITH_VS2B_MDM
 1722  0000000                   ;  0WITH_VS0A_APM
 1723  0000000                   ;  0WITH_VS0B_APM
 1724  0000000                   ;  0WITH_VS1A_APM
 1725  0000000                   ;  0WITH_VS1B_APM
 1726  0000000                   ;  0WITH_VS2A_APM
 1727  0000000                   ;  0WITH_VS2B_APM
 1728  0000000                   ;  0WITH_VS0A_LP8
 1729  0000000                   ;  0WITH_VS0B_LP8
 1730  0000000                   ;  0WITH_VS1A_LP8
 1731  0000000                   ;  0WITH_VS1B_LP8
 1732  0000000                   ;  0WITH_VS2A_LP8
 1733  0000000                   ;  0WITH_VS2B_LP8
 1734  0000000                   ;  0WITH_VS0A_VC4
 1735  0000000                   ;  0WITH_VS0B_VC4
 1736  0000000                   ;  0WITH_VS1A_VC4
 1737  0000000                   ;  0WITH_VS1B_VC4
 1738  0000000                   ;  0WITH_VS2A_VC4
 1739  0000000                   ;  0WITH_VS2B_VC4
 1740  0000000                   ;  0WITH_VS0A_MDR
 1741  0000000                   ;  0WITH_VS0B_MDR
 1742  0000000                   ;  0WITH_VS1A_MDR
 1743  0000000                   ;  0WITH_VS1B_MDR
 1744  0000000                   ;  0WITH_VS2A_MDR
 1745  0000000                   ;  0WITH_VS2B_MDR
 1746  0000000                   ;  0WITH_VS0A_E2A
 1747  0000000                   ;  0WITH_VS0B_E2A
 1748  0000000                   ;  0WITH_VS1A_E2A
 1749  0000000                   ;  0WITH_VS1B_E2A
 1750  0000000                   ;  0WITH_VS2A_E2A
 1751  0000000                   ;  0WITH_VS2B_E2A
 1752  0000000                   ;  0WITH_VS0A_EMM
 1753  0000000                   ;  0WITH_VS0B_EMM
 1754  0000000                   ;  0WITH_VS1A_EMM
 1755  0000000                   ;  0WITH_VS1B_EMM
 1756  0000000                   ;  0WITH_VS2A_EMM





 1757  0000000                   ;  0WITH_VS2B_EMM
 1758  0000000                   ;  0WITH_VS0A_MD6
 1759  0000000                   ;  0WITH_VS0B_MD6
 1760  0000000                   ;  0WITH_VS1A_MD6
 1761  0000000                   ;  0WITH_VS1B_MD6
 1762  0000000                   ;  0WITH_VS2A_MD6
 1763  0000000                   ;  0WITH_VS2B_MD6
 1764  0000000                   ;  0WITH_VS0A_P10
 1765  0000000                   ;  0WITH_VS0B_P10
 1766  0000000                   ;  0WITH_VS1A_P10
 1767  0000000                   ;  0WITH_VS1B_P10
 1768  0000000                   ;  0WITH_VS2A_P10
 1769  0000000                   ;  0WITH_VS2B_P10
 1770  0000000                   ;  0WITH_VS0A_PC8
 1771  0000000                   ;  0WITH_VS0B_PC8
 1772  0000000                   ;  0WITH_VS1A_PC8
 1773  0000000                   ;  0WITH_VS1B_PC8
 1774  0000000                   ;  0WITH_VS2A_PC8
 1775  0000000                   ;  0WITH_VS2B_PC8
 1776  0000000                   ;  0WITH_VS0A_VMDPC8
 1777  0000000                   ;  0WITH_VS0B_VMDPC8
 1778  0000000                   ;  0WITH_VS1A_VMDPC8
 1779  0000000                   ;  0WITH_VS1B_VMDPC8
 1780  0000000                   ;  0WITH_VS2A_VMDPC8
 1781  0000000                   ;  0WITH_VS2B_VMDPC8
 1782  0000000                   ;  0WITH_VS0A_PCSPC8
 1783  0000000                   ;  0WITH_VS0B_PCSPC8
 1784  0000000                   ;  0WITH_VS1A_PCSPC8
 1785  0000000                   ;  0WITH_VS1B_PCSPC8
 1786  0000000                   ;  0WITH_VS2A_PCSPC8
 1787  0000000                   ;  0WITH_VS2B_PCSPC8
 1788  0000000                   ;  0WITH_VS0A_TONE
 1789  0000000                   ;  0WITH_VS0B_TONE
 1790  0000000                   ;  0WITH_VS1A_TONE
 1791  0000000                   ;  0WITH_VS1B_TONE
 1792  0000000                   ;  0WITH_VS2A_TONE
 1793  0000000                   ;  0WITH_VS2B_TONE
 1794  0000000                   ;  0WITH_VS0A_HQPC8
 1795  0000000                   ;  0WITH_VS0B_HQPC8
 1796  0000000                   ;  0WITH_VS1A_HQPC8
 1797  0000000                   ;  0WITH_VS1B_HQPC8
 1798  0000000                   ;  0WITH_VS2A_HQPC8
 1799  0000000                   ;  0WITH_VS2B_HQPC8
 1800  0000000                   ;  0WITH_CH0_EVO
 1801  0000000                   ;  0WITH_CH1_EVO
 1802  0000000                   ;  0WITH_CH2_EVO
 1803  0000000                   ;  0WITH_FILTER
 1804  0000000                   ;  0WITH_NOISE_SHAPING
 1805  0000000                   ;  0WITH_DAC_ENABLE
 1806  0000000                   ;  1WITH_SP0XL_RESOLUTION
 1807  0000000                   ;  7WITH_SPEN_EFFECTIVE_BITS
 1808  0000000                   ;  0WITH_RDPC_VALUE
 1809  0000000                   ;  0WITH_MS_CODA
 1810  0000000                   ;  1WITH_SP_MIDI_SIMUL
 1811  0000000                   ;  1WITH_SP_SKIP
 1812  0000000                   ;  1WITH_SP_GLOBAL_SR
 1813  0000000                   ;  0WITH_RAM_OVER_STACK





 1814  0000000                   ; 32WITH_STACK_SIZE
 1815  0000000                   ; 58WITH_HWENGINE_SHARED_RAM_SIZE
 1816  0000000                   ;  0WITH_COLOR_FLY_CURVENUMS
 1817  0000000                   ;  0WITH_SPI_GPIO
 1818  0000000                   ;  0WITH_SPI_SPIO
 1819  0000000                   ;  1WITH_ISP_READ_WRITE
 1820  0000000                   ;  1WITH_ISP_UPDATE
 1821  0000000                   ;  0WITH_PROTECTION_PAGE_UPDATE
 1822  0000000                   ;  0WITH_BOOT_LOADER
 1823  0000000                   ;  0WITH_PSF_PROJECT
 1824  0000000                   ;  0WITH_PLAY_INDEX
 1825  0000000                   ;  0WITH_FW_CAP_SENSOR_KEYS
 1826  0000000                   ;  0WITH_TOUCH_WAKEUP_EN
 1827  0000000                   ;  0WITH_TOUCH_WAKEUP_KEYNUMS
 1828  0000000                   ;  0CAP_AVG_WITH_CHECK_BUSY
 1829  0000000                   ;  0WITH_FW_SEN_OPTION_PIN
 1830  0000000                   ;  1WITH_CAPSENSOR_MULTISENTABLE
 1831  0000000                   ;  0WITH_SLEEP_SEL_PIN_NUM
 1832  0000000                   ;  0WITH_UART_TX
 1833  0000000                   ;  0WITH_UART_RX
 1834  0000000                   ;  0WITH_UART_SWITCH
 1835  0000000                   ;  0WITH_SLD_ENABLE
 1836  0000000                   ;  0WITH_SLD_SWITCH
 1837  0000000                   
 1838  0000000                   ;Support WITH_SP channel variables ========================
 1839  0000000                   CH_STATUS_SP                             EQU  0H ;  1,  0
 1840  0000000                   CH_STATUS1_SP                            EQU  1H ;  1,  1
 1841  0000000                   CH_ISR_SYNTH_START_SP                    EQU  2H ;  2,  2
 1842  0000000                   CH_PREVIOUS_PCM_VOL_SP                   EQU  4H ;  2,  4
 1843  0000000                   CH_PREVIOUS_PCM_SP                       EQU  6H ;  2,  6
 1844  0000000                   CH_R_FINAL_VOLUME_SP                     EQU  8H ;  1,  8
 1845  0000000                   CH_PAUSE_PCM_SP                          EQU  9H ;  2,  9
 1846  0000000                   CH_DATA_ADDR_SP                          EQU  BH ;  2, 11
 1847  0000000                   CH_RAMP_BUF1_SP                          EQU  BH ;  2, 11
 1848  0000000                   CH_DATA_BANK_SP                          EQU  DH ;  1, 13
 1849  0000000                   CH_PHRASE_REPEAT_NUM_SP                  EQU  EH ;  1, 14
 1850  0000000                   CH_SP_PCM_TEMP_SP                        EQU  FH ;  2, 15
 1851  0000000                   CH_SENTENCE_START_ADDR_SP                EQU 11H ;  2, 17
 1852  0000000                   CH_RAMP_BUF2_SP                          EQU 11H ;  2, 17
 1853  0000000                   CH_SENTENCE_START_BANK_SP                EQU 13H ;  1, 19
 1854  0000000                   CH_VOL_MUL_ADDR_SP                       EQU 14H ;  2, 20
 1855  0000000                   ; Size = 22  ==============================================
 1856  0000000                   
 1857  0000000                   ;Not support WITH_APM channel variables ========================
 1858  0000000                   
 1859  0000000                   ;Not support WITH_EAM channel variables ========================
 1860  0000000                   
 1861  0000000                   ;Not support WITH_E2A channel variables ========================
 1862  0000000                   
 1863  0000000                   ;Not support WITH_VC4 channel variables ========================
 1864  0000000                   
 1865  0000000                   ;Not support WITH_YAD channel variables ========================
 1866  0000000                   
 1867  0000000                   ;Support WITH_SIL channel variables ========================
 1868  0000000                   CH_STATUS_SIL                            EQU  0H ;  1,  0
 1869  0000000                   CH_STATUS1_SIL                           EQU  1H ;  1,  1
 1870  0000000                   CH_ISR_SYNTH_START_SIL                   EQU  2H ;  2,  2





 1871  0000000                   CH_PREVIOUS_PCM_VOL_SIL                  EQU  4H ;  2,  4
 1872  0000000                   CH_OLD_SAMPLE_SIL                        EQU  6H ;  2,  6
 1873  0000000                   CH_R_FINAL_VOLUME_SIL                    EQU  8H ;  1,  8
 1874  0000000                   CH_PAUSE_PCM_SIL                         EQU  9H ;  2,  9
 1875  0000000                   CH_DATA_ADDR_SIL                         EQU  BH ;  2, 11
 1876  0000000                   CH_DATA_BANK_SIL                         EQU  DH ;  1, 13
 1877  0000000                   CH_PHRASE_REPEAT_NUM_SIL                 EQU  EH ;  1, 14
 1878  0000000                   CH_SP_PCM_TEMP_SIL                       EQU  FH ;  2, 15
 1879  0000000                   CH_SENTENCE_START_ADDR_SIL               EQU 11H ;  2, 17
 1880  0000000                   CH_SENTENCE_START_BANK_SIL               EQU 13H ;  1, 19
 1881  0000000                   CH_COUNTER_SIL                           EQU 14H ;  1, 20
 1882  0000000                   CH_COUNTER2_SIL                          EQU 15H ;  1, 21
 1883  0000000                   ; Size = 22  ==============================================
 1884  0000000                   
 1885  0000000                   ;Not support WITH_MDM channel variables ========================
 1886  0000000                   
 1887  0000000                   ;Not support WITH_EMM channel variables ========================
 1888  0000000                   
 1889  0000000                   ;Not support WITH_MD6 channel variables ========================
 1890  0000000                   
 1891  0000000                   ;Not support WITH_PC8 channel variables ========================
 1892  0000000                   
 1893  0000000                   ;Not support WITH_LP8 channel variables ========================
 1894  0000000                   
 1895  0000000                   ;Not support WITH_P10 channel variables ========================
 1896  0000000                   
 1897  0000000                   ;Not support WITH_P16 channel variables ========================
 1898  0000000                   
 1899  0000000                   ;Not support WITH_VC8 channel variables ========================
 1900  0000000                   
 1901  0000000                   ;Not support WITH_MD4 channel variables ========================
 1902  0000000                   
 1903  0000000                   ;Not support WITH_MDR channel variables ========================
 1904  0000000                   
 1905  0000000                   ;Not support WITH_NM4 channel variables ========================
 1906  0000000                   
 1907  0000000                   ;Not support WITH_NM4S channel variables ========================
 1908  0000000                   
 1909  0000000                   ;Not support WITH_HNM4 channel variables ========================
 1910  0000000                   CH_STATUS_MS                             EQU  0H ;  0,   0
 1911  0000000                   
 1912  0000000                   
 1913  0000000                   ;Support WITH_EVO channel variables ========================
 1914  0000000                   CH_STATUS_EVO                            EQU  0H ;  1,   0
 1915  0000000                   
 1916  0000000                   ;     RAM addresses =======================================
 1917  0000000                   GLOBAL_PLAY                              EQU  0H ;  1,   0
 1918  0000000                   COMMON_FLAG                              EQU  1H ;  1,   1
 1919  0000000                   COMMON_FLAG2                             EQU  2H ;  1,   2
 1920  0000000                   SUB_INDEX                                EQU  3H ;  0,   3
 1921  0000000                   COMMAND_OPERAND                          EQU  3H ;  1,   3
 1922  0000000                   RAMP_CHANNEL                             EQU  3H ;  1,   3
 1923  0000000                   RAMP_OPERAND                             EQU  3H ;  1,   3
 1924  0000000                   TEMP_REG1                                EQU  4H ;  2,   4
 1925  0000000                   TEMP_REG2                                EQU  6H ;  2,   6
 1926  0000000                   SP_TEMP                                  EQU  8H ;  7,   8
 1927  0000000                   GLOBAL_VOL_SP0                           EQU  FH ;  1,  15





 1928  0000000                   GLOBAL_VOL_SP1                           EQU  FH ;  1,  15
 1929  0000000                   GLOBAL_VOL_SP2                           EQU  FH ;  1,  15
 1930  0000000                   CH1_GLOBAL_TMC                           EQU 10H ;  1,  16
 1931  0000000                   CH1_GLOBAL_TMV                           EQU 11H ;  1,  17
 1932  0000000                   CH2_GLOBAL_TMC                           EQU 12H ;  1,  18
 1933  0000000                   CH2_GLOBAL_TMV                           EQU 12H ;  1,  18
 1934  0000000                   CH3_GLOBAL_TMC                           EQU 12H ;  1,  18
 1935  0000000                   CH3_GLOBAL_TMV                           EQU 12H ;  1,  18
 1936  0000000                   MS_START                                 EQU 12H ;  0,  18
 1937  0000000                   CH_SYNTH_CHANNEL0                        EQU 12H ;  0,  18
 1938  0000000                   CH_SYNTH_CHANNEL1                        EQU 12H ;  0,  18
 1939  0000000                   CH_SYNTH_CHANNEL2                        EQU 12H ;  0,  18
 1940  0000000                   GLOBAL_CHANNEL_VOLM0                     EQU 12H ;  0,  18
 1941  0000000                   GLOBAL_CHANNEL_VOLM1                     EQU 12H ;  0,  18
 1942  0000000                   GLOBAL_CHANNEL_VOLM2                     EQU 12H ;  0,  18
 1943  0000000                   GLOBAL_CHANNEL_INS0                      EQU 12H ;  0,  18
 1944  0000000                   GLOBAL_CHANNEL_INS1                      EQU 12H ;  0,  18
 1945  0000000                   GLOBAL_CHANNEL_INS2                      EQU 12H ;  0,  18
 1946  0000000                   CH1_PLAY_SEGMENT                         EQU 12H ;  0,  18
 1947  0000000                   CH2_PLAY_SEGMENT                         EQU 12H ;  0,  18
 1948  0000000                   CH3_PLAY_SEGMENT                         EQU 12H ;  0,  18
 1949  0000000                   ISP_TEMP                                 EQU 12H ; 20,  18
 1950  0000000                   USER_START                               EQU 26H ; 38
 1951  0000000                   DPD_USER_START                           EQU F00H
 1952  0000000                   
 1953  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SYNTHCONSTANT_EXTERNAL.INI.APP"
 1954  0000000                   	EXTERN TONE_MELODY_TYPE
 1955  0000000                   	EXTERN VMDPC8_MELODY_TYPE
 1956  0000000                   	EXTERN HQPC8_MELODY_TYPE
 1957  0000000                   	EXTERN PCSPC8_MELODY_TYPE
 1958  0000000                   	EXTERN END_MELODY_TYPE
 1959  0000000                   ;========================================================================	
 1960  0000000                   	EXTERN TONE_MELODY_TYPE_2
 1961  0000000                   	EXTERN VMDPC8_MELODY_TYPE_2
 1962  0000000                   	EXTERN HQPC8_MELODY_TYPE_2
 1963  0000000                   	EXTERN PCSPC8_MELODY_TYPE_2
 1964  0000000                   ;========================================================================
 1965  0000000                   	EXTERN RESTYPE_APM
 1966  0000000                   	EXTERN RESTYPE_PC8
 1967  0000000                   	EXTERN RESTYPE_P10
 1968  0000000                   	EXTERN RESTYPE_SIL
 1969  0000000                   	EXTERN RESTYPE_MDM
 1970  0000000                   	EXTERN RESTYPE_EMM
 1971  0000000                   	EXTERN RESTYPE_LP8
 1972  0000000                   	EXTERN RESTYPE_MD6
 1973  0000000                   	EXTERN RESTYPE_E2A
 1974  0000000                   	EXTERN RESTYPE_VC4
 1975  0000000                   	EXTERN RESTYPE_MD4		
 1976  0000000                   	EXTERN RESTYPE_MDR
 1977  0000000                   	EXTERN RESTYPE_NM4
 1978  0000000                   	EXTERN RESTYPE_HNM4
 1979  0000000                   	EXTERN RESTYPE_NM4S	
 1980  0000000                   
 1981  0000000                   	EXTERN RESTYPE_EVO
 1982  0000000                   	EXTERN RESTYPE_MIDI0
 1983  0000000                   
 1984  0000000                   	EXTERN RESTYPE_NUO





 1985  0000000                   	EXTERN RESTYPE_NUOS
 1986  0000000                   	EXTERN RESTYPE_P16
 1987  0000000                   ;============================================================================
 1988  0000000                   	EXTERN CHANNEL_ID_START
 1989  0000000                   	EXTERN CHANNEL_VS0A
 1990  0000000                   	EXTERN CHANNEL_VS0B
 1991  0000000                   	EXTERN CHANNEL_VS0
 1992  0000000                   ;-------------------------------------------------------------------------
 1993  0000000                   	EXTERN CHANNEL_VS1A
 1994  0000000                   	EXTERN CHANNEL_VS1B
 1995  0000000                   	EXTERN CHANNEL_VS1
 1996  0000000                   ;-------------------------------------------------------------------------
 1997  0000000                   	EXTERN CHANNEL_VS2A
 1998  0000000                   	EXTERN CHANNEL_VS2B
 1999  0000000                   	EXTERN CHANNEL_VS2
 2000  0000000                   ;-------------------------------------------------------------------------
 2001  0000000                   	EXTERN CHANNEL_MS
 2002  0000000                   ;-------------------------------------------------------------------------
 2003  0000000                   	EXTERN CHANNEL_EVO0			
 2004  0000000                   	EXTERN CHANNEL_EVO1
 2005  0000000                   	EXTERN CHANNEL_EVO2
 2006  0000000                   ;-------------------------------------------------------------------------
 2007  0000000                   	EXTERN CHANNEL_NONE
 2008  0000000                   ;============================================================================
 2009  0000000                   	EXTERN CHANNEL_VS0A_2
 2010  0000000                   	EXTERN CHANNEL_VS0B_2
 2011  0000000                   	EXTERN CHANNEL_VS0_2
 2012  0000000                   	EXTERN CHANNEL_VS1A_2
 2013  0000000                   	EXTERN CHANNEL_VS1B_2
 2014  0000000                   	EXTERN CHANNEL_VS1_2
 2015  0000000                   	EXTERN CHANNEL_VS2A_2
 2016  0000000                   	EXTERN CHANNEL_VS2B_2
 2017  0000000                   	EXTERN CHANNEL_VS2_2
 2018  0000000                   	EXTERN CHANNEL_MS_2
 2019  0000000                   ;========================================================================
 2020  0000000                   ; Speech / melody channel flags
 2021  0000000                   ;========================================================================
 2022  0000000                   	EXTERN SP_BZ
 2023  0000000                   
 2024  0000000                   	EXTERN SP_DC_RAMP_UP_FOR_MS
 2025  0000000                   	EXTERN SP_INIT
 2026  0000000                   
 2027  0000000                   	EXTERN SP_NOTE
 2028  0000000                   
 2029  0000000                   	EXTERN SP_DC_RAMP_DOWN
 2030  0000000                   	EXTERN SP_EXT_NOTE
 2031  0000000                   
 2032  0000000                   	EXTERN SP_PAUSE
 2033  0000000                   
 2034  0000000                   	EXTERN SP_DECAY
 2035  0000000                   	EXTERN SP_RESUME
 2036  0000000                   
 2037  0000000                   	EXTERN SP_DC_RAMP_UP
 2038  0000000                   
 2039  0000000                   	EXTERN SP_ADSR
 2040  0000000                   	EXTERN SP_DRUM
 2041  0000000                   	EXTERN SP_AUD





 2042  0000000                   ;------------------------------------------------------------------------
 2043  0000000                   ; Speech flag1
 2044  0000000                   ;------------------------------------------------------------------------
 2045  0000000                   	EXTERN SP_HW_DECODE
 2046  0000000                   	EXTERN SP_HW_STOP
 2047  0000000                   	EXTERN SP_HW_PAUSE
 2048  0000000                   	EXTERN SP_HW_INIT
 2049  0000000                   	EXTERN SP_CHANNEL_FADE
 2050  0000000                   	EXTERN SP_PLAY_BACK
 2051  0000000                   	EXTERN SP_SIM_LOOP
 2052  0000000                   	EXTERN SP_DIS_UIO_EVENT
 2053  0000000                   ;---------------------------------------------------------------------------------------
 2054  0000000                   ; Melody flags
 2055  0000000                   ;---------------------------------------------------------------------------------------
 2056  0000000                   	EXTERN MS_BZ
 2057  0000000                   
 2058  0000000                   	EXTERN MS_DC_RAMP_UP
 2059  0000000                   	EXTERN MS_COMD_PHRASE
 2060  0000000                   
 2061  0000000                   	EXTERN MS_LE
 2062  0000000                   
 2063  0000000                   	EXTERN MS_PS
 2064  0000000                   	EXTERN MS_PAUSE
 2065  0000000                   
 2066  0000000                   	EXTERN MS_DC_RAMP_DOWN
 2067  0000000                   	EXTERN MS_COMD_EVENT
 2068  0000000                   
 2069  0000000                   	EXTERN MS_STOP
 2070  0000000                   
 2071  0000000                   	EXTERN MS_CNP
 2072  0000000                   ;---------------------------------------------------------------------------------------
 2073  0000000                   ; EVO flags
 2074  0000000                   ;---------------------------------------------------------------------------------------
 2075  0000000                   	EXTERN EVO_BZ
 2076  0000000                   
 2077  0000000                   	EXTERN EVO_PAUSE
 2078  0000000                   
 2079  0000000                   	EXTERN EVO_EVENT_TYPE
 2080  0000000                   	EXTERN EVO_NOP_EVENT
 2081  0000000                   	EXTERN EVO_COMD_EVENT
 2082  0000000                   	EXTERN EVO_STOP_EVENT
 2083  0000000                   ;=========================================GLOBAL_PLAY bits
 2084  0000000                   	EXTERN SP1_BZ
 2085  0000000                   	EXTERN SP2_BZ
 2086  0000000                   	EXTERN SP3_BZ
 2087  0000000                   	EXTERN EVO1_BZ
 2088  0000000                   	EXTERN EVO2_BZ
 2089  0000000                   	EXTERN EVO3_BZ
 2090  0000000                   	EXTERN MIDI_BZ
 2091  0000000                   	EXTERN MS_EXT
 2092  0000000                   ;========================================COMMON_FLAG bits
 2093  0000000                   	EXTERN TAIL_OFF_DAC
 2094  0000000                   	EXTERN GLOBAL_VOL_MS_FLAG
 2095  0000000                   ;	EXTERN NOISE_SHAPING_FLAG	
 2096  0000000                   ;========================================================================
 2097  0000000                   ;ENV_STATE_HOLD 					EQ 0
 2098  0000000                   	EXTERN ENV_STATE_ATTACK





 2099  0000000                   	EXTERN ENV_STATE_DECAY
 2100  0000000                   	EXTERN ENV_STATE_SUSTAIN
 2101  0000000                   	EXTERN ENV_STATE_RELEASE
 2102  0000000                   
 2103  0000000                   ;========================================================================
 2104  0000000                   	EXTERN HEAD_TAIL_STEP_COUNT
 2105  0000000                   	EXTERN PLAY_PHRASE_LEN
 2106  0000000                   	EXTERN PLAY_PHRASE_MDR_LEN
 2107  0000000                   ;===========================================================================
 2108  0000000                   	EXTERN DRUM_CHANNEL_ID
 2109  0000000                   
 2110  0000000                   	EXTERN SP_CH0
 2111  0000000                   	EXTERN SP_CH1
 2112  0000000                   	EXTERN SP_CH2
 2113  0000000                   
 2114  0000000                   	EXTERN MS_CH0
 2115  0000000                   	EXTERN MS_CH1
 2116  0000000                   	EXTERN MS_CH2
 2117  0000000                   ;===========================================================================
 2118  0000000                   	EXTERN SPEECH_TYPE
 2119  0000000                   	EXTERN EVO_TYPE
 2120  0000000                   	EXTERN GLOBAL_SR_FLAG
 2121  0000000                   ;===========================================================================
 2122  0000000                   	EXTERN TM0_NM4_PLAYING
 2123  0000000                   	EXTERN TM0_NM4S_PLAYING
 2124  0000000                   
 2125  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\MACROS.INI.APP"
 2126  0000000                   	SYMBOLS
 2127  0000000                   	LINKLIST
 2128  0000000                   	DEBUG  	ASM
 2129  0000000                   	LINEAR	ON
 2130  0000000                   	LONGA	OFF
 2131  0000000                   	LONGI	OFF
 2132  0000000                   
 2133  0000000                   ;==============================================================================
 2134  0000000                   ; Macros
 2135  0000000                   ;==============================================================================
 2136  0000000                   STZ16 MACRO VAR_ADDR
 2137  0000000                   	STZ VAR_ADDR
 2138  0000000                   	STZ VAR_ADDR+1
 2139  0000000                   	ENDM
 2140  0000000                   ;----------------------------------------------------------------	
 2141  0000000                   STZ24 MACRO VAR_ADDR
 2142  0000000                   	STZ VAR_ADDR
 2143  0000000                   	STZ VAR_ADDR+1
 2144  0000000                   	STZ VAR_ADDR+2
 2145  0000000                   	ENDM
 2146  0000000                   ;----------------------------------------------------------------	
 2147  0000000                   ADD16_8_DP MACRO VAR_ADDR, VAR_ADDR2
 2148  0000000                   	CLC
 2149  0000000                   	LDA VAR_ADDR
 2150  0000000                   	ADC VAR_ADDR2
 2151  0000000                   	STA VAR_ADDR
 2152  0000000                   	LDA VAR_ADDR+1
 2153  0000000                   	ADC #0
 2154  0000000                   	STA VAR_ADDR+1
 2155  0000000                   	ENDM





 2156  0000000                   ;----------------------------------------------------------------	
 2157  0000000                   ADD16_16 MACRO VAR_ADDR, NUM
 2158  0000000                   	CLC
 2159  0000000                   	LDA VAR_ADDR
 2160  0000000                   	ADC #.LOW.NUM
 2161  0000000                   	STA VAR_ADDR
 2162  0000000                   	LDA VAR_ADDR+1
 2163  0000000                   	ADC #.HIGH.NUM
 2164  0000000                   	STA VAR_ADDR+1
 2165  0000000                   	ENDM
 2166  0000000                   ;----------------------------------------------------------------	
 2167  0000000                   ADD24_16 MACRO VAR_ADDR, NUM
 2168  0000000                   	CLC
 2169  0000000                   	LDA VAR_ADDR
 2170  0000000                   	ADC #.LOW.NUM
 2171  0000000                   	STA VAR_ADDR
 2172  0000000                   	LDA VAR_ADDR+1
 2173  0000000                   	ADC #.HIGH.NUM
 2174  0000000                   	STA VAR_ADDR+1
 2175  0000000                   	LDA VAR_ADDR+2
 2176  0000000                   	ADC #0
 2177  0000000                   	STA VAR_ADDR+2
 2178  0000000                   	ENDM
 2179  0000000                   ;----------------------------------------------------------------	
 2180  0000000                   ADD16_16_DP MACRO VAR_ADDR, VAR_ADDR2
 2181  0000000                   	CLC
 2182  0000000                   	LDA VAR_ADDR
 2183  0000000                   	ADC VAR_ADDR2
 2184  0000000                   	STA VAR_ADDR
 2185  0000000                   	LDA VAR_ADDR+1
 2186  0000000                   	ADC VAR_ADDR2+1
 2187  0000000                   	STA VAR_ADDR+1
 2188  0000000                   	ENDM
 2189  0000000                   ;----------------------------------------------------------------	
 2190  0000000                   ADD24_16_DP MACRO VAR_ADDR, VAR_ADDR2
 2191  0000000                   	CLC
 2192  0000000                   	LDA VAR_ADDR
 2193  0000000                   	ADC VAR_ADDR2
 2194  0000000                   	STA VAR_ADDR
 2195  0000000                   	LDA VAR_ADDR+1
 2196  0000000                   	ADC VAR_ADDR2+1
 2197  0000000                   	STA VAR_ADDR+1
 2198  0000000                   	LDA VAR_ADDR+2
 2199  0000000                   	ADC #0
 2200  0000000                   	STA VAR_ADDR+2
 2201  0000000                   	ENDM
 2202  0000000                   ;----------------------------------------------------------------	
 2203  0000000                   ADD24_24 MACRO VAR_ADDR, NUM
 2204  0000000                   	CLC
 2205  0000000                   	LDA VAR_ADDR
 2206  0000000                   	ADC #.LOW.NUM
 2207  0000000                   	STA VAR_ADDR
 2208  0000000                   	LDA VAR_ADDR+1
 2209  0000000                   	ADC #.HIGH.NUM
 2210  0000000                   	STA VAR_ADDR+1
 2211  0000000                   	LDA VAR_ADDR+2
 2212  0000000                   	ADC #.HIGH8.NUM





 2213  0000000                   	STA VAR_ADDR+2
 2214  0000000                   	ENDM
 2215  0000000                   ;----------------------------------------------------------------	
 2216  0000000                   ADD24_24_DP MACRO VAR_ADDR1, VAR_ADDR2
 2217  0000000                   	CLC
 2218  0000000                   	LDA VAR_ADDR1
 2219  0000000                   	ADC VAR_ADDR2
 2220  0000000                   	STA VAR_ADDR1
 2221  0000000                   	LDA VAR_ADDR1+1
 2222  0000000                   	ADC VAR_ADDR2+1
 2223  0000000                   	STA VAR_ADDR1+1
 2224  0000000                   	LDA VAR_ADDR1+2
 2225  0000000                   	ADC VAR_ADDR2+2
 2226  0000000                   	STA VAR_ADDR1+2
 2227  0000000                   	ENDM
 2228  0000000                   ;----------------------------------------------------------------
 2229  0000000                   SBC16_16 MACRO VAR_ADDR, NUM
 2230  0000000                   	SEC
 2231  0000000                   	LDA VAR_ADDR
 2232  0000000                   	SBC #.LOW.NUM
 2233  0000000                   	STA VAR_ADDR
 2234  0000000                   	LDA VAR_ADDR+1
 2235  0000000                   	SBC #.HIGH.NUM
 2236  0000000                   	STA VAR_ADDR+1
 2237  0000000                   	ENDM
 2238  0000000                   ;----------------------------------------------------------------
 2239  0000000                   SBC16_16_DP MACRO VAR_ADDR1, VAR_ADDR2
 2240  0000000                   	SEC
 2241  0000000                   	LDA VAR_ADDR1
 2242  0000000                   	SBC VAR_ADDR2
 2243  0000000                   	STA VAR_ADDR1
 2244  0000000                   	LDA VAR_ADDR1+1
 2245  0000000                   	SBC VAR_ADDR2+1
 2246  0000000                   	STA VAR_ADDR1+1
 2247  0000000                   	ENDM
 2248  0000000                   ;----------------------------------------------------------------
 2249  0000000                   SBC24_24 MACRO VAR_ADDR, NUM
 2250  0000000                   	SEC
 2251  0000000                   	LDA VAR_ADDR
 2252  0000000                   	SBC #.LOW.NUM
 2253  0000000                   	STA VAR_ADDR
 2254  0000000                   	LDA VAR_ADDR+1
 2255  0000000                   	SBC #.HIGH.NUM
 2256  0000000                   	STA VAR_ADDR+1
 2257  0000000                   	LDA VAR_ADDR+2
 2258  0000000                   	SBC #.HIGH8.NUM
 2259  0000000                   	STA VAR_ADDR+2
 2260  0000000                   	ENDM
 2261  0000000                   ;----------------------------------------------------------------
 2262  0000000                   SBC24_24_DP MACRO VAR_ADDR1, VAR_ADDR2
 2263  0000000                   	SEC
 2264  0000000                   	LDA VAR_ADDR1
 2265  0000000                   	SBC VAR_ADDR2
 2266  0000000                   	STA VAR_ADDR1
 2267  0000000                   	LDA VAR_ADDR1+1
 2268  0000000                   	SBC VAR_ADDR2+1
 2269  0000000                   	STA VAR_ADDR1+1





 2270  0000000                   	LDA VAR_ADDR1+2
 2271  0000000                   	SBC VAR_ADDR2+2
 2272  0000000                   	STA VAR_ADDR1+2
 2273  0000000                   	ENDM
 2274  0000000                   ;----------------------------------------------------------------
 2275  0000000                   MOV16_16 MACRO VAR_ADDR, NUM
 2276  0000000                   	LDA	#.LOW.NUM
 2277  0000000                   	STA VAR_ADDR
 2278  0000000                   	LDA	#.HIGH.NUM
 2279  0000000                   	STA VAR_ADDR+1
 2280  0000000                   	ENDM
 2281  0000000                   ;----------------------------------------------------------------
 2282  0000000                   MOV16_16_DP MACRO VAR_ADDR1, VAR_ADDR2
 2283  0000000                   	LDA	VAR_ADDR2
 2284  0000000                   	STA VAR_ADDR1
 2285  0000000                   	LDA	VAR_ADDR2+1
 2286  0000000                   	STA VAR_ADDR1+1
 2287  0000000                   	ENDM
 2288  0000000                   ;----------------------------------------------------------------
 2289  0000000                   MOV24_24 MACRO VAR_ADDR, NUM
 2290  0000000                   	LDA	#.LOW.NUM
 2291  0000000                   	STA VAR_ADDR
 2292  0000000                   	LDA	#.HIGH.NUM
 2293  0000000                   	STA VAR_ADDR+1
 2294  0000000                   	LDA	#.HIGH8.NUM
 2295  0000000                   	STA VAR_ADDR+2
 2296  0000000                   	ENDM
 2297  0000000                   ;----------------------------------------------------------------
 2298  0000000                   MOV24_24_DP MACRO VAR_ADDR1, VAR_ADDR2
 2299  0000000                   	LDA	VAR_ADDR2
 2300  0000000                   	STA VAR_ADDR1
 2301  0000000                   	LDA	VAR_ADDR2+1
 2302  0000000                   	STA VAR_ADDR1+1
 2303  0000000                   	LDA	VAR_ADDR2+2
 2304  0000000                   	STA VAR_ADDR1+2
 2305  0000000                   	ENDM
 2306  0000000                   ;------------------------------------------------------------------------------
 2307  0000000                   ; Like JSR (addr,X) operation
 2308  0000000                   ;------------------------------------------------------------------------------
 2309  0000000                   ;----------------------------------------------------------------
 2310  0000000                   ; JSR ISR for Return Addr
 2311  0000000                   ;----------------------------------------------------------------
 2312  0000000                   JSR_ISR_AII MACRO ISR_ADDR
 2313  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2314  0000000                   	PHA
 2315  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2316  0000000                   	PHA
 2317  0000000                   	PHP
 2318  0000000                   	JMP ISR_ADDR
 2319  0000000                   RETURN_ADDR_#:
 2320  0000000                   	ENDM
 2321  0000000                   
 2322  0000000                   ;----------------------------------------------------------------
 2323  0000000                   ; PHA for Return Addr
 2324  0000000                   ;----------------------------------------------------------------
 2325  0000000                   JSR_AII MACRO JSR_ADDR
 2326  0000000                   	LDA #.HIGH.RETURN_ADDR_#





 2327  0000000                   	PHA
 2328  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2329  0000000                   	PHA
 2330  0000000                   	JMP JSR_ADDR
 2331  0000000                   RETURN_ADDR_#:
 2332  0000000                   	NOP
 2333  0000000                   	ENDM
 2334  0000000                   ;----------------------------------------------------------------
 2335  0000000                   ; PHA for Return Addr with X
 2336  0000000                   ;----------------------------------------------------------------
 2337  0000000                   JSR_AII_X MACRO JSR_ADDR
 2338  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2339  0000000                   	PHA
 2340  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2341  0000000                   	PHA
 2342  0000000                   	JMP (JSR_ADDR,X)
 2343  0000000                   RETURN_ADDR_#:
 2344  0000000                   	NOP
 2345  0000000                   	ENDM
 2346  0000000                   ;----------------------------------------------------------------
 2347  0000000                   ; PHY for Return Addr
 2348  0000000                   ;----------------------------------------------------------------
 2349  0000000                   JSR_AII_PHY_X MACRO JSR_ADDR
 2350  0000000                   	LDY #.HIGH.RETURN_ADDR_Y_#
 2351  0000000                   	PHY
 2352  0000000                   	LDY #.LOW.RETURN_ADDR_Y_#
 2353  0000000                   	PHY
 2354  0000000                   	JMP (JSR_ADDR,X)
 2355  0000000                   RETURN_ADDR_Y_#:
 2356  0000000                   	NOP
 2357  0000000                   	ENDM
 2358  0000000                   ;--------------------------------------------------------------------------
 2359  0000000                   JSR_AII_X_SA MACRO JSR_ADDR,BUF_ADDR
 2360  0000000                   ;	.IF (WITH_16BIT_MODE .EQ. 1)
 2361  0000000                   ;	JSR (JSR_ADDR,X)
 2362  0000000                   ;	.ELSE
 2363  0000000                   	STA <BUF_ADDR
 2364  0000000                   	LDA #.HIGH.RETURN_ADDR_#
 2365  0000000                   	PHA
 2366  0000000                   ;	LDA #.LOW.RETURN_ADDR_#-1
 2367  0000000                   	LDA #.LOW.RETURN_ADDR_#
 2368  0000000                   	PHA
 2369  0000000                   	LDA <BUF_ADDR
 2370  0000000                   	JMP (JSR_ADDR,X)
 2371  0000000                   RETURN_ADDR_#:
 2372  0000000                   	NOP
 2373  0000000                   ;	.ENDIF
 2374  0000000                   	ENDM
 2375  0000000                   ;===============================================================
 2376  0000000                   ;
 2377  0000000                   ;===============================================================
 2378  0000000                   T_XY MACRO
 2379  0000000                   	PHX
 2380  0000000                   	PLY
 2381  0000000                   
 2382  0000000                   	ENDM
 2383  0000000                   ;--------------------------------------------------------------------------





 2384  0000000                   T_YX MACRO
 2385  0000000                   	PHY
 2386  0000000                   	PLX
 2387  0000000                   
 2388  0000000                   	ENDM
 2389  0000000                   ;------------------------------------------------------------------------------
 2390  0000000                   PSF_RESPONSE_LIMIT MACRO 
 2391  0000000                   .IF (WITH_PSF_PROJECT .EQ. 1)
 2392  0000000                   .IFDEF ABANDON_STACK
 2393  0000000                   	LDA #80H
 2394  0000000                   	BIT <ABANDON_STACK_FLAG
 2395  0000000                   	BEQ PSF_RESPONSE_LIMIT_END#
 2396  0000000                   	LDA #01H
 2397  0000000                   PSF_RESPONSE_LIMIT_END#:
 2398  0000000                   	TSB <ABANDON_STACK_FLAG
 2399  0000000                   .ENDIF
 2400  0000000                   .ENDIF
 2401  0000000                   	ENDM
 2402  0000000                   ;----------------------------------------------------------------
 2403  0000000                   PSF_RESPONSE_LIMIT_RELEASE MACRO 
 2404  0000000                   .IF (WITH_PSF_PROJECT .EQ. 1)
 2405  0000000                   .IFDEF ABANDON_STACK
 2406  0000000                   	LDA #01H
 2407  0000000                   	BIT <ABANDON_STACK_FLAG
 2408  0000000                   	BNE PSF_RESPONSE_LIMIT_RELEASE_END#
 2409  0000000                   	LDA #80H
 2410  0000000                   PSF_RESPONSE_LIMIT_RELEASE_END#:
 2411  0000000                   	TRB <ABANDON_STACK_FLAG
 2412  0000000                   .ENDIF
 2413  0000000                   .ENDIF
 2414  0000000                   	ENDM	
 2415  0000000                   ;----------------------------------------------------------------
 2416  0000000                   PSF_RESPONSE_LIMIT_JSR MACRO JSR_ADDR
 2417  0000000                   	PSF_RESPONSE_LIMIT
 2418  0000000                   	JSR JSR_ADDR
 2419  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 2420  0000000                   	ENDM
 2421  0000000                   
 2422  0000000                   
 2423  0000000                   
 2424  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SPI_MACROS.INI.APP"
 2425  0000000                   ;========================================================
 2426  0000000                   ;-----SPI mode define,user can change--------
 2427  0000000                   SPI_CLK_RATE	EQU	01H
 2428  0000000                   ;FOSC_CLK_DIVIDED_1: SPI clock rate is Fosc/1
 2429  0000000                   ;FOSC_CLK_DIVIDED_2: SPI clock rate is Fosc/2
 2430  0000000                   ;FOSC_CLK_DIVIDED_4: SPI clock rate is Fosc/4
 2431  0000000                   ;FOSC_CLK_DIVIDED_8: SPI clock rate is Fosc/8
 2432  0000000                   
 2433  0000000                   ;----internal pin-----------
 2434  0000000                   SPI_BP00		EQU	10H
 2435  0000000                   SPI_BP01		EQU	11H
 2436  0000000                   SPI_BP02		EQU	12H
 2437  0000000                   SPI_BP03		EQU	13H
 2438  0000000                   SPI_BP04		EQU	14H
 2439  0000000                   SPI_BP05		EQU	15H
 2440  0000000                   SPI_BP06		EQU	16H





 2441  0000000                   SPI_BP07		EQU	17H
 2442  0000000                   
 2443  0000000                   SPI_BP10		EQU	20H
 2444  0000000                   SPI_BP11		EQU	21H
 2445  0000000                   SPI_BP12		EQU	22H
 2446  0000000                   SPI_BP13		EQU	23H
 2447  0000000                   SPI_BP14		EQU	24H
 2448  0000000                   SPI_BP15		EQU	25H
 2449  0000000                   SPI_BP16		EQU	26H
 2450  0000000                   SPI_BP17		EQU	27H
 2451  0000000                   
 2452  0000000                   SPI_BP20		EQU	30H
 2453  0000000                   SPI_BP21		EQU	31H
 2454  0000000                   SPI_BP22		EQU	32H
 2455  0000000                   SPI_BP23		EQU	33H
 2456  0000000                   SPI_BP24		EQU	34H
 2457  0000000                   SPI_BP25		EQU	35H
 2458  0000000                   SPI_BP26		EQU	36H
 2459  0000000                   SPI_BP27		EQU	37H
 2460  0000000                   
 2461  0000000                   SPI_BP30		EQU	40H
 2462  0000000                   SPI_BP31		EQU	41H
 2463  0000000                   SPI_BP32		EQU	42H
 2464  0000000                   SPI_BP33		EQU	43H
 2465  0000000                   SPI_BP34		EQU	44H
 2466  0000000                   SPI_BP35		EQU	45H
 2467  0000000                   SPI_BP36		EQU	46H
 2468  0000000                   SPI_BP37		EQU	47H
 2469  0000000                   ;========================================================
 2470  0000000                   SPI_PORT_BASE		EQU	0F80H
 2471  0000000                   SPI_PORT_D_BASE		EQU	0F84H
 2472  0000000                   SPI_PORT_M_BASE		EQU	0F88H
 2473  0000000                   SPI_PORT_EN_BASE	EQU	0F98H
 2474  0000000                   
 2475  0000000                   SPI_BP2MF1			EQU 0F9FH
 2476  0000000                   SPI_SPIC			EQU 0FD8H
 2477  0000000                   SPI_SPIB			EQU 0FD9H
 2478  0000000                   SPI_SPIBN			EQU 0FDAH
 2479  0000000                   
 2480  0000000                   SPI1_EN_MASK		EQU 00000001B
 2481  0000000                   SPI2_EN_MASK		EQU 00000010B
 2482  0000000                   
 2483  0000000                   SPIC_EN_MASK		EQU 00000001B
 2484  0000000                   SPIC_PIN_DEF_MASK	EQU 00000010B
 2485  0000000                   SPIC_CLK_MASK		EQU	01100000B
 2486  0000000                   SPIC_DONE_MASK		EQU 10000000B
 2487  0000000                   
 2488  0000000                   FOSC_CLK_DIVIDED_1	EQU 0
 2489  0000000                   FOSC_CLK_DIVIDED_2	EQU 1
 2490  0000000                   FOSC_CLK_DIVIDED_4	EQU 2
 2491  0000000                   FOSC_CLK_DIVIDED_8	EQU 3
 2492  0000000                   ;========================================================
 2493  0000000                   ;-----pin define,user can change--------
 2494  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 2495  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 1)
 2496  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP24
 2497  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP25





 2498  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP26
 2499  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP27
 2500  0000000                   SPI_EN_MASK		EQU SPI2_EN_MASK
 2501  0000000                   	.ELSE
 2502  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP20
 2503  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP21
 2504  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP22
 2505  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP23
 2506  0000000                   SPI_EN_MASK		EQU SPI1_EN_MASK
 2507  0000000                   	.ENDIF
 2508  0000000                   .ENDIF
 2509  0000000                   
 2510  0000000                   .IF	(MAINBODY='A960')
 2511  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 0)
 2512  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP02
 2513  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP03
 2514  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP04
 2515  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP05
 2516  0000000                   	.ENDIF
 2517  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 1)
 2518  0000000                   SPI_X0CSB_PIN	EQU	SPI_BP24
 2519  0000000                   SPI_X0SCK_PIN	EQU	SPI_BP25
 2520  0000000                   SPI_X0MISO_PIN	EQU	SPI_BP26
 2521  0000000                   SPI_X0MOSI_PIN	EQU	SPI_BP27
 2522  0000000                   	.ENDIF
 2523  0000000                   .ENDIF
 2524  0000000                   
 2525  0000000                   ;-------------SPIO X0 4Pin parameter ------------------------
 2526  0000000                   SPI_X0CSB_PIN_VALUE		EQU		1<<(SPI_X0CSB_PIN&0FH)
 2527  0000000                   SPI_X0CSB_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0CSB_PIN>>4)-1
 2528  0000000                   SPI_X0CSB_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0CSB_PIN>>4)-1
 2529  0000000                   SPI_X0CSB_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0CSB_PIN>>4)-1	
 2530  0000000                   
 2531  0000000                   SPI_X0SCK_PIN_VALUE		EQU		1<<(SPI_X0SCK_PIN&0FH)
 2532  0000000                   SPI_X0SCK_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0SCK_PIN>>4)-1
 2533  0000000                   SPI_X0SCK_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0SCK_PIN>>4)-1
 2534  0000000                   SPI_X0SCK_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0SCK_PIN>>4)-1	
 2535  0000000                   
 2536  0000000                   SPI_X0MOSI_PIN_VALUE	EQU		1<<(SPI_X0MOSI_PIN&0FH)	
 2537  0000000                   SPI_X0MOSI_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0MOSI_PIN>>4)-1
 2538  0000000                   SPI_X0MOSI_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0MOSI_PIN>>4)-1	
 2539  0000000                   SPI_X0MOSI_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0MOSI_PIN>>4)-1
 2540  0000000                   
 2541  0000000                   SPI_X0MISO_PIN_VALUE	EQU		1<<(SPI_X0MISO_PIN&0FH)
 2542  0000000                   SPI_X0MISO_PORT_ADDR 	EQU 	SPI_PORT_BASE+(SPI_X0MISO_PIN>>4)-1
 2543  0000000                   SPI_X0MISO_D_ADDR		EQU 	SPI_PORT_D_BASE+(SPI_X0MISO_PIN>>4)-1
 2544  0000000                   SPI_X0MISO_M_ADDR		EQU 	SPI_PORT_M_BASE+(SPI_X0MISO_PIN>>4)-1
 2545  0000000                   ;========================================================
 2546  0000000                   SPI_X0CSB_M_VALUE		EQU 	1<<(SPI_X0CSB_PIN&0FH)
 2547  0000000                   SPI_X0CSB_D_VALUE		EQU 	1<<(SPI_X0CSB_PIN&0FH)
 2548  0000000                   
 2549  0000000                   ;--------------------------------------------------------
 2550  0000000                   SPI_X0SCK_M_VALUE		EQU 	1<<(SPI_X0SCK_PIN&0FH)
 2551  0000000                   SPI_X0SCK_D_VALUE		EQU 	1<<(SPI_X0SCK_PIN&0FH)
 2552  0000000                   
 2553  0000000                   ;--------------------------------------------------------
 2554  0000000                   SPI_X0MOSI_M_VALUE		EQU 	1<<(SPI_X0MOSI_PIN&0FH)





 2555  0000000                   SPI_X0MOSI_D_VALUE		EQU 	1<<(SPI_X0MOSI_PIN&0FH)
 2556  0000000                   
 2557  0000000                   ;--------------------------------------------------------
 2558  0000000                   SPI_X0MISO_M_VALUE		EQU 	1<<(SPI_X0MISO_PIN&0FH)
 2559  0000000                   SPI_X0MISO_D_VALUE		EQU 	1<<(SPI_X0MISO_PIN&0FH)
 2560  0000000                   
 2561  0000000                   ;================================================================================
 2562  0000000                   ; 	USER MACRO - Drive Macro
 2563  0000000                   ;================================================================================
 2564  0000000                   SPI_X0_INIT_PIN MACRO
 2565  0000000                   
 2566  0000000                   ;CSB: cmos output,init value 1
 2567  0000000                   	LDA #SPI_X0CSB_D_VALUE
 2568  0000000                   	TRB !SPI_X0CSB_D_ADDR
 2569  0000000                   	TSB !SPI_X0CSB_M_ADDR
 2570  0000000                   
 2571  0000000                   	LDA !SPI_X0CSB_PORT_ADDR
 2572  0000000                   	ORA #SPI_X0CSB_PIN_VALUE
 2573  0000000                   	STA !SPI_X0CSB_PORT_ADDR	
 2574  0000000                   
 2575  0000000                   ;SCK: cmos output
 2576  0000000                   	LDA #SPI_X0SCK_D_VALUE
 2577  0000000                   	TRB !SPI_X0SCK_D_ADDR
 2578  0000000                   	TSB !SPI_X0SCK_M_ADDR
 2579  0000000                   
 2580  0000000                   	LDA #SPI_X0SCK_PIN_VALUE
 2581  0000000                   	TRB !SPI_X0SCK_PORT_ADDR
 2582  0000000                   
 2583  0000000                   ;MOSI: cmos output,init value 1
 2584  0000000                   	LDA #SPI_X0MOSI_D_VALUE
 2585  0000000                   	TRB !SPI_X0MOSI_D_ADDR
 2586  0000000                   	TSB !SPI_X0MOSI_M_ADDR
 2587  0000000                   
 2588  0000000                   	LDA !SPI_X0MOSI_PORT_ADDR
 2589  0000000                   	ORA #SPI_X0MOSI_PIN_VALUE
 2590  0000000                   	STA !SPI_X0MOSI_PORT_ADDR
 2591  0000000                   
 2592  0000000                   ;MISO: pull high input,init value 1
 2593  0000000                   	LDA #SPI_X0MISO_D_VALUE
 2594  0000000                   	TSB !SPI_X0MISO_D_ADDR
 2595  0000000                   	TSB !SPI_X0MISO_M_ADDR
 2596  0000000                   
 2597  0000000                   	LDA !SPI_X0MISO_PORT_ADDR
 2598  0000000                   	ORA #SPI_X0MISO_PIN_VALUE
 2599  0000000                   	STA !SPI_X0MISO_PORT_ADDR
 2600  0000000                   
 2601  0000000                   ;SPI clock rate, init value 0
 2602  0000000                   	LDA !SPI_SPIC
 2603  0000000                   	AND #(FFH^SPIC_CLK_MASK)
 2604  0000000                   .IF (SPI_CLK_RATE.EQ.0)
 2605  0000000                   	ORA #(FOSC_CLK_DIVIDED_1 << 5)
 2606  0000000                   .ENDIF
 2607  0000000                   .IF (SPI_CLK_RATE.EQ.1)
 2608  0000000                   	ORA #(FOSC_CLK_DIVIDED_2 << 5)
 2609  0000000                   .ENDIF
 2610  0000000                   .IF (SPI_CLK_RATE.EQ.2)
 2611  0000000                   	ORA #(FOSC_CLK_DIVIDED_4 << 5)





 2612  0000000                   .ENDIF
 2613  0000000                   .IF (SPI_CLK_RATE.EQ.3)
 2614  0000000                   	ORA #(FOSC_CLK_DIVIDED_8 << 5)
 2615  0000000                   .ENDIF
 2616  0000000                   	STA !SPI_SPIC
 2617  0000000                   
 2618  0000000                   ;ALTER:IO->SPI
 2619  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171')
 2620  0000000                   	LDA #SPI_EN_MASK
 2621  0000000                   	TSB !SPI_BP2MF1
 2622  0000000                   .ENDIF
 2623  0000000                   
 2624  0000000                   .IF	(MAINBODY='A960')
 2625  0000000                   	LDA #02H
 2626  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 0)
 2627  0000000                   	TRB !SPI_SPIC
 2628  0000000                   	.ENDIF
 2629  0000000                   	.IF (WITH_SPI_SWITCH .EQ. 1)
 2630  0000000                   	TSB !SPI_SPIC
 2631  0000000                   	.ENDIF
 2632  0000000                   .ENDIF
 2633  0000000                   SPI_X0_INIT_PIN_END#:
 2634  0000000                   	ENDM
 2635  0000000                   ;--------------------------------------------------------	
 2636  0000000                   SPI_X0_DEINIT_PIN MACRO
 2637  0000000                   ;ALTER:SPI->IO
 2638  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171')
 2639  0000000                   	LDA #SPI_EN_MASK
 2640  0000000                   	TRB !SPI_BP2MF1
 2641  0000000                   .ENDIF
 2642  0000000                   	ENDM
 2643  0000000                   ;================================================================================
 2644  0000000                   ; 	SPI SUBROUTINE
 2645  0000000                   ;================================================================================
 2646  0000000                   SPI_X0_ON MACRO 
 2647  0000000                   ;CSB:1->0
 2648  0000000                   	LDA	#SPIC_EN_MASK
 2649  0000000                   	TSB !SPI_SPIC
 2650  0000000                   	ENDM
 2651  0000000                   ;--------------------------------------------------------
 2652  0000000                   SPI_X0_OFF MACRO
 2653  0000000                   ;CSB:0->1
 2654  0000000                   	LDA	#SPIC_EN_MASK
 2655  0000000                   	TRB !SPI_SPIC
 2656  0000000                   	ENDM
 2657  0000000                   ;========================================================
 2658  0000000                   ;Only SPI mode 0. The definition of mode 0 is:
 2659  0000000                   ;mode0: idle:0;	DO:falling edge;	DI:rising edge
 2660  0000000                   
 2661  0000000                   POLLING_SPI_READY MACRO
 2662  0000000                   PollingSPIReady#:	
 2663  0000000                   	LDA !SPI_SPIC
 2664  0000000                   	BMI PollingSPIReady#
 2665  0000000                   	ENDM
 2666  0000000                   ;--------------------------------------------------------
 2667  0000000                   SPI_X0_MOSI MACRO
 2668  0000000                   	STA !SPI_SPIB





 2669  0000000                   	POLLING_SPI_READY
 2670  0000000                   	ENDM
 2671  0000000                   ;--------------------------------------------------------
 2672  0000000                   SPI_X0_MISO MACRO
 2673  0000000                   	LDY #00H
 2674  0000000                   	LDY !SPI_SPIB
 2675  0000000                   	POLLING_SPI_READY
 2676  0000000                   	LDY !SPI_SPIBN
 2677  0000000                   	POLLING_SPI_READY
 2678  0000000                   	ENDM
 2679  0000000                   ;--------------------------------------------------------
 2680  0000000                   ;--------------------------------------------------------
 2681  0000000                   SPI_X0_WRITE_NB_RAM MACRO NUM,REG
 2682  0000000                   	LDX #00H
 2683  0000000                   SPI_X0_WRITE_NB_RAM_LOOP#:
 2684  0000000                   	CPX #NUM
 2685  0000000                   	BNE 3
 2686  0000000                   	JMP END_SPI_X0_WRITE_NB_RAM#
 2687  0000000                   	LDA REG,X
 2688  0000000                   	SPI_X0_MOSI
 2689  0000000                   	INX
 2690  0000000                   	JMP SPI_X0_WRITE_NB_RAM_LOOP#
 2691  0000000                   END_SPI_X0_WRITE_NB_RAM#:
 2692  0000000                   	ENDM
 2693  0000000                   ;--------------------------------------------------------
 2694  0000000                   SPI_X0_WRITE_NB_RAM2 MACRO REG
 2695  0000000                   	LDX #00H
 2696  0000000                   SPI_X0_WRITE_NB_RAM2_LOOP#:
 2697  0000000                   	CPX REG
 2698  0000000                   	BNE 3
 2699  0000000                   	JMP END_SPI_X0_WRITE_NB_RAM2#
 2700  0000000                   	LDA REG+1,X
 2701  0000000                   	SPI_X0_MOSI
 2702  0000000                   	INX
 2703  0000000                   	JMP SPI_X0_WRITE_NB_RAM2_LOOP#
 2704  0000000                   END_SPI_X0_WRITE_NB_RAM2#:
 2705  0000000                   	ENDM
 2706  0000000                   ;--------------------------------------------------------
 2707  0000000                   SPI_X0_WRITE_NB_RAM_ILI MACRO NUM_RAM,REG
 2708  0000000                   	LDY #00H
 2709  0000000                   SPI_X0_WRITE_NB_RAM_LOOP#:
 2710  0000000                   	CPY NUM_RAM
 2711  0000000                   	BNE 3
 2712  0000000                   	JMP END_SPI_X0_WRITE_NB_RAM#
 2713  0000000                   	LDA (.LOW.REG),Y
 2714  0000000                   	SPI_X0_MOSI
 2715  0000000                   	INY
 2716  0000000                   	JMP SPI_X0_WRITE_NB_RAM_LOOP#
 2717  0000000                   END_SPI_X0_WRITE_NB_RAM#:
 2718  0000000                   	ENDM
 2719  0000000                   ;--------------------------------------------------------
 2720  0000000                   SPI_X0_READ_NB_RAM MACRO NUM,REG
 2721  0000000                   	LDX #00H
 2722  0000000                   SPI_X0_READ_NB_RAM_LOOP#:
 2723  0000000                   	CPX #NUM
 2724  0000000                   	BNE 3
 2725  0000000                   	JMP END_SPI_X0_READ_NB_RAM#





 2726  0000000                   	SPI_X0_MISO
 2727  0000000                   	TYA
 2728  0000000                   	STA REG,X
 2729  0000000                   	INX
 2730  0000000                   	JMP SPI_X0_READ_NB_RAM_LOOP#
 2731  0000000                   END_SPI_X0_READ_NB_RAM#:
 2732  0000000                   
 2733  0000000                   	ENDM
 2734  0000000                   ;--------------------------------------------------------
 2735  0000000                   SPI_X0_READ_NB_RAM2 MACRO REG
 2736  0000000                   	LDX #00H
 2737  0000000                   SPI_X0_READ_NB_RAM2_LOOP#:
 2738  0000000                   	CPX REG
 2739  0000000                   	BNE 3
 2740  0000000                   	JMP END_SPI_X0_READ_NB_RAM2#
 2741  0000000                   	SPI_X0_MISO
 2742  0000000                   	TYA
 2743  0000000                   	STA REG+1,X
 2744  0000000                   	INX
 2745  0000000                   	JMP SPI_X0_READ_NB_RAM2_LOOP#
 2746  0000000                   END_SPI_X0_READ_NB_RAM2#:
 2747  0000000                   	ENDM
 2748  0000000                   ;--------------------------------------------------------
 2749  0000000                   SPI_X0_READ_NB_RAM_ILI MACRO NUM_RAM,REG
 2750  0000000                   	LDY #00H
 2751  0000000                   SPI_X0_READ_NB_RAM_LOOP#:
 2752  0000000                   	CPY NUM_RAM
 2753  0000000                   	BNE 3
 2754  0000000                   	JMP END_SPI_X0_READ_NB_RAM#
 2755  0000000                   	PHY
 2756  0000000                   	SPI_X0_MISO
 2757  0000000                   	TYA
 2758  0000000                   	PLY
 2759  0000000                   	STA (.LOW.REG),Y
 2760  0000000                   	INY
 2761  0000000                   	JMP SPI_X0_READ_NB_RAM_LOOP#
 2762  0000000                   END_SPI_X0_READ_NB_RAM#:
 2763  0000000                   
 2764  0000000                   	ENDM
 2765  0000000                   ;--------------------------------------------------------
 2766  0000000                   SPI_X0_READ_NB_DUMMY MACRO
 2767  0000000                   	SPI_X0_MISO
 2768  0000000                   	ENDM
 2769  0000000                   ;=====================================================================================
 2770  0000000                   ;=====================================================================================
 2771  0000000                   .IF (SPI_COMMAND_ENABLE .EQ. 1H)
 2772  0000000                   SPI_INIT MACRO 
 2773  0000000                   	SPI_X0_INIT_PIN
 2774  0000000                   	ENDM
 2775  0000000                   ;------------------------------------------------------------------------------
 2776  0000000                   SPI_DEINIT MACRO 
 2777  0000000                   	SPI_X0_DEINIT_PIN
 2778  0000000                   	ENDM
 2779  0000000                   ;------------------------------------------------------------------------------
 2780  0000000                   SPI_ON	MACRO
 2781  0000000                   	SPI_X0_ON
 2782  0000000                   	ENDM





 2783  0000000                   ;------------------------------------------------------------------------------
 2784  0000000                   SPI_OFF	MACRO 
 2785  0000000                   	SPI_X0_OFF
 2786  0000000                   	ENDM
 2787  0000000                   ;------------------------------------------------------------------------------
 2788  0000000                   SPI_WRITE MACRO DATA
 2789  0000000                   	LDA #DATA
 2790  0000000                   	SPI_X0_MOSI
 2791  0000000                   	ENDM
 2792  0000000                   ;------------------------------------------------------------------------------
 2793  0000000                   SPI_WRITE_RAM MACRO REG
 2794  0000000                   	LDA REG
 2795  0000000                   	SPI_X0_MOSI
 2796  0000000                   	ENDM
 2797  0000000                   ;------------------------------------------------------------------------------
 2798  0000000                   SPI_WRITE_NB_RAM MACRO NUM,REG
 2799  0000000                   	SPI_X0_WRITE_NB_RAM NUM,REG
 2800  0000000                   	ENDM
 2801  0000000                   ;------------------------------------------------------------------------------
 2802  0000000                   SPI_WRITE_NB_RAM2 MACRO REG
 2803  0000000                   	SPI_X0_WRITE_NB_RAM2 REG
 2804  0000000                   	ENDM
 2805  0000000                   ;------------------------------------------------------------------------------
 2806  0000000                   SPI_WRITE_NB_RAM_ILI MACRO NUM,REG
 2807  0000000                   	SPI_X0_WRITE_NB_RAM_ILI NUM,REG
 2808  0000000                   	ENDM
 2809  0000000                   ;------------------------------------------------------------------------------
 2810  0000000                   SPI_READ MACRO
 2811  0000000                   	SPI_X0_MISO
 2812  0000000                   	TYA
 2813  0000000                   	ENDM
 2814  0000000                   ;------------------------------------------------------------------------------
 2815  0000000                   SPI_READ_RAM MACRO REG
 2816  0000000                   	SPI_X0_MISO
 2817  0000000                   	STY REG
 2818  0000000                   	ENDM
 2819  0000000                   ;------------------------------------------------------------------------------
 2820  0000000                   SPI_READ_NB_RAM MACRO NUM,REG
 2821  0000000                   	SPI_X0_READ_NB_RAM NUM,REG
 2822  0000000                   	ENDM
 2823  0000000                   ;------------------------------------------------------------------------------
 2824  0000000                   SPI_READ_NB_RAM2 MACRO REG
 2825  0000000                   	SPI_X0_READ_NB_RAM2 REG
 2826  0000000                   	ENDM
 2827  0000000                   ;------------------------------------------------------------------------------
 2828  0000000                   SPI_READ_NB_RAM_ILI MACRO NUM,REG
 2829  0000000                   	SPI_X0_READ_NB_RAM_ILI NUM,REG
 2830  0000000                   	ENDM
 2831  0000000                   .ENDIF
 2832  0000000                   
 2833  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\I2C_MACROS.INI.APP"
 2834  0000000                   ;========================================================
 2835  0000000                   ;-----I2C output type define,user can change--------
 2836  0000000                   WITH_OUTPUT_OPEN_DRAIN	EQU 0
 2837  0000000                   
 2838  0000000                   ;----internal pin-----------
 2839  0000000                   I2C_IP00		EQU	00H





 2840  0000000                   I2C_IP01		EQU	01H
 2841  0000000                   I2C_IP02		EQU	02H
 2842  0000000                   I2C_IP03		EQU	03H
 2843  0000000                   I2C_IP04		EQU	04H
 2844  0000000                   I2C_IP05		EQU	05H
 2845  0000000                   I2C_IP06		EQU	06H
 2846  0000000                   I2C_IP07		EQU	07H
 2847  0000000                   
 2848  0000000                   I2C_BP00		EQU	10H
 2849  0000000                   I2C_BP01		EQU	11H
 2850  0000000                   I2C_BP02		EQU	12H
 2851  0000000                   I2C_BP03		EQU	13H
 2852  0000000                   I2C_BP04		EQU	14H
 2853  0000000                   I2C_BP05		EQU	15H
 2854  0000000                   I2C_BP06		EQU	16H
 2855  0000000                   I2C_BP07		EQU	17H
 2856  0000000                   
 2857  0000000                   I2C_BP10		EQU	20H
 2858  0000000                   I2C_BP11		EQU	21H
 2859  0000000                   I2C_BP12		EQU	22H
 2860  0000000                   I2C_BP13		EQU	23H
 2861  0000000                   I2C_BP14		EQU	24H
 2862  0000000                   I2C_BP15		EQU	25H
 2863  0000000                   I2C_BP16		EQU	26H
 2864  0000000                   I2C_BP17		EQU	27H
 2865  0000000                   
 2866  0000000                   I2C_BP20		EQU	30H
 2867  0000000                   I2C_BP21		EQU	31H
 2868  0000000                   I2C_BP22		EQU	32H
 2869  0000000                   I2C_BP23		EQU	33H
 2870  0000000                   I2C_BP24		EQU	34H
 2871  0000000                   I2C_BP25		EQU	35H
 2872  0000000                   I2C_BP26		EQU	36H
 2873  0000000                   I2C_BP27		EQU	37H
 2874  0000000                   
 2875  0000000                   I2C_BP30		EQU	40H
 2876  0000000                   I2C_BP31		EQU	41H
 2877  0000000                   I2C_BP32		EQU	42H
 2878  0000000                   I2C_BP33		EQU	43H
 2879  0000000                   I2C_BP34		EQU	44H
 2880  0000000                   I2C_BP35		EQU	45H
 2881  0000000                   I2C_BP36		EQU	46H
 2882  0000000                   I2C_BP37		EQU	47H
 2883  0000000                   
 2884  0000000                   ;========================================================
 2885  0000000                   I2C_PORT_BASE		EQU	0F80H
 2886  0000000                   I2C_PORT_D_BASE		EQU	0F84H
 2887  0000000                   I2C_PORT_M_BASE		EQU	0F88H
 2888  0000000                   I2C_PORT_EN_BASE	EQU	0F98H
 2889  0000000                   
 2890  0000000                   ;========================================================
 2891  0000000                   ;-----pin define,user can change--------
 2892  0000000                   I2C_X0SCL_PIN		EQU	I2C_BP25
 2893  0000000                   I2C_X0SDA_PIN		EQU	I2C_BP24
 2894  0000000                   
 2895  0000000                   ;-------------X0 2Pin parameter ------------------------
 2896  0000000                   I2C_X0SCL_PIN_VALUE		EQU		1<<(I2C_X0SCL_PIN&0FH)





 2897  0000000                   I2C_X0SCL_PORT_ADDR 	EQU 	I2C_PORT_BASE+(I2C_X0SCL_PIN>>4)-1
 2898  0000000                   I2C_X0SCL_D_ADDR		EQU 	I2C_PORT_D_BASE+(I2C_X0SCL_PIN>>4)-1
 2899  0000000                   I2C_X0SCL_M_ADDR		EQU 	I2C_PORT_M_BASE+(I2C_X0SCL_PIN>>4)-1
 2900  0000000                   
 2901  0000000                   I2C_X0SDA_PIN_VALUE		EQU		1<<(I2C_X0SDA_PIN&0FH)
 2902  0000000                   I2C_X0SDA_PORT_ADDR 	EQU 	I2C_PORT_BASE+(I2C_X0SDA_PIN>>4)-1
 2903  0000000                   I2C_X0SDA_D_ADDR		EQU 	I2C_PORT_D_BASE+(I2C_X0SDA_PIN>>4)-1
 2904  0000000                   I2C_X0SDA_M_ADDR		EQU 	I2C_PORT_M_BASE+(I2C_X0SDA_PIN>>4)-1
 2905  0000000                   ;========================================================
 2906  0000000                   I2C_X0SCL_M_VALUE		EQU 	1<<(I2C_X0SCL_PIN&0FH)
 2907  0000000                   I2C_X0SCL_D_VALUE		EQU 	1<<(I2C_X0SCL_PIN&0FH)
 2908  0000000                   ;--------------------------------------------------------
 2909  0000000                   I2C_X0SDA_M_VALUE		EQU 	1<<(I2C_X0SDA_PIN&0FH)
 2910  0000000                   I2C_X0SDA_D_VALUE		EQU 	1<<(I2C_X0SDA_PIN&0FH)
 2911  0000000                   ;========================================================
 2912  0000000                   
 2913  0000000                   ;================================================================================
 2914  0000000                   ; 	I2C SUBROUTINE
 2915  0000000                   ;================================================================================
 2916  0000000                   I2C_DELAY MACRO
 2917  0000000                   	NOP
 2918  0000000                   	NOP
 2919  0000000                   	NOP
 2920  0000000                   	NOP
 2921  0000000                   	NOP
 2922  0000000                   .IF (SYSTEMCLK.GT.4096000 )
 2923  0000000                   	NOP
 2924  0000000                   	NOP
 2925  0000000                   	NOP
 2926  0000000                   	NOP
 2927  0000000                   	NOP
 2928  0000000                   .IF (SYSTEMCLK.GT.6144000 )	
 2929  0000000                   	NOP
 2930  0000000                   	NOP
 2931  0000000                   	NOP
 2932  0000000                   	NOP
 2933  0000000                   	NOP
 2934  0000000                   .ENDIF
 2935  0000000                   .ENDIF
 2936  0000000                   ENDM
 2937  0000000                   ;--------------------------------------------------------
 2938  0000000                   I2C_X0_SCL_1 MACRO 
 2939  0000000                   ;SCL:0->1
 2940  0000000                   	LDA !I2C_X0SCL_PORT_ADDR
 2941  0000000                   	ORA #I2C_X0SCL_PIN_VALUE
 2942  0000000                   	STA !I2C_X0SCL_PORT_ADDR
 2943  0000000                   	ENDM
 2944  0000000                   ;--------------------------------------------------------
 2945  0000000                   I2C_X0_SCL_0 MACRO
 2946  0000000                   ;SCL:1->0
 2947  0000000                   	LDA !I2C_X0SCL_PORT_ADDR		
 2948  0000000                   	AND #(FFH^I2C_X0SCL_PIN_VALUE)
 2949  0000000                   	STA !I2C_X0SCL_PORT_ADDR 
 2950  0000000                   	ENDM
 2951  0000000                   ;--------------------------------------------------------
 2952  0000000                   I2C_X0_SDA_OUTPUT MACRO
 2953  0000000                   ;SDA: output





 2954  0000000                   	LDA #I2C_X0SDA_D_VALUE
 2955  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 2956  0000000                   	TRB !I2C_X0SDA_M_ADDR
 2957  0000000                   	.ENDIF
 2958  0000000                   	TRB !I2C_X0SDA_D_ADDR
 2959  0000000                   	ENDM
 2960  0000000                   ;--------------------------------------------------------
 2961  0000000                   I2C_X0_SDA_0 MACRO
 2962  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 2963  0000000                   	AND #(FFH^I2C_X0SDA_PIN_VALUE)
 2964  0000000                   	STA !I2C_X0SDA_PORT_ADDR
 2965  0000000                   	ENDM
 2966  0000000                   ;--------------------------------------------------------
 2967  0000000                   I2C_X0_SDA_1 MACRO
 2968  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 2969  0000000                   	ORA #I2C_X0SDA_PIN_VALUE
 2970  0000000                   	STA !I2C_X0SDA_PORT_ADDR
 2971  0000000                   	ENDM
 2972  0000000                   ;--------------------------------------------------------
 2973  0000000                   I2C_X0_SDA_OUTPUT_0 MACRO
 2974  0000000                   	I2C_X0_SDA_OUTPUT
 2975  0000000                   	I2C_X0_SDA_0
 2976  0000000                   	ENDM
 2977  0000000                   ;--------------------------------------------------------
 2978  0000000                   I2C_X0_SDA_OUTPUT_1 MACRO
 2979  0000000                   	I2C_X0_SDA_OUTPUT
 2980  0000000                   	I2C_X0_SDA_1
 2981  0000000                   	ENDM
 2982  0000000                   ;--------------------------------------------------------
 2983  0000000                   I2C_X0_SDA_PULL_HIGH_1	MACRO
 2984  0000000                   ;SDA:pull high input, value 1
 2985  0000000                   	I2C_X0_SDA_1
 2986  0000000                   
 2987  0000000                   	LDA #I2C_X0SDA_D_VALUE
 2988  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 2989  0000000                   	TSB !I2C_X0SDA_M_ADDR
 2990  0000000                   	.ENDIF
 2991  0000000                   	TSB !I2C_X0SDA_D_ADDR
 2992  0000000                   	ENDM
 2993  0000000                   ;========================================================
 2994  0000000                   ;output: SCL output
 2995  0000000                   I2C_X0_INIT_PIN MACRO
 2996  0000000                   ;SCL:  output,init value 1
 2997  0000000                   	I2C_X0_SCL_1
 2998  0000000                   
 2999  0000000                   	LDA #I2C_X0SCL_D_VALUE
 3000  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 3001  0000000                   	TRB !I2C_X0SCL_M_ADDR
 3002  0000000                   	.ELSE
 3003  0000000                   	TSB !I2C_X0SCL_M_ADDR
 3004  0000000                   	.ENDIF
 3005  0000000                   	TRB !I2C_X0SCL_D_ADDR
 3006  0000000                   
 3007  0000000                   ;SDA:  output, init value 1
 3008  0000000                   	I2C_X0_SDA_1
 3009  0000000                   
 3010  0000000                   	LDA #I2C_X0SDA_D_VALUE





 3011  0000000                   	.IF (WITH_OUTPUT_OPEN_DRAIN .EQ. 1)
 3012  0000000                   	TRB !I2C_X0SDA_M_ADDR
 3013  0000000                   	.ELSE
 3014  0000000                   	TSB !I2C_X0SDA_M_ADDR
 3015  0000000                   	.ENDIF
 3016  0000000                   	TRB !I2C_X0SDA_D_ADDR
 3017  0000000                   	ENDM
 3018  0000000                   ;--------------------------------------------------------
 3019  0000000                   ;output: SDA output low,SCL output low
 3020  0000000                   I2C_X0_START MACRO
 3021  0000000                   ;SDA:  output,init value 1
 3022  0000000                   	I2C_X0_SDA_OUTPUT_1
 3023  0000000                   
 3024  0000000                   ;SCL:  output,init value 1
 3025  0000000                   	I2C_X0_SCL_1
 3026  0000000                   	I2C_DELAY
 3027  0000000                   
 3028  0000000                   ;SDA:1->0
 3029  0000000                   	I2C_X0_SDA_0
 3030  0000000                   	I2C_DELAY
 3031  0000000                   
 3032  0000000                   ;SCL:1->0 
 3033  0000000                   	I2C_X0_SCL_0
 3034  0000000                   	ENDM
 3035  0000000                   ;--------------------------------------------------------
 3036  0000000                   ;output: SDA output high,SCL output high
 3037  0000000                   I2C_X0_STOP MACRO
 3038  0000000                   ;SDA: output,0
 3039  0000000                   	I2C_X0_SDA_OUTPUT_0
 3040  0000000                   
 3041  0000000                   ;SCL: output value 1
 3042  0000000                   	I2C_X0_SCL_1
 3043  0000000                   	I2C_DELAY	
 3044  0000000                   
 3045  0000000                   ;SDA:0->1
 3046  0000000                   	I2C_X0_SDA_1
 3047  0000000                   	I2C_DELAY
 3048  0000000                   	ENDM
 3049  0000000                   ;========================================================
 3050  0000000                   ;--------------------------------------------------------
 3051  0000000                   I2C_X0_MOSI_Y MACRO
 3052  0000000                   	TYA
 3053  0000000                   	ASL A
 3054  0000000                   	TAY
 3055  0000000                   	LDA #I2C_X0SDA_PORT_ADDR
 3056  0000000                   	BCC I2C_X0_MOSI_SET_0#
 3057  0000000                   I2C_X0_MOSI_SET_1#:
 3058  0000000                   	ORA #I2C_X0SDA_PIN_VALUE
 3059  0000000                   	BRA I2C_X0_MOSI_NEXT#
 3060  0000000                   I2C_X0_MOSI_SET_0#:
 3061  0000000                   	AND #(FFH^I2C_X0SDA_PIN_VALUE)
 3062  0000000                   I2C_X0_MOSI_NEXT#:
 3063  0000000                   	STA !I2C_X0SDA_PORT_ADDR
 3064  0000000                   	ENDM
 3065  0000000                   ;--------------------------------------------------------
 3066  0000000                   I2C_X0_MOSI_Y_1BIT MACRO
 3067  0000000                   	I2C_X0_MOSI_Y





 3068  0000000                   	I2C_DELAY
 3069  0000000                   	I2C_X0_SCL_1 	
 3070  0000000                   	I2C_DELAY	
 3071  0000000                   	I2C_X0_SCL_0	
 3072  0000000                   	ENDM
 3073  0000000                   ;--------------------------------------------------------
 3074  0000000                   ;input: SCL output low,
 3075  0000000                   ;output:SCL output low, SDA input
 3076  0000000                   ;	ack:acc=01;nack:acc=00
 3077  0000000                   
 3078  0000000                   I2C_X0_MOSI MACRO
 3079  0000000                   	TAY
 3080  0000000                   	I2C_X0_SDA_OUTPUT
 3081  0000000                   
 3082  0000000                   	I2C_X0_MOSI_Y_1BIT
 3083  0000000                   	I2C_X0_MOSI_Y_1BIT
 3084  0000000                   	I2C_X0_MOSI_Y_1BIT
 3085  0000000                   	I2C_X0_MOSI_Y_1BIT
 3086  0000000                   	I2C_X0_MOSI_Y_1BIT
 3087  0000000                   	I2C_X0_MOSI_Y_1BIT
 3088  0000000                   	I2C_X0_MOSI_Y_1BIT
 3089  0000000                   	I2C_X0_MOSI_Y_1BIT
 3090  0000000                   
 3091  0000000                   I2C_X0_MOSI_ACK#:
 3092  0000000                   	I2C_X0_SDA_PULL_HIGH_1
 3093  0000000                   	I2C_DELAY
 3094  0000000                   
 3095  0000000                   ;SCL:9th:0->1
 3096  0000000                   	I2C_X0_SCL_1
 3097  0000000                   	I2C_DELAY
 3098  0000000                   
 3099  0000000                   ;SDA:check ACK
 3100  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 3101  0000000                   	BIT #I2C_X0SDA_PIN_VALUE
 3102  0000000                   	BNE I2C_X0_MOSI_NACK#			; non zero
 3103  0000000                   
 3104  0000000                   	I2C_X0_SCL_0
 3105  0000000                   	LDA #01H
 3106  0000000                   	BRA I2C_X0_MOSI_END#
 3107  0000000                   
 3108  0000000                   I2C_X0_MOSI_NACK#:
 3109  0000000                   	I2C_X0_SCL_0	
 3110  0000000                   	LDA #00H
 3111  0000000                   
 3112  0000000                   I2C_X0_MOSI_END#:		
 3113  0000000                   	ENDM	
 3114  0000000                   ;--------------------------------------------------------
 3115  0000000                   I2C_X0_MISO_Y	MACRO
 3116  0000000                   	LDA !I2C_X0SDA_PORT_ADDR
 3117  0000000                   	BIT #I2C_X0SDA_PIN_VALUE
 3118  0000000                   	BEQ I2C_X0_MISO_0#	
 3119  0000000                   I2C_X0_MISO_1#:
 3120  0000000                   	TYA
 3121  0000000                   	SEC
 3122  0000000                   	ROL A
 3123  0000000                   	TAY
 3124  0000000                   	BRA I2C_X0_MISO_NEXT#





 3125  0000000                   I2C_X0_MISO_0#:
 3126  0000000                   	TYA
 3127  0000000                   	CLC
 3128  0000000                   	ROL A
 3129  0000000                   	TAY
 3130  0000000                   I2C_X0_MISO_NEXT#:
 3131  0000000                   	ENDM
 3132  0000000                   ;--------------------------------------------------------
 3133  0000000                   I2C_X0_MISO_Y_1BIT	MACRO
 3134  0000000                   	I2C_X0_SCL_0
 3135  0000000                   	I2C_DELAY
 3136  0000000                   	I2C_X0_SCL_1
 3137  0000000                   	I2C_DELAY
 3138  0000000                   	I2C_X0_MISO_Y
 3139  0000000                   	ENDM
 3140  0000000                   ;--------------------------------------------------------
 3141  0000000                   ;input: SCL output low,
 3142  0000000                   ;output:SCL output low, SDA output 1
 3143  0000000                   
 3144  0000000                   I2C_X0_MISO MACRO
 3145  0000000                   	I2C_X0_SDA_PULL_HIGH_1
 3146  0000000                   
 3147  0000000                   	LDY #00H
 3148  0000000                   	I2C_X0_MISO_Y_1BIT
 3149  0000000                   	I2C_X0_MISO_Y_1BIT
 3150  0000000                   	I2C_X0_MISO_Y_1BIT
 3151  0000000                   	I2C_X0_MISO_Y_1BIT
 3152  0000000                   	I2C_X0_MISO_Y_1BIT
 3153  0000000                   	I2C_X0_MISO_Y_1BIT
 3154  0000000                   	I2C_X0_MISO_Y_1BIT
 3155  0000000                   	I2C_X0_MISO_Y_1BIT
 3156  0000000                   
 3157  0000000                   	ENDM
 3158  0000000                   ;--------------------------------------------------------
 3159  0000000                   I2C_X0_MISO_ACK MACRO
 3160  0000000                   	I2C_X0_SCL_0
 3161  0000000                   
 3162  0000000                   ;SDA: output0
 3163  0000000                   	I2C_X0_SDA_OUTPUT_0	
 3164  0000000                   	I2C_DELAY
 3165  0000000                   
 3166  0000000                   ;SCL:0->1
 3167  0000000                   	I2C_X0_SCL_1
 3168  0000000                   	I2C_DELAY
 3169  0000000                   
 3170  0000000                   ;SCL:1->0
 3171  0000000                   	I2C_X0_SCL_0
 3172  0000000                   	ENDM
 3173  0000000                   ;--------------------------------------------------------
 3174  0000000                   I2C_X0_MISO_NACK MACRO
 3175  0000000                   ;SCL:1->0
 3176  0000000                   	I2C_X0_SCL_0
 3177  0000000                   
 3178  0000000                   ;SDA: output1
 3179  0000000                   	I2C_X0_SDA_OUTPUT_1
 3180  0000000                   	I2C_DELAY
 3181  0000000                   





 3182  0000000                   ;SCL:0->1
 3183  0000000                   	I2C_X0_SCL_1
 3184  0000000                   	I2C_DELAY
 3185  0000000                   
 3186  0000000                   ;SCL:1->0
 3187  0000000                   	I2C_X0_SCL_0
 3188  0000000                   	ENDM
 3189  0000000                   ;--------------------------------------------------------
 3190  0000000                   ;	ack:acc=01;nack:acc=00
 3191  0000000                   I2C_X0_WRITE_NB_RAM MACRO NUM,REG
 3192  0000000                   	LDX #00H
 3193  0000000                   I2C_X0_WRITE_NB_RAM_LOOP#:
 3194  0000000                   	CPX #NUM
 3195  0000000                   	BNE 3
 3196  0000000                   	JMP I2C_X0_WRITE_NB_RAM_DONE#
 3197  0000000                   	LDA REG,X
 3198  0000000                   	I2C_X0_MOSI
 3199  0000000                   	BEQ I2C_X0_WRITE_NB_RAM_NACK#
 3200  0000000                   	INX
 3201  0000000                   	JMP I2C_X0_WRITE_NB_RAM_LOOP#
 3202  0000000                   I2C_X0_WRITE_NB_RAM_DONE#:
 3203  0000000                   	LDA #01H
 3204  0000000                   	BRA END_I2C_X0_WRITE_NB_RAM#
 3205  0000000                   
 3206  0000000                   I2C_X0_WRITE_NB_RAM_NACK#:
 3207  0000000                   	LDA #00H
 3208  0000000                   
 3209  0000000                   END_I2C_X0_WRITE_NB_RAM#:
 3210  0000000                   	ENDM
 3211  0000000                   ;--------------------------------------------------------
 3212  0000000                   ;	ack:acc=01;nack:acc=00
 3213  0000000                   I2C_X0_WRITE_NB_RAM_ILI MACRO NUM,REG
 3214  0000000                   	LDX #00H
 3215  0000000                   	DEC NUM
 3216  0000000                   I2C_X0_WRITE_NB_RAM_LOOP#:
 3217  0000000                   	CPY NUM
 3218  0000000                   	BNE 3
 3219  0000000                   	JMP I2C_X0_WRITE_NB_RAM_DONE#
 3220  0000000                   	LDA (.LOW.REG),Y
 3221  0000000                   	I2C_X0_MOSI
 3222  0000000                   	BEQ I2C_X0_WRITE_NB_RAM_NACK#
 3223  0000000                   	INY
 3224  0000000                   	JMP I2C_X0_WRITE_NB_RAM_LOOP#
 3225  0000000                   I2C_X0_WRITE_NB_RAM_DONE#:
 3226  0000000                   	LDA #01H
 3227  0000000                   	BRA END_I2C_X0_WRITE_NB_RAM#
 3228  0000000                   
 3229  0000000                   I2C_X0_WRITE_NB_RAM_NACK#:
 3230  0000000                   	LDA #00H
 3231  0000000                   
 3232  0000000                   END_I2C_X0_WRITE_NB_RAM#:
 3233  0000000                   	ENDM
 3234  0000000                   ;--------------------------------------------------------
 3235  0000000                   ;	ack:acc=01;nack:acc=00
 3236  0000000                   I2C_X0_WRITE_NB_RAM2 MACRO REG
 3237  0000000                   	LDX #00H
 3238  0000000                   I2C_X0_WRITE_NB_RAM2_LOOP#:





 3239  0000000                   	CPX REG
 3240  0000000                   	BNE 3
 3241  0000000                   	JMP I2C_X0_WRITE_NB_RAM2_DONE#
 3242  0000000                   	LDA REG+1,X
 3243  0000000                   	I2C_X0_MOSI
 3244  0000000                   	BEQ I2C_X0_WRITE_NB_RAM2_NACK#
 3245  0000000                   	INX
 3246  0000000                   	JMP I2C_X0_WRITE_NB_RAM2_LOOP#
 3247  0000000                   I2C_X0_WRITE_NB_RAM2_DONE#:
 3248  0000000                   	LDA #01H
 3249  0000000                   	BRA END_I2C_X0_WRITE_NB_RAM2#
 3250  0000000                   
 3251  0000000                   I2C_X0_WRITE_NB_RAM2_NACK#:
 3252  0000000                   	LDA #00H
 3253  0000000                   
 3254  0000000                   END_I2C_X0_WRITE_NB_RAM2#:
 3255  0000000                   	ENDM
 3256  0000000                   ;--------------------------------------------------------
 3257  0000000                   I2C_X0_READ_NB_RAM MACRO NUM,REG
 3258  0000000                   	LDX #00H
 3259  0000000                   I2C_X0_READ_NB_RAM_LOOP#:
 3260  0000000                   	CPX #NUM-1
 3261  0000000                   	BNE 3
 3262  0000000                   	JMP END_I2C_X0_READ_NB_RAM#
 3263  0000000                   	I2C_X0_MISO
 3264  0000000                   	I2C_X0_MISO_ACK
 3265  0000000                   	TYA
 3266  0000000                   	STA REG,X
 3267  0000000                   	INX
 3268  0000000                   	JMP I2C_X0_READ_NB_RAM_LOOP#
 3269  0000000                   END_I2C_X0_READ_NB_RAM#:
 3270  0000000                   	I2C_X0_MISO
 3271  0000000                   	I2C_X0_MISO_NACK
 3272  0000000                   	TYA
 3273  0000000                   	STA REG,X
 3274  0000000                   	ENDM
 3275  0000000                   ;--------------------------------------------------------
 3276  0000000                   I2C_X0_READ_NB_RAM_ILI MACRO NUM,REG
 3277  0000000                   	LDY #00H
 3278  0000000                   	DEC NUM
 3279  0000000                   I2C_X0_READ_NB_RAM_LOOP#:
 3280  0000000                   	CPY NUM
 3281  0000000                   	BNE 3
 3282  0000000                   	JMP END_I2C_X0_READ_NB_RAM#
 3283  0000000                   	PHY
 3284  0000000                   	I2C_X0_MISO
 3285  0000000                   	I2C_X0_MISO_ACK
 3286  0000000                   	TYA
 3287  0000000                   	PLY
 3288  0000000                   	STA (.LOW.REG),Y
 3289  0000000                   	INY
 3290  0000000                   	JMP I2C_X0_READ_NB_RAM_LOOP#
 3291  0000000                   END_I2C_X0_READ_NB_RAM#:
 3292  0000000                   	PHY
 3293  0000000                   	I2C_X0_MISO
 3294  0000000                   	I2C_X0_MISO_NACK
 3295  0000000                   	TYA





 3296  0000000                   	STA (.LOW.REG),Y
 3297  0000000                   	PLY
 3298  0000000                   	STA (.LOW.REG),Y
 3299  0000000                   	LDX NUM
 3300  0000000                   	ENDM
 3301  0000000                   ;--------------------------------------------------------
 3302  0000000                   I2C_X0_READ_NB_RAM2 MACRO REG
 3303  0000000                   	LDX #00H
 3304  0000000                   I2C_X0_READ_NB_RAM2_LOOP#:
 3305  0000000                   	INX
 3306  0000000                   	CPX REG
 3307  0000000                   	BNE 3
 3308  0000000                   	JMP END_I2C_X0_READ_NB_RAM2#
 3309  0000000                   	DEX
 3310  0000000                   	I2C_X0_MISO
 3311  0000000                   	I2C_X0_MISO_ACK
 3312  0000000                   	TYA
 3313  0000000                   	STA REG+1,X
 3314  0000000                   	INX
 3315  0000000                   	JMP I2C_X0_READ_NB_RAM2_LOOP#
 3316  0000000                   END_I2C_X0_READ_NB_RAM2#:
 3317  0000000                   	DEX
 3318  0000000                   	I2C_X0_MISO
 3319  0000000                   	I2C_X0_MISO_NACK
 3320  0000000                   	TYA
 3321  0000000                   	STA REG+1,X
 3322  0000000                   	ENDM
 3323  0000000                   ;=====================================================================================
 3324  0000000                   ;=====================================================================================
 3325  0000000                   .IF (I2C_COMMAND_ENABLE .EQ. 1H)
 3326  0000000                   ;output: SCL output
 3327  0000000                   I2C_INIT MACRO
 3328  0000000                    	I2C_X0_INIT_PIN
 3329  0000000                    	ENDM
 3330  0000000                   ;------------------------------------------------------------------------------
 3331  0000000                   ;output: SDA output low,SCL output low
 3332  0000000                   I2C_ON	MACRO 
 3333  0000000                   	I2C_X0_START
 3334  0000000                   	ENDM
 3335  0000000                   ;------------------------------------------------------------------------------
 3336  0000000                   ;output: SDA output high,SCL output high
 3337  0000000                   I2C_OFF	MACRO 
 3338  0000000                   	I2C_X0_STOP
 3339  0000000                   	ENDM
 3340  0000000                   ;------------------------------------------------------------------------------
 3341  0000000                   ;input: SCL output low,
 3342  0000000                   ;output:SCL output low, SDA input
 3343  0000000                   ;	ack:acc=01;nack:acc=00
 3344  0000000                   I2C_WRITE MACRO DATA
 3345  0000000                   	LDA #DATA
 3346  0000000                   	I2C_X0_MOSI
 3347  0000000                   	ENDM
 3348  0000000                   ;------------------------------------------------------------------------------
 3349  0000000                   I2C_WRITE_RAM MACRO REG
 3350  0000000                   	LDA REG
 3351  0000000                   	I2C_X0_MOSI
 3352  0000000                   	ENDM





 3353  0000000                   ;------------------------------------------------------------------------------
 3354  0000000                   I2C_WRITE_NB_RAM MACRO NUM,REG
 3355  0000000                   	I2C_X0_WRITE_NB_RAM NUM,REG
 3356  0000000                   	ENDM
 3357  0000000                   ;------------------------------------------------------------------------------
 3358  0000000                   I2C_WRITE_NB_RAM2 MACRO REG
 3359  0000000                   	I2C_X0_WRITE_NB_RAM2 REG
 3360  0000000                   	ENDM
 3361  0000000                   ;------------------------------------------------------------------------------
 3362  0000000                   I2C_WRITE_NB_RAM_ILI MACRO NUM,REG
 3363  0000000                   	I2C_X0_WRITE_NB_RAM_ILI NUM,REG
 3364  0000000                   	ENDM
 3365  0000000                   ;------------------------------------------------------------------------------
 3366  0000000                   ;input: SCL output low,
 3367  0000000                   ;output:SCL output low, SDA output 1
 3368  0000000                   
 3369  0000000                   I2C_READ_NACK MACRO 
 3370  0000000                   	I2C_X0_MISO
 3371  0000000                   	I2C_X0_MISO_NACK
 3372  0000000                   	TYA
 3373  0000000                   	ENDM
 3374  0000000                   ;------------------------------------------------------------------------------
 3375  0000000                   I2C_READ MACRO 
 3376  0000000                   	I2C_READ_NACK
 3377  0000000                   	ENDM
 3378  0000000                   ;------------------------------------------------------------------------------
 3379  0000000                   I2C_READ_NACK_RAM MACRO REG
 3380  0000000                   	I2C_X0_MISO
 3381  0000000                   	I2C_X0_MISO_NACK
 3382  0000000                   	STY REG
 3383  0000000                   	ENDM
 3384  0000000                   ;------------------------------------------------------------------------------
 3385  0000000                   I2C_READ_RAM MACRO REG
 3386  0000000                   	I2C_READ_NACK_RAM REG
 3387  0000000                   	ENDM
 3388  0000000                   ;------------------------------------------------------------------------------
 3389  0000000                   I2C_READ_ACK MACRO 
 3390  0000000                   	I2C_X0_MISO
 3391  0000000                   	I2C_X0_MISO_ACK
 3392  0000000                   	TYA
 3393  0000000                   	ENDM
 3394  0000000                   ;------------------------------------------------------------------------------
 3395  0000000                   I2C_READ_ACK_RAM MACRO REG
 3396  0000000                   	I2C_X0_MISO
 3397  0000000                   	I2C_X0_MISO_ACK
 3398  0000000                   	STY REG
 3399  0000000                   	ENDM
 3400  0000000                   ;------------------------------------------------------------------------------
 3401  0000000                   I2C_READ_NB_RAM MACRO NUM,REG
 3402  0000000                   	I2C_X0_READ_NB_RAM NUM,REG
 3403  0000000                   	ENDM
 3404  0000000                   ;------------------------------------------------------------------------------
 3405  0000000                   I2C_READ_NB_RAM2 MACRO REG
 3406  0000000                   	I2C_X0_READ_NB_RAM2 REG
 3407  0000000                   	ENDM
 3408  0000000                   ;------------------------------------------------------------------------------
 3409  0000000                   I2C_READ_NB_RAM_ILI MACRO NUM,REG





 3410  0000000                   	I2C_X0_READ_NB_RAM_ILI NUM,REG
 3411  0000000                   	ENDM
 3412  0000000                   .ENDIF
 3413  0000000                   ;=====================================================================================
 3414  0000000                   ;=====================================================================================	
 3415  0000000                   
 3416  0000000                   
 3417  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\ADC_MACROS.INI.APP"
 3418  0000000                   ;========================================================
 3419  0000000                   .EXTERNAL  ADC_CH_PIN_MASK_TABLE
 3420  0000000                   .EXTERNAL  ADC_CH_SETTING_TABLE
 3421  0000000                   
 3422  0000000                   ;----internal pin-----------
 3423  0000000                   
 3424  0000000                   ADC_PORT_D_BASE		EQU 0F85H
 3425  0000000                   ADC_PORT_M_BASE		EQU 0F89H
 3426  0000000                   ADC_ADRC			EQU 0FB0H
 3427  0000000                   ADC_ADR				EQU 0FB2H
 3428  0000000                   ADC_IEF1			EQU 0F91H
 3429  0000000                   ADC_EVF1			EQU 0F93H
 3430  0000000                   
 3431  0000000                   ADC_ADRC_EN			EQU	01H
 3432  0000000                   ADC_ADRC_START		EQU	02H
 3433  0000000                   
 3434  0000000                   ADC_ADRC_BP14_AN	EQU 10H
 3435  0000000                   ADC_ADRC_BP15_AN	EQU 24H
 3436  0000000                   ADC_ADRC_BP16_AN	EQU 48H
 3437  0000000                   ADC_ADRC_BP17_AN	EQU 8CH
 3438  0000000                   
 3439  0000000                   AN_CH1				EQU 00H
 3440  0000000                   AN_CH2				EQU 01H
 3441  0000000                   AN_CH3				EQU 02H
 3442  0000000                   AN_CH4				EQU 03H
 3443  0000000                   
 3444  0000000                   ADC_CH1_PIN_MASK	EQU 10H
 3445  0000000                   ADC_CH2_PIN_MASK	EQU 20H
 3446  0000000                   ADC_CH3_PIN_MASK	EQU 40H
 3447  0000000                   ADC_CH4_PIN_MASK	EQU 80H
 3448  0000000                   ;================================================================================
 3449  0000000                   ; 	ADC SUBROUTINE
 3450  0000000                   ;================================================================================
 3451  0000000                   
 3452  0000000                   ;================================================================================
 3453  0000000                   ; 	USER MACRO - Drive Macro
 3454  0000000                   ;================================================================================
 3455  0000000                   ADC_INIT MACRO CHANNEL
 3456  0000000                   	LDA #CHANNEL
 3457  0000000                   	BEQ ADC_INIT_END#
 3458  0000000                   
 3459  0000000                   	LDX #(CHANNEL-1)
 3460  0000000                   ;set input floating
 3461  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3462  0000000                   	TRB !ADC_PORT_M_BASE
 3463  0000000                   	TSB !ADC_PORT_D_BASE
 3464  0000000                   
 3465  0000000                   ;select channel
 3466  0000000                   	LDA !ADC_ADRC





 3467  0000000                   	AND #03H
 3468  0000000                   	ORA ADC_CH_SETTING_TABLE, X
 3469  0000000                   	STA !ADC_ADRC
 3470  0000000                   	JMP ADC_INIT_END#
 3471  0000000                   
 3472  0000000                   ADC_INIT_END#:
 3473  0000000                   	ENDM
 3474  0000000                   ;------------------------------------------------------------------------------	
 3475  0000000                   ADC_INIT_RAM MACRO CHANNEL_RAM
 3476  0000000                   	LDA CHANNEL_RAM
 3477  0000000                   	BEQ ADC_INIT_END#
 3478  0000000                   
 3479  0000000                   	LDX CHANNEL_RAM
 3480  0000000                   	DEX
 3481  0000000                   ;set input floating
 3482  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3483  0000000                   	TRB !ADC_PORT_M_BASE
 3484  0000000                   	TSB !ADC_PORT_D_BASE
 3485  0000000                   	TSB !ADC_ADRC
 3486  0000000                   
 3487  0000000                   ;select channel
 3488  0000000                   	LDA !ADC_ADRC
 3489  0000000                   	AND #F3H
 3490  0000000                   	ORA ADC_CH_SETTING_TABLE, X
 3491  0000000                   	TSB !ADC_ADRC
 3492  0000000                   ADC_INIT_END#:
 3493  0000000                   	ENDM
 3494  0000000                   ;------------------------------------------------------------------------------	
 3495  0000000                   ADC_DEINIT MACRO CHANNEL
 3496  0000000                   	LDA #CHANNEL
 3497  0000000                   	BEQ ADC_INIT_END#
 3498  0000000                   
 3499  0000000                   	LDX #(CHANNEL-1)
 3500  0000000                   
 3501  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3502  0000000                   	TRB !ADC_ADRC
 3503  0000000                   ADC_INIT_END#:
 3504  0000000                   	ENDM
 3505  0000000                   ;------------------------------------------------------------------------------	
 3506  0000000                   ADC_DEINIT_RAM MACRO CHANNEL_RAM
 3507  0000000                   	LDA CHANNEL_RAM
 3508  0000000                   	BEQ ADC_DEINIT_END#
 3509  0000000                   
 3510  0000000                   	LDX CHANNEL_RAM
 3511  0000000                   	DEX
 3512  0000000                   
 3513  0000000                   	LDA ADC_CH_PIN_MASK_TABLE, X
 3514  0000000                   	TRB !ADC_ADRC
 3515  0000000                   ADC_DEINIT_END#:
 3516  0000000                   	ENDM
 3517  0000000                   ;------------------------------------------------------------------------------
 3518  0000000                   ADC_ON MACRO
 3519  0000000                   	LDA #01H
 3520  0000000                   	TSB !ADRC
 3521  0000000                   	ENDM
 3522  0000000                   ;------------------------------------------------------------------------------
 3523  0000000                   ADC_OFF MACRO





 3524  0000000                   ;LDA !ADC_ADRC
 3525  0000000                   ;AND #0FH
 3526  0000000                   ;STA !ADC_ADRC
 3527  0000000                   
 3528  0000000                   	LDA #04H
 3529  0000000                   	TRB !ADC_IEF1
 3530  0000000                   
 3531  0000000                   	LDA #01H
 3532  0000000                   	TRB !ADC_ADRC
 3533  0000000                   	ENDM
 3534  0000000                   ;------------------------------------------------------------------------------
 3535  0000000                   ADC_INT_EN MACRO
 3536  0000000                   	LDA #04H
 3537  0000000                   	TSB !ADC_IEF1
 3538  0000000                   	ENDM
 3539  0000000                   ;------------------------------------------------------------------------------
 3540  0000000                   ADC_INT_DIS MACRO
 3541  0000000                   	LDA #04H
 3542  0000000                   	TRB !ADC_IEF1
 3543  0000000                   	ENDM
 3544  0000000                   ;------------------------------------------------------------------------------
 3545  0000000                   ADC_CONV MACRO
 3546  0000000                   ; conversion
 3547  0000000                   	LDA #02H
 3548  0000000                   	TSB !ADC_ADRC
 3549  0000000                   	ENDM
 3550  0000000                   ;------------------------------------------------------------------------------
 3551  0000000                   ADC_CONV_RAM MACRO
 3552  0000000                   ; conversion
 3553  0000000                   	LDA #02H
 3554  0000000                   	TSB !ADC_ADRC
 3555  0000000                   	ENDM
 3556  0000000                   ;------------------------------------------------------------------------------
 3557  0000000                   ADC_START_CONV MACRO CHANNEL
 3558  0000000                   	ADC_INIT CHANNEL
 3559  0000000                   ; conversion
 3560  0000000                   	LDA #02H
 3561  0000000                   	TSB !ADC_ADRC
 3562  0000000                   	ENDM
 3563  0000000                   ;------------------------------------------------------------------------------
 3564  0000000                   ADC_START_CONV_RAM MACRO CHANNEL_RAM
 3565  0000000                   	ADC_INIT_RAM CHANNEL_RAM
 3566  0000000                   ; conversion
 3567  0000000                   	LDA #02H
 3568  0000000                   	TSB !ADC_ADRC
 3569  0000000                   	ENDM
 3570  0000000                   ;------------------------------------------------------------------------------
 3571  0000000                   ADC_GET_CONV_DATA_RAM MACRO RAM
 3572  0000000                   	LDA !ADC_ADR
 3573  0000000                   	STA RAM
 3574  0000000                   	ENDM
 3575  0000000                   ;------------------------------------------------------------------------------
 3576  0000000                   ADC_GET_CONV_STATUS_RAM MACRO RAM
 3577  0000000                   	ADC_GET_CONV_STATUS
 3578  0000000                   	STA RAM
 3579  0000000                   	ENDM
 3580  0000000                   ;------------------------------------------------------------------------------





 3581  0000000                   ADC_GET_CONV_STATUS MACRO
 3582  0000000                   	LDA !ADC_ADRC
 3583  0000000                   	BIT #02H
 3584  0000000                   	BNE ADC_IS_BUSY#
 3585  0000000                   	LDA #00H
 3586  0000000                   	BRA ADC_GET_CONV_STATUS_END#
 3587  0000000                   ADC_IS_BUSY#:
 3588  0000000                   	LDA #01H
 3589  0000000                   ADC_GET_CONV_STATUS_END#:
 3590  0000000                   	ENDM
 3591  0000000                   
 3592  0000000                   
 3593  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\UART_MACROS.INI.APP"
 3594  0000000                   ;========================================================
 3595  0000000                   
 3596  0000000                   ;----internal pin-----------
 3597  0000000                   	.IF (WITH_UART_SWITCH .EQ. 0)
 3598  0000000                   UART_RX_PORT_ADDR 	EQU 	BP1R			;BP1
 3599  0000000                   UART_RX_D_ADDR 		EQU 	BP1D
 3600  0000000                   UART_RX_M_ADDR 		EQU 	BP1M
 3601  0000000                   UART_RX_PIN 		EQU 	08H				;BP1.3
 3602  0000000                   
 3603  0000000                   UART_TX_PORT_ADDR 	EQU 	BP1R			;BP1
 3604  0000000                   UART_TX_D_ADDR 		EQU 	BP1D
 3605  0000000                   UART_TX_M_ADDR 		EQU 	BP1M
 3606  0000000                   UART_TX_PIN 		EQU 	04H				;BP1.2
 3607  0000000                   
 3608  0000000                   	.ELSE	
 3609  0000000                   UART_RX_PORT_ADDR 	EQU 	BP3R			;BP3
 3610  0000000                   UART_RX_D_ADDR 		EQU 	BP3D
 3611  0000000                   UART_RX_M_ADDR 		EQU 	BP3M
 3612  0000000                   UART_RX_PIN 		EQU 	02H				;BP3.1
 3613  0000000                   
 3614  0000000                   UART_TX_PORT_ADDR 	EQU 	BP3R			;BP3
 3615  0000000                   UART_TX_D_ADDR 		EQU 	BP3D
 3616  0000000                   UART_TX_M_ADDR 		EQU 	BP3M
 3617  0000000                   UART_TX_PIN 		EQU 	01H				;BP3.0
 3618  0000000                   	.ENDIF
 3619  0000000                   ;================================================================================
 3620  0000000                   ; 	UART SUBROUTINE
 3621  0000000                   ;================================================================================
 3622  0000000                   INIT_UART_TXIO MACRO
 3623  0000000                   	LDA	#UART_TX_PIN 
 3624  0000000                   	TSB	!UART_TX_M_ADDR
 3625  0000000                   	TSB	!UART_TX_PORT_ADDR
 3626  0000000                   	TRB	!UART_TX_D_ADDR
 3627  0000000                   
 3628  0000000                   	LDA #02H						; Defines BP12 or BP30 is the shared function TXD pin
 3629  0000000                   	.IF (WITH_UART_SWITCH .EQ. 0)
 3630  0000000                   	TRB !TXSTS
 3631  0000000                   	.ELSE
 3632  0000000                   	TSB !TXSTS
 3633  0000000                   	.ENDIF
 3634  0000000                   
 3635  0000000                   	LDA #80H
 3636  0000000                   	TSB !UMODE
 3637  0000000                   





 3638  0000000                   	ENDM
 3639  0000000                   ;--------------------------------------------------------
 3640  0000000                   DEINIT_UART_TXIO MACRO
 3641  0000000                   	LDA #80H
 3642  0000000                   	TRB !UMODE
 3643  0000000                   	ENDM
 3644  0000000                   ;--------------------------------------------------------
 3645  0000000                   EN_UART_X0_TX MACRO
 3646  0000000                   	LDA #20H
 3647  0000000                   	TSB !UMODE
 3648  0000000                   	ENDM
 3649  0000000                   ;--------------------------------------------------------
 3650  0000000                   DIS_UART_X0_TX MACRO
 3651  0000000                   	LDA #20H
 3652  0000000                   	TRB !UMODE
 3653  0000000                   	ENDM
 3654  0000000                   ;--------------------------------------------------------
 3655  0000000                   INIT_UART_RXIO MACRO
 3656  0000000                   	LDA	#UART_RX_PIN 
 3657  0000000                   	TSB	!UART_RX_M_ADDR
 3658  0000000                   	TSB	!UART_RX_D_ADDR
 3659  0000000                   
 3660  0000000                   	LDA #02H						; Defines BP13 or BP31 is the shared function RXD pin
 3661  0000000                   	.IF (WITH_UART_SWITCH .EQ. 0)
 3662  0000000                   	TRB !RXSTS
 3663  0000000                   	.ELSE
 3664  0000000                   	TSB !RXSTS
 3665  0000000                   	.ENDIF
 3666  0000000                   
 3667  0000000                   	LDA #40H
 3668  0000000                   	TSB !UMODE
 3669  0000000                   
 3670  0000000                   	ENDM
 3671  0000000                   ;--------------------------------------------------------
 3672  0000000                   DEINIT_UART_RXIO MACRO
 3673  0000000                   	LDA #40H
 3674  0000000                   	TRB !UMODE
 3675  0000000                   	ENDM
 3676  0000000                   ;--------------------------------------------------------
 3677  0000000                   EN_UART_X0_RX MACRO
 3678  0000000                   	LDA #10H
 3679  0000000                   	TSB !UMODE
 3680  0000000                   	ENDM
 3681  0000000                   ;--------------------------------------------------------
 3682  0000000                   DIS_UART_X0_RX MACRO
 3683  0000000                   	LDA #10H
 3684  0000000                   	TRB !UMODE
 3685  0000000                   	ENDM
 3686  0000000                   ;--------------------------------------------------------
 3687  0000000                   SET_UART_BAUD_RATE MACRO BR_VAL
 3688  0000000                   	LDA #.HIGH.(BR_VAL)
 3689  0000000                   	STA !BRDIVH
 3690  0000000                   	LDA #.LOW.(BR_VAL)
 3691  0000000                   	STA !BRDIVL
 3692  0000000                   	ENDM
 3693  0000000                   ;--------------------------------------------------------
 3694  0000000                   UART_X0_CONFIG MACRO





 3695  0000000                   	LDA !UMODE
 3696  0000000                   	AND #11110001B
 3697  0000000                   
 3698  0000000                   ;.IF(PARITY_BIT .EQ. 0)
 3699  0000000                   ;.ENDIF
 3700  0000000                   .IF(PARITY_BIT .EQ. 1)
 3701  0000000                   	ORA #00000100B		; STICK 0 PARITY IF TRANSMITTER
 3702  0000000                   .ENDIF
 3703  0000000                   .IF(PARITY_BIT .EQ. 2)
 3704  0000000                   	ORA #00000110B		; STICK 1 PARITY IF TRANSMITTER
 3705  0000000                   .ENDIF
 3706  0000000                   .IF(PARITY_BIT .EQ. 3)
 3707  0000000                   	ORA #00001000B		; EVEN PARITY
 3708  0000000                   .ENDIF
 3709  0000000                   .IF(PARITY_BIT .EQ. 4)
 3710  0000000                   	ORA #00001010B		; ODD PARITY
 3711  0000000                   .ENDIF
 3712  0000000                   .IF(PARITY_BIT .EQ. 5)
 3713  0000000                   	ORA #00001100B		; STICK 0 PARITY
 3714  0000000                   .ENDIF
 3715  0000000                   .IF(PARITY_BIT .EQ. 6)
 3716  0000000                   	ORA #00001110B		; STICK 1 PARITY
 3717  0000000                   .ENDIF
 3718  0000000                   	STA !UMODE
 3719  0000000                   
 3720  0000000                   	LDA #TDLY_VALUE		; DEFINE THE TRANSFER DELAY TIME
 3721  0000000                   	STA !TDLY
 3722  0000000                   
 3723  0000000                   	ENDM
 3724  0000000                   ;--------------------------------------------------------
 3725  0000000                   SET_UART_TX_DATA	MACRO DAT
 3726  0000000                   	LDA #DAT
 3727  0000000                   	STA !URDATA
 3728  0000000                   	ENDM
 3729  0000000                   ;--------------------------------------------------------
 3730  0000000                   SET_UART_TX_DATA_RAM	MACRO REG
 3731  0000000                   	LDA REG
 3732  0000000                   	STA !URDATA
 3733  0000000                   	ENDM
 3734  0000000                   ;--------------------------------------------------------
 3735  0000000                   SET_UART_TX_DATA_ACC	MACRO
 3736  0000000                   	STA !URDATA
 3737  0000000                   	ENDM
 3738  0000000                   ;--------------------------------------------------------
 3739  0000000                   GET_UART_RX_DATA_RAM	MACRO REG
 3740  0000000                   	LDA !URDATA
 3741  0000000                   	STA REG
 3742  0000000                   	ENDM
 3743  0000000                   ;--------------------------------------------------------
 3744  0000000                   GET_UART_RX_DATA_ACC	MACRO
 3745  0000000                   	LDA !URDATA
 3746  0000000                   	ENDM
 3747  0000000                   ;--------------------------------------------------------
 3748  0000000                   CHK_UART_X0_RX_FIFO_EMPTY MACRO
 3749  0000000                   ;Z=1 not empty
 3750  0000000                   ;Z=0 empty
 3751  0000000                   	LDA #80H





 3752  0000000                   	BIT !RXSTS
 3753  0000000                   CHK_UART_X0_RX_FIFO_EMPTY_END#:
 3754  0000000                   	ENDM
 3755  0000000                   ;--------------------------------------------------------
 3756  0000000                   CHK_UART_X0_RX_FIFO_FULL MACRO
 3757  0000000                   ;Z=1 not full
 3758  0000000                   ;Z=0 full
 3759  0000000                   	LDA #40H
 3760  0000000                   	BIT !RXSTS
 3761  0000000                   CHK_UART_X0_RX_FILL_FULL_END#:
 3762  0000000                   	ENDM
 3763  0000000                   ;--------------------------------------------------------
 3764  0000000                   CHK_UART_X0_TX_FIFO_FULL MACRO
 3765  0000000                   ;Z=1 not full
 3766  0000000                   ;Z=0 full
 3767  0000000                   	LDA #40H
 3768  0000000                   	BIT !TXSTS
 3769  0000000                   CHK_UART_X0_TX_FILL_FULL_END#:
 3770  0000000                   	ENDM
 3771  0000000                   ;--------------------------------------
 3772  0000000                   UART_X0_TX_WRITE_RAM MACRO NUM,REG
 3773  0000000                   ;ACC = NumberOfBytesWrited
 3774  0000000                   	LDX #00H
 3775  0000000                   RELOAD_UART_TX_RAM_LOOP#:
 3776  0000000                   	CHK_UART_X0_TX_FIFO_FULL
 3777  0000000                   	BEQ 3
 3778  0000000                   	JMP RELOAD_UART_TX_RAM_FULL#
 3779  0000000                   
 3780  0000000                   	CPX #NUM
 3781  0000000                   	BNE 3
 3782  0000000                   	JMP RELOAD_UART_TX_RAM_DONE#
 3783  0000000                   
 3784  0000000                   	LDA REG,X
 3785  0000000                   	SET_UART_TX_DATA_ACC
 3786  0000000                   	INX
 3787  0000000                   	JMP RELOAD_UART_TX_RAM_LOOP#
 3788  0000000                   
 3789  0000000                   RELOAD_UART_TX_RAM_DONE#:
 3790  0000000                   	BRA END_RELOAD_UART_TX_RAM#
 3791  0000000                   RELOAD_UART_TX_RAM_FULL#:
 3792  0000000                   END_RELOAD_UART_TX_RAM#:
 3793  0000000                   	TXA
 3794  0000000                   	ENDM
 3795  0000000                   ;--------------------------------------
 3796  0000000                   UART_X0_TX_WRITE_RAM_ILI MACRO NUM_RAM,REG
 3797  0000000                   ;ACC = NumberOfBytesWrited
 3798  0000000                   	LDY #00H
 3799  0000000                   RELOAD_UART_TX_RAM_LOOP#:
 3800  0000000                   	CHK_UART_X0_TX_FIFO_FULL
 3801  0000000                   	BEQ 3
 3802  0000000                   	JMP RELOAD_UART_TX_RAM_FULL#
 3803  0000000                   
 3804  0000000                   	CPY NUM_RAM
 3805  0000000                   	BNE 3
 3806  0000000                   	JMP RELOAD_UART_TX_RAM_DONE#
 3807  0000000                   
 3808  0000000                   	LDA (.LOW.REG),Y





 3809  0000000                   	SET_UART_TX_DATA_ACC
 3810  0000000                   	INY
 3811  0000000                   	JMP RELOAD_UART_TX_RAM_LOOP#
 3812  0000000                   
 3813  0000000                   RELOAD_UART_TX_RAM_DONE#:
 3814  0000000                   	BRA END_RELOAD_UART_TX_RAM#
 3815  0000000                   RELOAD_UART_TX_RAM_FULL#:
 3816  0000000                   END_RELOAD_UART_TX_RAM#:
 3817  0000000                   	TYA
 3818  0000000                   	ENDM
 3819  0000000                   ;--------------------------------------------------------
 3820  0000000                   UART_X0_RX_READ_RAM MACRO NUM,REG
 3821  0000000                   ; Returns the number of bytes to be received.
 3822  0000000                   ; ACC = NumberOfBytesRead
 3823  0000000                   	LDX #00H
 3824  0000000                   READ_UART_RX_RAM_LOOP#:
 3825  0000000                   	CHK_UART_X0_RX_FIFO_EMPTY
 3826  0000000                   	BEQ 3
 3827  0000000                   	JMP READ_UART_RX_RAM_EMPTY#
 3828  0000000                   
 3829  0000000                   	CPX #NUM
 3830  0000000                   	BNE 3
 3831  0000000                   	JMP READ_UART_RX_RAM_DONE#
 3832  0000000                   
 3833  0000000                   	GET_UART_RX_DATA_ACC
 3834  0000000                   	STA REG,X
 3835  0000000                   	INX
 3836  0000000                   	JMP READ_UART_RX_RAM_LOOP#
 3837  0000000                   
 3838  0000000                   READ_UART_RX_RAM_DONE#:
 3839  0000000                   	BRA END_READ_UART_RX_RAM#
 3840  0000000                   READ_UART_RX_RAM_EMPTY#:
 3841  0000000                   END_READ_UART_RX_RAM#:
 3842  0000000                   	TXA
 3843  0000000                   	ENDM
 3844  0000000                   ;--------------------------------------------------------
 3845  0000000                   UART_X0_RX_READ_RAM_ILI MACRO NUM_RAM,REG
 3846  0000000                   ; Returns the number of bytes to be received.
 3847  0000000                   ; ACC = NumberOfBytesRead
 3848  0000000                   	LDY #00H
 3849  0000000                   READ_UART_RX_RAM_LOOP#:
 3850  0000000                   	CHK_UART_X0_RX_FIFO_EMPTY
 3851  0000000                   	BEQ 3
 3852  0000000                   	JMP READ_UART_RX_RAM_EMPTY#
 3853  0000000                   
 3854  0000000                   	CPY NUM_RAM
 3855  0000000                   	BNE 3
 3856  0000000                   	JMP READ_UART_RX_RAM_DONE#
 3857  0000000                   
 3858  0000000                   	GET_UART_RX_DATA_ACC
 3859  0000000                   	STA (.LOW.REG),Y
 3860  0000000                   	INY
 3861  0000000                   	JMP READ_UART_RX_RAM_LOOP#
 3862  0000000                   
 3863  0000000                   READ_UART_RX_RAM_DONE#:
 3864  0000000                   	BRA END_READ_UART_RX_RAM#
 3865  0000000                   READ_UART_RX_RAM_EMPTY#:





 3866  0000000                   END_READ_UART_RX_RAM#:
 3867  0000000                   	TYA
 3868  0000000                   	ENDM
 3869  0000000                   ;=====================================================================================
 3870  0000000                   ;=====================================================================================
 3871  0000000                   UART_INIT MACRO
 3872  0000000                   .IF (WITH_UART_TX .EQ. 1)
 3873  0000000                   	INIT_UART_TXIO
 3874  0000000                   .ENDIF
 3875  0000000                   
 3876  0000000                   .IF (WITH_UART_RX .EQ. 1)	
 3877  0000000                   	INIT_UART_RXIO
 3878  0000000                   .ENDIF
 3879  0000000                   
 3880  0000000                   	SET_UART_BAUD_RATE UART_BAUDRATE_DIVIDER
 3881  0000000                   	UART_X0_CONFIG
 3882  0000000                   	ENDM
 3883  0000000                   ;------------------------------------------------------------------------------
 3884  0000000                   UART_DEINIT MACRO
 3885  0000000                   .IF (WITH_UART_TX .EQ. 1)
 3886  0000000                   	DEINIT_UART_TXIO
 3887  0000000                   .ENDIF
 3888  0000000                   
 3889  0000000                   .IF (WITH_UART_RX .EQ. 1)	
 3890  0000000                   	DEINIT_UART_RXIO
 3891  0000000                   .ENDIF
 3892  0000000                   	ENDM
 3893  0000000                   ;------------------------------------------------------------------------------
 3894  0000000                   EN_UART_TX MACRO
 3895  0000000                   	EN_UART_X0_TX
 3896  0000000                   	ENDM
 3897  0000000                   ;------------------------------------------------------------------------------
 3898  0000000                   DIS_UART_TX MACRO
 3899  0000000                   	DIS_UART_X0_TX
 3900  0000000                   	ENDM
 3901  0000000                   ;------------------------------------------------------------------------------
 3902  0000000                   EN_UART_RX MACRO
 3903  0000000                   	EN_UART_X0_RX
 3904  0000000                   	ENDM
 3905  0000000                   ;------------------------------------------------------------------------------
 3906  0000000                   DIS_UART_RX MACRO
 3907  0000000                   	DIS_UART_X0_RX
 3908  0000000                   	ENDM
 3909  0000000                   ;------------------------------------------------------------------------------
 3910  0000000                   SET_TX_INT_NUM MACRO NUM
 3911  0000000                   	LDA #0FH
 3912  0000000                   	TRB !URTHD
 3913  0000000                   
 3914  0000000                   	LDA #NUM
 3915  0000000                   	TSB !URTHD
 3916  0000000                   	ENDM
 3917  0000000                   ;------------------------------------------------------------------------------
 3918  0000000                   SET_TX_INT_NUM_RAM MACRO NUM_RAM
 3919  0000000                   	LDA #0FH
 3920  0000000                   	TRB !URTHD
 3921  0000000                   
 3922  0000000                   	LDA NUM_RAM





 3923  0000000                   	AND #0FH
 3924  0000000                   	ORA !URTHD
 3925  0000000                   	STA !URTHD
 3926  0000000                   	ENDM
 3927  0000000                   ;------------------------------------------------------------------------------
 3928  0000000                   SET_RX_INT_NUM MACRO NUM
 3929  0000000                   	LDA #F0H
 3930  0000000                   	TRB !URTHD
 3931  0000000                   
 3932  0000000                   	LDA #(NUM << 4)
 3933  0000000                   	TSB !URTHD
 3934  0000000                   	ENDM
 3935  0000000                   ;------------------------------------------------------------------------------
 3936  0000000                   SET_RX_INT_NUM_RAM MACRO NUM_RAM
 3937  0000000                   	LDA #F0H
 3938  0000000                   	TRB !URTHD
 3939  0000000                   
 3940  0000000                   	LDA NUM_RAM
 3941  0000000                   	ASL A
 3942  0000000                   	ASL A
 3943  0000000                   	ASL A
 3944  0000000                   	ASL A
 3945  0000000                   	ORA !URTHD
 3946  0000000                   	STA !URTHD
 3947  0000000                   	ENDM
 3948  0000000                   ;------------------------------------------------------------------------------
 3949  0000000                   UART_RESET_TX_FIFO MACRO
 3950  0000000                   	LDA #01H
 3951  0000000                   	TSB !TXSTS		; Reset TX FIFO
 3952  0000000                   	ENDM
 3953  0000000                   ;------------------------------------------------------------------------------
 3954  0000000                   UART_RESET_RX_FIFO MACRO
 3955  0000000                   	LDA #01H
 3956  0000000                   	TSB !RXSTS		; Reset RX FIFO
 3957  0000000                   	ENDM
 3958  0000000                   ;------------------------------------------------------------------------------
 3959  0000000                   CHK_UART_RX_FIFO_EMPTY MACRO
 3960  0000000                   	CHK_UART_X0_RX_FIFO_EMPTY
 3961  0000000                   	ENDM
 3962  0000000                   ;------------------------------------------------------------------------------
 3963  0000000                   CHK_UART_RX_FIFO_FULL MACRO
 3964  0000000                   	CHK_UART_X0_RX_FIFO_FULL
 3965  0000000                   	ENDM
 3966  0000000                   ;------------------------------------------------------------------------------	
 3967  0000000                   CHK_UART_TX_FIFO_FULL MACRO
 3968  0000000                   	CHK_UART_X0_TX_FIFO_FULL
 3969  0000000                   	ENDM
 3970  0000000                   ;------------------------------------------------------------------------------
 3971  0000000                   UART_WRITE_ONE_BYTE_RAM MACRO REG
 3972  0000000                   	SET_UART_TX_DATA_RAM REG
 3973  0000000                   	ENDM
 3974  0000000                   ;------------------------------------------------------------------------------
 3975  0000000                   UART_WRITE_ONE_BYTE MACRO VAL	
 3976  0000000                   	SET_UART_TX_DATA VAL
 3977  0000000                   	ENDM
 3978  0000000                   ;------------------------------------------------------------------------------
 3979  0000000                   UART_READ_ONE_BYTE MACRO





 3980  0000000                   	GET_UART_RX_DATA_ACC
 3981  0000000                   	ENDM
 3982  0000000                   ;------------------------------------------------------------------------------
 3983  0000000                   UART_READ_ONE_BYTE_RAM MACRO REG
 3984  0000000                   	GET_UART_RX_DATA_RAM REG
 3985  0000000                   	ENDM
 3986  0000000                   ;------------------------------------------------------------------------------
 3987  0000000                   UART_WRITE_DATA_RAM MACRO LEN, PADDR
 3988  0000000                   	UART_X0_TX_WRITE_RAM LEN, PADDR
 3989  0000000                   	ENDM
 3990  0000000                   ;------------------------------------------------------------------------------
 3991  0000000                   UART_READ_DATA_RAM MACRO LEN, PADDR
 3992  0000000                   	UART_X0_RX_READ_RAM LEN, PADDR
 3993  0000000                   	ENDM
 3994  0000000                   ;------------------------------------------------------------------------------
 3995  0000000                   
 3996  0000000                   
 3997  0000000                   
 3998  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\MACRO_SYSTEM_INIT.INI.APP"
 3999  0000000                   	SYMBOLS
 4000  0000000                   	LINKLIST
 4001  0000000                   	DEBUG  	ASM
 4002  0000000                   	LINEAR	ON
 4003  0000000                   	LONGA	OFF
 4004  0000000                   	LONGI	OFF
 4005  0000000                   
 4006  0000000                   	EXTERN	ADD_CHECKSUM_LIB
 4007  0000000                   	EXTERN	LEAKPROOF_SETTING_FUNC
 4008  0000000                   ;==============================================================================
 4009  0000000                   ; SYSTEM INIT Routine Macros
 4010  0000000                   ;==============================================================================
 4011  0000000                   SYSTEM_INIT_PROCEDURE MACRO
 4012  0000000                       SYSTEM_INIT_PROCEDURE_N589A
 4013  0000000                   	ENDM
 4014  0000000                   ;------------------------------------------------------------------------------
 4015  0000000                   SYSTEM_INIT_PROCEDURE_N589A MACRO
 4016  0000000                   .IF	(MAINBODY='A960')
 4017  0000000                   	SYSTEM_INIT_PROCEDURE_N589A900
 4018  0000000                   .ENDIF
 4019  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4020  0000000                   	SYSTEM_INIT_PROCEDURE_N589A340
 4021  0000000                   .ENDIF
 4022  0000000                   	ENDM 
 4023  0000000                   ;----------------------------------------------------------------
 4024  0000000                   SYSTEM_INIT_PROCEDURE_N589A340 MACRO
 4025  0000000                   	LDA #E3H
 4026  0000000                   	STA	!CFGULK
 4027  0000000                   	LDA #97H
 4028  0000000                   	STA !CFGULK
 4029  0000000                   	LDA #A2H
 4030  0000000                   	STA !CFGULK
 4031  0000000                   
 4032  0000000                   CHECK_CFGULK#:	
 4033  0000000                   	LDA !CFGULK
 4034  0000000                   	BIT #01H
 4035  0000000                   	BEQ CHECK_CFGULK#
 4036  0000000                   





 4037  0000000                   ; shared ram allocation
 4038  0000000                   	LDA #.LOW.(SHM_RAM_BEGIN >> 4)
 4039  0000000                   	STA	!SYSCFG2
 4040  0000000                   	LDA #.LOW.(SHM_RAM_END >> 4)
 4041  0000000                   	STA	!SYSCFG1
 4042  0000000                   
 4043  0000000                   ; HIRC clock allocation
 4044  0000000                   	LDA #.LOW.(HIRC_CLK_6502)
 4045  0000000                   	STA !SYSCFG3
 4046  0000000                   	LDA #(((HIRC_CLK_6502 & 0300H) >> 8) + ((HIRC_CLK_HWE & 0300H) >> 4))
 4047  0000000                   	STA !SYSCFG4
 4048  0000000                   	LDA #.LOW.(HIRC_CLK_HWE)
 4049  0000000                   	STA !SYSCFG5
 4050  0000000                   
 4051  0000000                   ; functional configuration
 4052  0000000                   	STZ !SYSCFG6
 4053  0000000                   
 4054  0000000                   ; BP20-23
 4055  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4056  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4057  0000000                   	LDA #01H
 4058  0000000                   	TSB !SYSCFG6
 4059  0000000                   .ENDIF
 4060  0000000                   .ENDIF
 4061  0000000                   
 4062  0000000                   ; BP24-27
 4063  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C080').OR.(PARTNO='N589C120').OR.(PARTNO='N589C170').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D080').OR.(PARTNO='N589D081').OR.(PARTNO='N589D120').OR.(PARTNO='N589D121').OR.(PARTNO='N589D170').OR.(PARTNO='N589D171').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4064  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
 4065  0000000                   	LDA #02H
 4066  0000000                   	TSB !SYSCFG6
 4067  0000000                   .ENDIF
 4068  0000000                   .ENDIF
 4069  0000000                   
 4070  0000000                   ; BP3
 4071  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4072  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4073  0000000                   	LDA #04H
 4074  0000000                   	TSB !SYSCFG6
 4075  0000000                   .ENDIF
 4076  0000000                   .ENDIF
 4077  0000000                   
 4078  0000000                   ; BP0_PWM
 4079  0000000                   .IF (PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4080  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='SOP8')
 4081  0000000                   	LDA #08H
 4082  0000000                   	TSB !SYSCFG6
 4083  0000000                   .ENDIF
 4084  0000000                   .ENDIF
 4085  0000000                   
 4086  0000000                   ; BP1_PWM
 4087  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340')
 4088  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
 4089  0000000                   	LDA #08H
 4090  0000000                   	TSB !SYSCFG6
 4091  0000000                   .ENDIF
 4092  0000000                   .ENDIF
 4093  0000000                   





 4094  0000000                   ; SPIO
 4095  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340').OR.(PARTNO='N589C200').OR.(PARTNO='N589C250').OR.(PARTNO='N589C340').OR.(PARTNO='N589D200').OR.(PARTNO='N589D250').OR.(PARTNO='N589D340').OR.(PARTNO='N589D081').OR.(PARTNO='N589D121').OR.(PARTNO='N589D171').OR.(PARTNO='N589D201').OR.(PARTNO='N589D251').OR.(PARTNO='N589D341').OR.(PARTNO='N589D481')
 4096  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28').OR.(SUBTYPE='SOP20').OR.(SUBTYPE='TSSOP20')
 4097  0000000                   	LDA #10H
 4098  0000000                   	TSB !SYSCFG6
 4099  0000000                   .ENDIF
 4100  0000000                   .ENDIF
 4101  0000000                   
 4102  0000000                   ; IR-Wakeup & LRC
 4103  0000000                   	LDA #60H
 4104  0000000                   	TSB !SYSCFG6
 4105  0000000                   
 4106  0000000                   ; ADC
 4107  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340')
 4108  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP28')
 4109  0000000                   	LDA #80H
 4110  0000000                   	TSB !SYSCFG6
 4111  0000000                   .ENDIF
 4112  0000000                   .ENDIF
 4113  0000000                   
 4114  0000000                   ; FMC
 4115  0000000                   	LDA #SYS_PQ
 4116  0000000                   	STA !SYSCFG7
 4117  0000000                   
 4118  0000000                   ; LDO33
 4119  0000000                   .IF (PARTNO='N589A080').OR.(PARTNO='N589A150').OR.(PARTNO='N589A200').OR.(PARTNO='N589A280').OR.(PARTNO='N589B080').OR.(PARTNO='N589B120').OR.(PARTNO='N589B170').OR.(PARTNO='N589B200').OR.(PARTNO='N589B250').OR.(PARTNO='N589B340')
 4120  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4121  0000000                   	LDA #01H
 4122  0000000                   	TSB !SYSCFG7
 4123  0000000                   .ENDIF
 4124  0000000                   .ENDIF
 4125  0000000                   
 4126  0000000                   	STZ !CFGULK
 4127  0000000                   
 4128  0000000                   	ENDM
 4129  0000000                   
 4130  0000000                   ;----------------------------------------------------------------
 4131  0000000                   SYSTEM_INIT_PROCEDURE_N589A900 MACRO
 4132  0000000                   	LDA #E3H
 4133  0000000                   	STA	!CFGULK
 4134  0000000                   	LDA #97H
 4135  0000000                   	STA !CFGULK
 4136  0000000                   	LDA #A2H
 4137  0000000                   	STA !CFGULK
 4138  0000000                   
 4139  0000000                   CHECK_CFGULK#:	
 4140  0000000                   	LDA !CFGULK
 4141  0000000                   	BIT #01H
 4142  0000000                   	BEQ CHECK_CFGULK#
 4143  0000000                   
 4144  0000000                   ; shared ram allocation
 4145  0000000                   	LDA #.LOW.(SHM_RAM_BEGIN >> 4)
 4146  0000000                   	STA	!SYSCFG2
 4147  0000000                   	LDA #.LOW.(SHM_RAM_END >> 4)
 4148  0000000                   	STA	!SYSCFG1
 4149  0000000                   
 4150  0000000                   ; HIRC clock allocation





 4151  0000000                   	LDA #.LOW.(HIRC_CLK_6502)
 4152  0000000                   	STA !SYSCFG3
 4153  0000000                   	LDA #(((HIRC_CLK_6502 & 0300H) >> 8) + ((HIRC_CLK_HWE & 0300H) >> 4))
 4154  0000000                   	STA !SYSCFG4
 4155  0000000                   	LDA #.LOW.(HIRC_CLK_HWE)
 4156  0000000                   	STA !SYSCFG5
 4157  0000000                   
 4158  0000000                   ; functional configuration
 4159  0000000                   	STZ !SYSCFG6
 4160  0000000                   
 4161  0000000                   ; BP20-23
 4162  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4163  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
 4164  0000000                   	LDA #01H
 4165  0000000                   	TSB !SYSCFG6
 4166  0000000                   .ENDIF
 4167  0000000                   .ENDIF
 4168  0000000                   
 4169  0000000                   ; BP24-27
 4170  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
 4171  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4172  0000000                   	LDA #02H
 4173  0000000                   	TSB !SYSCFG6
 4174  0000000                   .ENDIF
 4175  0000000                   .ENDIF
 4176  0000000                   
 4177  0000000                   ; BP3
 4178  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
 4179  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48')
 4180  0000000                   	LDA #04H
 4181  0000000                   	TSB !SYSCFG6
 4182  0000000                   .ENDIF
 4183  0000000                   .ENDIF
 4184  0000000                   
 4185  0000000                   ; SPIO
 4186  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D960')
 4187  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20')
 4188  0000000                   	LDA #10H
 4189  0000000                   	TSB !SYSCFG6
 4190  0000000                   .ENDIF
 4191  0000000                   .ENDIF
 4192  0000000                   
 4193  0000000                   ; IR-Wakeup & LRC
 4194  0000000                   	LDA #60H
 4195  0000000                   	TSB !SYSCFG6
 4196  0000000                   
 4197  0000000                   ; ADC
 4198  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4199  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='TSSOP20')
 4200  0000000                   	LDA #80H
 4201  0000000                   	TSB !SYSCFG6
 4202  0000000                   .ENDIF
 4203  0000000                   .ENDIF
 4204  0000000                   
 4205  0000000                   ; FMC
 4206  0000000                   	LDA #SYS_PQ
 4207  0000000                   	STA !SYSCFG8





 4208  0000000                   
 4209  0000000                   ; UART
 4210  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4211  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='SOP14')
 4212  0000000                   	LDA #01H
 4213  0000000                   	TSB !SYSCFG7
 4214  0000000                   .ENDIF
 4215  0000000                   .ENDIF
 4216  0000000                   
 4217  0000000                   ; Serial LED
 4218  0000000                   .IF (PARTNO='N589A400').OR.(PARTNO='N589A600').OR.(PARTNO='N589A900').OR.(PARTNO='N589B480').OR.(PARTNO='N589B480N').OR.(PARTNO='N589B650').OR.(PARTNO='N589B960').OR.(PARTNO='N589C480').OR.(PARTNO='N589C650').OR.(PARTNO='N589C960').OR.(PARTNO='N589D650').OR.(PARTNO='N589D650N').OR.(PARTNO='N589D960').OR.(PARTNO='N589D960N')
 4219  0000000                   .IF (SUBTYPE='UNDEFINE').OR.(SUBTYPE='LQFP48').OR.(SUBTYPE='TSSOP20').OR.(SUBTYPE='SOP14').OR.(SUBTYPE='SOP8')
 4220  0000000                   	LDA #02H
 4221  0000000                   	TSB !SYSCFG7
 4222  0000000                   .ENDIF
 4223  0000000                   .ENDIF
 4224  0000000                   
 4225  0000000                   	STZ !CFGULK
 4226  0000000                   
 4227  0000000                   	ENDM
 4228  0000000                   ;==============================================================================
 4229  0000000                   ; IO INIT Routine Macros
 4230  0000000                   ;==============================================================================	
 4231  0000000                   IO_INIT_PROCEDURE MACRO
 4232  0000000                   ;prevent unopened pin leakage
 4233  0000000                   	LEAKPROOF_SETTING
 4234  0000000                   
 4235  0000000                   	ENDM
 4236  0000000                   ;------------------------------------------------------------------------------	
 4237  0000000                   LEAKPROOF_SETTING MACRO
 4238  0000000                   	JSR LEAKPROOF_SETTING_FUNC
 4239  0000000                   	ENDM
 4240  0000000                   ;==============================================================================
 4241  0000000                   ; Unique-ID
 4242  0000000                   ;==============================================================================	
 4243  0000000                   GET_UNIQUE_ID MACRO RAM
 4244  0000000                   ; The Unique-ID format of these 51 bits are: 
 4245  0000000                   ; -----xxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx xxxxxxxx
 4246  0000000                   	LDA !IMAGEP00
 4247  0000000                   	STA RAM
 4248  0000000                   	LDA !IMAGEP01
 4249  0000000                   	STA RAM+1
 4250  0000000                   	LDA !IMAGEP02
 4251  0000000                   	STA RAM+2
 4252  0000000                   	LDA !IMAGEP03
 4253  0000000                   	STA RAM+3
 4254  0000000                   	LDA !IMAGEP10
 4255  0000000                   	STA RAM+4
 4256  0000000                   	LDA !IMAGEP11
 4257  0000000                   	STA RAM+5
 4258  0000000                   	LDA !IMAGEP12
 4259  0000000                   	STA RAM+6
 4260  0000000                   
 4261  0000000                   	ENDM
 4262  0000000                   ;------------------------------------------------------------------------------
 4263  0000000                   ; Checksum
 4264  0000000                   ;------------------------------------------------------------------------------





 4265  0000000                   ADD_CHECKSUM MACRO
 4266  0000000                   	JSR ADD_CHECKSUM_LIB
 4267  0000000                   	ENDM
 4268  0000000                   
 4269  0000000                   ;----------------------------------------------------------------
 4270  0000000                   GET_CHECKSUM MACRO
 4271  0000000                   	PSF_RESPONSE_LIMIT
 4272  0000000                   	PHP
 4273  0000000                   	SEI
 4274  0000000                   	ADD_CHECKSUM
 4275  0000000                   	PLP
 4276  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4277  0000000                   	ENDM
 4278  0000000                   ;----------------------------------------------------------------
 4279  0000000                   CHECKSUM MACRO
 4280  0000000                   	PSF_RESPONSE_LIMIT
 4281  0000000                   	PHP
 4282  0000000                   	SEI
 4283  0000000                   
 4284  0000000                   	ADD_CHECKSUM
 4285  0000000                   
 4286  0000000                   	LDA	#.high.CHECKSUM_33TH
 4287  0000000                   	STA	<CHECKSUM_ADDR1
 4288  0000000                   	LDA #.low.CHECKSUM_33TH
 4289  0000000                   	STA <CHECKSUM_ADDR
 4290  0000000                   
 4291  0000000                   	CLC
 4292  0000000                   	LDA (<CHECKSUM_ADDR)
 4293  0000000                   	ADC <CHECK_RESULT
 4294  0000000                   	STA <CHECK_RESULT
 4295  0000000                   	INC CHECKSUM_ADDR
 4296  0000000                   	LDA (<CHECKSUM_ADDR)
 4297  0000000                   	ADC <CHECK_RESULT+1
 4298  0000000                   	STA <CHECK_RESULT+1
 4299  0000000                   
 4300  0000000                   	PLP
 4301  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4302  0000000                   	ENDM
 4303  0000000                   ;----------------------------------------------------------------
 4304  0000000                   CHECKSUM_VERIFY MACRO JUMP_ADDR
 4305  0000000                   	CHECKSUM
 4306  0000000                   	LDA <CHECK_RESULT
 4307  0000000                   	BEQ 3
 4308  0000000                   	JMP JUMP_ADDR
 4309  0000000                   	LDA <CHECK_RESULT+1
 4310  0000000                   	BEQ 3
 4311  0000000                   	JMP JUMP_ADDR
 4312  0000000                   	ENDM
 4313  0000000                   
 4314  0000000                   ;------------------------------------------------------------------------------
 4315  0000000                   ; Output 1KHz Tone
 4316  0000000                   ;
 4317  0000000                   ; REG.Affected: ACC, X, Y
 4318  0000000                   ;------------------------------------------------------------------------------
 4319  0000000                   BP00	EQU 00H	
 4320  0000000                   BP01	EQU 01H	
 4321  0000000                   BP02	EQU 02H	





 4322  0000000                   BP03	EQU 03H	
 4323  0000000                   BP04	EQU 04H	
 4324  0000000                   BP05	EQU 05H	
 4325  0000000                   BP06	EQU 06H	
 4326  0000000                   BP07	EQU 07H	
 4327  0000000                   BP10	EQU 10H	
 4328  0000000                   BP11	EQU 11H	
 4329  0000000                   BP12	EQU 12H	
 4330  0000000                   BP13	EQU 13H	
 4331  0000000                   BP14	EQU 14H	
 4332  0000000                   BP15	EQU 15H	
 4333  0000000                   BP16	EQU 16H	
 4334  0000000                   BP17	EQU 17H	
 4335  0000000                   BP20	EQU 20H	
 4336  0000000                   BP21	EQU 21H	
 4337  0000000                   BP22	EQU 22H	
 4338  0000000                   BP23	EQU 23H	
 4339  0000000                   BP24	EQU 24H	
 4340  0000000                   BP25	EQU 25H	
 4341  0000000                   BP26	EQU 26H	
 4342  0000000                   BP27	EQU 27H	
 4343  0000000                   BP30	EQU 30H	
 4344  0000000                   BP31	EQU 31H	
 4345  0000000                   BP32	EQU 32H	
 4346  0000000                   BP33	EQU 33H	
 4347  0000000                   BP34	EQU 34H	
 4348  0000000                   BP35	EQU 35H	
 4349  0000000                   BP36	EQU 36H	
 4350  0000000                   BP37	EQU 37H
 4351  0000000                   ;----------------------------------------------------------------
 4352  0000000                   OUT1KHZTONE MACRO PORT, TIMES
 4353  0000000                   	PSF_RESPONSE_LIMIT
 4354  0000000                   	PHP
 4355  0000000                   	SEI
 4356  0000000                   	LDA <0
 4357  0000000                   	PHA
 4358  0000000                   	LDA <1
 4359  0000000                   	PHA
 4360  0000000                   	LDA <2
 4361  0000000                   	PHA
 4362  0000000                   	BRA xGET_PORTPIN#
 4363  0000000                   
 4364  0000000                   .ifndef xpintable_
 4365  0000000                   xPINOUT_TABLE:
 4366  0000000                   xPINMODE_TABLE01:
 4367  0000000                   	DB 01H
 4368  0000000                   	DB 02H
 4369  0000000                   	DB 04H
 4370  0000000                   	DB 08H
 4371  0000000                   	DB 10H
 4372  0000000                   	DB 20H
 4373  0000000                   	DB 40H
 4374  0000000                   	DB 80H
 4375  0000000                   xpintable_:
 4376  0000000                   .endif
 4377  0000000                   
 4378  0000000                   xGET_PORTPIN#:





 4379  0000000                   	LDA #0
 4380  0000000                   	STA !TMAC
 4381  0000000                   	STA <0
 4382  0000000                   	STA <1
 4383  0000000                   	STA <2
 4384  0000000                   	LDA #PORT
 4385  0000000                   	LSR A
 4386  0000000                   	LSR A
 4387  0000000                   	LSR A
 4388  0000000                   	LSR A
 4389  0000000                   	TAX
 4390  0000000                   	LDA !BP0D,X
 4391  0000000                   	PHA
 4392  0000000                   	LDA !BP0M,X
 4393  0000000                   	PHA
 4394  0000000                   
 4395  0000000                   	LDA #PORT
 4396  0000000                   	AND #07H
 4397  0000000                   	TAY 
 4398  0000000                   
 4399  0000000                   	LDA xPINMODE_TABLE01,Y
 4400  0000000                       PHA
 4401  0000000                   	EOR #FFH
 4402  0000000                   	AND !BP0D,X 
 4403  0000000                   	STA !BP0D,X				; output
 4404  0000000                   	PLA
 4405  0000000                   	ORA !BP0M,X 
 4406  0000000                   	STA !BP0M,X	
 4407  0000000                   
 4408  0000000                   	LDA #TONE_2KHZ_TMV
 4409  0000000                   	STA !TMAV
 4410  0000000                   	LDA #02H
 4411  0000000                   	STA !EVF0
 4412  0000000                   	LDA #TONE_2KHZ_TMC
 4413  0000000                   	ORA #01H
 4414  0000000                   	STA !TMAC
 4415  0000000                   
 4416  0000000                   xPOLL_TIMEOUT#:
 4417  0000000                   	LDA !EVF0
 4418  0000000                   	AND #INT0_TMA				; TimerA
 4419  0000000                   	BEQ xPOLL_TIMEOUT# 
 4420  0000000                   	STA !EVF0
 4421  0000000                   
 4422  0000000                   	LDA xPINOUT_TABLE,Y
 4423  0000000                   	EOR !BP0,X
 4424  0000000                   	STA !BP0,X
 4425  0000000                   	INC <2
 4426  0000000                   	LDA <2
 4427  0000000                   	AND #01H
 4428  0000000                   	BNE xPOLL_TIMEOUT#
 4429  0000000                   	.IFDEF WDTIMER
 4430  0000000                   		LDA #WDTC_CLR
 4431  0000000                   		STA !WDTC
 4432  0000000                   	.ENDIF  
 4433  0000000                   
 4434  0000000                   	LDA #.low.TIMES
 4435  0000000                   	BNE xCHECK_TIMEOUT#





 4436  0000000                   	LDA #.high.TIMES
 4437  0000000                   	BEQ xPOLL_TIMEOUT#
 4438  0000000                   
 4439  0000000                   xCHECK_TIMEOUT#:    
 4440  0000000                   	CLC
 4441  0000000                       LDA <0
 4442  0000000                   	ADC #1
 4443  0000000                   	STA <0
 4444  0000000                   	LDA <1
 4445  0000000                   	ADC #0
 4446  0000000                   	STA <1
 4447  0000000                       CMP #.high.TIMES  
 4448  0000000                   	BNE xPOLL_TIMEOUT#
 4449  0000000                   	LDA <0
 4450  0000000                   	CMP #.low.TIMES  
 4451  0000000                   	BNE xPOLL_TIMEOUT#
 4452  0000000                   	STZ !TMAC
 4453  0000000                   
 4454  0000000                   	PLA
 4455  0000000                   	STA !BP0M,X
 4456  0000000                   	PLA
 4457  0000000                   	STA !BP0D,X
 4458  0000000                   xDONOT_DO#:
 4459  0000000                   	PLA 
 4460  0000000                   	STA <2
 4461  0000000                   	PLA 
 4462  0000000                   	STA <1
 4463  0000000                   	PLA 
 4464  0000000                   	STA <0
 4465  0000000                   	PLP
 4466  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4467  0000000                   	ENDM
 4468  0000000                   
 4469  0000000                   
 4470  0000000                   
 4471  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\MACRO_INSTRUCTION.INI.APP"
 4472  0000000                   	SYMBOLS
 4473  0000000                   	LINKLIST
 4474  0000000                   	DEBUG  	ASM
 4475  0000000                   	LINEAR	ON
 4476  0000000                   	LONGA	OFF
 4477  0000000                   	LONGI	OFF
 4478  0000000                   
 4479  0000000                   .EXTERN PWM_PIN_TABLE
 4480  0000000                   ;==============================================================================
 4481  0000000                   ; Macros
 4482  0000000                   ;==============================================================================
 4483  0000000                   ;------------------------------------------------------------------------------
 4484  0000000                   SET_STACK_POINTER_TO	MACRO	STACK_START_VALUE
 4485  0000000                   	LDX	#STACK_START_VALUE
 4486  0000000                   	TXS
 4487  0000000                   	ENDM
 4488  0000000                   ;------------------------------------------------------------------------------
 4489  0000000                   CLEAR_RAM_FROM_00H_TO	MACRO	CLEAR_RAM_END
 4490  0000000                   ;
 4491  0000000                   ; clear RAM
 4492  0000000                   ;





 4493  0000000                   	LDA	#.LOW.CLEAR_RAM_END
 4494  0000000                   	STA	<RR0			;keep the end address low byte
 4495  0000000                   	LDA	#.HIGH.CLEAR_RAM_END	
 4496  0000000                   	STA	<RR1			;keep the end address high byte
 4497  0000000                   CLEAR_LOOP#:
 4498  0000000                   	LDA	#00
 4499  0000000                   	STA	(<RR0)
 4500  0000000                   	LDA	<RR1
 4501  0000000                   	BNE	DEC_ADDR#
 4502  0000000                   	LDA	<RR0
 4503  0000000                   	CMP	#02H
 4504  0000000                   	BEQ	END_CLEAR#
 4505  0000000                   DEC_ADDR#:
 4506  0000000                   	SEC
 4507  0000000                   	LDA	<RR0
 4508  0000000                   	SBC	#01H
 4509  0000000                   	STA	<RR0
 4510  0000000                   	LDA	<RR1
 4511  0000000                   	SBC	#00H
 4512  0000000                   	STA	<RR1
 4513  0000000                   NOT_IN_01#:
 4514  0000000                   	JMP	CLEAR_LOOP#
 4515  0000000                   END_CLEAR#:
 4516  0000000                   	LDA	#00h
 4517  0000000                   	STA	<RR0	;Clear address 00H and 01H
 4518  0000000                   	STA	<RR1
 4519  0000000                   	ENDM
 4520  0000000                   ;----------------------------------------------------------------
 4521  0000000                   CLEAR_RAM MACRO
 4522  0000000                   
 4523  0000000                   	 .IFDEF IS_C_PROJECT
 4524  0000000                       LDA <_sp0
 4525  0000000                       STA <RAM_BEGIN+2
 4526  0000000                       LDA <_sp1
 4527  0000000                       STA <RAM_BEGIN+3
 4528  0000000                       .ENDIF
 4529  0000000                   
 4530  0000000                   	.IF (TOUCH_WAKEUP_EN .EQ. 1)
 4531  0000000                       LDA <TOUCH_STATUS_FLAG
 4532  0000000                       STA <RAM_BEGIN+4
 4533  0000000                       LDA <WK_CS_SCAN_INDEX
 4534  0000000                       STA <RAM_BEGIN+5
 4535  0000000                       LDA <CS_KEY_STATUS
 4536  0000000                       STA <RAM_BEGIN+6
 4537  0000000                           LDA  <CS_OLD_KEY_STATUS
 4538  0000000                       STA <RAM_BEGIN+7
 4539  0000000                       	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 8)
 4540  0000000                       LDA <CS_KEY_STATUS+1
 4541  0000000                       STA <RAM_BEGIN+8
 4542  0000000                           LDA  <CS_OLD_KEY_STATUS+1
 4543  0000000                       STA <RAM_BEGIN+9    
 4544  0000000                       	.ENDIF
 4545  0000000                       .ENDIF
 4546  0000000                   
 4547  0000000                   ; start cleaning ram
 4548  0000000                   	CLEAR_RAM_RANGE RAM_BEGIN+10,SHM_RAM_END
 4549  0000000                   





 4550  0000000                   	.IFDEF IS_C_PROJECT
 4551  0000000                       LDA <RAM_BEGIN+2
 4552  0000000                       STA <_sp0
 4553  0000000                       LDA <RAM_BEGIN+3
 4554  0000000                       STA <_sp1
 4555  0000000                       .ENDIF
 4556  0000000                   
 4557  0000000                   	.IF (TOUCH_WAKEUP_EN .EQ. 1)
 4558  0000000                       LDA <RAM_BEGIN+4
 4559  0000000                       STA <TOUCH_STATUS_FLAG
 4560  0000000                       LDA <RAM_BEGIN+5
 4561  0000000                       STA <WK_CS_SCAN_INDEX
 4562  0000000                       LDA <RAM_BEGIN+6
 4563  0000000                       STA <CS_KEY_STATUS
 4564  0000000                       LDA <RAM_BEGIN+7
 4565  0000000                       STA <CS_OLD_KEY_STATUS
 4566  0000000                       	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 8)
 4567  0000000                       LDA <RAM_BEGIN+8
 4568  0000000                       STA <CS_KEY_STATUS+1
 4569  0000000                       LDA <RAM_BEGIN+9
 4570  0000000                       STA <CS_OLD_KEY_STATUS+1
 4571  0000000                           .ENDIF
 4572  0000000                       .ENDIF
 4573  0000000                   
 4574  0000000                       .IFDEF IS_C_PROJECT
 4575  0000000                       .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 4576  0000000                       BRA CLEAR_RAM_END#
 4577  0000000                       .ENDIF
 4578  0000000                       .ENDIF
 4579  0000000                   
 4580  0000000                   	STZ <RAM_BEGIN
 4581  0000000                       STZ <RAM_BEGIN+1
 4582  0000000                       STZ <RAM_BEGIN+2
 4583  0000000                       STZ <RAM_BEGIN+3
 4584  0000000                       STZ <RAM_BEGIN+4
 4585  0000000                       STZ <RAM_BEGIN+5
 4586  0000000                       STZ <RAM_BEGIN+6
 4587  0000000                       STZ <RAM_BEGIN+7
 4588  0000000                       STZ <RAM_BEGIN+8
 4589  0000000                       STZ <RAM_BEGIN+9
 4590  0000000                   
 4591  0000000                   CLEAR_RAM_END#:
 4592  0000000                   	ENDM
 4593  0000000                   ;----------------------------------------------------------------
 4594  0000000                   CLEAR_RAM_RANGE MACRO CLEAR_RAM_BEGIN,CLEAR_RAM_END
 4595  0000000                   	CLEAR_RAM_RANGE_API 00, CLEAR_RAM_BEGIN, CLEAR_RAM_END
 4596  0000000                   	ENDM
 4597  0000000                   ;----------------------------------------------------------------
 4598  0000000                   CLEAR_RAM_RANGE_API MACRO BUF_ADDR, CLEAR_RAM_BEGIN, CLEAR_RAM_END
 4599  0000000                   ;=== CLEAR RAMS ===
 4600  0000000                   	LDA	#.LOW.CLEAR_RAM_END
 4601  0000000                   	STA	BUF_ADDR			;keep the end address low byte
 4602  0000000                   	LDA	#.HIGH.CLEAR_RAM_END
 4603  0000000                   	STA	BUF_ADDR+1			;keep the end address high byte
 4604  0000000                   CLEAR_LOOP#:
 4605  0000000                   	LDA	#00h
 4606  0000000                   	STA	(BUF_ADDR)





 4607  0000000                   	LDA	BUF_ADDR+1
 4608  0000000                   	CMP #(.HIGH.CLEAR_RAM_BEGIN)
 4609  0000000                   	BNE DEC_ADDR#
 4610  0000000                   	LDA	BUF_ADDR
 4611  0000000                   	CMP	#(.LOW.CLEAR_RAM_BEGIN)
 4612  0000000                   	BEQ	END_CLEAR#
 4613  0000000                   DEC_ADDR#:
 4614  0000000                   	SEC
 4615  0000000                   	LDA	BUF_ADDR
 4616  0000000                   	SBC	#01H
 4617  0000000                   	STA	BUF_ADDR
 4618  0000000                   	LDA	BUF_ADDR+1
 4619  0000000                   	SBC	#00H
 4620  0000000                   	STA	BUF_ADDR+1
 4621  0000000                   
 4622  0000000                   NOT_IN_01#:
 4623  0000000                   	JMP	CLEAR_LOOP#
 4624  0000000                   END_CLEAR#:
 4625  0000000                   	LDA	#00h
 4626  0000000                   	STA	BUF_ADDR	;Clear buffer address
 4627  0000000                   	STA	BUF_ADDR+1
 4628  0000000                   	ENDM
 4629  0000000                   ;------------------------------------------------------------------------------
 4630  0000000                   ; Sleep
 4631  0000000                   ;------------------------------------------------------------------------------
 4632  0000000                   STOP MACRO
 4633  0000000                   	LEAKPROOF_SETTING
 4634  0000000                   
 4635  0000000                   .IF((WITH_MS .EQ. 1).OR.(WITH_SP .EQ. 0).OR.(WITH_EVO .EQ. 0))
 4636  0000000                   	SYNTHESISER_OFF
 4637  0000000                   .ENDIF
 4638  0000000                   
 4639  0000000                   	LDA #STOP_FLAG
 4640  0000000                   	STA 0F8EH
 4641  0000000                   	ENDM
 4642  0000000                   ;------------------------------------------------------------------------------
 4643  0000000                   ; Control UltraIO
 4644  0000000                   ;------------------------------------------------------------------------------
 4645  0000000                   	.IF (WITH_SP .EQ. 1)
 4646  0000000                   EN_ULTRAIO_EVENT MACRO CHANNEL
 4647  0000000                   	PHP
 4648  0000000                   	SEI
 4649  0000000                   	LDY #CHANNEL-1
 4650  0000000                   	EXTERN DIS_UIO_EVENT_FLAG
 4651  0000000                   	LDA !DIS_UIO_EVENT_FLAG,Y
 4652  0000000                   	TRB <COMMON_FLAG2 
 4653  0000000                   
 4654  0000000                   	PSF_RESPONSE_LIMIT
 4655  0000000                   	LDA #SPEECH_TYPE
 4656  0000000                   	EXTERN UIO_START
 4657  0000000                   	JSR UIO_START
 4658  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4659  0000000                   	PLP
 4660  0000000                   	ENDM
 4661  0000000                   ;------------------------------------------------------------------------------		
 4662  0000000                   DIS_ULTRAIO_EVENT MACRO CHANNEL
 4663  0000000                   	PHP





 4664  0000000                   	SEI
 4665  0000000                   	LDY #CHANNEL-1
 4666  0000000                   	EXTERN DIS_UIO_EVENT_FLAG
 4667  0000000                   	LDA !DIS_UIO_EVENT_FLAG,Y
 4668  0000000                   	TSB <COMMON_FLAG2
 4669  0000000                   
 4670  0000000                   	PSF_RESPONSE_LIMIT
 4671  0000000                   	LDA #SPEECH_TYPE
 4672  0000000                   	EXTERN UIO_STOP
 4673  0000000                   	JSR UIO_STOP
 4674  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 4675  0000000                   	PLP
 4676  0000000                   	ENDM
 4677  0000000                   	.ENDIF	
 4678  0000000                   ;------------------------------------------------------------------------------
 4679  0000000                   ; Control PWM Output
 4680  0000000                   ;------------------------------------------------------------------------------
 4681  0000000                   EN_BPX_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY
 4682  0000000                   	LDA #BPX_VALUE
 4683  0000000                   	BIT !(BP0D+PORT_INDEX)
 4684  0000000                   	BNE BPX_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4685  0000000                   
 4686  0000000                   	BIT !(BP0+PORT_INDEX)
 4687  0000000                   	BNE BPX_PWM_INIT_NEXT#
 4688  0000000                   
 4689  0000000                   	LDA #DUTY
 4690  0000000                   	EOR #FFH
 4691  0000000                   	BRA BPX_PWM_INIT_CONST#
 4692  0000000                   
 4693  0000000                   BPX_PWM_INIT#:	
 4694  0000000                   	TSB !(BP0+PORT_INDEX)
 4695  0000000                   BPX_PWM_INIT_NEXT#:
 4696  0000000                   	LDA #DUTY		;duty,low level
 4697  0000000                   BPX_PWM_INIT_CONST#:
 4698  0000000                   	STA !(PWV00+PWV_INDEX)
 4699  0000000                   	LDA !PWMC
 4700  0000000                   	AND #PWMC_AND
 4701  0000000                   	ORA #DIVISION
 4702  0000000                   	STA !PWMC
 4703  0000000                   	LDA #BPX_VALUE
 4704  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4705  0000000                   
 4706  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4707  0000000                   	TRB !(BP0D+PORT_INDEX)
 4708  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4709  0000000                   
 4710  0000000                   EN_BPX_PWM_END#:
 4711  0000000                   	ENDM
 4712  0000000                   ;------------------------------------------------------------------------------	
 4713  0000000                   EN_BPX_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY_RAM
 4714  0000000                   	LDA #BPX_VALUE
 4715  0000000                   	BIT !(BP0D+PORT_INDEX)
 4716  0000000                   	BNE BPX_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4717  0000000                   
 4718  0000000                   	BIT !(BP0+PORT_INDEX)
 4719  0000000                   	BNE BPX_PWM_RAM_INIT_NEXT#
 4720  0000000                   





 4721  0000000                   	LDA !DUTY_RAM
 4722  0000000                   	EOR #FFH
 4723  0000000                   	BRA BPX_PWM_RAM_INIT_CONST#
 4724  0000000                   
 4725  0000000                   BPX_PWM_RAM_INIT#:	
 4726  0000000                   	TSB !(BP0+PORT_INDEX)
 4727  0000000                   BPX_PWM_RAM_INIT_NEXT#:
 4728  0000000                   	LDA !DUTY_RAM		;duty,low level
 4729  0000000                   BPX_PWM_RAM_INIT_CONST#:
 4730  0000000                   	STA !(PWV00+PWV_INDEX)
 4731  0000000                   	LDA !PWMC
 4732  0000000                   	AND #PWMC_AND
 4733  0000000                   	ORA #DIVISION
 4734  0000000                   	STA !PWMC
 4735  0000000                   	LDA #BPX_VALUE
 4736  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4737  0000000                   
 4738  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4739  0000000                   	TRB !(BP0D+PORT_INDEX)
 4740  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4741  0000000                   
 4742  0000000                   EN_BPX_PWM_RAM_END#:
 4743  0000000                   	ENDM
 4744  0000000                   ;------------------------------------------------------------------------------	
 4745  0000000                   EN_BPX_H_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY
 4746  0000000                   	LDA #BPX_VALUE
 4747  0000000                   	BIT !(BP0D+PORT_INDEX)
 4748  0000000                   	BNE BPX_H_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4749  0000000                   
 4750  0000000                   	BIT !(BP0+PORT_INDEX)
 4751  0000000                   	BNE BPX_H_PWM_INIT_NEXT#
 4752  0000000                   
 4753  0000000                   	LDA #DUTY
 4754  0000000                   	BRA BPX_H_PWM_INIT_CONST#
 4755  0000000                   
 4756  0000000                   BPX_H_PWM_INIT#:	
 4757  0000000                   	TSB !(BP0+PORT_INDEX)
 4758  0000000                   BPX_H_PWM_INIT_NEXT#:
 4759  0000000                   	LDA #DUTY		;duty,low level
 4760  0000000                   	EOR #FFH
 4761  0000000                   BPX_H_PWM_INIT_CONST#:
 4762  0000000                   	STA !(PWV00+PWV_INDEX)
 4763  0000000                   	LDA !PWMC
 4764  0000000                   	AND #PWMC_AND
 4765  0000000                   	ORA #DIVISION
 4766  0000000                   	STA !PWMC
 4767  0000000                   	LDA #BPX_VALUE
 4768  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4769  0000000                   
 4770  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4771  0000000                   	TRB !(BP0D+PORT_INDEX)
 4772  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4773  0000000                   
 4774  0000000                   EN_BPX_H_PWM_END#:
 4775  0000000                   	ENDM
 4776  0000000                   ;------------------------------------------------------------------------------	
 4777  0000000                   EN_BPX_H_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMC_AND,DIVISION,DUTY_RAM





 4778  0000000                   	LDA #BPX_VALUE
 4779  0000000                   	BIT !(BP0D+PORT_INDEX)
 4780  0000000                   	BNE BPX_H_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4781  0000000                   
 4782  0000000                   	BIT !(BP0+PORT_INDEX)
 4783  0000000                   	BNE BPX_H_PWM_RAM_INIT_NEXT#
 4784  0000000                   
 4785  0000000                   	LDA !DUTY_RAM
 4786  0000000                   	BRA BPX_H_PWM_RAM_INIT_CONST#
 4787  0000000                   
 4788  0000000                   BPX_H_PWM_RAM_INIT#:	
 4789  0000000                   	TSB !(BP0+PORT_INDEX)
 4790  0000000                   BPX_H_PWM_RAM_INIT_NEXT#:
 4791  0000000                   	LDA !DUTY_RAM		;duty,low level
 4792  0000000                   	EOR #FFH
 4793  0000000                   BPX_H_PWM_RAM_INIT_CONST#:
 4794  0000000                   	STA !(PWV00+PWV_INDEX)
 4795  0000000                   	LDA !PWMC
 4796  0000000                   	AND #PWMC_AND
 4797  0000000                   	ORA #DIVISION
 4798  0000000                   	STA !PWMC
 4799  0000000                   	LDA #BPX_VALUE
 4800  0000000                   	TSB !(PWM0EN+PORT_INDEX)
 4801  0000000                   
 4802  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4803  0000000                   	TRB !(BP0D+PORT_INDEX)
 4804  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4805  0000000                   
 4806  0000000                   EN_BPX_H_PWM_RAM_END#:
 4807  0000000                   	ENDM
 4808  0000000                   ;------------------------------------------------------------------------------		
 4809  0000000                   EN_BPXX_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY
 4810  0000000                   	LDA #BPX_VALUE
 4811  0000000                   	BIT !(BP0D+PORT_INDEX)
 4812  0000000                   	BNE BPXX_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4813  0000000                   
 4814  0000000                   	BIT !(BP0+PORT_INDEX)
 4815  0000000                   	BNE BPXX_PWM_INIT_NEXT#
 4816  0000000                   
 4817  0000000                   	LDA #DUTY
 4818  0000000                   	EOR #FFH
 4819  0000000                   	BRA BPXX_PWM_INIT_CONST#
 4820  0000000                   
 4821  0000000                   BPXX_PWM_INIT#:	
 4822  0000000                   	TSB !(BP0+PORT_INDEX)
 4823  0000000                   BPXX_PWM_INIT_NEXT#:
 4824  0000000                   	LDA #DUTY		;duty,low level
 4825  0000000                   BPXX_PWM_INIT_CONST#:
 4826  0000000                   	STA !(PWV0+PWV_INDEX)
 4827  0000000                   ;LDA !PWMC
 4828  0000000                   ;AND #PWMC_AND
 4829  0000000                   ;ORA #DIVISION
 4830  0000000                   	LDA #DIVISION
 4831  0000000                   	STA !PWMC
 4832  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4833  0000000                   	AND #GROUP_MASK
 4834  0000000                   	ORA #GROUP_SEL





 4835  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4836  0000000                   	LDA #PWMEN_BIT
 4837  0000000                   	TSB !PWMEN
 4838  0000000                   
 4839  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4840  0000000                   	TRB !(BP0D+PORT_INDEX)
 4841  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4842  0000000                   
 4843  0000000                   EN_BPXX_PWM_END#:
 4844  0000000                   	ENDM
 4845  0000000                   ;------------------------------------------------------------------------------		
 4846  0000000                   EN_BPXX_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY_RAM
 4847  0000000                   	LDA #BPX_VALUE
 4848  0000000                   	BIT !(BP0D+PORT_INDEX)
 4849  0000000                   	BNE BPXX_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4850  0000000                   
 4851  0000000                   	BIT !(BP0+PORT_INDEX)
 4852  0000000                   	BNE BPXX_PWM_RAM_INIT_NEXT#
 4853  0000000                   
 4854  0000000                   	LDA !DUTY_RAM
 4855  0000000                   	EOR #FFH
 4856  0000000                   	BRA BPXX_PWM_RAM_INIT_CONST#
 4857  0000000                   
 4858  0000000                   BPXX_PWM_RAM_INIT#:	
 4859  0000000                   	TSB !(BP0+PORT_INDEX)
 4860  0000000                   BPXX_PWM_RAM_INIT_NEXT#:
 4861  0000000                   	LDA !DUTY_RAM		;duty,low level
 4862  0000000                   BPXX_PWM_RAM_INIT_CONST#:
 4863  0000000                   	STA !(PWV0+PWV_INDEX)
 4864  0000000                   ;LDA !PWMC
 4865  0000000                   ;AND #PWMC_AND
 4866  0000000                   ;ORA #DIVISION
 4867  0000000                   	LDA #DIVISION
 4868  0000000                   	STA !PWMC
 4869  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4870  0000000                   	AND #GROUP_MASK
 4871  0000000                   	ORA #GROUP_SEL
 4872  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4873  0000000                   	LDA #PWMEN_BIT
 4874  0000000                   	TSB !PWMEN
 4875  0000000                   
 4876  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4877  0000000                   	TRB !(BP0D+PORT_INDEX)
 4878  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4879  0000000                   
 4880  0000000                   EN_BPXX_PWM_RAM_END#:
 4881  0000000                   	ENDM
 4882  0000000                   ;------------------------------------------------------------------------------		
 4883  0000000                   EN_BPXX_H_PWM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY
 4884  0000000                   	LDA #BPX_VALUE
 4885  0000000                   	BIT !(BP0D+PORT_INDEX)
 4886  0000000                   	BNE BPXX_H_PWM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4887  0000000                   
 4888  0000000                   	BIT !(BP0+PORT_INDEX)
 4889  0000000                   	BNE BPXX_H_PWM_INIT_NEXT#
 4890  0000000                   
 4891  0000000                   	LDA #DUTY





 4892  0000000                   	BRA BPXX_H_PWM_INIT_CONST#
 4893  0000000                   
 4894  0000000                   BPXX_H_PWM_INIT#:	
 4895  0000000                   	TSB !(BP0+PORT_INDEX)
 4896  0000000                   BPXX_H_PWM_INIT_NEXT#:
 4897  0000000                   	LDA #DUTY		;duty,low level
 4898  0000000                   	EOR #FFH
 4899  0000000                   BPXX_H_PWM_INIT_CONST#:
 4900  0000000                   	STA !(PWV0+PWV_INDEX)
 4901  0000000                   	LDA #DIVISION
 4902  0000000                   	STA !PWMC
 4903  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4904  0000000                   	AND #GROUP_MASK
 4905  0000000                   	ORA #GROUP_SEL
 4906  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4907  0000000                   	LDA #PWMEN_BIT
 4908  0000000                   	TSB !PWMEN
 4909  0000000                   
 4910  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4911  0000000                   	TRB !(BP0D+PORT_INDEX)
 4912  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4913  0000000                   
 4914  0000000                   EN_BPXX_H_PWM_END#:
 4915  0000000                   	ENDM
 4916  0000000                   ;------------------------------------------------------------------------------		
 4917  0000000                   EN_BPXX_H_PWM_RAM MACRO BPX_VALUE,PORT_INDEX,PWV_INDEX,PWMO_INDEX,PWMEN_BIT,GROUP_MASK,GROUP_SEL,DIVISION,DUTY_RAM
 4918  0000000                   	LDA #BPX_VALUE
 4919  0000000                   	BIT !(BP0D+PORT_INDEX)
 4920  0000000                   	BNE BPXX_H_PWM_RAM_INIT#	;BP0D[]=1 =>BP0[] as input pin
 4921  0000000                   
 4922  0000000                   	BIT !(BP0+PORT_INDEX)
 4923  0000000                   	BNE BPXX_H_PWM_RAM_INIT_NEXT#
 4924  0000000                   
 4925  0000000                   	LDA !DUTY_RAM
 4926  0000000                   	BRA BPXX_H_PWM_RAM_INIT_CONST#
 4927  0000000                   
 4928  0000000                   BPXX_H_PWM_RAM_INIT#:	
 4929  0000000                   	TSB !(BP0+PORT_INDEX)
 4930  0000000                   BPXX_H_PWM_RAM_INIT_NEXT#:
 4931  0000000                   	LDA !DUTY_RAM		;duty,low level
 4932  0000000                   	EOR #FFH
 4933  0000000                   BPXX_H_PWM_RAM_INIT_CONST#:
 4934  0000000                   	STA !(PWV0+PWV_INDEX)
 4935  0000000                   	LDA #DIVISION
 4936  0000000                   	STA !PWMC
 4937  0000000                   	LDA !(PWMOA+PWMO_INDEX)
 4938  0000000                   	AND #GROUP_MASK
 4939  0000000                   	ORA #GROUP_SEL
 4940  0000000                   	STA !(PWMOA+PWMO_INDEX)
 4941  0000000                   	LDA #PWMEN_BIT
 4942  0000000                   	TSB !PWMEN
 4943  0000000                   
 4944  0000000                   	LDA #BPX_VALUE		;BP0D[]=0 =>BP0[] as output pin
 4945  0000000                   	TRB !(BP0D+PORT_INDEX)
 4946  0000000                   	TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 4947  0000000                   
 4948  0000000                   EN_BPXX_H_PWM_RAM_END#:





 4949  0000000                   	ENDM
 4950  0000000                   ;------------------------------------------------------------------------------
 4951  0000000                   EN_BP00_PWM MACRO DUTY, DIVISION
 4952  0000000                   .IF	(MAINBODY='A960')
 4953  0000000                   	EN_BPXX_PWM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY
 4954  0000000                   .ENDIF
 4955  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4956  0000000                   	EN_BPX_PWM BP00_PWM,0,0,70H,DIVISION-1,DUTY
 4957  0000000                   .ENDIF
 4958  0000000                   	ENDM
 4959  0000000                   ;----------------------------------------------------------------
 4960  0000000                   EN_BP00_H_PWM MACRO DUTY, DIVISION
 4961  0000000                   .IF	(MAINBODY='A960')
 4962  0000000                   	EN_BPXX_H_PWM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY
 4963  0000000                   .ENDIF
 4964  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4965  0000000                   	EN_BPX_H_PWM BP00_PWM,0,0,70H,DIVISION-1,DUTY
 4966  0000000                   .ENDIF
 4967  0000000                   	ENDM
 4968  0000000                   ;----------------------------------------------------------------
 4969  0000000                   EN_BP00_PWM_RAM MACRO DUTY_RAM, DIVISION
 4970  0000000                   .IF	(MAINBODY='A960')
 4971  0000000                   	EN_BPXX_PWM_RAM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY_RAM
 4972  0000000                   .ENDIF
 4973  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4974  0000000                   	EN_BPX_PWM_RAM BP00_PWM,0,0,70H,DIVISION-1,DUTY_RAM
 4975  0000000                   .ENDIF
 4976  0000000                   	ENDM
 4977  0000000                   ;----------------------------------------------------------------
 4978  0000000                   EN_BP00_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 4979  0000000                   .IF	(MAINBODY='A960')
 4980  0000000                   	EN_BPXX_H_PWM_RAM BP00_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP00,(DIVISION-1),DUTY_RAM
 4981  0000000                   .ENDIF
 4982  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4983  0000000                   	EN_BPX_H_PWM_RAM BP00_PWM,0,0,70H,DIVISION-1,DUTY_RAM
 4984  0000000                   .ENDIF
 4985  0000000                   	ENDM
 4986  0000000                   ;----------------------------------------------------------------	
 4987  0000000                   DIS_BP00_PWM MACRO
 4988  0000000                   .IF	(MAINBODY='A960')
 4989  0000000                   	LDA #01H
 4990  0000000                   	TRB !PWMEN
 4991  0000000                   .ENDIF
 4992  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 4993  0000000                   	LDA #BP00_PWM		
 4994  0000000                   	TRB !PWM0EN
 4995  0000000                   .ENDIF
 4996  0000000                   	ENDM	
 4997  0000000                   ;------------------------------------------------------------------------------
 4998  0000000                   EN_BP01_PWM MACRO DUTY, DIVISION
 4999  0000000                   .IF	(MAINBODY='A960')
 5000  0000000                   	EN_BPXX_PWM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY
 5001  0000000                   .ENDIF
 5002  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5003  0000000                   	EN_BPX_PWM BP01_PWM,0,1,70H,DIVISION-1,DUTY
 5004  0000000                   .ENDIF
 5005  0000000                   	ENDM





 5006  0000000                   ;----------------------------------------------------------------		
 5007  0000000                   EN_BP01_H_PWM MACRO DUTY, DIVISION
 5008  0000000                   .IF	(MAINBODY='A960')
 5009  0000000                   	EN_BPXX_H_PWM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY
 5010  0000000                   .ENDIF
 5011  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5012  0000000                   	EN_BPX_H_PWM BP01_PWM,0,1,70H,DIVISION-1,DUTY
 5013  0000000                   .ENDIF
 5014  0000000                   	ENDM
 5015  0000000                   ;----------------------------------------------------------------
 5016  0000000                   EN_BP01_PWM_RAM MACRO DUTY_RAM, DIVISION
 5017  0000000                   .IF	(MAINBODY='A960')
 5018  0000000                   	EN_BPXX_PWM_RAM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY_RAM
 5019  0000000                   .ENDIF
 5020  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5021  0000000                   	EN_BPX_PWM_RAM BP01_PWM,0,1,70H,DIVISION-1,DUTY_RAM
 5022  0000000                   .ENDIF
 5023  0000000                   	ENDM
 5024  0000000                   ;----------------------------------------------------------------
 5025  0000000                   EN_BP01_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5026  0000000                   .IF	(MAINBODY='A960')
 5027  0000000                   	EN_BPXX_H_PWM_RAM BP01_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP01,(DIVISION-1),DUTY_RAM
 5028  0000000                   .ENDIF
 5029  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5030  0000000                   	EN_BPX_H_PWM_RAM BP01_PWM,0,1,70H,DIVISION-1,DUTY_RAM
 5031  0000000                   .ENDIF
 5032  0000000                   	ENDM
 5033  0000000                   ;----------------------------------------------------------------
 5034  0000000                   DIS_BP01_PWM MACRO
 5035  0000000                   .IF	(MAINBODY='A960')
 5036  0000000                   	LDA #02H
 5037  0000000                   	TRB !PWMEN
 5038  0000000                   .ENDIF
 5039  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5040  0000000                   	LDA #BP01_PWM		
 5041  0000000                   	TRB !PWM0EN
 5042  0000000                   .ENDIF
 5043  0000000                   	ENDM
 5044  0000000                   ;------------------------------------------------------------------------------
 5045  0000000                   EN_BP02_PWM MACRO DUTY, DIVISION
 5046  0000000                   .IF	(MAINBODY='A960')
 5047  0000000                   	EN_BPXX_PWM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY
 5048  0000000                   .ENDIF
 5049  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5050  0000000                   	EN_BPX_PWM BP02_PWM,0,2,70H,DIVISION-1,DUTY
 5051  0000000                   .ENDIF
 5052  0000000                   	ENDM
 5053  0000000                   ;------------------------------------------------------------------------------
 5054  0000000                   EN_BP02_H_PWM MACRO DUTY, DIVISION
 5055  0000000                   .IF	(MAINBODY='A960')
 5056  0000000                   	EN_BPXX_H_PWM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY
 5057  0000000                   .ENDIF
 5058  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5059  0000000                   	EN_BPX_H_PWM BP02_PWM,0,2,70H,DIVISION-1,DUTY
 5060  0000000                   .ENDIF
 5061  0000000                   	ENDM
 5062  0000000                   ;------------------------------------------------------------------------------





 5063  0000000                   EN_BP02_PWM_RAM MACRO DUTY_RAM, DIVISION
 5064  0000000                   .IF	(MAINBODY='A960')
 5065  0000000                   	EN_BPXX_PWM_RAM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY_RAM
 5066  0000000                   .ENDIF
 5067  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5068  0000000                   	EN_BPX_PWM_RAM BP02_PWM,0,2,70H,DIVISION-1,DUTY_RAM
 5069  0000000                   .ENDIF
 5070  0000000                   	ENDM
 5071  0000000                   ;------------------------------------------------------------------------------	
 5072  0000000                   EN_BP02_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5073  0000000                   .IF	(MAINBODY='A960')
 5074  0000000                   	EN_BPXX_H_PWM_RAM BP02_PWM,0,2,0,04H,PWM_G2_MASK,PWM_G2_BP02,(DIVISION-1),DUTY_RAM
 5075  0000000                   .ENDIF
 5076  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5077  0000000                   	EN_BPX_H_PWM_RAM BP02_PWM,0,2,70H,DIVISION-1,DUTY_RAM
 5078  0000000                   .ENDIF
 5079  0000000                   	ENDM
 5080  0000000                   ;------------------------------------------------------------------------------	
 5081  0000000                   DIS_BP02_PWM MACRO
 5082  0000000                   .IF	(MAINBODY='A960')
 5083  0000000                   	LDA #04H
 5084  0000000                   	TRB !PWMEN
 5085  0000000                   .ENDIF
 5086  0000000                   .IF	(MAINBODY='A340').OR.(MAINBODY='D171').OR.(MAINBODY='D481')
 5087  0000000                   	LDA #BP02_PWM	
 5088  0000000                   	TRB !PWM0EN
 5089  0000000                   .ENDIF
 5090  0000000                   	ENDM
 5091  0000000                   ;------------------------------------------------------------------------------
 5092  0000000                   EN_BP03_PWM MACRO DUTY, DIVISION
 5093  0000000                   .IF	(MAINBODY='A960')
 5094  0000000                   	EN_BPXX_PWM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY
 5095  0000000                   .ENDIF
 5096  0000000                   	ENDM
 5097  0000000                   ;------------------------------------------------------------------------------
 5098  0000000                   EN_BP03_H_PWM MACRO DUTY, DIVISION
 5099  0000000                   .IF	(MAINBODY='A960')
 5100  0000000                   	EN_BPXX_H_PWM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY
 5101  0000000                   .ENDIF
 5102  0000000                   	ENDM
 5103  0000000                   ;------------------------------------------------------------------------------
 5104  0000000                   EN_BP03_PWM_RAM MACRO DUTY_RAM, DIVISION
 5105  0000000                   .IF	(MAINBODY='A960')
 5106  0000000                   	EN_BPXX_PWM_RAM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY_RAM
 5107  0000000                   .ENDIF
 5108  0000000                   	ENDM
 5109  0000000                   ;-------------------------------------------------------------	
 5110  0000000                   EN_BP03_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5111  0000000                   .IF	(MAINBODY='A960')
 5112  0000000                   	EN_BPXX_H_PWM_RAM BP03_PWM,0,3,0,08H,PWM_G3_MASK,PWM_G3_BP03,(DIVISION-1),DUTY_RAM
 5113  0000000                   .ENDIF
 5114  0000000                   	ENDM
 5115  0000000                   ;------------------------------------------------------------------------------	
 5116  0000000                   DIS_BP03_PWM MACRO
 5117  0000000                   .IF	(MAINBODY='A960')
 5118  0000000                   	LDA #08H
 5119  0000000                   	TRB !PWMEN





 5120  0000000                   .ENDIF
 5121  0000000                   	ENDM
 5122  0000000                   ;------------------------------------------------------------------------------
 5123  0000000                   EN_BP04_PWM MACRO DUTY, DIVISION
 5124  0000000                   .IF	(MAINBODY='A960')
 5125  0000000                   	EN_BPXX_PWM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY
 5126  0000000                   .ENDIF
 5127  0000000                   	ENDM
 5128  0000000                   ;------------------------------------------------------------------------------
 5129  0000000                   EN_BP04_H_PWM MACRO DUTY, DIVISION
 5130  0000000                   .IF	(MAINBODY='A960')
 5131  0000000                   	EN_BPXX_H_PWM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY
 5132  0000000                   .ENDIF
 5133  0000000                   	ENDM
 5134  0000000                   ;------------------------------------------------------------------------------
 5135  0000000                   EN_BP04_PWM_RAM MACRO DUTY_RAM, DIVISION
 5136  0000000                   .IF	(MAINBODY='A960')
 5137  0000000                   	EN_BPXX_PWM_RAM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY_RAM
 5138  0000000                   .ENDIF
 5139  0000000                   	ENDM
 5140  0000000                   ;------------------------------------------------------------------------------	
 5141  0000000                   EN_BP04_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5142  0000000                   .IF	(MAINBODY='A960')
 5143  0000000                   	EN_BPXX_H_PWM_RAM BP04_PWM,0,4,0,10H,PWM_G4_MASK,PWM_G4_BP04,(DIVISION-1),DUTY_RAM
 5144  0000000                   .ENDIF
 5145  0000000                   	ENDM
 5146  0000000                   ;------------------------------------------------------------------------------	
 5147  0000000                   DIS_BP04_PWM MACRO
 5148  0000000                   .IF	(MAINBODY='A960')
 5149  0000000                   	LDA #10H
 5150  0000000                   	TRB !PWMEN
 5151  0000000                   .ENDIF
 5152  0000000                   	ENDM
 5153  0000000                   ;------------------------------------------------------------------------------	
 5154  0000000                   EN_BP05_PWM MACRO DUTY, DIVISION
 5155  0000000                   .IF	(MAINBODY='A960')
 5156  0000000                   	EN_BPXX_PWM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY
 5157  0000000                   .ENDIF
 5158  0000000                   	ENDM
 5159  0000000                   ;------------------------------------------------------------------------------
 5160  0000000                   EN_BP05_H_PWM MACRO DUTY, DIVISION
 5161  0000000                   .IF	(MAINBODY='A960')
 5162  0000000                   	EN_BPXX_H_PWM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY
 5163  0000000                   .ENDIF
 5164  0000000                   	ENDM
 5165  0000000                   ;------------------------------------------------------------------------------
 5166  0000000                   EN_BP05_PWM_RAM MACRO DUTY_RAM, DIVISION
 5167  0000000                   .IF	(MAINBODY='A960')
 5168  0000000                   	EN_BPXX_PWM_RAM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY_RAM
 5169  0000000                   .ENDIF
 5170  0000000                   	ENDM
 5171  0000000                   ;-------------------------------------------------------------	
 5172  0000000                   EN_BP05_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5173  0000000                   .IF	(MAINBODY='A960')
 5174  0000000                   	EN_BPXX_H_PWM_RAM BP05_PWM,0,5,0,20H,PWM_G5_MASK,PWM_G5_BP05,(DIVISION-1),DUTY_RAM
 5175  0000000                   .ENDIF
 5176  0000000                   	ENDM





 5177  0000000                   ;------------------------------------------------------------------------------	
 5178  0000000                   DIS_BP05_PWM MACRO
 5179  0000000                   .IF	(MAINBODY='A960')
 5180  0000000                   	LDA #20H
 5181  0000000                   	TRB !PWMEN
 5182  0000000                   .ENDIF
 5183  0000000                   	ENDM
 5184  0000000                   ;------------------------------------------------------------------------------	
 5185  0000000                   EN_BP06_PWM MACRO DUTY, DIVISION
 5186  0000000                   .IF	(MAINBODY='A960')
 5187  0000000                   	EN_BPXX_PWM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY
 5188  0000000                   .ENDIF
 5189  0000000                   	ENDM
 5190  0000000                   ;------------------------------------------------------------------------------
 5191  0000000                   EN_BP06_H_PWM MACRO DUTY, DIVISION
 5192  0000000                   .IF	(MAINBODY='A960')
 5193  0000000                   	EN_BPXX_H_PWM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY
 5194  0000000                   .ENDIF
 5195  0000000                   	ENDM
 5196  0000000                   ;------------------------------------------------------------------------------
 5197  0000000                   EN_BP06_PWM_RAM MACRO DUTY_RAM, DIVISION
 5198  0000000                   .IF	(MAINBODY='A960')
 5199  0000000                   	EN_BPXX_PWM_RAM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY_RAM
 5200  0000000                   .ENDIF
 5201  0000000                   	ENDM
 5202  0000000                   ;-------------------------------------------------------------	
 5203  0000000                   EN_BP06_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5204  0000000                   .IF	(MAINBODY='A960')
 5205  0000000                   	EN_BPXX_H_PWM_RAM BP06_PWM,0,0,0,01H,PWM_G0_MASK,PWM_G0_BP06,(DIVISION-1),DUTY_RAM
 5206  0000000                   .ENDIF
 5207  0000000                   	ENDM
 5208  0000000                   ;------------------------------------------------------------------------------	
 5209  0000000                   DIS_BP06_PWM MACRO
 5210  0000000                   .IF	(MAINBODY='A960')
 5211  0000000                   	LDA #01H
 5212  0000000                   	TRB !PWMEN
 5213  0000000                   .ENDIF
 5214  0000000                   	ENDM
 5215  0000000                   ;------------------------------------------------------------------------------	
 5216  0000000                   EN_BP07_PWM MACRO DUTY, DIVISION
 5217  0000000                   .IF	(MAINBODY='A960')
 5218  0000000                   	EN_BPXX_PWM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY
 5219  0000000                   .ENDIF
 5220  0000000                   	ENDM
 5221  0000000                   ;------------------------------------------------------------------------------
 5222  0000000                   EN_BP07_H_PWM MACRO DUTY, DIVISION
 5223  0000000                   .IF	(MAINBODY='A960')
 5224  0000000                   	EN_BPXX_H_PWM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY
 5225  0000000                   .ENDIF
 5226  0000000                   	ENDM
 5227  0000000                   ;------------------------------------------------------------------------------
 5228  0000000                   EN_BP07_PWM_RAM MACRO DUTY_RAM, DIVISION
 5229  0000000                   .IF	(MAINBODY='A960')
 5230  0000000                   	EN_BPXX_PWM_RAM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY_RAM
 5231  0000000                   .ENDIF
 5232  0000000                   	ENDM
 5233  0000000                   ;-------------------------------------------------------------	





 5234  0000000                   EN_BP07_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5235  0000000                   .IF	(MAINBODY='A960')
 5236  0000000                   	EN_BPXX_H_PWM_RAM BP07_PWM,0,1,0,02H,PWM_G1_MASK,PWM_G1_BP07,(DIVISION-1),DUTY_RAM
 5237  0000000                   .ENDIF
 5238  0000000                   	ENDM
 5239  0000000                   ;------------------------------------------------------------------------------	
 5240  0000000                   DIS_BP07_PWM MACRO
 5241  0000000                   .IF	(MAINBODY='A960')
 5242  0000000                   	LDA #02H
 5243  0000000                   	TRB !PWMEN
 5244  0000000                   .ENDIF
 5245  0000000                   	ENDM
 5246  0000000                   ;------------------------------------------------------------------------------
 5247  0000000                   EN_BP10_PWM MACRO DUTY, DIVISION
 5248  0000000                   .IF	(MAINBODY='A960')
 5249  0000000                   	EN_BPXX_PWM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY
 5250  0000000                   .ENDIF
 5251  0000000                   .IF	(MAINBODY='A340')
 5252  0000000                   	EN_BPX_PWM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY
 5253  0000000                   .ENDIF
 5254  0000000                   	ENDM
 5255  0000000                   ;------------------------------------------------------------------------------
 5256  0000000                   EN_BP10_H_PWM MACRO DUTY, DIVISION
 5257  0000000                   .IF	(MAINBODY='A960')
 5258  0000000                   	EN_BPXX_H_PWM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY
 5259  0000000                   .ENDIF
 5260  0000000                   .IF	(MAINBODY='A340')
 5261  0000000                   	EN_BPX_H_PWM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY
 5262  0000000                   .ENDIF
 5263  0000000                   	ENDM
 5264  0000000                   ;------------------------------------------------------------------------------
 5265  0000000                   EN_BP10_PWM_RAM MACRO DUTY_RAM, DIVISION
 5266  0000000                   .IF	(MAINBODY='A960')
 5267  0000000                   	EN_BPXX_PWM_RAM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY_RAM
 5268  0000000                   .ENDIF
 5269  0000000                   .IF	(MAINBODY='A340')
 5270  0000000                   	EN_BPX_PWM_RAM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY_RAM
 5271  0000000                   .ENDIF
 5272  0000000                   	ENDM
 5273  0000000                   ;------------------------------------------------------------------------------	
 5274  0000000                   EN_BP10_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5275  0000000                   .IF	(MAINBODY='A960')
 5276  0000000                   	EN_BPXX_H_PWM_RAM BP10_PWM,1,2,0,04H,PWM_G2_MASK,PWM_G2_BP10,(DIVISION-1),DUTY_RAM
 5277  0000000                   .ENDIF
 5278  0000000                   .IF	(MAINBODY='A340')
 5279  0000000                   	EN_BPX_H_PWM_RAM BP10_PWM,1,8,07H,(DIVISION-1)<<4,DUTY_RAM
 5280  0000000                   .ENDIF
 5281  0000000                   	ENDM
 5282  0000000                   ;------------------------------------------------------------------------------	
 5283  0000000                   DIS_BP10_PWM MACRO
 5284  0000000                   .IF	(MAINBODY='A960')
 5285  0000000                   	LDA #04H
 5286  0000000                   	TRB !PWMEN
 5287  0000000                   .ENDIF
 5288  0000000                   .IF	(MAINBODY='A340')
 5289  0000000                   	LDA #BP10_PWM		
 5290  0000000                   	TRB !PWM1EN





 5291  0000000                   .ENDIF
 5292  0000000                   	ENDM
 5293  0000000                   ;------------------------------------------------------------------------------
 5294  0000000                   EN_BP11_PWM MACRO DUTY, DIVISION
 5295  0000000                   .IF	(MAINBODY='A960')
 5296  0000000                   	EN_BPXX_PWM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY
 5297  0000000                   .ENDIF
 5298  0000000                   .IF	(MAINBODY='A340')
 5299  0000000                   	EN_BPX_PWM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY
 5300  0000000                   .ENDIF
 5301  0000000                   	ENDM
 5302  0000000                   ;------------------------------------------------------------------------------
 5303  0000000                   EN_BP11_H_PWM MACRO DUTY, DIVISION
 5304  0000000                   .IF	(MAINBODY='A960')
 5305  0000000                   	EN_BPXX_H_PWM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY
 5306  0000000                   .ENDIF
 5307  0000000                   .IF	(MAINBODY='A340')
 5308  0000000                   	EN_BPX_H_PWM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY
 5309  0000000                   .ENDIF
 5310  0000000                   	ENDM
 5311  0000000                   ;------------------------------------------------------------------------------
 5312  0000000                   EN_BP11_PWM_RAM MACRO DUTY_RAM, DIVISION
 5313  0000000                   .IF	(MAINBODY='A960')
 5314  0000000                   	EN_BPXX_PWM_RAM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY_RAM
 5315  0000000                   .ENDIF
 5316  0000000                   .IF	(MAINBODY='A340')
 5317  0000000                   	EN_BPX_PWM_RAM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY_RAM
 5318  0000000                   .ENDIF
 5319  0000000                   	ENDM
 5320  0000000                   ;------------------------------------------------------------------------------	
 5321  0000000                   EN_BP11_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5322  0000000                   .IF	(MAINBODY='A960')
 5323  0000000                   	EN_BPXX_H_PWM_RAM BP11_PWM,1,3,0,08H,PWM_G3_MASK,PWM_G3_BP11,(DIVISION-1),DUTY_RAM
 5324  0000000                   .ENDIF
 5325  0000000                   .IF	(MAINBODY='A340')
 5326  0000000                   	EN_BPX_H_PWM_RAM BP11_PWM,1,9,07H,(DIVISION-1)<<4,DUTY_RAM
 5327  0000000                   .ENDIF
 5328  0000000                   	ENDM
 5329  0000000                   ;------------------------------------------------------------------------------	
 5330  0000000                   DIS_BP11_PWM MACRO
 5331  0000000                   .IF	(MAINBODY='A960')
 5332  0000000                   	LDA #08H
 5333  0000000                   	TRB !PWMEN
 5334  0000000                   .ENDIF
 5335  0000000                   .IF	(MAINBODY='A340')
 5336  0000000                   	LDA #BP11_PWM		
 5337  0000000                   	TRB !PWM1EN
 5338  0000000                   .ENDIF
 5339  0000000                   	ENDM
 5340  0000000                   ;------------------------------------------------------------------------------	
 5341  0000000                   EN_BP12_PWM MACRO DUTY, DIVISION
 5342  0000000                   .IF	(MAINBODY='A960')
 5343  0000000                   	EN_BPXX_PWM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY
 5344  0000000                   .ENDIF
 5345  0000000                   .IF	(MAINBODY='A340')
 5346  0000000                   	EN_BPX_PWM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY
 5347  0000000                   .ENDIF





 5348  0000000                   	ENDM
 5349  0000000                   ;------------------------------------------------------------------------------
 5350  0000000                   EN_BP12_H_PWM MACRO DUTY, DIVISION
 5351  0000000                   .IF	(MAINBODY='A960')
 5352  0000000                   	EN_BPXX_H_PWM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY
 5353  0000000                   .ENDIF
 5354  0000000                   .IF	(MAINBODY='A340')
 5355  0000000                   	EN_BPX_H_PWM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY
 5356  0000000                   .ENDIF
 5357  0000000                   	ENDM
 5358  0000000                   ;------------------------------------------------------------------------------
 5359  0000000                   EN_BP12_PWM_RAM MACRO DUTY_RAM, DIVISION
 5360  0000000                   .IF	(MAINBODY='A960')
 5361  0000000                   	EN_BPXX_PWM_RAM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY_RAM
 5362  0000000                   .ENDIF
 5363  0000000                   .IF	(MAINBODY='A340')
 5364  0000000                   	EN_BPX_PWM_RAM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY_RAM
 5365  0000000                   .ENDIF
 5366  0000000                   	ENDM
 5367  0000000                   ;------------------------------------------------------------------------------	
 5368  0000000                   EN_BP12_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5369  0000000                   .IF	(MAINBODY='A960')
 5370  0000000                   	EN_BPXX_H_PWM_RAM BP12_PWM,1,4,1,10H,PWM_G4_MASK,PWM_G4_BP12,(DIVISION-1),DUTY_RAM
 5371  0000000                   .ENDIF
 5372  0000000                   .IF	(MAINBODY='A340')
 5373  0000000                   	EN_BPX_H_PWM_RAM BP12_PWM,1,10,07H,(DIVISION-1)<<4,DUTY_RAM
 5374  0000000                   .ENDIF
 5375  0000000                   	ENDM
 5376  0000000                   ;------------------------------------------------------------------------------	
 5377  0000000                   DIS_BP12_PWM MACRO
 5378  0000000                   .IF	(MAINBODY='A960')
 5379  0000000                   	LDA #10H
 5380  0000000                   	TRB !PWMEN
 5381  0000000                   .ENDIF
 5382  0000000                   .IF	(MAINBODY='A340')
 5383  0000000                   	LDA #BP12_PWM		
 5384  0000000                   	TRB !PWM1EN
 5385  0000000                   .ENDIF
 5386  0000000                   	ENDM
 5387  0000000                   ;------------------------------------------------------------------------------	
 5388  0000000                   EN_BP13_PWM MACRO DUTY, DIVISION
 5389  0000000                   .IF	(MAINBODY='A960')
 5390  0000000                   	EN_BPXX_PWM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY
 5391  0000000                   .ENDIF
 5392  0000000                   	ENDM
 5393  0000000                   ;------------------------------------------------------------------------------
 5394  0000000                   EN_BP13_H_PWM MACRO DUTY, DIVISION
 5395  0000000                   .IF	(MAINBODY='A960')
 5396  0000000                   	EN_BPXX_H_PWM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY
 5397  0000000                   .ENDIF
 5398  0000000                   	ENDM
 5399  0000000                   ;------------------------------------------------------------------------------
 5400  0000000                   EN_BP13_PWM_RAM MACRO DUTY_RAM, DIVISION
 5401  0000000                   .IF	(MAINBODY='A960')
 5402  0000000                   	EN_BPXX_PWM_RAM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY_RAM
 5403  0000000                   .ENDIF
 5404  0000000                   	ENDM





 5405  0000000                   ;-------------------------------------------------------------	
 5406  0000000                   EN_BP13_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5407  0000000                   .IF	(MAINBODY='A960')
 5408  0000000                   	EN_BPXX_H_PWM_RAM BP13_PWM,1,5,1,20H,PWM_G5_MASK,PWM_G5_BP13,(DIVISION-1),DUTY_RAM
 5409  0000000                   .ENDIF
 5410  0000000                   	ENDM
 5411  0000000                   ;------------------------------------------------------------------------------	
 5412  0000000                   DIS_BP13_PWM MACRO
 5413  0000000                   .IF	(MAINBODY='A960')
 5414  0000000                   	LDA #20H
 5415  0000000                   	TRB !PWMEN
 5416  0000000                   .ENDIF
 5417  0000000                   	ENDM
 5418  0000000                   ;------------------------------------------------------------------------------	
 5419  0000000                   EN_BP32_PWM MACRO DUTY, DIVISION
 5420  0000000                   .IF	(MAINBODY='A960')
 5421  0000000                   	EN_BPXX_PWM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY
 5422  0000000                   .ENDIF
 5423  0000000                   	ENDM
 5424  0000000                   ;------------------------------------------------------------------------------
 5425  0000000                   EN_BP32_H_PWM MACRO DUTY, DIVISION
 5426  0000000                   .IF	(MAINBODY='A960')
 5427  0000000                   	EN_BPXX_H_PWM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY
 5428  0000000                   .ENDIF
 5429  0000000                   	ENDM
 5430  0000000                   ;------------------------------------------------------------------------------
 5431  0000000                   EN_BP32_PWM_RAM MACRO DUTY_RAM, DIVISION
 5432  0000000                   .IF	(MAINBODY='A960')
 5433  0000000                   	EN_BPXX_PWM_RAM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY_RAM
 5434  0000000                   .ENDIF
 5435  0000000                   	ENDM
 5436  0000000                   ;-------------------------------------------------------------	
 5437  0000000                   EN_BP32_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5438  0000000                   .IF	(MAINBODY='A960')
 5439  0000000                   	EN_BPXX_H_PWM_RAM BP32_PWM,3,0,0,01H,PWM_G0_MASK,PWM_G0_BP32,(DIVISION-1),DUTY_RAM
 5440  0000000                   .ENDIF
 5441  0000000                   	ENDM
 5442  0000000                   ;------------------------------------------------------------------------------	
 5443  0000000                   DIS_BP32_PWM MACRO
 5444  0000000                   .IF	(MAINBODY='A960')
 5445  0000000                   	LDA #01H
 5446  0000000                   	TRB !PWMEN
 5447  0000000                   .ENDIF
 5448  0000000                   	ENDM
 5449  0000000                   ;------------------------------------------------------------------------------	
 5450  0000000                   EN_BP33_PWM MACRO DUTY, DIVISION
 5451  0000000                   .IF	(MAINBODY='A960')
 5452  0000000                   	EN_BPXX_PWM BP33_PWM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY
 5453  0000000                   .ENDIF
 5454  0000000                   	ENDM
 5455  0000000                   ;------------------------------------------------------------------------------
 5456  0000000                   EN_BP33_H_PWM MACRO DUTY, DIVISION
 5457  0000000                   .IF	(MAINBODY='A960')
 5458  0000000                   	EN_BPXX_H_PWM BP33_PWM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY
 5459  0000000                   .ENDIF
 5460  0000000                   	ENDM
 5461  0000000                   ;------------------------------------------------------------------------------





 5462  0000000                   EN_BP33_PWM_RAM MACRO DUTY_RAM, DIVISION
 5463  0000000                   .IF	(MAINBODY='A960')
 5464  0000000                   	EN_BPXX_PWM_RAM BP33_PWM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY_RAM
 5465  0000000                   .ENDIF
 5466  0000000                   	ENDM
 5467  0000000                   ;-------------------------------------------------------------	
 5468  0000000                   EN_BP33_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5469  0000000                   .IF	(MAINBODY='A960')
 5470  0000000                   	EN_BPXX_H_PWM_RAM BP33_PWM_RAM,3,1,0,02H,PWM_G1_MASK,PWM_G1_BP33,(DIVISION-1),DUTY_RAM
 5471  0000000                   .ENDIF
 5472  0000000                   	ENDM
 5473  0000000                   ;------------------------------------------------------------------------------	
 5474  0000000                   DIS_BP33_PWM MACRO
 5475  0000000                   .IF	(MAINBODY='A960')
 5476  0000000                   	LDA #02H
 5477  0000000                   	TRB !PWMEN
 5478  0000000                   .ENDIF
 5479  0000000                   	ENDM
 5480  0000000                   ;------------------------------------------------------------------------------	
 5481  0000000                   EN_BP34_PWM MACRO DUTY, DIVISION
 5482  0000000                   .IF	(MAINBODY='A960')
 5483  0000000                   	EN_BPXX_PWM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY
 5484  0000000                   .ENDIF
 5485  0000000                   	ENDM
 5486  0000000                   ;------------------------------------------------------------------------------
 5487  0000000                   EN_BP34_H_PWM MACRO DUTY, DIVISION
 5488  0000000                   .IF	(MAINBODY='A960')
 5489  0000000                   	EN_BPXX_H_PWM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY
 5490  0000000                   .ENDIF
 5491  0000000                   	ENDM
 5492  0000000                   ;------------------------------------------------------------------------------
 5493  0000000                   EN_BP34_PWM_RAM MACRO DUTY_RAM, DIVISION
 5494  0000000                   .IF	(MAINBODY='A960')
 5495  0000000                   	EN_BPXX_PWM_RAM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY_RAM
 5496  0000000                   .ENDIF
 5497  0000000                   	ENDM
 5498  0000000                   ;-------------------------------------------------------------	
 5499  0000000                   EN_BP34_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5500  0000000                   .IF	(MAINBODY='A960')
 5501  0000000                   	EN_BPXX_H_PWM_RAM BP34_PWM,3,2,0,04H,PWM_G2_MASK,PWM_G2_BP34,(DIVISION-1),DUTY_RAM
 5502  0000000                   .ENDIF
 5503  0000000                   	ENDM
 5504  0000000                   ;------------------------------------------------------------------------------	
 5505  0000000                   DIS_BP34_PWM MACRO
 5506  0000000                   .IF	(MAINBODY='A960')
 5507  0000000                   	LDA #04H
 5508  0000000                   	TRB !PWMEN
 5509  0000000                   .ENDIF
 5510  0000000                   	ENDM
 5511  0000000                   ;------------------------------------------------------------------------------	
 5512  0000000                   EN_BP35_PWM MACRO DUTY, DIVISION
 5513  0000000                   .IF	(MAINBODY='A960')
 5514  0000000                   	EN_BPXX_PWM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY
 5515  0000000                   .ENDIF
 5516  0000000                   	ENDM
 5517  0000000                   ;------------------------------------------------------------------------------
 5518  0000000                   EN_BP35_H_PWM MACRO DUTY, DIVISION





 5519  0000000                   .IF	(MAINBODY='A960')
 5520  0000000                   	EN_BPXX_H_PWM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY
 5521  0000000                   .ENDIF
 5522  0000000                   	ENDM
 5523  0000000                   ;------------------------------------------------------------------------------
 5524  0000000                   EN_BP35_PWM_RAM MACRO DUTY_RAM, DIVISION
 5525  0000000                   .IF	(MAINBODY='A960')
 5526  0000000                   	EN_BPXX_PWM_RAM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY_RAM
 5527  0000000                   .ENDIF
 5528  0000000                   	ENDM
 5529  0000000                   ;-------------------------------------------------------------	
 5530  0000000                   EN_BP35_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5531  0000000                   .IF	(MAINBODY='A960')
 5532  0000000                   	EN_BPXX_H_PWM_RAM BP35_PWM,3,3,0,08H,PWM_G3_MASK,PWM_G3_BP35,(DIVISION-1),DUTY_RAM
 5533  0000000                   .ENDIF
 5534  0000000                   	ENDM
 5535  0000000                   ;------------------------------------------------------------------------------	
 5536  0000000                   DIS_BP35_PWM MACRO
 5537  0000000                   .IF	(MAINBODY='A960')
 5538  0000000                   	LDA #08H
 5539  0000000                   	TRB !PWMEN
 5540  0000000                   .ENDIF
 5541  0000000                   	ENDM
 5542  0000000                   ;------------------------------------------------------------------------------	
 5543  0000000                   EN_BP36_PWM MACRO DUTY, DIVISION
 5544  0000000                   .IF	(MAINBODY='A960')
 5545  0000000                   	EN_BPXX_PWM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY
 5546  0000000                   .ENDIF
 5547  0000000                   	ENDM
 5548  0000000                   ;------------------------------------------------------------------------------
 5549  0000000                   EN_BP36_H_PWM MACRO DUTY, DIVISION
 5550  0000000                   .IF	(MAINBODY='A960')
 5551  0000000                   	EN_BPXX_H_PWM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY
 5552  0000000                   .ENDIF
 5553  0000000                   	ENDM
 5554  0000000                   ;------------------------------------------------------------------------------
 5555  0000000                   EN_BP36_PWM_RAM MACRO DUTY_RAM, DIVISION
 5556  0000000                   .IF	(MAINBODY='A960')
 5557  0000000                   	EN_BPXX_PWM_RAM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY_RAM
 5558  0000000                   .ENDIF
 5559  0000000                   	ENDM
 5560  0000000                   ;-------------------------------------------------------------	
 5561  0000000                   EN_BP36_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5562  0000000                   .IF	(MAINBODY='A960')
 5563  0000000                   	EN_BPXX_H_PWM_RAM BP36_PWM,3,4,1,10H,PWM_G4_MASK,PWM_G4_BP36,(DIVISION-1),DUTY_RAM
 5564  0000000                   .ENDIF
 5565  0000000                   	ENDM
 5566  0000000                   ;------------------------------------------------------------------------------	
 5567  0000000                   DIS_BP36_PWM MACRO
 5568  0000000                   .IF	(MAINBODY='A960')
 5569  0000000                   	LDA #10H
 5570  0000000                   	TRB !PWMEN
 5571  0000000                   .ENDIF
 5572  0000000                   	ENDM
 5573  0000000                   ;------------------------------------------------------------------------------	
 5574  0000000                   EN_BP37_PWM MACRO DUTY, DIVISION
 5575  0000000                   .IF	(MAINBODY='A960')





 5576  0000000                   	EN_BPXX_PWM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY
 5577  0000000                   .ENDIF
 5578  0000000                   	ENDM
 5579  0000000                   ;------------------------------------------------------------------------------
 5580  0000000                   EN_BP37_H_PWM MACRO DUTY, DIVISION
 5581  0000000                   .IF	(MAINBODY='A960')
 5582  0000000                   	EN_BPXX_H_PWM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY
 5583  0000000                   .ENDIF
 5584  0000000                   	ENDM
 5585  0000000                   ;------------------------------------------------------------------------------
 5586  0000000                   EN_BP37_PWM_RAM MACRO DUTY_RAM, DIVISION
 5587  0000000                   .IF	(MAINBODY='A960')
 5588  0000000                   	EN_BPXX_PWM_RAM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY_RAM
 5589  0000000                   .ENDIF
 5590  0000000                   	ENDM
 5591  0000000                   ;-------------------------------------------------------------	
 5592  0000000                   EN_BP37_H_PWM_RAM MACRO DUTY_RAM, DIVISION
 5593  0000000                   .IF	(MAINBODY='A960')
 5594  0000000                   	EN_BPXX_H_PWM_RAM BP37_PWM,3,5,1,20H,PWM_G5_MASK,PWM_G5_BP37,(DIVISION-1),DUTY_RAM
 5595  0000000                   .ENDIF
 5596  0000000                   	ENDM
 5597  0000000                   ;------------------------------------------------------------------------------	
 5598  0000000                   DIS_BP37_PWM MACRO
 5599  0000000                   .IF	(MAINBODY='A960')
 5600  0000000                   	LDA #20H
 5601  0000000                   	TRB !PWMEN
 5602  0000000                   .ENDIF
 5603  0000000                   	ENDM
 5604  0000000                   ;------------------------------------------------------------------------------
 5605  0000000                   ;------------------------------------------------------------------------------
 5606  0000000                   HWE_PWM_PINMAP_RAM MACRO BPXX_RAM
 5607  0000000                   	LDA BPXX_RAM 
 5608  0000000                   	AND #0FH		; Low 4 nibble bits is pin number
 5609  0000000                   	TAY
 5610  0000000                   	LDA PWM_PIN_TABLE, Y
 5611  0000000                   	ENDM
 5612  0000000                   ;------------------------------------------------------------------------------
 5613  0000000                   HWE_PWM_PORTMAP_RAM MACRO BPXX_RAM
 5614  0000000                   	LDA BPXX_RAM 
 5615  0000000                   	AND #F0H		; High 4 nibble bits is port number
 5616  0000000                   	LSR A
 5617  0000000                   	LSR A
 5618  0000000                   	LSR A
 5619  0000000                   	LSR A
 5620  0000000                   	TAX
 5621  0000000                   	ENDM
 5622  0000000                   ;------------------------------------------------------------------------------
 5623  0000000                   HWE_CTRL_PWM_RAM MACRO ENABLE_RAM,BPXX_RAM,DUTY_RAM,DIV_RAM
 5624  0000000                   	PHP 
 5625  0000000                   
 5626  0000000                   	HWE_PWM_PORTMAP_RAM	BPXX_RAM ; "X" register saves port index
 5627  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;"A" register saves pin information (table: 000xxxxb)
 5628  0000000                   
 5629  0000000                   	LDY ENABLE_RAM
 5630  0000000                   	CPY #00H				;for disable
 5631  0000000                   	BEQ DISABLE_PWM#
 5632  0000000                   





 5633  0000000                   	ORA !BP0,X
 5634  0000000                   	STA !BP0,X				;duty,low level
 5635  0000000                   
 5636  0000000                   	LDA BPXX_RAM 
 5637  0000000                   	AND #0FH
 5638  0000000                   	TAY						;Backup pin information by index: 0~7
 5639  0000000                   
 5640  0000000                   	LDA ENABLE_RAM		
 5641  0000000                   	CMP #11H
 5642  0000000                   	BNE BPX_PWM_RAM_INIT_CONST#
 5643  0000000                   	LDA !DUTY_RAM
 5644  0000000                   	EOR #FFH			;duty,high level
 5645  0000000                   	JMP INIT_DUTY#
 5646  0000000                   BPX_PWM_RAM_INIT_CONST#:
 5647  0000000                   	LDA !DUTY_RAM
 5648  0000000                   INIT_DUTY#:
 5649  0000000                   	CPX #00H
 5650  0000000                   	BEQ INIT_PWV0X#
 5651  0000000                   	STA !PWV10,Y	; save duty count
 5652  0000000                   
 5653  0000000                   	LDA #70H
 5654  0000000                   	TRB !PWMC		;PWM Clock Source Selection
 5655  0000000                   ;keep low 3 nibble bits is for BP00~BP05
 5656  0000000                   	LDA DIV_RAM
 5657  0000000                   	DEC A
 5658  0000000                   	ASL A
 5659  0000000                   	ASL A
 5660  0000000                   	ASL A
 5661  0000000                   	ASL A
 5662  0000000                   	ORA !PWMC		
 5663  0000000                   	JMP INIT_NEXT#
 5664  0000000                   
 5665  0000000                   INIT_PWV0X#:
 5666  0000000                   	STA !PWV00,Y	; save duty count
 5667  0000000                   	LDA !PWMC		;PWM Clock Source Selection
 5668  0000000                   	AND #70H		;keep high 3 nibble bits is for BP10~BP12
 5669  0000000                   	ORA DIV_RAM
 5670  0000000                   	DEC A
 5671  0000000                   INIT_NEXT#:
 5672  0000000                   	STA !PWMC		;PWM Clock Source Selection
 5673  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;load pin information
 5674  0000000                   	ORA !PWM0EN,X
 5675  0000000                   	STA !PWM0EN,X
 5676  0000000                   
 5677  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;load pin information	
 5678  0000000                   	EOR #FFH
 5679  0000000                   	AND !BP0D,X
 5680  0000000                   	STA !BP0D,X
 5681  0000000                   ;TRB !(BP0D+PORT_INDEX)		;BP0D[]=0 =>BP0[] as output pin
 5682  0000000                   
 5683  0000000                   	HWE_PWM_PINMAP_RAM BPXX_RAM ;load pin information
 5684  0000000                   	ORA !BP0M,X
 5685  0000000                   	STA !BP0M,X
 5686  0000000                   ;TSB !(BP0M+PORT_INDEX)		;BP0M[]=1 =>BP0[] as CMOS output pin
 5687  0000000                   	JMP RETURN#
 5688  0000000                   DISABLE_PWM#:	
 5689  0000000                   	EOR #FFH





 5690  0000000                   	AND !PWM0EN,X
 5691  0000000                   	STA !PWM0EN,X
 5692  0000000                   
 5693  0000000                   RETURN#:	
 5694  0000000                   	PLP
 5695  0000000                   	ENDM
 5696  0000000                   ;------------------------------------------------------------------------------
 5697  0000000                   ; Control UltroIO
 5698  0000000                   ;------------------------------------------------------------------------------
 5699  0000000                   EN_ULTRAIO_PIN MACRO INDEX
 5700  0000000                   	EXTERN UIO_PIN_NUM
 5701  0000000                   	EXTERN UIO_USED_PIN_|INDEX
 5702  0000000                   	LDA #INDEX-1
 5703  0000000                   	CMP #UIO_PIN_NUM
 5704  0000000                   	BCS EN_ULTRAIO_PIN_END#
 5705  0000000                   	LDA #UIO_USED_PIN_|INDEX
 5706  0000000                   	BEQ EN_ULTRAIO_PIN_END#
 5707  0000000                   
 5708  0000000                   	EXTERN UIO_PIN_CH_FLAG_|INDEX
 5709  0000000                   	EXTERN UIO_SET_PIN_ENABLE_VALUE_|INDEX
 5710  0000000                   	LDA #7FH
 5711  0000000                   	AND !UIO_PIN_CH_FLAG_|INDEX
 5712  0000000                   	STA !UIO_PIN_CH_FLAG_|INDEX
 5713  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_SET_PIN_ENABLE_VALUE_|INDEX
 5714  0000000                   
 5715  0000000                   EN_ULTRAIO_PIN_END#:
 5716  0000000                   	ENDM
 5717  0000000                   ;------------------------------------------------------------------------------	
 5718  0000000                   DIS_ULTRAIO_PIN MACRO INDEX
 5719  0000000                   	EXTERN UIO_PIN_NUM
 5720  0000000                   	EXTERN UIO_USED_PIN_|INDEX
 5721  0000000                   	EXTERN UIO_SET_PIN_DISABLE_VALUE_|INDEX
 5722  0000000                   	LDA #INDEX-1	
 5723  0000000                   	CMP #UIO_PIN_NUM
 5724  0000000                   	BCS DIS_ULTRAIO_PIN_END#
 5725  0000000                   	LDA #UIO_USED_PIN_|INDEX
 5726  0000000                   	BEQ DIS_ULTRAIO_PIN_END#
 5727  0000000                   
 5728  0000000                   	EXTERN UIO_PIN_CH_FLAG_|INDEX
 5729  0000000                   	LDA #80H
 5730  0000000                   	ORA !UIO_PIN_CH_FLAG_|INDEX
 5731  0000000                   	STA !UIO_PIN_CH_FLAG_|INDEX
 5732  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_SET_PIN_DISABLE_VALUE_|INDEX
 5733  0000000                   
 5734  0000000                   DIS_ULTRAIO_PIN_END#:
 5735  0000000                   	ENDM
 5736  0000000                   ;------------------------------------------------------------------------------	
 5737  0000000                   EN_ULTRAIO_CURVE MACRO INDEX	
 5738  0000000                   	EN_ULTRAIO_PIN INDEX
 5739  0000000                   	ENDM
 5740  0000000                   ;------------------------------------------------------------------------------		
 5741  0000000                   DIS_ULTRAIO_CURVE MACRO INDEX
 5742  0000000                   	DIS_ULTRAIO_PIN INDEX
 5743  0000000                   	ENDM
 5744  0000000                   ;------------------------------------------------------------------------------	
 5745  0000000                   SET_ULTRAIO_CURVE_PIN MACRO INDEX, PIN_MAPPING
 5746  0000000                   	EXTERN UIO_PIN_NUM





 5747  0000000                   	EXTERN UIO_MULTI_PIN_|INDEX
 5748  0000000                   	EXTERN UIO_PIN_|INDEX
 5749  0000000                   	EXTERN UIO_EN_MULTI_PIN_|INDEX
 5750  0000000                   	EXTERN UIO_SET_DIS_PIN_STOP_VALUE_|INDEX
 5751  0000000                   	LDA #INDEX-1
 5752  0000000                   	CMP #UIO_PIN_NUM
 5753  0000000                   	BCS SET_ULTRAIO_CURVE_PIN_END#
 5754  0000000                   	LDA #UIO_MULTI_PIN_|INDEX
 5755  0000000                   	BEQ SET_ULTRAIO_CURVE_PIN_END#
 5756  0000000                   
 5757  0000000                   	LDA #PIN_MAPPING
 5758  0000000                   	AND #UIO_PIN_|INDEX
 5759  0000000                   	STA !UIO_EN_MULTI_PIN_|INDEX
 5760  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_SET_DIS_PIN_STOP_VALUE_|INDEX
 5761  0000000                   SET_ULTRAIO_CURVE_PIN_END#:
 5762  0000000                   	ENDM
 5763  0000000                   ;------------------------------------------------------------------------------
 5764  0000000                   STOP_KEEP_LEVEL_PIN MACRO INDEX
 5765  0000000                   	EXTERN UIO_PIN_NUM
 5766  0000000                   	EXTERN UIO_USED_PIN_|INDEX
 5767  0000000                   	EXTERN UIO_STOP_KEEP_LEVEL_PIN_|INDEX
 5768  0000000                   	LDA #INDEX-1
 5769  0000000                   	CMP #UIO_PIN_NUM
 5770  0000000                   	BCS STOP_KEEP_LEVEL_PIN_END#
 5771  0000000                   	LDA #UIO_USED_PIN_|INDEX
 5772  0000000                   	BEQ STOP_KEEP_LEVEL_PIN_END#
 5773  0000000                   
 5774  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_STOP_KEEP_LEVEL_PIN_|INDEX
 5775  0000000                   STOP_KEEP_LEVEL_PIN_END#:	
 5776  0000000                   	ENDM
 5777  0000000                   ;------------------------------------------------------------------------------	
 5778  0000000                   STOP_ALL_KEEP_LEVEL_PIN MACRO
 5779  0000000                   	EXTERN UIO_STOP_ALL_KEEP_LEVEL_PIN
 5780  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_STOP_ALL_KEEP_LEVEL_PIN
 5781  0000000                   	ENDM
 5782  0000000                   ;------------------------------------------------------------------------------
 5783  0000000                   HWE_CTRL_UIO_EVENT_RAM MACRO ENABLE_RAM,CHANNEL_RAM
 5784  0000000                   	PHP 
 5785  0000000                   	SEI 
 5786  0000000                   
 5787  0000000                   	LDY CHANNEL_RAM 
 5788  0000000                   	EXTERN DIS_UIO_EVENT_FLAG 
 5789  0000000                   	LDA !DIS_UIO_EVENT_FLAG,Y 
 5790  0000000                   	TRB <COMMON_FLAG2  
 5791  0000000                   
 5792  0000000                       PSF_RESPONSE_LIMIT 
 5793  0000000                       LDA #SPEECH_TYPE 
 5794  0000000                       LDX ENABLE_RAM 
 5795  0000000                       CPX #01H 
 5796  0000000                       BEQ UIOSTART_ROUTINE# 
 5797  0000000                       EXTERN UIO_STOP 
 5798  0000000                       JSR UIO_STOP 
 5799  0000000                       JMP SKIP_UIOSTART# 
 5800  0000000                   
 5801  0000000                   UIOSTART_ROUTINE#:
 5802  0000000                       EXTERN UIO_START
 5803  0000000                   	JSR UIO_START





 5804  0000000                   
 5805  0000000                   SKIP_UIOSTART#: 
 5806  0000000                       PSF_RESPONSE_LIMIT_RELEASE
 5807  0000000                   
 5808  0000000                   	PLP
 5809  0000000                   	ENDM
 5810  0000000                   ;------------------------------------------------------------------------------	
 5811  0000000                   HWE_EN_UIO_PIN_RAM MACRO INDEX_RAM
 5812  0000000                   	EXTERN UIO_PIN_NUM
 5813  0000000                   	EXTERN UIO_USED_PIN_TABLE
 5814  0000000                   
 5815  0000000                   	LDA INDEX_RAM
 5816  0000000                   	DEC A
 5817  0000000                   	CMP #UIO_PIN_NUM
 5818  0000000                   	BCS EN_ULTRAIO_PIN_END#
 5819  0000000                   	TAX 
 5820  0000000                   	LDA !UIO_USED_PIN_TABLE, X
 5821  0000000                   	BEQ EN_ULTRAIO_PIN_END#
 5822  0000000                   .IFNDEF	FW_BAM_TIMER
 5823  0000000                   	EXTERN UIO_PIN_CH_FLAG_ARRAY
 5824  0000000                   	EXTERN UIO_SET_PIN_ENABLE_VALUE_TABLE
 5825  0000000                   	EXTERN UIO_PIN_RAM_OFFSET_TABLE
 5826  0000000                   	LDY !UIO_PIN_RAM_OFFSET_TABLE,X ;Remapping RAM address by offset table
 5827  0000000                   	LDA #7FH
 5828  0000000                   	AND !UIO_PIN_CH_FLAG_ARRAY,Y
 5829  0000000                   	STA !UIO_PIN_CH_FLAG_ARRAY,Y
 5830  0000000                   	TXA
 5831  0000000                   	ASL A
 5832  0000000                   	TAX
 5833  0000000                   	JSR_AII_X UIO_SET_PIN_ENABLE_VALUE_TABLE
 5834  0000000                   .else
 5835  0000000                   
 5836  0000000                   .ENDIF
 5837  0000000                   
 5838  0000000                   EN_ULTRAIO_PIN_END#:
 5839  0000000                   	ENDM
 5840  0000000                   ;------------------------------------------------------------------------------	
 5841  0000000                   HWE_DIS_UIO_PIN_RAM MACRO INDEX_RAM
 5842  0000000                   	EXTERN UIO_PIN_NUM
 5843  0000000                   	EXTERN UIO_USED_PIN_TABLE
 5844  0000000                   	EXTERN UIO_SET_PIN_DISABLE_VALUE_TABLE
 5845  0000000                   
 5846  0000000                   	LDA INDEX_RAM
 5847  0000000                   	DEC A
 5848  0000000                   	CMP #UIO_PIN_NUM
 5849  0000000                   	BCS DIS_ULTRAIO_PIN_END#
 5850  0000000                   	TAX 
 5851  0000000                   	LDA !UIO_USED_PIN_TABLE, X
 5852  0000000                   	BEQ DIS_ULTRAIO_PIN_END#
 5853  0000000                   
 5854  0000000                   	EXTERN UIO_PIN_CH_FLAG_ARRAY
 5855  0000000                   	EXTERN UIO_PIN_RAM_OFFSET_TABLE
 5856  0000000                   	LDY !UIO_PIN_RAM_OFFSET_TABLE,X ;Remapping RAM address by offset table
 5857  0000000                   	LDA #80H
 5858  0000000                   	ORA !UIO_PIN_CH_FLAG_ARRAY,Y
 5859  0000000                   	STA !UIO_PIN_CH_FLAG_ARRAY,Y
 5860  0000000                   	TXA





 5861  0000000                   	ASL A
 5862  0000000                   	TAX
 5863  0000000                   	JSR_AII_X UIO_SET_PIN_DISABLE_VALUE_TABLE
 5864  0000000                   DIS_ULTRAIO_PIN_END#:
 5865  0000000                   	ENDM
 5866  0000000                   ;------------------------------------------------------------------------------	
 5867  0000000                   HWE_CTRL_UIO_PIN_RAM MACRO ENABLE_RAM,PININDEX_RAM
 5868  0000000                   	PHP 
 5869  0000000                   
 5870  0000000                   	LDA ENABLE_RAM
 5871  0000000                   	CMP #01H
 5872  0000000                   	BEQ ENABLE_PINS#
 5873  0000000                   	HWE_DIS_UIO_PIN_RAM PININDEX_RAM
 5874  0000000                   	JMP RETURN#
 5875  0000000                   ENABLE_PINS#:
 5876  0000000                   	HWE_EN_UIO_PIN_RAM PININDEX_RAM
 5877  0000000                   RETURN#:
 5878  0000000                   
 5879  0000000                   	PLP
 5880  0000000                   	ENDM
 5881  0000000                   ;------------------------------------------------------------------------------	
 5882  0000000                   HWE_CTRL_UIO_CURVE_RAM MACRO ENABLE_RAM,CURVEINDEX_RAM
 5883  0000000                   	PHP 
 5884  0000000                   
 5885  0000000                   	LDA ENABLE_RAM
 5886  0000000                   	CMP #01H
 5887  0000000                   	BEQ ENABLE_CURVES#
 5888  0000000                   	HWE_DIS_UIO_PIN_RAM CURVEINDEX_RAM
 5889  0000000                   	JMP RETURN#
 5890  0000000                   ENABLE_CURVES#:
 5891  0000000                   	HWE_EN_UIO_PIN_RAM CURVEINDEX_RAM
 5892  0000000                   RETURN#:
 5893  0000000                   
 5894  0000000                   	PLP
 5895  0000000                   	ENDM
 5896  0000000                   ;------------------------------------------------------------------------------	
 5897  0000000                   HWE_SET_UIO_CURVE_PIN_RAM MACRO INDEX_RAM, PIN_MAPPING_RAM
 5898  0000000                   	PHP 
 5899  0000000                   
 5900  0000000                   	EXTERN UIO_PIN_NUM
 5901  0000000                   	EXTERN UIO_MULTI_PIN_TABLE
 5902  0000000                   	EXTERN UIO_PIN_TABLE
 5903  0000000                   	EXTERN UIO_SET_DIS_PIN_STOP_VALUE_TABLE
 5904  0000000                   
 5905  0000000                   	LDA INDEX_RAM
 5906  0000000                   	DEC A
 5907  0000000                   	CMP #UIO_PIN_NUM
 5908  0000000                   	BCS SET_ULTRAIO_CURVE_PIN_END#
 5909  0000000                   	TAX 
 5910  0000000                   	LDA !UIO_MULTI_PIN_TABLE, X
 5911  0000000                   	BEQ SET_ULTRAIO_CURVE_PIN_END#
 5912  0000000                   
 5913  0000000                   	EXTERN UIO_EN_MULTI_PIN_ARRAY
 5914  0000000                   	EXTERN UIO_PIN_RAM_OFFSET_TABLE
 5915  0000000                   	LDY !UIO_PIN_RAM_OFFSET_TABLE,X ;Remapping RAM address by offset table
 5916  0000000                   	LDA PIN_MAPPING_RAM
 5917  0000000                   	AND !UIO_PIN_TABLE,X





 5918  0000000                   	STA !UIO_EN_MULTI_PIN_ARRAY,Y
 5919  0000000                   	TXA
 5920  0000000                   	ASL A
 5921  0000000                   	TAX
 5922  0000000                   	JSR_AII_X UIO_SET_DIS_PIN_STOP_VALUE_TABLE
 5923  0000000                   SET_ULTRAIO_CURVE_PIN_END#:
 5924  0000000                   
 5925  0000000                   	PLP
 5926  0000000                   	ENDM
 5927  0000000                   ;------------------------------------------------------------------------------
 5928  0000000                   ; Control SLD
 5929  0000000                   ;------------------------------------------------------------------------------
 5930  0000000                   EN_SLD_PIN MACRO
 5931  0000000                   	EXTERN SLD_ENABLE_PIN
 5932  0000000                   	PSF_RESPONSE_LIMIT_JSR SLD_ENABLE_PIN
 5933  0000000                   	ENDM
 5934  0000000                   ;------------------------------------------------------------------------------		
 5935  0000000                   DIS_SLD_PIN MACRO
 5936  0000000                   	EXTERN SLD_DISABLE_PIN
 5937  0000000                   	PSF_RESPONSE_LIMIT_JSR SLD_DISABLE_PIN
 5938  0000000                   	ENDM
 5939  0000000                   ;------------------------------------------------------------------------------
 5940  0000000                   ; Control IR WAKEUP
 5941  0000000                   ;------------------------------------------------------------------------------
 5942  0000000                   IR_WAKEUP_EN	MACRO IRWS_VALUE, IRWD_VALUE, IRWSB_VALUE
 5943  0000000                   ;init
 5944  0000000                   	LDA #80h	
 5945  0000000                   	TSB !BP0D	;set BP07 input floating	
 5946  0000000                   	TRB !BP0M
 5947  0000000                   
 5948  0000000                   	LDA #40h	
 5949  0000000                   	TRB !BP0R	
 5950  0000000                   	TRB !BP0D	;set BP06 output LOW
 5951  0000000                   	TSB !BP0M
 5952  0000000                   
 5953  0000000                   	LDA #08H
 5954  0000000                   	TSB !BP1D	;set BP13 input floating
 5955  0000000                   	TRB !BP1M
 5956  0000000                   
 5957  0000000                   	LDA #IRWS_VALUE
 5958  0000000                   	STA !IRWS
 5959  0000000                   
 5960  0000000                   	LDA #IRWD_VALUE
 5961  0000000                   	STA !IRWD
 5962  0000000                   
 5963  0000000                   	LDA #IRWSB_VALUE
 5964  0000000                   	STA !IRWSB
 5965  0000000                   
 5966  0000000                   	LDA #43H	;enable LRC osc, enable IR-Wakeup detection, IR detect pin BP07 input high
 5967  0000000                   	STA !LRCC
 5968  0000000                   	ENDM
 5969  0000000                   ;----------------------------------------------------------------
 5970  0000000                   IR_WAKEUP_DIS	MACRO
 5971  0000000                   	STZ !LRCC
 5972  0000000                   	ENDM
 5973  0000000                   
 5974  0000000                   ;------------------------------------------------------------------------------





 5975  0000000                   ; N55P device
 5976  0000000                   ;------------------------------------------------------------------------------
 5977  0000000                   .IF (N55P_DEVICE_NUM .GT. 0H)
 5978  0000000                   	EXTERN N55P_X0_INIT_PIN
 5979  0000000                   	EXTERN N55P_X0_ON
 5980  0000000                   	EXTERN N55P_X0_OFF
 5981  0000000                   	EXTERN N55P_X0_MISO
 5982  0000000                   	EXTERN N55P_X0_MOSI
 5983  0000000                   ;------------------------------------------------------------------------------
 5984  0000000                   N55P_INIT MACRO 
 5985  0000000                   	SPI_X0_INIT_PIN
 5986  0000000                   	ENDM
 5987  0000000                   ;----------------------------------------------------------------
 5988  0000000                   N55P_COMMAND_WRITE_CONST MACRO COMMAND,DATA
 5989  0000000                   	SPI_X0_ON
 5990  0000000                   	LDA #COMMAND+80H
 5991  0000000                   	SPI_X0_MOSI
 5992  0000000                   	LDA #DATA
 5993  0000000                   	SPI_X0_MOSI
 5994  0000000                   	SPI_X0_OFF
 5995  0000000                   	ENDM
 5996  0000000                   ;----------------------------------------------------------------
 5997  0000000                   N55P_COMMAND_WRITE_RAM MACRO COMMAND,DATA_ADDR
 5998  0000000                   	SPI_X0_ON
 5999  0000000                   	LDA #COMMAND+80H
 6000  0000000                   	SPI_X0_MOSI
 6001  0000000                   	LDA DATA_ADDR
 6002  0000000                   	SPI_X0_MOSI
 6003  0000000                   	SPI_X0_OFF
 6004  0000000                   	ENDM
 6005  0000000                   ;----------------------------------------------------------------
 6006  0000000                   N55P_COMMAND_READ MACRO COMMAND
 6007  0000000                   	SPI_X0_ON
 6008  0000000                   	LDA #COMMAND&7Fh
 6009  0000000                   	SPI_X0_MOSI
 6010  0000000                   	SPI_X0_MISO
 6011  0000000                   	SPI_X0_OFF
 6012  0000000                   	TYA
 6013  0000000                   	ENDM
 6014  0000000                   ;----------------------------------------------------------------
 6015  0000000                   N55P_COMMAND_READ_RAM MACRO COMMAND,RAM
 6016  0000000                   	SPI_X0_ON
 6017  0000000                   	LDA #COMMAND&7Fh
 6018  0000000                   	SPI_X0_MOSI
 6019  0000000                   	SPI_X0_MISO
 6020  0000000                   	SPI_X0_OFF
 6021  0000000                   	STY RAM
 6022  0000000                   	ENDM	
 6023  0000000                   ;----------------------------------------------------------------
 6024  0000000                   N55P_COMMAND_WRITE_UPDATE MACRO ADDR,BIT_MASK,DATA
 6025  0000000                   	N55P_COMMAND_READ ADDR
 6026  0000000                   
 6027  0000000                   	PHA		
 6028  0000000                   	SPI_X0_ON
 6029  0000000                   	LDA #ADDR+80H
 6030  0000000                   	SPI_X0_MOSI
 6031  0000000                   	PLA





 6032  0000000                   	AND #(FFH^BIT_MASK)
 6033  0000000                   	ORA #DATA
 6034  0000000                   	SPI_X0_MOSI
 6035  0000000                   	SPI_X0_OFF
 6036  0000000                   	ENDM
 6037  0000000                   ;----------------------------------------------------------------
 6038  0000000                   N55P_DEVICE_0 MACRO
 6039  0000000                   	N55P_COMMAND_WRITE_CONST 4Ch, FFh   
 6040  0000000                   	ENDM
 6041  0000000                   ;----------------------------------------------------------------	
 6042  0000000                   N55P_DEVICE_1 MACRO
 6043  0000000                   	N55P_COMMAND_WRITE_CONST 4Dh, FFh
 6044  0000000                   	ENDM
 6045  0000000                   
 6046  0000000                   ;----------------------------------------------------------------
 6047  0000000                   N55P_RESET MACRO
 6048  0000000                   	N55P_COMMAND_WRITE_CONST 4Fh, FFH
 6049  0000000                   	ENDM
 6050  0000000                   ;----------------------------------------------------------------		
 6051  0000000                   N55P_SET_PORT_CONST_CURRENT MACRO XPORT,XPINS
 6052  0000000                   	N55P_COMMAND_WRITE_CONST P242CNST_BPA+XPORT,XPINS
 6053  0000000                   	ENDM
 6054  0000000                   ;----------------------------------------------------------------
 6055  0000000                   N55P_SET_STATUS MACRO XPORT,XPORT_MASK,B_VALUE,D_VALUE,A_VALUE
 6056  0000000                   	N55P_COMMAND_WRITE_CONST P242BPA_B+XPORT,B_VALUE
 6057  0000000                   	N55P_COMMAND_WRITE_CONST P242BPA_D+XPORT,D_VALUE
 6058  0000000                   	N55P_COMMAND_WRITE_CONST P242BPA_A+XPORT,A_VALUE
 6059  0000000                   	ENDM
 6060  0000000                   ;----------------------------------------------------------------
 6061  0000000                   N55P_AND_BUFFER MACRO XPORT,B_VALUE
 6062  0000000                   	N55P_COMMAND_WRITE_CONST P242AND_BPA_B+XPORT,B_VALUE
 6063  0000000                   	ENDM	
 6064  0000000                   ;----------------------------------------------------------------
 6065  0000000                   N55P_AND_BUFFER_RAM MACRO XPORT,B_VALUE_RAM
 6066  0000000                   	N55P_COMMAND_WRITE_RAM P242AND_BPA_B+XPORT,B_VALUE_RAM
 6067  0000000                   	ENDM	
 6068  0000000                   ;----------------------------------------------------------------
 6069  0000000                   N55P_OR_BUFFER MACRO XPORT,B_VALUE
 6070  0000000                   	N55P_COMMAND_WRITE_CONST P242OR_BPA_B+XPORT,B_VALUE
 6071  0000000                   	ENDM	
 6072  0000000                   ;----------------------------------------------------------------
 6073  0000000                   N55P_OR_BUFFER_RAM MACRO XPORT,B_VALUE_RAM
 6074  0000000                   	N55P_COMMAND_WRITE_RAM P242OR_BPA_B+XPORT,B_VALUE_RAM
 6075  0000000                   	ENDM		
 6076  0000000                   ;----------------------------------------------------------------
 6077  0000000                   N55P_SET_BPAB_PWM_RATE MACRO PCKAB_MASK,PCKAB_VALUE
 6078  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMCK_BPA,PCKAB_MASK,PCKAB_VALUE
 6079  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMCK_BPA,PCKAB_VALUE
 6080  0000000                   	ENDM
 6081  0000000                   ;----------------------------------------------------------------
 6082  0000000                   N55P_SET_BPC_PWM_RATE MACRO PCKC_MASK,PCKC_VALUE
 6083  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMCK_BPC,PCKC_MASK,PCKC_VALUE
 6084  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMCK_BPC,PCKC_VALUE
 6085  0000000                   	ENDM
 6086  0000000                   ;----------------------------------------------------------------
 6087  0000000                   N55P_EN_PWM_PIN MACRO XPORT,XPWMX	
 6088  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMEN_BPA+XPORT,XPWMX,XPWMX





 6089  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMEN_BPA+XPORT,XPWMX
 6090  0000000                   	ENDM
 6091  0000000                   ;----------------------------------------------------------------
 6092  0000000                   N55P_DIS_PWM_PIN MACRO XPORT,XPWMX
 6093  0000000                   ;	N55P_COMMAND_WRITE_UPDATE P242PWMEN_BPA+XPORT,XPWMX,XPWMX
 6094  0000000                   	N55P_COMMAND_WRITE_CONST P242PWMEN_BPA+XPORT,0	
 6095  0000000                   	ENDM
 6096  0000000                   ;----------------------------------------------------------------
 6097  0000000                   N55P_SET_PWM_VALUE MACRO XPORT, XPWMX,VALUE
 6098  0000000                   	N55P_COMMAND_WRITE_CONST P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,VALUE
 6099  0000000                   	ENDM
 6100  0000000                   ;----------------------------------------------------------------
 6101  0000000                   N55P_SET_PWM_VALUE_RAM MACRO XPORT,XPWMX_RAM,RAM
 6102  0000000                   ;	N55P_COMMAND_WRITE_RAM P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,RAM
 6103  0000000                   	SPI_X0_ON
 6104  0000000                   	CLC
 6105  0000000                   	LDA #80H+P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)
 6106  0000000                   	ADC XPWMX_RAM
 6107  0000000                   	SPI_X0_MOSI
 6108  0000000                   	LDA RAM
 6109  0000000                   	SPI_X0_MOSI
 6110  0000000                   	SPI_X0_OFF
 6111  0000000                   	ENDM
 6112  0000000                   ;----------------------------------------------------------------
 6113  0000000                   N55P_SET_PWM_VALUE_RAM2 MACRO XPORT,XPWMX_RAM,VALUE
 6114  0000000                   ;	N55P_COMMAND_WRITE_RAM P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,RAM
 6115  0000000                   	SPI_X0_ON
 6116  0000000                   	CLC
 6117  0000000                   	LDA #80H+P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)
 6118  0000000                   	ADC XPWMX_RAM
 6119  0000000                   	SPI_X0_MOSI
 6120  0000000                   	LDA #VALUE
 6121  0000000                   	SPI_X0_MOSI
 6122  0000000                   	SPI_X0_OFF
 6123  0000000                   	ENDM
 6124  0000000                   ;----------------------------------------------------------------
 6125  0000000                   N55P_SET_PWM_VALUE_RAM3 MACRO XPORT,XPWMX,RAM
 6126  0000000                   	N55P_COMMAND_WRITE_RAM P242PWM_BPA0+(((.LOW.XPORT)&0Fh)<<3)+XPWMX,RAM
 6127  0000000                   	ENDM
 6128  0000000                   .ENDIF
 6129  0000000                   ;----------------------------------------------------------------
 6130  0000000                   N55P_EXPANDER_PROCESS_RUNTIME MACRO
 6131  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6132  0000000                   .IFDEF WDTIMER
 6133  0000000                   	LDA #WDTC_CLR
 6134  0000000                   	STA !WDTC
 6135  0000000                   .ENDIF
 6136  0000000                   
 6137  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 6138  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 6139  0000000                   .ENDIF
 6140  0000000                   	ENDM 	
 6141  0000000                   ;----------------------------------------------------------------
 6142  0000000                   N55P_EXPANDER_PROCESS MACRO 
 6143  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6144  0000000                   .IFDEF WDTIMER
 6145  0000000                   		LDA #WDTC_CLR





 6146  0000000                   		STA !WDTC
 6147  0000000                   .ENDIF
 6148  0000000                   
 6149  0000000                   .IF (WITH_PSF_PROJECT .EQ. 1)
 6150  0000000                   .IFDEF ABANDON_STACK
 6151  0000000                   	LDA ABANDON_STACK_FLAG
 6152  0000000                   	BIT #6CH
 6153  0000000                   	BNE N55P_EXPANDER_PROCESS_END#
 6154  0000000                   .ENDIF
 6155  0000000                   .ENDIF
 6156  0000000                   	EXTERN UIO_N55P_PROCESS
 6157  0000000                   	PSF_RESPONSE_LIMIT_JSR UIO_N55P_PROCESS
 6158  0000000                   N55P_EXPANDER_PROCESS_END#:
 6159  0000000                   .ENDIF
 6160  0000000                   	ENDM
 6161  0000000                   ;----------------------------------------------------------------	
 6162  0000000                   HWE_SET_N55P_UIO_USED MACRO
 6163  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6164  0000000                   .IFDEF WDTIMER
 6165  0000000                   	LDA #WDTC_CLR
 6166  0000000                   	STA !WDTC
 6167  0000000                   .ENDIF  
 6168  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 6169  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 6170  0000000                   .ENDIF 	
 6171  0000000                   	ENDM
 6172  0000000                   ;------------------------------------------------------------------------------
 6173  0000000                   ; Control WDT
 6174  0000000                   ;------------------------------------------------------------------------------
 6175  0000000                   HWE_CLEAR_WDT_FLAG MACRO
 6176  0000000                   .IFDEF WDTIMER
 6177  0000000                   	LDA #WDTC_CLR 
 6178  0000000                   	STA !WDTC
 6179  0000000                   .ENDIF 
 6180  0000000                   	ENDM
 6181  0000000                   ;------------------------------------------------------------------------------
 6182  0000000                   ; Control INT
 6183  0000000                   ;------------------------------------------------------------------------------
 6184  0000000                   SET_INT0_RAM MACRO INT_MASK
 6185  0000000                   	LDA INT_MASK
 6186  0000000                   	TSB !IEF0
 6187  0000000                   	ENDM
 6188  0000000                   ;----------------------------------------------------------------	
 6189  0000000                   SET_INT1_RAM MACRO INT_MASK
 6190  0000000                   	LDA INT_MASK
 6191  0000000                   	TSB !IEF1
 6192  0000000                   	ENDM	
 6193  0000000                   ;----------------------------------------------------------------	
 6194  0000000                   CLR_INT0_RAM MACRO INT_MASK
 6195  0000000                   	LDA #INT_MASK
 6196  0000000                   	TRB !IEF0
 6197  0000000                   	ENDM
 6198  0000000                   ;----------------------------------------------------------------	
 6199  0000000                   CLR_INT1_RAM MACRO INT_MASK
 6200  0000000                   	LDA #INT_MASK
 6201  0000000                   	TRB !IEF1
 6202  0000000                   	ENDM





 6203  0000000                   ;------------------------------------------------------------------------------
 6204  0000000                   ; Access DPD_RAM
 6205  0000000                   ;------------------------------------------------------------------------------	
 6206  0000000                   SET_DPD_RAM MACRO INDEX_RAM, VALUE_RAM
 6207  0000000                   	PHX
 6208  0000000                   	LDX INDEX_RAM
 6209  0000000                   	LDA VALUE_RAM
 6210  0000000                   	STA DPD_USER_START
 6211  0000000                   
 6212  0000000                   	PLX
 6213  0000000                   	ENDM
 6214  0000000                   ;------------------------------------------------------------------------------
 6215  0000000                   ; Get PCMH
 6216  0000000                   ;------------------------------------------------------------------------------
 6217  0000000                   GET_SP_AMP_VALUE MACRO
 6218  0000000                   	LDA !PCMH
 6219  0000000                   	ENDM
 6220  0000000                   ;------------------------------------------------------------------------------
 6221  0000000                   ;GET_SP_AMP_RAM MACRO REG
 6222  0000000                   GET_SP_AMP_VALUE_RAM MACRO REG
 6223  0000000                   	LDA !PCMH
 6224  0000000                   	STA REG
 6225  0000000                   	ENDM
 6226  0000000                   ;------------------------------------------------------------------------------
 6227  0000000                   ; Control LDO
 6228  0000000                   ;------------------------------------------------------------------------------	
 6229  0000000                   LDO_ON MACRO
 6230  0000000                   	LDA #01H
 6231  0000000                   	TSB !LDOEN
 6232  0000000                   	ENDM
 6233  0000000                   ;------------------------------------------------------------------------------
 6234  0000000                   LDO_OFF MACRO
 6235  0000000                   	LDA #01H
 6236  0000000                   	TRB !LDOEN
 6237  0000000                   	ENDM
 6238  0000000                   ;------------------------------------------------------------------------------
 6239  0000000                   ; Control IO
 6240  0000000                   ;------------------------------------------------------------------------------
 6241  0000000                   IO_PINMAP_RAM MACRO BPXX_RAM
 6242  0000000                   	LDA BPXX_RAM 
 6243  0000000                   	AND #0FH		; Low 4 nibble bits is pin number
 6244  0000000                   	TAY
 6245  0000000                   	LDA IO_PIN_TABLE, Y
 6246  0000000                   	ENDM
 6247  0000000                   ;------------------------------------------------------------------------------
 6248  0000000                   IO_PORTMAP_RAM MACRO BPXX_RAM
 6249  0000000                   	LDA BPXX_RAM 
 6250  0000000                   	AND #F0H		; High 4 nibble bits is port number
 6251  0000000                   	LSR A
 6252  0000000                   	LSR A
 6253  0000000                   	LSR A
 6254  0000000                   	LSR A
 6255  0000000                   	TAX
 6256  0000000                   	ENDM
 6257  0000000                   ;------------------------------------------------------------------------------
 6258  0000000                   SET_BPXN_OUTPUT_MODE_RAM MACRO BPXX_RAM, PIN_RAM ,MODE_RAM
 6259  0000000                   	PHX





 6260  0000000                   	LDX #BPXX_RAM
 6261  0000000                   
 6262  0000000                   	LDA PIN_RAM
 6263  0000000                   	EOR #FFH
 6264  0000000                   	AND !BP0D,X
 6265  0000000                   	STA !BP0D,X
 6266  0000000                   
 6267  0000000                   	LDA MODE_RAM
 6268  0000000                   	BEQ SET_OD#
 6269  0000000                   SET_CMOS#:
 6270  0000000                   	LDA PIN_RAM
 6271  0000000                   	ORA !BP0M,X
 6272  0000000                   	STA !BP0M,X
 6273  0000000                   	JMP RETURN#
 6274  0000000                   SET_OD#:
 6275  0000000                   	LDA PIN_RAM
 6276  0000000                   	EOR #FFH
 6277  0000000                   	AND !BP0M,X
 6278  0000000                   	STA !BP0M,X
 6279  0000000                   RETURN#:
 6280  0000000                   	PLX	
 6281  0000000                   	ENDM
 6282  0000000                   ;------------------------------------------------------------------------------
 6283  0000000                   SET_BPXN_INPUT_MODE_RAM MACRO BPXX_RAM, PIN_RAM ,MODE_RAM
 6284  0000000                   	PHX
 6285  0000000                   	LDX #BPXX_RAM
 6286  0000000                   
 6287  0000000                   	LDA PIN_RAM
 6288  0000000                   	ORA !BP0D,X
 6289  0000000                   	STA !BP0D,X
 6290  0000000                   
 6291  0000000                   	LDA MODE_RAM
 6292  0000000                   	BEQ SET_FLOATING#
 6293  0000000                   SET_PULLUP#:
 6294  0000000                   	LDA PIN_RAM
 6295  0000000                   	ORA !BP0M,X
 6296  0000000                   	STA !BP0M,X
 6297  0000000                   	JMP RETURN#
 6298  0000000                   SET_FLOATING#:
 6299  0000000                   	LDA PIN_RAM
 6300  0000000                   	EOR #FFH
 6301  0000000                   	AND !BP0M,X
 6302  0000000                   	STA !BP0M,X
 6303  0000000                   RETURN#:
 6304  0000000                   	PLX
 6305  0000000                   	ENDM
 6306  0000000                   ;------------------------------------------------------------------------------
 6307  0000000                   SET_BPXN_WRITE_RAM MACRO BPXX_RAM, PINS_RAM
 6308  0000000                   	PHX
 6309  0000000                   	LDX #BPXX_RAM
 6310  0000000                   
 6311  0000000                   	LDA PINS_RAM
 6312  0000000                   	STA !BP0R,X
 6313  0000000                   RETURN#:
 6314  0000000                   	PLX	
 6315  0000000                   	ENDM
 6316  0000000                   ;------------------------------------------------------------------------------





 6317  0000000                   SET_BPXN_READ_RAM MACRO BPXX_RAM, RETURN_RAM
 6318  0000000                   	PHX
 6319  0000000                   	LDX #BPXX_RAM
 6320  0000000                   
 6321  0000000                   	LDA !BP0R,X
 6322  0000000                   	STA RETURN_RAM
 6323  0000000                   RETURN#:
 6324  0000000                   	PLX	
 6325  0000000                   	ENDM
 6326  0000000                   ;------------------------------------------------------------------------------
 6327  0000000                   SET_BPXN_WAKEUP_RAM MACRO BPXX_RAM, PIN_RAM, EN_RAM
 6328  0000000                   	PHX
 6329  0000000                   	LDX #BPXX_RAM
 6330  0000000                   
 6331  0000000                   	LDA EN_RAM
 6332  0000000                   	BEQ DIS_WAKEUP#
 6333  0000000                   
 6334  0000000                   EN_WAKEUP#:
 6335  0000000                   	LDA PIN_RAM
 6336  0000000                   	ORA !BP0EN,X
 6337  0000000                   	STA !BP0EN,X
 6338  0000000                   	JMP RETURN#
 6339  0000000                   DIS_WAKEUP#:
 6340  0000000                   	LDA PIN_RAM
 6341  0000000                   	EOR #FFH
 6342  0000000                   	AND !BP0EN,X
 6343  0000000                   	STA !BP0EN,X
 6344  0000000                   RETURN#:
 6345  0000000                   	PLX
 6346  0000000                   	ENDM
 6347  0000000                   ;------------------------------------------------------------------------------
 6348  0000000                   EN_WAKEUP_PIN_RAM	MACRO BPXX_RAM
 6349  0000000                   	PHP
 6350  0000000                   
 6351  0000000                   	IO_PORTMAP_RAM	BPXX_RAM ; "X" register saves port index
 6352  0000000                   	IO_PINMAP_RAM BPXX_RAM ;"A" register saves pin information (table: 000xxxxb)
 6353  0000000                   	ORA !BP0EN,X
 6354  0000000                   	STA !BP0EN,X
 6355  0000000                   RETURN#:
 6356  0000000                   	PLP
 6357  0000000                   	ENDM
 6358  0000000                   ;------------------------------------------------------------------------------
 6359  0000000                   DIS_WAKEUP_PIN_RAM	MACRO BPXX_RAM
 6360  0000000                   	PHP
 6361  0000000                   
 6362  0000000                   	IO_PORTMAP_RAM	BPXX_RAM ; "X" register saves port index
 6363  0000000                   	IO_PINMAP_RAM BPXX_RAM ;"A" register saves pin information (table: 000xxxxb)
 6364  0000000                   	EOR #FFH
 6365  0000000                   	AND !BP0EN,X
 6366  0000000                   	STA !BP0EN,X
 6367  0000000                   RETURN#:
 6368  0000000                   	PLP
 6369  0000000                   	ENDM
 6370  0000000                   ;===============================================================================
 6371  0000000                   ;===============================================================================
 6372  0000000                   TABLE_LOOKUP_1DIM  MACRO USER_DEFINED_TABLE,INDEX_RAM,RESULT,TEMP_RAM
 6373  0000000                   	LDA #.LOW.USER_DEFINED_TABLE





 6374  0000000                   	STA <TEMP_RAM
 6375  0000000                   	LDA #.HIGH.USER_DEFINED_TABLE
 6376  0000000                   	STA <TEMP_RAM+1
 6377  0000000                   
 6378  0000000                   	CLC
 6379  0000000                   	LDA <TEMP_RAM
 6380  0000000                   	ADC INDEX_RAM
 6381  0000000                   	STA <TEMP_RAM
 6382  0000000                   	LDA <TEMP_RAM+1
 6383  0000000                   	ADC #00H
 6384  0000000                   	STA <TEMP_RAM+1
 6385  0000000                   
 6386  0000000                   	LDA (<TEMP_RAM)
 6387  0000000                   	STA RESULT
 6388  0000000                   	ENDM	
 6389  0000000                   ;------------------------------------------------------------------------------
 6390  0000000                   TABLE_LOOKUP_1DIM_2B  MACRO USER_DEFINED_TABLE,INDEX_RAM,RESULT,TEMP_RAM
 6391  0000000                   	LDA #.LOW.USER_DEFINED_TABLE
 6392  0000000                   	STA <TEMP_RAM
 6393  0000000                   	LDA #.HIGH.USER_DEFINED_TABLE
 6394  0000000                   	STA <TEMP_RAM+1
 6395  0000000                   
 6396  0000000                   	LDY #02H
 6397  0000000                   TABLE_LOOKUP_ONE_DIMENSION_2B_LOOP#:
 6398  0000000                   	CLC
 6399  0000000                   	LDA <TEMP_RAM
 6400  0000000                   	ADC INDEX_RAM
 6401  0000000                   	STA <TEMP_RAM
 6402  0000000                   	LDA <TEMP_RAM+1
 6403  0000000                   	ADC #00H
 6404  0000000                   	STA <TEMP_RAM+1
 6405  0000000                   	DEY
 6406  0000000                   	BNE TABLE_LOOKUP_ONE_DIMENSION_2B_LOOP#
 6407  0000000                   
 6408  0000000                   	LDA (<TEMP_RAM)
 6409  0000000                   	STA RESULT
 6410  0000000                   	LDY #01H
 6411  0000000                   	LDA (<TEMP_RAM),Y
 6412  0000000                   	STA RESULT+1
 6413  0000000                   	ENDM	
 6414  0000000                   
 6415  0000000                   
 6416  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\HWE_DEFINE.INI.APP"
 6417  0000000                   ;******* SHARED MEMORY *******************************
 6418  0000000                   	INCLUDE	"D:\SOURCECODE\_AVERY_M031\M031BSP_NSP_TWOWIRESAMPLE\NSP_PROJECT\RINGRING_NSP480A\CPUIF\HWE_SHARE_RAM.INI.APP"
 6419  0000000                   HWE_SLD_LEN_BA	EQU	SHM_RAM_BEGIN+102
 6420  0000000                   HWE_SLD_ADDR_BA	EQU	SHM_RAM_BEGIN+102
 6421  0000000                   HWE_CACHE1_EVENT_CHUNK	EQU	SHM_RAM_BEGIN+102
 6422  0000000                   HWE_CACHE1_BA	EQU	SHM_RAM_BEGIN+110
 6423  0000000                   HWE_COLOR_FLY_BA	EQU	SHM_RAM_BEGIN+112
 6424  0000000                   HWE_STATUS_BA		EQU	SHM_RAM_BEGIN+123
 6425  0000000                   HWE_CTRL_BA		EQU	SHM_RAM_BEGIN+125
 6426  0000000                   HWE_CMD_BA		EQU	SHM_RAM_BEGIN+126
 6427  0000000                   HWE_CH1_BA		EQU	SHM_RAM_BEGIN+132
 6428  0000000                   HWE_CH2_BA		EQU	SHM_RAM_BEGIN+133
 6429  0000000                   HWE_CH3_BA		EQU	SHM_RAM_BEGIN+134
 6430  0000000                   HWE_CH_BUSY_BA		EQU	SHM_RAM_BEGIN+140





 6431  0000000                   HWE_INT_TYPE_BA		EQU	SHM_RAM_BEGIN+141
 6432  0000000                   HWE_PLAYBYIDX_BA		EQU	SHM_RAM_BEGIN+117
 6433  0000000                   HWE_NRPN_BA		EQU	SHM_RAM_BEGIN+115
 6434  0000000                   HWE_ENVELOPE_BA		EQU	SHM_RAM_BEGIN+112
 6435  0000000                   
 6436  0000000                   ;SHM_BA					EQU	SHM_RAM_BEGIN
 6437  0000000                   ;HWE_STATUS_BA			EQU	SHM_BA+0
 6438  0000000                   ;HWE_CTRL_BA				EQU	SHM_BA+2
 6439  0000000                   ;HWE_CMD_BA				EQU	SHM_BA+3
 6440  0000000                   ;HWE_CH1_BA				EQU	SHM_BA+9
 6441  0000000                   ;HWE_CH2_BA				EQU	SHM_BA+10
 6442  0000000                   ;HWE_CH3_BA				EQU	SHM_BA+11
 6443  0000000                   ;HWE_CH_BUSY_BA			EQU SHM_BA+17
 6444  0000000                   ;HWE_INT_TYPE_BA			EQU	SHM_BA+18
 6445  0000000                   ;HWE_PLAYBYIDX_BA		EQU SHM_BA+19
 6446  0000000                   ;HWE_NRPN_BA				EQU	SHM_BA+25
 6447  0000000                   ;HWE_ENVELOPE_BA			EQU SHM_BA+27
 6448  0000000                   ;HWE_COLOR_FLY_BA		EQU	SHM_BA+30
 6449  0000000                   ;HWE_CACHE1_BA			EQU	HWE_COLOR_FLY_BA+36
 6450  0000000                   ;HWE_CACHE1_EVENT_CHUNK	EQU HWE_CACHE1_BA+2
 6451  0000000                   ;HWE_SLD_ADDR_BA			EQU	SHM_BA+134
 6452  0000000                   ;HWE_SLD_LEN_BA			EQU HWE_SLD_ADDR_BA+4
 6453  0000000                   
 6454  0000000                   HWE_STATUS_L			EQU 00H
 6455  0000000                   HWE_STATUS_H			EQU 01H
 6456  0000000                   
 6457  0000000                   VOL_CHANGE_GRADUALLY	EQU 01H
 6458  0000000                   VOL_CHANGE_IMMEDIATELY	EQU 00H
 6459  0000000                   
 6460  0000000                   CMD_IDX					EQU 00H
 6461  0000000                   CMD_CH_IDX				EQU 01H
 6462  0000000                   CMD_PARAMETER			EQU 02H
 6463  0000000                   
 6464  0000000                   MIDI_STATUS_OFFSET		EQU	00H
 6465  0000000                   MIDI_TEMP_RATIO_OFFSET	EQU	01H
 6466  0000000                   MIDI_PITCH_OFFSET		EQU 03H
 6467  0000000                   
 6468  0000000                   CACHE_CH				EQU	00H
 6469  0000000                   CACHE_COUNT				EQU	01H
 6470  0000000                   CACHE_EVENT_CHUNK		EQU	02H
 6471  0000000                   
 6472  0000000                   CTL_START_FLAG			EQU 01H
 6473  0000000                   CTL_STANDBY_FLAG		EQU	02H
 6474  0000000                   CTL_SP_CHANGE_FLAG		EQU	04H
 6475  0000000                   CTL_EN_EXT_FLAG			EQU 08H
 6476  0000000                   
 6477  0000000                   ;SLD_CACHE_NUM			EQU 00H
 6478  0000000                   ;SLD_CACHE_EVENT_CHUNK	EQU	02H
 6479  0000000                   
 6480  0000000                   ;******* SYNTHESISER CMD *****************************
 6481  0000000                   CMD_IDLE				EQU 00H
 6482  0000000                   CMD_PLAY				EQU 01H
 6483  0000000                   CMD_STOP				EQU 02H
 6484  0000000                   CMD_PAUSE				EQU 03H
 6485  0000000                   CMD_RESUME				EQU 04H
 6486  0000000                   CMD_MUTE				EQU 05H
 6487  0000000                   CMD_UNMUTE				EQU 06H





 6488  0000000                   CMD_SET_VOL				EQU 07H
 6489  0000000                   CMD_SET_SR				EQU 08H
 6490  0000000                   CMD_SET_PLAY_SEGMENT	EQU 09H
 6491  0000000                   CMD_EN_GLOBAL_VOL		EQU 0CH
 6492  0000000                   CMD_DIS_GLOBAL_VOL		EQU 0DH
 6493  0000000                   CMD_EN_GLOBAL_SR		EQU 0EH
 6494  0000000                   CMD_DIS_GLOBAL_SR		EQU 0FH
 6495  0000000                   CMD_NOTE_ON				EQU 10H
 6496  0000000                   CMD_NOTE_OFF			EQU 11H
 6497  0000000                   CMD_SET_TEMPO			EQU 12H
 6498  0000000                   CMD_SET_PITCH_MS		EQU 13H
 6499  0000000                   CMD_EN_VIBRATO			EQU 14H
 6500  0000000                   CMD_DIS_VIBRATO			EQU 15H
 6501  0000000                   CMD_EN_MODULATION		EQU 16H
 6502  0000000                   CMD_DIS_MODULATION		EQU 17H
 6503  0000000                   CMD_SET_NOTE_PITCH_BEND	EQU 18H
 6504  0000000                   CMD_EN_GLOBAL_INS		EQU 19H
 6505  0000000                   CMD_DIS_GLOBAL_INS		EQU 1AH
 6506  0000000                   CMD_SET_EVP						EQU 1BH
 6507  0000000                   CMD_EN_GLOBAL_PITCH_OFFSET		EQU 1CH
 6508  0000000                   CMD_DIS_GLOBAL_PITCH_OFFSET		EQU 1DH
 6509  0000000                   CMD_EN_ONEKEYONENOTE			EQU 1EH
 6510  0000000                   CMD_DIS_ONEKEYONENOTE			EQU 1FH
 6511  0000000                   CMD_ONEKEYONENOTE_NEXT			EQU 20H
 6512  0000000                   
 6513  0000000                   CMD_EN_COLORFLY					EQU	23H
 6514  0000000                   CMD_DIS_COLORFLY				EQU	24H
 6515  0000000                   CMD_SET_COLORFLY_PARAM			EQU	25H
 6516  0000000                   
 6517  0000000                   CMD_SET_SPEED_SP				EQU 26H
 6518  0000000                   CMD_SET_PITCH_SP				EQU 27H
 6519  0000000                   CMD_PLAY_BY_INDEX				EQU	28H
 6520  0000000                   CMD_PLAY_IN_REVERSE_SP			EQU 29H
 6521  0000000                   CMD_EXT_NOTE_VOL				EQU 2AH
 6522  0000000                   CMD_CHK_EXT_NOTE_BUSY			EQU 2BH
 6523  0000000                   
 6524  0000000                   CMD_INIT_SYS					EQU	0A8H
 6525  0000000                   CMD_LOGIC_BA					EQU 0A9H
 6526  0000000                   CMD_TABLE_BA					EQU 0AAH
 6527  0000000                   
 6528  0000000                   CH_STATUS_GLOBAL_VOL	EQU 01H
 6529  0000000                   CH_STATUS_GLOBAL_SR		EQU 02H
 6530  0000000                   ;CH_STATUS_BZ			EQU 20H
 6531  0000000                   CH_STATUS_PASUE			EQU 40H
 6532  0000000                   CH_STATUS_MUTE			EQU 80H
 6533  0000000                   
 6534  0000000                   CH_SP1_BZ					EQU 01H
 6535  0000000                   CH_SP2_BZ					EQU 02H
 6536  0000000                   CH_SP3_BZ					EQU 04H
 6537  0000000                   CH_EVO1_BZ					EQU 08H
 6538  0000000                   CH_EVO2_BZ					EQU 10H
 6539  0000000                   CH_EVO3_BZ					EQU 20H
 6540  0000000                   CH_MIDI_BZ					EQU 40H
 6541  0000000                   CH_MS_EXT					EQU 80H
 6542  0000000                   
 6543  0000000                   .IF	(CHIPSERIES = 'N589A')
 6544  0000000                   EVO_CHANNEL_BASE		EQU 03H





 6545  0000000                   .ENDIF
 6546  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 6547  0000000                   EVO_CHANNEL_BASE		EQU 02H
 6548  0000000                   .ENDIF
 6549  0000000                   .IF	(CHIPSERIES = 'N589D')
 6550  0000000                   EVO_CHANNEL_BASE		EQU 01H
 6551  0000000                   .ENDIF
 6552  0000000                   
 6553  0000000                   WITH_HWE_DEBUG			EQU	0
 6554  0000000                   
 6555  0000000                   ;******* ERROR MESSAGE *******************************
 6556  0000000                   
 6557  0000000                   ERROR_HWE_READY			EQU 00FFH
 6558  0000000                   
 6559  0000000                   
 6560  0000000                   
 6561  0000000                   
 6562  0000000                   
 6563  0000000                   
 6564  0000000                   
 6565  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\SYNTH_MACROS.INI.APP"
 6566  0000000                   ;******* SYNTHESISER MACRO ***************************
 6567  0000000                   	EXTERN SEND_CMD_PROC
 6568  0000000                   	EXTERN SEND_PLAY_CMD_PROC
 6569  0000000                   	EXTERN CHK_HANDSHAKE_PROC
 6570  0000000                   	EXTERN HWE_READY_PROC
 6571  0000000                   	EXTERN SET_PLAYLIST_TABLE_PROC
 6572  0000000                   	EXTERN HWE_TABLE_BA_PROC
 6573  0000000                   	EXTERN HWE_TABLE_ALT1_BA_PROC
 6574  0000000                   	EXTERN REFRESH_STATUS_PROC
 6575  0000000                   
 6576  0000000                   ;===============================================================================
 6577  0000000                   CHK_BUSY_CH1 MACRO
 6578  0000000                   	LDA HWE_CH_BUSY_BA
 6579  0000000                   	BIT #CH_SP1_BZ
 6580  0000000                   	ENDM
 6581  0000000                   ;------------------------------------------------------------------------------
 6582  0000000                   CHK_BUSY_CH2 MACRO
 6583  0000000                   	LDA HWE_CH_BUSY_BA
 6584  0000000                   	BIT #CH_SP2_BZ
 6585  0000000                   	ENDM
 6586  0000000                   ;------------------------------------------------------------------------------
 6587  0000000                   CHK_BUSY_CH3 MACRO
 6588  0000000                   	LDA HWE_CH_BUSY_BA
 6589  0000000                   	BIT #CH_SP3_BZ
 6590  0000000                   	ENDM
 6591  0000000                   ;------------------------------------------------------------------------------
 6592  0000000                   CHK_BUSY_MS MACRO
 6593  0000000                   	LDA HWE_CH_BUSY_BA
 6594  0000000                   	BIT #CH_MIDI_BZ
 6595  0000000                   	ENDM
 6596  0000000                   ;------------------------------------------------------------------------------
 6597  0000000                   CHK_BUSY_EVO1 MACRO
 6598  0000000                   	LDA HWE_CH_BUSY_BA
 6599  0000000                   	BIT #CH_EVO1_BZ
 6600  0000000                   	ENDM
 6601  0000000                   ;------------------------------------------------------------------------------





 6602  0000000                   CHK_BUSY_EVO2 MACRO
 6603  0000000                   	LDA HWE_CH_BUSY_BA
 6604  0000000                   	BIT #CH_EVO2_BZ
 6605  0000000                   	ENDM
 6606  0000000                   ;------------------------------------------------------------------------------
 6607  0000000                   CHK_BUSY_EVO3 MACRO
 6608  0000000                   	LDA HWE_CH_BUSY_BA
 6609  0000000                   	BIT #CH_EVO3_BZ
 6610  0000000                   	ENDM
 6611  0000000                   ;------------------------------------------------------------------------------
 6612  0000000                   CHK_ALL_CHANNELS_BUSY_RAM MACRO STATUS_RAM
 6613  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 6614  0000000                   .ELSE
 6615  0000000                   	REFRESH_STATUS
 6616  0000000                   	LDA <GLOBAL_PLAY
 6617  0000000                   	STA STATUS_RAM
 6618  0000000                   .ENDIF
 6619  0000000                   	ENDM
 6620  0000000                   ;------------------------------------------------------------------------------
 6621  0000000                   CHK_SP_BUSY_RAM MACRO CHID_RAM,STATUS_RAM
 6622  0000000                   	PHY
 6623  0000000                   	REFRESH_STATUS
 6624  0000000                   	LDY CHID_RAM
 6625  0000000                   .IF(WITH_SP .EQ. 1)
 6626  0000000                   ;LDA #00H
 6627  0000000                   	LDA !SP_BUSY_GLOBAL_PLAY_TABLE,Y
 6628  0000000                   ;BIT <GLOBAL_PLAY
 6629  0000000                   	AND <GLOBAL_PLAY
 6630  0000000                   _CHK_SP_CHANNEL_#:
 6631  0000000                   	STA STATUS_RAM
 6632  0000000                   .ENDIF
 6633  0000000                   
 6634  0000000                   	PLY
 6635  0000000                   	ENDM
 6636  0000000                   ;------------------------------------------------------------------------------
 6637  0000000                   CHK_ALL_MS_BUSY_RAM MACRO STATUS_RAM 
 6638  0000000                   	REFRESH_STATUS
 6639  0000000                   .IF(WITH_MS .EQ. 1)
 6640  0000000                   	LDA <GLOBAL_PLAY
 6641  0000000                   ;BIT #MIDI_BZ+MS_EXT
 6642  0000000                   	AND #MIDI_BZ+MS_EXT
 6643  0000000                   	STA STATUS_RAM
 6644  0000000                   .ENDIF
 6645  0000000                   	ENDM
 6646  0000000                   ;------------------------------------------------------------------------------
 6647  0000000                   CHK_EVO_BUSY_RAM MACRO CHID_RAM, STATUS_RAM
 6648  0000000                   	PHY
 6649  0000000                   	REFRESH_STATUS
 6650  0000000                   	LDY CHID_RAM
 6651  0000000                   .IF(WITH_EVO .EQ. 1)
 6652  0000000                   ;LDA #00H
 6653  0000000                   	LDA !EVO_BUSY_GLOBAL_PLAY_TABLE,Y
 6654  0000000                   ;BIT <GLOBAL_PLAY
 6655  0000000                   	AND <GLOBAL_PLAY
 6656  0000000                   	STA STATUS_RAM
 6657  0000000                   _CHK_EVO_CHANNEL_#:
 6658  0000000                   .ENDIF





 6659  0000000                   	PLY
 6660  0000000                   	ENDM
 6661  0000000                   ;------------------------------------------------------------------------------
 6662  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 6663  0000000                   .ELSE
 6664  0000000                   CHK_BUSY_ALL MACRO
 6665  0000000                   	REFRESH_STATUS
 6666  0000000                   	LDA <GLOBAL_PLAY
 6667  0000000                   
 6668  0000000                   	ENDM
 6669  0000000                   .ENDIF ;WITH_MS/WITH_SP/WITH_EVO
 6670  0000000                   ;------------------------------------------------------------------------------
 6671  0000000                   REFRESH_STATUS MACRO
 6672  0000000                   	PSF_RESPONSE_LIMIT
 6673  0000000                   	JSR REFRESH_STATUS_PROC
 6674  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 6675  0000000                   	ENDM
 6676  0000000                   ;------------------------------------------------------------------------------
 6677  0000000                   WAIT_IF_BUSY MACRO CHANNEL1, CHANNEL2, CHANNEL3, CHANNEL4, CHANNEL5, CHANNEL6 ,CHANNEL7, CHANNEL8, CHANNEL9
 6678  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 6679  0000000                   .ELSE
 6680  0000000                   _xPLAY_WAIT_LOOP_#:
 6681  0000000                   
 6682  0000000                   .IFDEF WDTIMER
 6683  0000000                   	LDA #WDTC_CLR
 6684  0000000                   	STA !WDTC
 6685  0000000                   .ENDIF 
 6686  0000000                   	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 0)
 6687  0000000                   	    CAP_SENSOR_ACTION    
 6688  0000000                   		CAP_SENSOR_KEY_DETECTION
 6689  0000000                   	.ENDIF 
 6690  0000000                   
 6691  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H)
 6692  0000000                   	N55P_EXPANDER_PROCESS
 6693  0000000                   	.ENDIF 
 6694  0000000                   
 6695  0000000                   	REFRESH_STATUS
 6696  0000000                   	LDA <GLOBAL_PLAY
 6697  0000000                   	BIT #(CHANNEL1+(CHANNEL2<<1)+(CHANNEL3<<2)+(CHANNEL7<<3)+(CHANNEL8<<4)+(CHANNEL9<<5)+(CHANNEL6<<6))
 6698  0000000                   	BNE _xPLAY_WAIT_LOOP_#
 6699  0000000                   
 6700  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H) 
 6701  0000000                   	LDA #(CHANNEL1+CHANNEL2+CHANNEL3+CHANNEL7+CHANNEL8+CHANNEL9)
 6702  0000000                   	BEQ _xPLAY_WAIT_END#
 6703  0000000                   	N55P_EXPANDER_PROCESS_RUNTIME
 6704  0000000                   _xPLAY_WAIT_END#:
 6705  0000000                   	.ENDIF
 6706  0000000                   .ENDIF
 6707  0000000                         ENDM
 6708  0000000                   ;------------------------------------------------------------------------------
 6709  0000000                   HWE_GET_CHAN_STATUS_RAM MACRO CHANNEL_RAM,STATUS_RAM 
 6710  0000000                   	LDA CHANNEL_RAM
 6711  0000000                   	CMP #FFH
 6712  0000000                   	BEQ 3
 6713  0000000                   	JMP NEXT_GET_STATUS_SP
 6714  0000000                   ;STOP_PLAY_ALL	;ALL
 6715  0000000                   	CHK_ALL_CHANNELS_BUSY_RAM STATUS_RAM





 6716  0000000                   	JMP HWE_GET_CHAN_STATUS_RAM_END
 6717  0000000                   NEXT_GET_STATUS_SP:
 6718  0000000                   	LDA CHANNEL_RAM
 6719  0000000                   	CMP #02H
 6720  0000000                   	BCC 3
 6721  0000000                   	JMP NEXT_GET_STATUS_MS
 6722  0000000                   ;STOP_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 6723  0000000                   	CHK_SP_BUSY_RAM CHANNEL_RAM, STATUS_RAM
 6724  0000000                   	JMP HWE_GET_CHAN_STATUS_RAM_END
 6725  0000000                   NEXT_GET_STATUS_MS:
 6726  0000000                   	LDA CHANNEL_RAM
 6727  0000000                   	CMP #02H
 6728  0000000                   	BEQ 3
 6729  0000000                   	JMP NEXT_GET_STATUS_EVO
 6730  0000000                   ;STOP_MS
 6731  0000000                   	CHK_ALL_MS_BUSY_RAM STATUS_RAM
 6732  0000000                   	JMP HWE_GET_CHAN_STATUS_RAM_END
 6733  0000000                   NEXT_GET_STATUS_EVO:
 6734  0000000                   	LDA CHANNEL_RAM
 6735  0000000                   	SEC
 6736  0000000                   	SBC #3
 6737  0000000                   	STA CHANNEL_RAM
 6738  0000000                   	CHK_EVO_BUSY_RAM CHANNEL_RAM, STATUS_RAM
 6739  0000000                   ;STOP_PLAY_EVO_CHANNEL_RAM CHANNEL_RAM
 6740  0000000                   HWE_GET_CHAN_STATUS_RAM_END:
 6741  0000000                   	ENDM
 6742  0000000                   ;===============================================================================
 6743  0000000                   SYNTHESISER_ON MACRO
 6744  0000000                   	LDA	#01H
 6745  0000000                   	TSB !HWENG
 6746  0000000                   	ENDM
 6747  0000000                   ;------------------------------------------------------------------------------
 6748  0000000                   SYNTHESISER_OFF MACRO
 6749  0000000                   	LDA	#01H
 6750  0000000                   	TRB !HWENG
 6751  0000000                   
 6752  0000000                   .IF (WITH_SIM_SP .EQ. 1)
 6753  0000000                   	LDA #0FH				; BP2n pin is mapped to 6502
 6754  0000000                   	TRB !BP2MF0
 6755  0000000                   
 6756  0000000                   	.IFDEF SPIVDD_FROM_LDO
 6757  0000000                   	LDA #01H				; disable LDO33
 6758  0000000                   	TRB !LDOEN		
 6759  0000000                   	.ENDIF ;SPIVDD_FROM_LDO
 6760  0000000                   .ENDIF ;WITH_SIM_SP
 6761  0000000                   	ENDM
 6762  0000000                   ;===============================================================================
 6763  0000000                   SET_SP_VOLUME MACRO VOLUME, CHANNEL_ID
 6764  0000000                   .IF (WITH_VOL_ADJ .EQ. 1).OR.(WITH_VOL_ADJ_MS .EQ. 1)
 6765  0000000                   	JSR HWE_READY_PROC
 6766  0000000                   	PHP
 6767  0000000                   	SEI
 6768  0000000                   
 6769  0000000                   	HWE_SET_PARAMETER0 VOLUME
 6770  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_GRADUALLY
 6771  0000000                   
 6772  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_VOL





 6773  0000000                   
 6774  0000000                   	PLP
 6775  0000000                   	JSR CHK_HANDSHAKE_PROC
 6776  0000000                   .ENDIF	;WITH_VOL_ADJ/WITH_VOL_ADJ_MS
 6777  0000000                   
 6778  0000000                   	LDX #CHANNEL_ID
 6779  0000000                   	ENDM
 6780  0000000                   ;------------------------------------------------------------------------------	
 6781  0000000                   SET_SP_VOLUME_RAM MACRO VOLUME_RAM, CHANNEL_ID_RAM
 6782  0000000                   .IF (WITH_VOL_ADJ .EQ. 1).OR.(WITH_VOL_ADJ_MS .EQ. 1)
 6783  0000000                   	JSR HWE_READY_PROC
 6784  0000000                   	PHP
 6785  0000000                   	SEI
 6786  0000000                   
 6787  0000000                   	HWE_SET_PARAMETER0_RAM VOLUME_RAM
 6788  0000000                   	HWE_SET_PARAMETER1_RAM VOL_CHANGE_GRADUALLY
 6789  0000000                   
 6790  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_SET_VOL
 6791  0000000                   
 6792  0000000                   	PLP
 6793  0000000                   	JSR CHK_HANDSHAKE_PROC
 6794  0000000                   .ENDIF	;WITH_VOL_ADJ/WITH_VOL_ADJ_MS
 6795  0000000                   
 6796  0000000                   	LDX CHANNEL_ID_RAM
 6797  0000000                   	ENDM
 6798  0000000                   ;------------------------------------------------------------------------------
 6799  0000000                   SET_SP_VOLUME_BY_RAM MACRO VOLUME_RAM, CHANNEL_ID
 6800  0000000                   .IF (WITH_VOL_ADJ .EQ. 1).OR.(WITH_VOL_ADJ_MS .EQ. 1)
 6801  0000000                   	JSR HWE_READY_PROC
 6802  0000000                   	PHP
 6803  0000000                   	SEI
 6804  0000000                   
 6805  0000000                   	LDA	VOLUME_RAM
 6806  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 6807  0000000                   	LDA #VOL_CHANGE_GRADUALLY
 6808  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 6809  0000000                   
 6810  0000000                   	LDA #CHANNEL_ID
 6811  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 6812  0000000                   	LDA #CMD_SET_VOL
 6813  0000000                   	JSR SEND_CMD_PROC
 6814  0000000                   
 6815  0000000                   	PLP
 6816  0000000                   	JSR CHK_HANDSHAKE_PROC
 6817  0000000                   .ENDIF	;WITH_VOL_ADJ/WITH_VOL_ADJ_MS
 6818  0000000                   	ENDM
 6819  0000000                   ;------------------------------------------------------------------------------
 6820  0000000                   .IF (WITH_SP .EQ. 1)
 6821  0000000                   ;	.IF (WITH_SP_NUM .GT. 0)
 6822  0000000                   SET_VOL1 MACRO NEW_VOL
 6823  0000000                   	SET_SP_VOLUME NEW_VOL, 00H 
 6824  0000000                   	ENDM
 6825  0000000                   ;------------------------------------------------------------------------------
 6826  0000000                   SET_VOL2 MACRO NEW_VOL
 6827  0000000                   	SET_SP_VOLUME NEW_VOL, 01H 
 6828  0000000                   	ENDM
 6829  0000000                   .ENDIF	;WITH_SP





 6830  0000000                   ;------------------------------------------------------------------------------
 6831  0000000                   SET_VOL3 MACRO NEW_VOL
 6832  0000000                   	SET_SP_VOLUME NEW_VOL, 02H
 6833  0000000                   	ENDM
 6834  0000000                   ;------------------------------------------------------------------------------
 6835  0000000                   .IF (WITH_MS .EQ. 1)
 6836  0000000                   SET_VOLM MACRO NEW_VOL
 6837  0000000                   	SET_SP_VOLUME NEW_VOL, 02H 
 6838  0000000                   	ENDM
 6839  0000000                   ;------------------------------------------------------------------------------
 6840  0000000                   SET_MS_CHANNEL_VOLUME MACRO VOLUME_VALUE, CHANNEL
 6841  0000000                   	SET_SP_VOLUME VOLUME_VALUE, CHANNEL+10H
 6842  0000000                   	ENDM
 6843  0000000                   ;------------------------------------------------------------------------------
 6844  0000000                   SET_VOLM1 MACRO NEW_MS_CHANNEL_VOL
 6845  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 10H
 6846  0000000                   	ENDM		
 6847  0000000                   ;------------------------------------------------------------------------------
 6848  0000000                   SET_VOLM2 MACRO NEW_MS_CHANNEL_VOL
 6849  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 11H
 6850  0000000                   	ENDM
 6851  0000000                   ;------------------------------------------------------------------------------
 6852  0000000                   SET_VOLM3 MACRO NEW_MS_CHANNEL_VOL
 6853  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 12H
 6854  0000000                   	ENDM
 6855  0000000                   ;------------------------------------------------------------------------------
 6856  0000000                   SET_VOLM4 MACRO NEW_MS_CHANNEL_VOL
 6857  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 13H
 6858  0000000                   	ENDM
 6859  0000000                   ;------------------------------------------------------------------------------
 6860  0000000                   SET_VOLM5 MACRO NEW_MS_CHANNEL_VOL
 6861  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 14H
 6862  0000000                   	ENDM
 6863  0000000                   ;------------------------------------------------------------------------------
 6864  0000000                   SET_VOLM6 MACRO NEW_MS_CHANNEL_VOL
 6865  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 15H
 6866  0000000                   	ENDM
 6867  0000000                   ;------------------------------------------------------------------------------
 6868  0000000                   SET_VOLM7 MACRO NEW_MS_CHANNEL_VOL
 6869  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 16H
 6870  0000000                   	ENDM
 6871  0000000                   ;------------------------------------------------------------------------------
 6872  0000000                   SET_VOLM8 MACRO NEW_MS_CHANNEL_VOL
 6873  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 17H
 6874  0000000                   	ENDM
 6875  0000000                   ;------------------------------------------------------------------------------
 6876  0000000                   SET_VOLM9 MACRO NEW_MS_CHANNEL_VOL
 6877  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 18H
 6878  0000000                   	ENDM
 6879  0000000                   ;------------------------------------------------------------------------------
 6880  0000000                   SET_VOLM10 MACRO NEW_MS_CHANNEL_VOL
 6881  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 19H
 6882  0000000                   	ENDM
 6883  0000000                   ;------------------------------------------------------------------------------
 6884  0000000                   SET_VOLM11 MACRO NEW_MS_CHANNEL_VOL
 6885  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1AH
 6886  0000000                   	ENDM





 6887  0000000                   ;------------------------------------------------------------------------------
 6888  0000000                   SET_VOLM12 MACRO NEW_MS_CHANNEL_VOL
 6889  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1BH
 6890  0000000                   	ENDM
 6891  0000000                   ;------------------------------------------------------------------------------
 6892  0000000                   SET_VOLM13 MACRO NEW_MS_CHANNEL_VOL
 6893  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1CH
 6894  0000000                   	ENDM
 6895  0000000                   ;------------------------------------------------------------------------------
 6896  0000000                   SET_VOLM14 MACRO NEW_MS_CHANNEL_VOL
 6897  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1DH
 6898  0000000                   	ENDM
 6899  0000000                   ;------------------------------------------------------------------------------
 6900  0000000                   SET_VOLM15 MACRO NEW_MS_CHANNEL_VOL
 6901  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1EH
 6902  0000000                   	ENDM
 6903  0000000                   ;------------------------------------------------------------------------------
 6904  0000000                   SET_VOLM16 MACRO NEW_MS_CHANNEL_VOL
 6905  0000000                   	SET_SP_VOLUME NEW_MS_CHANNEL_VOL, 1FH
 6906  0000000                   	ENDM
 6907  0000000                   .ENDIF ;WITH_MS
 6908  0000000                   ;;.ENDIF
 6909  0000000                   ;------------------------------------------------------------------------------
 6910  0000000                   .IF (WITH_SP .EQ. 1)
 6911  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 6912  0000000                   SET_VOL1_RAM MACRO NEW_VOL_RAM
 6913  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 00H 
 6914  0000000                   	ENDM
 6915  0000000                   	.ENDIF	;WITH_SP_NUM
 6916  0000000                   ;------------------------------------------------------------------------------
 6917  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 6918  0000000                   SET_VOL2_RAM MACRO NEW_VOL_RAM
 6919  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 01H 
 6920  0000000                   	ENDM
 6921  0000000                   	.ENDIF	;WITH_SP_NUM
 6922  0000000                   .ENDIF	;WITH_SP
 6923  0000000                   ;------------------------------------------------------------------------------
 6924  0000000                   SET_VOL3_RAM MACRO NEW_VOL_RAM
 6925  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 02H 
 6926  0000000                   	ENDM
 6927  0000000                   ;------------------------------------------------------------------------------	
 6928  0000000                   .IF (WITH_MS .EQ. 1)
 6929  0000000                   SET_VOLM_RAM MACRO NEW_VOL_RAM
 6930  0000000                   	SET_SP_VOLUME_BY_RAM NEW_VOL_RAM, 02H 
 6931  0000000                   	ENDM
 6932  0000000                   ;------------------------------------------------------------------------------
 6933  0000000                   SET_VOLM1_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6934  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 10H
 6935  0000000                   	ENDM		
 6936  0000000                   ;------------------------------------------------------------------------------
 6937  0000000                   SET_VOLM2_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6938  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 11H
 6939  0000000                   	ENDM
 6940  0000000                   ;------------------------------------------------------------------------------
 6941  0000000                   SET_VOLM3_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6942  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 12H
 6943  0000000                   	ENDM





 6944  0000000                   ;------------------------------------------------------------------------------
 6945  0000000                   SET_VOLM4_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6946  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 13H
 6947  0000000                   	ENDM
 6948  0000000                   ;------------------------------------------------------------------------------
 6949  0000000                   SET_VOLM5_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6950  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 14H
 6951  0000000                   	ENDM
 6952  0000000                   ;------------------------------------------------------------------------------
 6953  0000000                   SET_VOLM6_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6954  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 15H
 6955  0000000                   	ENDM
 6956  0000000                   ;------------------------------------------------------------------------------
 6957  0000000                   SET_VOLM7_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6958  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 16H
 6959  0000000                   	ENDM
 6960  0000000                   ;------------------------------------------------------------------------------
 6961  0000000                   SET_VOLM8_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6962  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 17H
 6963  0000000                   	ENDM
 6964  0000000                   ;------------------------------------------------------------------------------
 6965  0000000                   SET_VOLM9_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6966  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 18H
 6967  0000000                   	ENDM
 6968  0000000                   ;------------------------------------------------------------------------------
 6969  0000000                   SET_VOLM10_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6970  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 19H
 6971  0000000                   	ENDM
 6972  0000000                   ;------------------------------------------------------------------------------
 6973  0000000                   SET_VOLM11_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6974  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1AH
 6975  0000000                   	ENDM
 6976  0000000                   ;------------------------------------------------------------------------------
 6977  0000000                   SET_VOLM12_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6978  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1BH
 6979  0000000                   	ENDM
 6980  0000000                   ;------------------------------------------------------------------------------
 6981  0000000                   SET_VOLM13_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6982  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1CH
 6983  0000000                   	ENDM
 6984  0000000                   ;------------------------------------------------------------------------------
 6985  0000000                   SET_VOLM14_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6986  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1DH
 6987  0000000                   	ENDM
 6988  0000000                   ;------------------------------------------------------------------------------
 6989  0000000                   SET_VOLM15_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6990  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1EH
 6991  0000000                   	ENDM
 6992  0000000                   ;------------------------------------------------------------------------------
 6993  0000000                   SET_VOLM16_RAM MACRO NEW_MS_CHANNEL_VOL_RAM
 6994  0000000                   	SET_SP_VOLUME_RAM NEW_MS_CHANNEL_VOL_RAM, 1FH
 6995  0000000                   	ENDM	
 6996  0000000                   .ENDIF ;WITH_MS
 6997  0000000                   ;------------------------------------------------------------------------------	
 6998  0000000                   SET_SP_VOLUME_RT MACRO VOLUME, CHANNEL_ID
 6999  0000000                   	JSR HWE_READY_PROC
 7000  0000000                   	PHP





 7001  0000000                   	SEI
 7002  0000000                   
 7003  0000000                   	HWE_SET_PARAMETER0 VOLUME
 7004  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_IMMEDIATELY
 7005  0000000                   
 7006  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_VOL
 7007  0000000                   
 7008  0000000                   	PLP
 7009  0000000                   	JSR CHK_HANDSHAKE_PROC
 7010  0000000                   	ENDM
 7011  0000000                   ;------------------------------------------------------------------------------	
 7012  0000000                   SET_SP_VOLUME_RAM_RT MACRO VOLUME_RAM, CHANNEL_ID_RAM
 7013  0000000                   	JSR HWE_READY_PROC
 7014  0000000                   	PHP
 7015  0000000                   	SEI
 7016  0000000                   
 7017  0000000                   	HWE_SET_PARAMETER0_RAM 	VOLUME_RAM
 7018  0000000                   	HWE_SET_PARAMETER1 		VOL_CHANGE_IMMEDIATELY
 7019  0000000                   
 7020  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_SET_VOL
 7021  0000000                   
 7022  0000000                   	PLP
 7023  0000000                   	JSR CHK_HANDSHAKE_PROC
 7024  0000000                   	ENDM
 7025  0000000                   ;------------------------------------------------------------------------------
 7026  0000000                   SET_SP_VOLUME_BY_RAM_RT MACRO VOLUME_RAM, CHANNEL_ID
 7027  0000000                   	JSR HWE_READY_PROC
 7028  0000000                   	PHP
 7029  0000000                   	SEI
 7030  0000000                   
 7031  0000000                   	HWE_SET_PARAMETER0_RAM 	VOLUME_RAM
 7032  0000000                   	HWE_SET_PARAMETER1 		VOL_CHANGE_IMMEDIATELY
 7033  0000000                   
 7034  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_VOL
 7035  0000000                   
 7036  0000000                   	PLP
 7037  0000000                   	JSR CHK_HANDSHAKE_PROC
 7038  0000000                   	ENDM
 7039  0000000                   ;------------------------------------------------------------------------------
 7040  0000000                   ;.IF (WITH_VOL_ADJ .EQ. 1)
 7041  0000000                   .IF (WITH_SP .EQ. 1)
 7042  0000000                   SET_VOL1_RT MACRO NEW_VOL
 7043  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 00H 
 7044  0000000                   	ENDM
 7045  0000000                   ;------------------------------------------------------------------------------
 7046  0000000                   SET_VOL2_RT MACRO NEW_VOL
 7047  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 01H 
 7048  0000000                   	ENDM
 7049  0000000                   .ENDIF ;WITH_SP
 7050  0000000                   ;------------------------------------------------------------------------------
 7051  0000000                   SET_VOL3_RT MACRO NEW_VOL
 7052  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 02H
 7053  0000000                   	ENDM
 7054  0000000                   ;------------------------------------------------------------------------------	
 7055  0000000                   .IF (WITH_MS .EQ. 1)
 7056  0000000                   SET_VOLM_RT MACRO NEW_VOL
 7057  0000000                   	SET_SP_VOLUME_RT NEW_VOL, 02H 





 7058  0000000                   	ENDM
 7059  0000000                   ;------------------------------------------------------------------------------
 7060  0000000                   SET_VOLM1_RT MACRO NEW_MS_CHANNEL_VOL
 7061  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 10H
 7062  0000000                   	ENDM		
 7063  0000000                   ;------------------------------------------------------------------------------
 7064  0000000                   SET_VOLM2_RT MACRO NEW_MS_CHANNEL_VOL
 7065  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 11H
 7066  0000000                   	ENDM
 7067  0000000                   ;------------------------------------------------------------------------------
 7068  0000000                   SET_VOLM3_RT MACRO NEW_MS_CHANNEL_VOL
 7069  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 12H
 7070  0000000                   	ENDM
 7071  0000000                   ;------------------------------------------------------------------------------
 7072  0000000                   SET_VOLM4_RT MACRO NEW_MS_CHANNEL_VOL
 7073  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 13H
 7074  0000000                   	ENDM
 7075  0000000                   ;------------------------------------------------------------------------------
 7076  0000000                   SET_VOLM5_RT MACRO NEW_MS_CHANNEL_VOL
 7077  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 14H
 7078  0000000                   	ENDM
 7079  0000000                   ;------------------------------------------------------------------------------
 7080  0000000                   SET_VOLM6_RT MACRO NEW_MS_CHANNEL_VOL
 7081  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 15H
 7082  0000000                   	ENDM
 7083  0000000                   ;------------------------------------------------------------------------------
 7084  0000000                   SET_VOLM7_RT MACRO NEW_MS_CHANNEL_VOL
 7085  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 16H
 7086  0000000                   	ENDM
 7087  0000000                   ;------------------------------------------------------------------------------
 7088  0000000                   SET_VOLM8_RT MACRO NEW_MS_CHANNEL_VOL
 7089  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 17H
 7090  0000000                   	ENDM
 7091  0000000                   ;------------------------------------------------------------------------------
 7092  0000000                   SET_VOLM9_RT MACRO NEW_MS_CHANNEL_VOL
 7093  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 18H
 7094  0000000                   	ENDM
 7095  0000000                   ;------------------------------------------------------------------------------
 7096  0000000                   SET_VOLM10_RT MACRO NEW_MS_CHANNEL_VOL
 7097  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 19H
 7098  0000000                   	ENDM
 7099  0000000                   ;------------------------------------------------------------------------------
 7100  0000000                   SET_VOLM11_RT MACRO NEW_MS_CHANNEL_VOL
 7101  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1AH
 7102  0000000                   	ENDM
 7103  0000000                   ;------------------------------------------------------------------------------
 7104  0000000                   SET_VOLM12_RT MACRO NEW_MS_CHANNEL_VOL
 7105  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1BH
 7106  0000000                   	ENDM
 7107  0000000                   ;------------------------------------------------------------------------------
 7108  0000000                   SET_VOLM13_RT MACRO NEW_MS_CHANNEL_VOL
 7109  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1CH
 7110  0000000                   	ENDM
 7111  0000000                   ;------------------------------------------------------------------------------
 7112  0000000                   SET_VOLM14_RT MACRO NEW_MS_CHANNEL_VOL
 7113  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1DH
 7114  0000000                   	ENDM





 7115  0000000                   ;------------------------------------------------------------------------------
 7116  0000000                   SET_VOLM15_RT MACRO NEW_MS_CHANNEL_VOL
 7117  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1EH
 7118  0000000                   	ENDM
 7119  0000000                   ;------------------------------------------------------------------------------
 7120  0000000                   SET_VOLM16_RT MACRO NEW_MS_CHANNEL_VOL
 7121  0000000                   	SET_SP_VOLUME_RT NEW_MS_CHANNEL_VOL, 1FH
 7122  0000000                   	ENDM
 7123  0000000                   .ENDIF ;WITH_MS
 7124  0000000                   ;------------------------------------------------------------------------------
 7125  0000000                   .IF (WITH_SP .EQ. 1)
 7126  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7127  0000000                   SET_VOL1_RAM_RT MACRO NEW_VOL_RAM
 7128  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 00H 
 7129  0000000                   	ENDM
 7130  0000000                   	.ENDIF	;WITH_SP_NUM
 7131  0000000                   ;------------------------------------------------------------------------------
 7132  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7133  0000000                   SET_VOL2_RAM_RT MACRO NEW_VOL_RAM
 7134  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 01H
 7135  0000000                   	ENDM
 7136  0000000                   	.ENDIF	;WITH_SP_NUM
 7137  0000000                   .ENDIF ;WITH_SP
 7138  0000000                   ;------------------------------------------------------------------------------	
 7139  0000000                   SET_VOL3_RAM_RT MACRO NEW_VOL_RAM
 7140  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 02H
 7141  0000000                   	ENDM
 7142  0000000                   ;------------------------------------------------------------------------------	
 7143  0000000                   .IF (WITH_MS .EQ. 1)
 7144  0000000                   SET_VOLM_RAM_RT MACRO NEW_VOL_RAM
 7145  0000000                   	SET_SP_VOLUME_BY_RAM_RT NEW_VOL_RAM, 02H
 7146  0000000                   	ENDM
 7147  0000000                   ;------------------------------------------------------------------------------
 7148  0000000                   SET_VOLM1_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7149  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 10H
 7150  0000000                   	ENDM		
 7151  0000000                   ;------------------------------------------------------------------------------
 7152  0000000                   SET_VOLM2_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7153  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 11H
 7154  0000000                   	ENDM
 7155  0000000                   ;------------------------------------------------------------------------------
 7156  0000000                   SET_VOLM3_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7157  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 12H
 7158  0000000                   	ENDM
 7159  0000000                   ;------------------------------------------------------------------------------
 7160  0000000                   SET_VOLM4_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7161  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 13H
 7162  0000000                   	ENDM
 7163  0000000                   ;------------------------------------------------------------------------------
 7164  0000000                   SET_VOLM5_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7165  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 14H
 7166  0000000                   	ENDM
 7167  0000000                   ;------------------------------------------------------------------------------
 7168  0000000                   SET_VOLM6_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7169  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 15H
 7170  0000000                   	ENDM
 7171  0000000                   ;------------------------------------------------------------------------------





 7172  0000000                   SET_VOLM7_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7173  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 16H
 7174  0000000                   	ENDM
 7175  0000000                   ;------------------------------------------------------------------------------
 7176  0000000                   SET_VOLM8_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7177  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 17H
 7178  0000000                   	ENDM
 7179  0000000                   ;------------------------------------------------------------------------------
 7180  0000000                   SET_VOLM9_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7181  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 18H
 7182  0000000                   	ENDM
 7183  0000000                   ;------------------------------------------------------------------------------
 7184  0000000                   SET_VOLM10_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7185  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 19H
 7186  0000000                   	ENDM
 7187  0000000                   ;------------------------------------------------------------------------------
 7188  0000000                   SET_VOLM11_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7189  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1AH
 7190  0000000                   	ENDM
 7191  0000000                   ;------------------------------------------------------------------------------
 7192  0000000                   SET_VOLM12_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7193  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1BH
 7194  0000000                   	ENDM
 7195  0000000                   ;------------------------------------------------------------------------------
 7196  0000000                   SET_VOLM13_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7197  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1CH
 7198  0000000                   	ENDM
 7199  0000000                   ;------------------------------------------------------------------------------
 7200  0000000                   SET_VOLM14_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7201  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1DH
 7202  0000000                   	ENDM
 7203  0000000                   ;------------------------------------------------------------------------------
 7204  0000000                   SET_VOLM15_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7205  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1EH
 7206  0000000                   	ENDM
 7207  0000000                   ;------------------------------------------------------------------------------
 7208  0000000                   SET_VOLM16_RAM_RT MACRO NEW_MS_CHANNEL_VOL_RAM
 7209  0000000                   	SET_SP_VOLUME_RAM_RT NEW_MS_CHANNEL_VOL_RAM, 1FH
 7210  0000000                   	ENDM	
 7211  0000000                   .ENDIF ;WITH_MS
 7212  0000000                   ;===============================================================================
 7213  0000000                   SET_SP_SAMPLE_RATE MACRO NEW_SR, CHANNEL_ID
 7214  0000000                   	JSR HWE_READY_PROC
 7215  0000000                   
 7216  0000000                   	PHP
 7217  0000000                   	SEI
 7218  0000000                   
 7219  0000000                   	HWE_SET_PARAMETER0 .LOW.NEW_SR
 7220  0000000                   	HWE_SET_PARAMETER1 .HIGH.NEW_SR
 7221  0000000                   
 7222  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_SR
 7223  0000000                   
 7224  0000000                   	PLP
 7225  0000000                   	JSR CHK_HANDSHAKE_PROC
 7226  0000000                   	ENDM
 7227  0000000                   ;------------------------------------------------------------------------------
 7228  0000000                   SET_SP_SAMPLE_RATE_RAM MACRO NEW_SR_RAM, CHANNEL_ID_RAM





 7229  0000000                   	JSR HWE_READY_PROC
 7230  0000000                   
 7231  0000000                   	PHP
 7232  0000000                   	SEI
 7233  0000000                   
 7234  0000000                   	HWE_SET_PARAMETER0_RAM NEW_SR_RAM
 7235  0000000                   	HWE_SET_PARAMETER1_RAM NEW_SR_RAM+1
 7236  0000000                   
 7237  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_SET_SR
 7238  0000000                   
 7239  0000000                   	PLP
 7240  0000000                   	JSR CHK_HANDSHAKE_PROC
 7241  0000000                   	ENDM
 7242  0000000                   ;------------------------------------------------------------------------------
 7243  0000000                   SET_SP_SAMPLE_RATE_BY_RAM MACRO NEW_SR_RAM, CHANNEL_ID
 7244  0000000                   	JSR HWE_READY_PROC
 7245  0000000                   
 7246  0000000                   	PHP
 7247  0000000                   	SEI
 7248  0000000                   	LDA	NEW_SR_RAM
 7249  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7250  0000000                   	LDA	NEW_SR_RAM+1
 7251  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7252  0000000                   
 7253  0000000                   	LDA #CHANNEL_ID
 7254  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7255  0000000                   	LDA #CMD_SET_SR
 7256  0000000                   	JSR SEND_CMD_PROC
 7257  0000000                   
 7258  0000000                   	PLP
 7259  0000000                   	JSR CHK_HANDSHAKE_PROC
 7260  0000000                   	ENDM
 7261  0000000                   ;------------------------------------------------------------------------------
 7262  0000000                   ;;.IF (WITH_SP .EQ. 1)
 7263  0000000                   ;;	.IF (WITH_SP_NUM .GT. 0)
 7264  0000000                   SET_SR1 MACRO NEW_SR
 7265  0000000                   	SET_SP_SAMPLE_RATE NEW_SR, 00H
 7266  0000000                   	ENDM
 7267  0000000                   ;;	.ENDIF
 7268  0000000                   ;------------------------------------------------------------------------------
 7269  0000000                   ;;	.IF (WITH_SP_NUM .GT. 1)
 7270  0000000                   SET_SR2 MACRO NEW_SR
 7271  0000000                   	SET_SP_SAMPLE_RATE NEW_SR, 01H
 7272  0000000                   	ENDM
 7273  0000000                   ;;	.ENDIF
 7274  0000000                   ;------------------------------------------------------------------------------
 7275  0000000                   ;;	.IF (WITH_SP_NUM .GT. 2)
 7276  0000000                   SET_SR3 MACRO NEW_SR
 7277  0000000                   	SET_SP_SAMPLE_RATE NEW_SR, 02H
 7278  0000000                   	ENDM
 7279  0000000                   ;;	.ENDIF
 7280  0000000                   ;;.ENDIF
 7281  0000000                   ;------------------------------------------------------------------------------
 7282  0000000                   SET_SR1_RAM MACRO NEW_SR
 7283  0000000                   	SET_SP_SAMPLE_RATE_BY_RAM NEW_SR, 00H
 7284  0000000                   	ENDM
 7285  0000000                   ;------------------------------------------------------------------------------





 7286  0000000                   SET_SR2_RAM MACRO NEW_SR
 7287  0000000                   	SET_SP_SAMPLE_RATE_BY_RAM NEW_SR, 01H
 7288  0000000                   	ENDM
 7289  0000000                   ;------------------------------------------------------------------------------
 7290  0000000                   SET_SR3_RAM MACRO NEW_SR
 7291  0000000                   	SET_SP_SAMPLE_RATE_BY_RAM NEW_SR, 02H
 7292  0000000                   	ENDM
 7293  0000000                   ;===============================================================================
 7294  0000000                   ;------------------------------------------------------------------------------
 7295  0000000                   HWE_SET_COMMAND	MACRO	CHID,COMMAND
 7296  0000000                   	LDA #CHID
 7297  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 7298  0000000                   	LDA #COMMAND
 7299  0000000                   	JSR SEND_CMD_PROC
 7300  0000000                   	ENDM
 7301  0000000                   ;---------------------------------------------------------------
 7302  0000000                   HWE_SET_COMMAND_RAM	MACRO	CHID_RAM,COMMAND
 7303  0000000                   	LDA CHID_RAM
 7304  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 7305  0000000                   	LDA #COMMAND
 7306  0000000                   	JSR SEND_CMD_PROC
 7307  0000000                   	ENDM
 7308  0000000                   ;---------------------------------------------------------------
 7309  0000000                   HWE_SET_PLAY_COMMAND MACRO
 7310  0000000                   	JSR SEND_PLAY_CMD_PROC
 7311  0000000                   	ENDM
 7312  0000000                   ;------------------------------------------------------------------------------
 7313  0000000                   HWE_SET_PARAMETER0	MACRO	PARAMETER0
 7314  0000000                   	LDA #PARAMETER0
 7315  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER 
 7316  0000000                   	ENDM
 7317  0000000                   ;---------------------------------------------------------------	
 7318  0000000                   HWE_SET_PARAMETER0_RAM	MACRO	PARAMETER0
 7319  0000000                   	LDA PARAMETER0
 7320  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER 
 7321  0000000                   	ENDM
 7322  0000000                   ;------------------------------------------------------------------------------
 7323  0000000                   HWE_SET_PARAMETER1	MACRO	PARAMETER1
 7324  0000000                   	LDA #PARAMETER1
 7325  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7326  0000000                   	ENDM
 7327  0000000                   ;---------------------------------------------------------------	
 7328  0000000                   HWE_SET_PARAMETER1_RAM	MACRO	PARAMETER1
 7329  0000000                   	LDA PARAMETER1
 7330  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7331  0000000                   	ENDM	
 7332  0000000                   ;------------------------------------------------------------------------------
 7333  0000000                   HWE_SET_PARAMETER2	MACRO	PARAMETER2
 7334  0000000                   	LDA #PARAMETER2
 7335  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+2
 7336  0000000                   	ENDM
 7337  0000000                   ;---------------------------------------------------------------	
 7338  0000000                   HWE_SET_PARAMETER2_RAM	MACRO	PARAMETER2
 7339  0000000                   	LDA PARAMETER2
 7340  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+2
 7341  0000000                   	ENDM
 7342  0000000                   ;------------------------------------------------------------------------------





 7343  0000000                   HWE_SET_PARAMETER3	MACRO	PARAMETER3
 7344  0000000                   	LDA #PARAMETER3
 7345  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7346  0000000                   	ENDM
 7347  0000000                   ;---------------------------------------------------------------	
 7348  0000000                   HWE_SET_PARAMETER3_RAM	MACRO	PARAMETER3
 7349  0000000                   	LDA PARAMETER3
 7350  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7351  0000000                   	ENDM
 7352  0000000                   ;===============================================================================
 7353  0000000                   HWE_CTRL_PAUSE_CHANNEL_RAM MACRO CHANNEL_RAM
 7354  0000000                   	LDA CHANNEL_RAM
 7355  0000000                   	CMP #FFH
 7356  0000000                   	BEQ 3
 7357  0000000                   	JMP NEXT_PAUSE
 7358  0000000                   	PAUSE_ALL	;ALL
 7359  0000000                   	JMP HWE_CTRL_PAUSE_CHANNEL_RAM_END
 7360  0000000                   NEXT_PAUSE:
 7361  0000000                   	PAUSE_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 7362  0000000                   HWE_CTRL_PAUSE_CHANNEL_RAM_END:
 7363  0000000                   	ENDM
 7364  0000000                   ;---------------------------------------------------------------	
 7365  0000000                   PAUSE_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 7366  0000000                   	JSR HWE_READY_PROC
 7367  0000000                   	PHP
 7368  0000000                   	SEI
 7369  0000000                   
 7370  0000000                   	LDA #CHANNEL_ID
 7371  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7372  0000000                   	LDA #CMD_PAUSE
 7373  0000000                   	JSR SEND_CMD_PROC
 7374  0000000                   
 7375  0000000                   	PLP
 7376  0000000                   	JSR CHK_HANDSHAKE_PROC
 7377  0000000                   	ENDM
 7378  0000000                   ;------------------------------------------------------------------------------
 7379  0000000                   PAUSE_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 7380  0000000                   	JSR HWE_READY_PROC
 7381  0000000                   	PHP
 7382  0000000                   	SEI
 7383  0000000                   
 7384  0000000                   	LDA CHANNEL_ID_RAM
 7385  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7386  0000000                   	LDA #CMD_PAUSE
 7387  0000000                   	JSR SEND_CMD_PROC
 7388  0000000                   
 7389  0000000                   	PLP
 7390  0000000                   	JSR CHK_HANDSHAKE_PROC
 7391  0000000                   	ENDM
 7392  0000000                   ;------------------------------------------------------------------------------
 7393  0000000                   .IF (WITH_SP .EQ. 1)
 7394  0000000                   ;.IF (WITH_SP_NUM .GT. 0)
 7395  0000000                   PAUSE_CH1 MACRO
 7396  0000000                   	PAUSE_PLAY_SP_CHANNEL 00H
 7397  0000000                   
 7398  0000000                   	ENDM
 7399  0000000                   ;.ENDIF





 7400  0000000                   ;------------------------------------------------------------------------------
 7401  0000000                   ;.IF (WITH_SP_NUM .GT. 1)
 7402  0000000                   PAUSE_CH2 MACRO
 7403  0000000                   	PAUSE_PLAY_SP_CHANNEL 01H
 7404  0000000                   
 7405  0000000                   	ENDM
 7406  0000000                   ;.ENDIF
 7407  0000000                   .ENDIF
 7408  0000000                   ;------------------------------------------------------------------------------
 7409  0000000                   PAUSE_CH3 MACRO
 7410  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7411  0000000                   	ENDM
 7412  0000000                   ;------------------------------------------------------------------------------	
 7413  0000000                   .IF (WITH_MS .EQ. 1)
 7414  0000000                   PAUSE_MS MACRO
 7415  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7416  0000000                   
 7417  0000000                   	ENDM
 7418  0000000                   .ENDIF
 7419  0000000                   ;------------------------------------------------------------------------------	
 7420  0000000                   PAUSE_PLAY_EVO_CHANNEL MACRO CHANNEL_ID
 7421  0000000                   .IF(WITH_EVO .EQ. 1)
 7422  0000000                   	JSR HWE_READY_PROC
 7423  0000000                   	PHP
 7424  0000000                   	SEI
 7425  0000000                   
 7426  0000000                   .IF	(CHIPSERIES = 'N589A')
 7427  0000000                   	LDA #(CHANNEL_ID+3)
 7428  0000000                   .ENDIF
 7429  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7430  0000000                   	LDA #(CHANNEL_ID+2)
 7431  0000000                   .ENDIF
 7432  0000000                   .IF	(CHIPSERIES = 'N589D')
 7433  0000000                   	LDA #(CHANNEL_ID+1)
 7434  0000000                   .ENDIF
 7435  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7436  0000000                   	LDA #CMD_PAUSE
 7437  0000000                   	JSR SEND_CMD_PROC
 7438  0000000                   
 7439  0000000                   	PLP
 7440  0000000                   	JSR CHK_HANDSHAKE_PROC
 7441  0000000                   .ENDIF
 7442  0000000                   	ENDM
 7443  0000000                   ;------------------------------------------------------------------------------
 7444  0000000                   PAUSE_EVO1 MACRO
 7445  0000000                   .IF	(CHIPSERIES = 'N589A')
 7446  0000000                   	PAUSE_PLAY_SP_CHANNEL 03H
 7447  0000000                   .ENDIF
 7448  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7449  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7450  0000000                   .ENDIF
 7451  0000000                   .IF	(CHIPSERIES = 'N589D')
 7452  0000000                   	PAUSE_PLAY_SP_CHANNEL 01H
 7453  0000000                   .ENDIF
 7454  0000000                   	ENDM
 7455  0000000                   ;------------------------------------------------------------------------------	
 7456  0000000                   PAUSE_EVO2 MACRO





 7457  0000000                   .IF	(CHIPSERIES = 'N589A')
 7458  0000000                   	PAUSE_PLAY_SP_CHANNEL 04H
 7459  0000000                   .ENDIF
 7460  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7461  0000000                   	PAUSE_PLAY_SP_CHANNEL 03H
 7462  0000000                   .ENDIF
 7463  0000000                   .IF	(CHIPSERIES = 'N589D')
 7464  0000000                   	PAUSE_PLAY_SP_CHANNEL 02H
 7465  0000000                   .ENDIF
 7466  0000000                   	ENDM
 7467  0000000                   ;------------------------------------------------------------------------------	
 7468  0000000                   PAUSE_EVO3 MACRO
 7469  0000000                   .IF	(CHIPSERIES = 'N589A')
 7470  0000000                   	PAUSE_PLAY_SP_CHANNEL 05H
 7471  0000000                   .ENDIF
 7472  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7473  0000000                   	PAUSE_PLAY_SP_CHANNEL 04H
 7474  0000000                   .ENDIF
 7475  0000000                   .IF	(CHIPSERIES = 'N589D')
 7476  0000000                   	PAUSE_PLAY_SP_CHANNEL 03H
 7477  0000000                   .ENDIF
 7478  0000000                   	ENDM
 7479  0000000                   ;------------------------------------------------------------------------------	
 7480  0000000                   PAUSE_ALL MACRO
 7481  0000000                   	.IF (WITH_SP .EQ. 1)
 7482  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7483  0000000                   	PAUSE_CH1
 7484  0000000                   	.ENDIF
 7485  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7486  0000000                   	PAUSE_CH2
 7487  0000000                   	.ENDIF
 7488  0000000                   	.IF (WITH_SP_NUM .GT. 2)
 7489  0000000                   	PAUSE_CH3
 7490  0000000                   	.ENDIF
 7491  0000000                   	.ENDIF
 7492  0000000                   	.IF (WITH_MS .EQ. 1)
 7493  0000000                   	PAUSE_MS
 7494  0000000                   	.ENDIF
 7495  0000000                   
 7496  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7497  0000000                   .	IFDEF WDTIMER
 7498  0000000                   	LDA #WDTC_CLR
 7499  0000000                   	STA !WDTC	
 7500  0000000                   	.ENDIF
 7501  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 7502  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 7503  0000000                   	.ENDIF  	
 7504  0000000                   
 7505  0000000                   	ENDM
 7506  0000000                   
 7507  0000000                   ;===============================================================================
 7508  0000000                   HWE_CTRL_RESUME_CHANNEL_RAM MACRO CHANNEL_RAM
 7509  0000000                   	LDA CHANNEL_RAM
 7510  0000000                   	CMP #FFH
 7511  0000000                   	BEQ 3
 7512  0000000                   	JMP NEXT_RESUME
 7513  0000000                   	RESUME_ALL	;ALL





 7514  0000000                   	JMP HWE_CTRL_RESUME_CHANNEL_RAM_END
 7515  0000000                   NEXT_RESUME:
 7516  0000000                   	RESUME_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 7517  0000000                   HWE_CTRL_RESUME_CHANNEL_RAM_END:
 7518  0000000                   	ENDM
 7519  0000000                   ;------------------------------------------------------------------------------	
 7520  0000000                   RESUME_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 7521  0000000                   	JSR HWE_READY_PROC
 7522  0000000                   
 7523  0000000                   	PHP
 7524  0000000                   	SEI
 7525  0000000                   	LDA #CHANNEL_ID
 7526  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7527  0000000                   	LDA #CMD_RESUME
 7528  0000000                   	JSR SEND_CMD_PROC
 7529  0000000                   
 7530  0000000                   	PLP
 7531  0000000                   	JSR CHK_HANDSHAKE_PROC
 7532  0000000                   	ENDM
 7533  0000000                   ;------------------------------------------------------------------------------
 7534  0000000                   RESUME_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID
 7535  0000000                   	JSR HWE_READY_PROC
 7536  0000000                   
 7537  0000000                   	PHP
 7538  0000000                   	SEI
 7539  0000000                   	LDA CHANNEL_ID
 7540  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7541  0000000                   	LDA #CMD_RESUME
 7542  0000000                   	JSR SEND_CMD_PROC
 7543  0000000                   
 7544  0000000                   	PLP
 7545  0000000                   	JSR CHK_HANDSHAKE_PROC
 7546  0000000                   	ENDM
 7547  0000000                   ;------------------------------------------------------------------------------
 7548  0000000                   .IF (WITH_SP .EQ. 1)
 7549  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7550  0000000                   RESUME_CH1 MACRO
 7551  0000000                   	RESUME_PLAY_SP_CHANNEL 00H
 7552  0000000                   
 7553  0000000                   	ENDM
 7554  0000000                   	.ENDIF
 7555  0000000                   ;------------------------------------------------------------------------------
 7556  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7557  0000000                   RESUME_CH2 MACRO
 7558  0000000                   	RESUME_PLAY_SP_CHANNEL 01H
 7559  0000000                   
 7560  0000000                   	ENDM
 7561  0000000                   	.ENDIF
 7562  0000000                   .ENDIF
 7563  0000000                   ;------------------------------------------------------------------------------
 7564  0000000                   .IF (WITH_MS .EQ. 1)
 7565  0000000                   RESUME_CH3 MACRO
 7566  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7567  0000000                   
 7568  0000000                   	ENDM
 7569  0000000                   	.ENDIF
 7570  0000000                   ;------------------------------------------------------------------------------	





 7571  0000000                   RESUME_MS MACRO
 7572  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7573  0000000                   	ENDM
 7574  0000000                   .ENDIF
 7575  0000000                   ;------------------------------------------------------------------------------	
 7576  0000000                   RESUME_PLAY_EVO_CHANNEL MACRO CHANNEL_ID
 7577  0000000                   .IF(WITH_EVO .EQ. 1)
 7578  0000000                   	JSR HWE_READY_PROC
 7579  0000000                   
 7580  0000000                   	PHP
 7581  0000000                   	SEI
 7582  0000000                   .IF	(CHIPSERIES = 'N589A')
 7583  0000000                   	LDA #(CHANNEL_ID+3)
 7584  0000000                   .ENDIF
 7585  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7586  0000000                   	LDA #(CHANNEL_ID+2)
 7587  0000000                   .ENDIF
 7588  0000000                   .IF	(CHIPSERIES = 'N589D')
 7589  0000000                   	LDA #(CHANNEL_ID+1)
 7590  0000000                   .ENDIF
 7591  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 7592  0000000                   	LDA #CMD_RESUME
 7593  0000000                   	JSR SEND_CMD_PROC
 7594  0000000                   
 7595  0000000                   	PLP
 7596  0000000                   	JSR CHK_HANDSHAKE_PROC
 7597  0000000                   .ENDIF
 7598  0000000                   	ENDM
 7599  0000000                   ;------------------------------------------------------------------------------
 7600  0000000                   RESUME_EVO1 MACRO
 7601  0000000                   .IF	(CHIPSERIES = 'N589A')
 7602  0000000                   	RESUME_PLAY_SP_CHANNEL 03H
 7603  0000000                   .ENDIF
 7604  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7605  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7606  0000000                   .ENDIF
 7607  0000000                   .IF	(CHIPSERIES = 'N589D')
 7608  0000000                   	RESUME_PLAY_SP_CHANNEL 01H
 7609  0000000                   .ENDIF
 7610  0000000                   	ENDM
 7611  0000000                   ;------------------------------------------------------------------------------	
 7612  0000000                   RESUME_EVO2 MACRO
 7613  0000000                   .IF	(CHIPSERIES = 'N589A')
 7614  0000000                   	RESUME_PLAY_SP_CHANNEL 04H
 7615  0000000                   .ENDIF
 7616  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7617  0000000                   	RESUME_PLAY_SP_CHANNEL 03H
 7618  0000000                   .ENDIF
 7619  0000000                   .IF	(CHIPSERIES = 'N589D')
 7620  0000000                   	RESUME_PLAY_SP_CHANNEL 02H
 7621  0000000                   .ENDIF
 7622  0000000                   	ENDM
 7623  0000000                   ;------------------------------------------------------------------------------	
 7624  0000000                   RESUME_EVO3 MACRO
 7625  0000000                   .IF	(CHIPSERIES = 'N589A')
 7626  0000000                   	RESUME_PLAY_SP_CHANNEL 05H
 7627  0000000                   .ENDIF





 7628  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 7629  0000000                   	RESUME_PLAY_SP_CHANNEL 04H
 7630  0000000                   .ENDIF
 7631  0000000                   .IF	(CHIPSERIES = 'N589D')
 7632  0000000                   	RESUME_PLAY_SP_CHANNEL 03H
 7633  0000000                   .ENDIF
 7634  0000000                   	ENDM
 7635  0000000                   ;------------------------------------------------------------------------------	
 7636  0000000                   RESUME_ALL MACRO
 7637  0000000                   	.IF (WITH_SP .EQ. 1)
 7638  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 7639  0000000                   	RESUME_CH1
 7640  0000000                   	.ENDIF
 7641  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 7642  0000000                   	RESUME_CH2
 7643  0000000                   	.ENDIF
 7644  0000000                   	.IF (WITH_SP_NUM .GT. 2)
 7645  0000000                   	RESUME_CH3
 7646  0000000                   	.ENDIF
 7647  0000000                   	.ENDIF ;WITH_SP
 7648  0000000                   	.IF (WITH_MS .EQ. 1)
 7649  0000000                   	RESUME_MS
 7650  0000000                   	.ENDIF ;WITH_MS
 7651  0000000                   	ENDM
 7652  0000000                   ;===============================================================================
 7653  0000000                   PLAY8 MACRO SENTENCE_START
 7654  0000000                   	PSF_RESPONSE_LIMIT
 7655  0000000                   	JSR HWE_READY_PROC
 7656  0000000                   	PHP
 7657  0000000                   	SEI
 7658  0000000                   
 7659  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7660  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7661  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7662  0000000                   	.ELSE
 7663  0000000                   	.ENDIF
 7664  0000000                   	LDA	#.LOW.SENTENCE_START
 7665  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7666  0000000                   	LDA	#.HIGH.SENTENCE_START
 7667  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7668  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7669  0000000                   
 7670  0000000                   	HWE_SET_PLAY_COMMAND
 7671  0000000                   
 7672  0000000                   	PLP
 7673  0000000                   	JSR CHK_HANDSHAKE_PROC
 7674  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7675  0000000                   	ENDM
 7676  0000000                   ;------------------------------------------------------------------------------
 7677  0000000                   PLAY8TAILON	MACRO	SENTENCE_START
 7678  0000000                   	PSF_RESPONSE_LIMIT
 7679  0000000                   	JSR HWE_READY_PROC
 7680  0000000                   	PHP
 7681  0000000                   	SEI
 7682  0000000                   
 7683  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7684  0000000                   	LDA	#.SEGHIGH.SENTENCE_START





 7685  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7686  0000000                   	.ELSE
 7687  0000000                   	.ENDIF
 7688  0000000                   	LDA	#.LOW.SENTENCE_START
 7689  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7690  0000000                   	LDA	#.HIGH.SENTENCE_START
 7691  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7692  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7693  0000000                   
 7694  0000000                   	HWE_SET_PLAY_COMMAND
 7695  0000000                   
 7696  0000000                   ;JSR PLAY_PHRASE_PROCEDURE
 7697  0000000                   ;EXTERN PRE_PLAY_PHRASE_TAIL_ON
 7698  0000000                   ;JSR PRE_PLAY_PHRASE_TAIL_ON
 7699  0000000                   
 7700  0000000                   	PLP
 7701  0000000                   	JSR CHK_HANDSHAKE_PROC
 7702  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7703  0000000                   	ENDM	
 7704  0000000                   ;------------------------------------------------------------------------------
 7705  0000000                   PLAY8TAILOFF	MACRO	SENTENCE_START
 7706  0000000                   	PSF_RESPONSE_LIMIT
 7707  0000000                   	JSR HWE_READY_PROC
 7708  0000000                   	PHP
 7709  0000000                   	SEI
 7710  0000000                   
 7711  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7712  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7713  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7714  0000000                   	.ELSE
 7715  0000000                   	.ENDIF
 7716  0000000                   	LDA	#.LOW.SENTENCE_START
 7717  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7718  0000000                   	LDA	#.HIGH.SENTENCE_START
 7719  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7720  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7721  0000000                   
 7722  0000000                   	HWE_SET_PLAY_COMMAND
 7723  0000000                   
 7724  0000000                   ;JSR PLAY_PHRASE_PROCEDURE
 7725  0000000                   ;EXTERN PRE_PLAY_PHRASE_TAIL_OFF
 7726  0000000                   ;JSR PRE_PLAY_PHRASE_TAIL_OFF
 7727  0000000                   
 7728  0000000                   	PLP
 7729  0000000                   	JSR CHK_HANDSHAKE_PROC
 7730  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7731  0000000                   	ENDM
 7732  0000000                   ;------------------------------------------------------------------------------
 7733  0000000                   .IF(WITH_PLAYE .EQ. 1)
 7734  0000000                   PLAY8E MACRO SENTENCE_START
 7735  0000000                   	PSF_RESPONSE_LIMIT
 7736  0000000                   	JSR HWE_READY_PROC
 7737  0000000                   	PHP
 7738  0000000                   	SEI
 7739  0000000                   
 7740  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7741  0000000                   	LDA	#.SEGHIGH.SENTENCE_START





 7742  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7743  0000000                   	.ELSE
 7744  0000000                   	.ENDIF
 7745  0000000                   	LDA	#.LOW.SENTENCE_START
 7746  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7747  0000000                   	LDA	#.HIGH.SENTENCE_START
 7748  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7749  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7750  0000000                   
 7751  0000000                   	HWE_SET_PLAY_COMMAND
 7752  0000000                   
 7753  0000000                   	PLP
 7754  0000000                   	JSR CHK_HANDSHAKE_PROC
 7755  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7756  0000000                   	ENDM
 7757  0000000                   ;------------------------------------------------------------------------------	
 7758  0000000                   PLAY8ETAILON	MACRO	SENTENCE_START
 7759  0000000                   	PSF_RESPONSE_LIMIT
 7760  0000000                   	JSR HWE_READY_PROC
 7761  0000000                   	PHP
 7762  0000000                   	SEI
 7763  0000000                   
 7764  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7765  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7766  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7767  0000000                   	.ELSE
 7768  0000000                   	.ENDIF
 7769  0000000                   	LDA	#.LOW.SENTENCE_START
 7770  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 7771  0000000                   	LDA	#.HIGH.SENTENCE_START
 7772  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7773  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7774  0000000                   
 7775  0000000                   	HWE_SET_PLAY_COMMAND
 7776  0000000                   
 7777  0000000                   ;JSR PLAY_PHRASE_PROCEDURE
 7778  0000000                   ;EXTERN PRE_PLAY_PHRASE_TAIL_ON
 7779  0000000                   ;JSR PRE_PLAY_PHRASE_TAIL_ON
 7780  0000000                   
 7781  0000000                   	PLP
 7782  0000000                   	JSR CHK_HANDSHAKE_PROC
 7783  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7784  0000000                   	ENDM
 7785  0000000                   ;------------------------------------------------------------------------------
 7786  0000000                   PLAY8ETAILOFF	MACRO	SENTENCE_START
 7787  0000000                   	PSF_RESPONSE_LIMIT
 7788  0000000                   	JSR HWE_READY_PROC
 7789  0000000                   	PHP
 7790  0000000                   	SEI
 7791  0000000                   
 7792  0000000                   	.IF (WITH_SIM_SP .EQ. 1)
 7793  0000000                   	LDA	#.SEGHIGH.SENTENCE_START
 7794  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+3
 7795  0000000                   	.ELSE
 7796  0000000                   	.ENDIF
 7797  0000000                   	LDA	#.LOW.SENTENCE_START
 7798  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER





 7799  0000000                   	LDA	#.HIGH.SENTENCE_START
 7800  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 7801  0000000                   	LDA	#.HIGH8.SENTENCE_START
 7802  0000000                   
 7803  0000000                   	HWE_SET_PLAY_COMMAND
 7804  0000000                   
 7805  0000000                   	PLP
 7806  0000000                   	JSR CHK_HANDSHAKE_PROC
 7807  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7808  0000000                   	ENDM
 7809  0000000                   .ENDIF
 7810  0000000                   ;===============================================================================
 7811  0000000                   ;===============================================================================
 7812  0000000                   .IF (WITH_PLAY_INDEX .EQ. 1)
 7813  0000000                   PLAY_INDEX MACRO	PLAYINDEX
 7814  0000000                   	PSF_RESPONSE_LIMIT
 7815  0000000                   	JSR HWE_READY_PROC
 7816  0000000                   	PHP
 7817  0000000                   	SEI
 7818  0000000                   
 7819  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7820  0000000                   
 7821  0000000                   	LDA #.LOW.PLAYINDEX
 7822  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7823  0000000                   	LDA #.HIGH.PLAYINDEX
 7824  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7825  0000000                   
 7826  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7827  0000000                   	PLP
 7828  0000000                   	JSR CHK_HANDSHAKE_PROC
 7829  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7830  0000000                   	ENDM
 7831  0000000                   ;------------------------------------------------------------------------------
 7832  0000000                   PLAY_INDEX_RAM MACRO	PLAYINDEX_RAM
 7833  0000000                   	PSF_RESPONSE_LIMIT
 7834  0000000                   	JSR HWE_READY_PROC
 7835  0000000                   	PHP
 7836  0000000                   	SEI
 7837  0000000                   
 7838  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7839  0000000                   
 7840  0000000                   	LDA PLAYINDEX_RAM
 7841  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7842  0000000                   	LDA PLAYINDEX_RAM+1
 7843  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7844  0000000                   
 7845  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7846  0000000                   	PLP
 7847  0000000                   	JSR CHK_HANDSHAKE_PROC
 7848  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7849  0000000                   	ENDM
 7850  0000000                   .ENDIF
 7851  0000000                   ;------------------------------------------------------------------------------
 7852  0000000                   PLAYW_INDEX MACRO	PLAYINDEX
 7853  0000000                   	PSF_RESPONSE_LIMIT
 7854  0000000                   	JSR HWE_READY_PROC
 7855  0000000                   	PHP





 7856  0000000                   	SEI
 7857  0000000                   
 7858  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7859  0000000                   
 7860  0000000                   	LDA #.LOW.PLAYINDEX
 7861  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7862  0000000                   	LDA #.HIGH.PLAYINDEX
 7863  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7864  0000000                   
 7865  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7866  0000000                   	PLP
 7867  0000000                   	JSR CHK_HANDSHAKE_PROC
 7868  0000000                   
 7869  0000000                   	LDA HWE_PLAYBYIDX_BA+4
 7870  0000000                   	STA PLAYBI_WAIT
 7871  0000000                   
 7872  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7873  0000000                   	ENDM
 7874  0000000                   ;------------------------------------------------------------------------------
 7875  0000000                   PLAYW_INDEX_RAM MACRO	PLAYINDEX_RAM
 7876  0000000                   	PSF_RESPONSE_LIMIT
 7877  0000000                   	JSR HWE_READY_PROC
 7878  0000000                   	PHP
 7879  0000000                   	SEI
 7880  0000000                   
 7881  0000000                   	JSR SET_PLAYLIST_TABLE_PROC
 7882  0000000                   
 7883  0000000                   	LDA PLAYINDEX_RAM
 7884  0000000                   	STA HWE_PLAYBYIDX_BA+4
 7885  0000000                   	LDA PLAYINDEX_RAM+1
 7886  0000000                   	STA HWE_PLAYBYIDX_BA+5
 7887  0000000                   
 7888  0000000                   	HWE_SET_COMMAND 00H, CMD_PLAY_BY_INDEX
 7889  0000000                   	PLP
 7890  0000000                   	JSR CHK_HANDSHAKE_PROC
 7891  0000000                   
 7892  0000000                   	LDA HWE_PLAYBYIDX_BA+4
 7893  0000000                   	STA PLAYBI_WAIT
 7894  0000000                   
 7895  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 7896  0000000                   	ENDM
 7897  0000000                   ;------------------------------------------------------------------------------	
 7898  0000000                   PLAYBYINDEX_WAIT_LOOP MACRO
 7899  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 7900  0000000                   .ELSE
 7901  0000000                   .IF (WITH_PLAY_INDEX .EQ. 1)
 7902  0000000                   _xPLAYBI_WAIT_LOOP_#:
 7903  0000000                   .IFDEF WDTIMER
 7904  0000000                   	LDA #WDTC_CLR
 7905  0000000                   	STA !WDTC
 7906  0000000                   .ENDIF
 7907  0000000                   	.IF(WITH_FW_CAP_SENSOR_KEYS .GT. 0)
 7908  0000000                   	CAP_SENSOR_ACTION    
 7909  0000000                   	CAP_SENSOR_KEY_DETECTION
 7910  0000000                   	.ENDIF
 7911  0000000                   
 7912  0000000                   	.IF (N55P_DEVICE_UIO_USED .GT. 0H)





 7913  0000000                   	N55P_EXPANDER_PROCESS
 7914  0000000                   	.ENDIF
 7915  0000000                   
 7916  0000000                   	REFRESH_STATUS
 7917  0000000                   	LDA <GLOBAL_PLAY
 7918  0000000                   	BIT <PLAYBI_WAIT
 7919  0000000                   	BNE _xPLAYBI_WAIT_LOOP_#
 7920  0000000                   
 7921  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H) 
 7922  0000000                   	LDA <PLAYBI_WAIT
 7923  0000000                   	BIT #3FH
 7924  0000000                   	BEQ _xPLAYBI_WAIT_END#
 7925  0000000                   	N55P_EXPANDER_PROCESS_RUNTIME
 7926  0000000                   _xPLAYBI_WAIT_END#:
 7927  0000000                   .ENDIF
 7928  0000000                   .ENDIF
 7929  0000000                   .ENDIF
 7930  0000000                   	ENDM
 7931  0000000                   .ENDIF
 7932  0000000                   ;===============================================================================
 7933  0000000                   HWE_CTRL_STOP_CHANNEL_RAM MACRO CHANNEL_RAM
 7934  0000000                   	LDA CHANNEL_RAM
 7935  0000000                   	CMP #FFH
 7936  0000000                   	BEQ 3
 7937  0000000                   	JMP NEXT_STOP_SP
 7938  0000000                   	STOP_PLAY_ALL	;ALL
 7939  0000000                   	JMP HWE_CTRL_STOP_CHANNEL_RAM_END
 7940  0000000                   NEXT_STOP_SP:
 7941  0000000                   	LDA CHANNEL_RAM
 7942  0000000                   	CMP #02H
 7943  0000000                   	BCC 3
 7944  0000000                   	JMP NEXT_STOP_MS
 7945  0000000                   	STOP_PLAY_SP_CHANNEL_RAM CHANNEL_RAM
 7946  0000000                   	JMP HWE_CTRL_STOP_CHANNEL_RAM_END
 7947  0000000                   NEXT_STOP_MS:
 7948  0000000                   	LDA CHANNEL_RAM
 7949  0000000                   	CMP #02H
 7950  0000000                   	BEQ 3
 7951  0000000                   	JMP NEXT_STOP_EVO
 7952  0000000                   	STOP_MS
 7953  0000000                   	JMP HWE_CTRL_STOP_CHANNEL_RAM_END
 7954  0000000                   NEXT_STOP_EVO:
 7955  0000000                   	LDA CHANNEL_RAM
 7956  0000000                   	SEC
 7957  0000000                   	SBC #3
 7958  0000000                   	STA CHANNEL_RAM
 7959  0000000                   	STOP_PLAY_EVO_CHANNEL_RAM CHANNEL_RAM
 7960  0000000                   HWE_CTRL_STOP_CHANNEL_RAM_END:
 7961  0000000                   
 7962  0000000                   	ENDM	
 7963  0000000                   ;------------------------------------------------------------------------------
 7964  0000000                   STOP_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 7965  0000000                   	LDA !HWENG
 7966  0000000                   	BIT #01H
 7967  0000000                   	BNE 3
 7968  0000000                   	JMP STOP_PLAY_SP_CHANNEL_NEXT#
 7969  0000000                   





 7970  0000000                   	JSR HWE_READY_PROC
 7971  0000000                   	LDY #CHANNEL_ID
 7972  0000000                   	EXTERN STOP_PLAY_Y_SP_API
 7973  0000000                   	JSR STOP_PLAY_Y_SP_API
 7974  0000000                   
 7975  0000000                   STOP_PLAY_SP_CHANNEL_NEXT#:	
 7976  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7977  0000000                   .IFDEF WDTIMER
 7978  0000000                   	LDA #WDTC_CLR
 7979  0000000                   	STA !WDTC
 7980  0000000                   .ENDIF ;WDTIMER
 7981  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 7982  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 7983  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED
 7984  0000000                   	ENDM
 7985  0000000                   ;------------------------------------------------------------------------------
 7986  0000000                   STOP_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 7987  0000000                   	LDA !HWENG
 7988  0000000                   	BIT #01H
 7989  0000000                   	BNE 3
 7990  0000000                   	JMP STOP_PLAY_SP_CHANNEL_RAM_NEXT#
 7991  0000000                   
 7992  0000000                   	JSR HWE_READY_PROC
 7993  0000000                   	LDY CHANNEL_ID_RAM
 7994  0000000                   	EXTERN STOP_PLAY_Y_SP_API
 7995  0000000                   	JSR STOP_PLAY_Y_SP_API
 7996  0000000                   
 7997  0000000                   STOP_PLAY_SP_CHANNEL_RAM_NEXT#:	
 7998  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 7999  0000000                   .IFDEF WDTIMER
 8000  0000000                   	LDA #WDTC_CLR
 8001  0000000                   	STA !WDTC
 8002  0000000                   .ENDIF ;WDTIMER
 8003  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8004  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8005  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED
 8006  0000000                   	ENDM
 8007  0000000                   ;------------------------------------------------------------------------------	
 8008  0000000                   STOP_PLAY_EVO_CHANNEL MACRO CHANNEL_ID
 8009  0000000                   .IF(WITH_EVO .EQ. 1)
 8010  0000000                   	LDA !HWENG
 8011  0000000                   	BIT #01H
 8012  0000000                   	BNE 3
 8013  0000000                   	JMP STOP_PLAY_EVO_CHANNEL_NEXT#
 8014  0000000                   
 8015  0000000                   	JSR HWE_READY_PROC
 8016  0000000                   
 8017  0000000                   	LDY #CHANNEL_ID
 8018  0000000                   
 8019  0000000                   	EXTERN STOP_PLAY_Y_EVO_API
 8020  0000000                   	JSR STOP_PLAY_Y_EVO_API
 8021  0000000                   .ENDIF
 8022  0000000                   
 8023  0000000                   STOP_PLAY_EVO_CHANNEL_NEXT#:
 8024  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8025  0000000                   .IFDEF WDTIMER
 8026  0000000                   	LDA #WDTC_CLR





 8027  0000000                   	STA !WDTC
 8028  0000000                   .ENDIF ;WDTIMER
 8029  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8030  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8031  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED	
 8032  0000000                   	ENDM
 8033  0000000                   ;------------------------------------------------------------------------------
 8034  0000000                   STOP_PLAY_EVO_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 8035  0000000                   
 8036  0000000                   .IF(WITH_EVO .EQ. 1)
 8037  0000000                   	LDA !HWENG
 8038  0000000                   	BIT #01H
 8039  0000000                   	BNE 3
 8040  0000000                   	JMP STOP_PLAY_EVO_CHANNEL_RAM_NEXT#
 8041  0000000                   
 8042  0000000                   	JSR HWE_READY_PROC
 8043  0000000                   
 8044  0000000                   	LDY CHANNEL_ID_RAM
 8045  0000000                   	EXTERN STOP_PLAY_Y_EVO_API
 8046  0000000                   	JSR STOP_PLAY_Y_EVO_API
 8047  0000000                   .ENDIF
 8048  0000000                   
 8049  0000000                   STOP_PLAY_EVO_CHANNEL_RAM_NEXT#:
 8050  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8051  0000000                   .IFDEF WDTIMER
 8052  0000000                   	LDA #WDTC_CLR
 8053  0000000                   	STA !WDTC
 8054  0000000                   .ENDIF ;WDTIMER
 8055  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8056  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8057  0000000                   .ENDIF ;N55P_DEVICE_UIO_USED
 8058  0000000                   	ENDM
 8059  0000000                   ;------------------------------------------------------------------------------
 8060  0000000                   .IF (WITH_SP .EQ. 1)
 8061  0000000                   	.IF (WITH_SP_NUM .GT. 0)
 8062  0000000                   STOP_CH1 MACRO
 8063  0000000                   
 8064  0000000                   	STOP_PLAY_SP_CHANNEL 00H
 8065  0000000                   
 8066  0000000                   	ENDM
 8067  0000000                   	.ENDIF
 8068  0000000                   ;------------------------------------------------------------------------------
 8069  0000000                   	.IF (WITH_SP_NUM .GT. 1)
 8070  0000000                   STOP_CH2 MACRO
 8071  0000000                   	STOP_PLAY_SP_CHANNEL 01H
 8072  0000000                   
 8073  0000000                   	ENDM
 8074  0000000                   	.ENDIF
 8075  0000000                   .ENDIF
 8076  0000000                   ;------------------------------------------------------------------------------
 8077  0000000                   STOP_CH3 MACRO
 8078  0000000                   	STOP_PLAY_SP_CHANNEL 02H
 8079  0000000                   	ENDM
 8080  0000000                   ;------------------------------------------------------------------------------	
 8081  0000000                   STOP_MS MACRO
 8082  0000000                   .IF (WITH_MS .EQ. 1)
 8083  0000000                   	STOP_PLAY_SP_CHANNEL 02H





 8084  0000000                   .ENDIF ;WITH_MS
 8085  0000000                   
 8086  0000000                   	ENDM
 8087  0000000                   ;------------------------------------------------------------------------------	
 8088  0000000                   STOP_PLAY_MS MACRO
 8089  0000000                   	PSF_RESPONSE_LIMIT
 8090  0000000                   	STOP_MS
 8091  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 8092  0000000                   	ENDM
 8093  0000000                   ;------------------------------------------------------------------------------
 8094  0000000                   STOP_EVO1 MACRO
 8095  0000000                   	STOP_PLAY_EVO_CHANNEL 00H
 8096  0000000                   
 8097  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8098  0000000                   .IFDEF WDTIMER
 8099  0000000                   	LDA #WDTC_CLR
 8100  0000000                   	STA !WDTC
 8101  0000000                   .ENDIF  
 8102  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8103  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8104  0000000                   .ENDIF 	
 8105  0000000                   	ENDM
 8106  0000000                   ;------------------------------------------------------------------------------	
 8107  0000000                   STOP_EVO2 MACRO
 8108  0000000                   	STOP_PLAY_EVO_CHANNEL 01H
 8109  0000000                   
 8110  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8111  0000000                   .IFDEF WDTIMER
 8112  0000000                   	LDA #WDTC_CLR
 8113  0000000                   	STA !WDTC
 8114  0000000                   .ENDIF  
 8115  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8116  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8117  0000000                   .ENDIF 
 8118  0000000                   	ENDM
 8119  0000000                   ;------------------------------------------------------------------------------	
 8120  0000000                   STOP_EVO3 MACRO
 8121  0000000                   	STOP_PLAY_EVO_CHANNEL 02H
 8122  0000000                   
 8123  0000000                   .IF (N55P_DEVICE_UIO_USED .GT. 0H)
 8124  0000000                   .IFDEF WDTIMER
 8125  0000000                   	LDA #WDTC_CLR
 8126  0000000                   	STA !WDTC
 8127  0000000                   .ENDIF  
 8128  0000000                   	EXTERN UIO_N55P_PROCESS_NEXT
 8129  0000000                   	JSR UIO_N55P_PROCESS_NEXT
 8130  0000000                   .ENDIF 
 8131  0000000                   	ENDM
 8132  0000000                   ;------------------------------------------------------------------------------	
 8133  0000000                   STOP_ALL_SP	MACRO
 8134  0000000                   	JSR HWE_READY_PROC
 8135  0000000                   	EXTERN STOP_ALL_SP_API
 8136  0000000                   	JSR STOP_ALL_SP_API
 8137  0000000                   	ENDM
 8138  0000000                   ;------------------------------------------------------------------------------	
 8139  0000000                   STOP_ALL MACRO
 8140  0000000                   	LDA !HWENG





 8141  0000000                   	BIT #01H
 8142  0000000                   	BNE 3
 8143  0000000                   	JMP END_STOP_ALL#
 8144  0000000                   
 8145  0000000                   	JSR HWE_READY_PROC
 8146  0000000                   	EXTERN STOP_PLAY_ALL_API
 8147  0000000                   	JSR STOP_PLAY_ALL_API
 8148  0000000                   END_STOP_ALL#:
 8149  0000000                   	ENDM
 8150  0000000                   ;------------------------------------------------------------------------------		
 8151  0000000                   STOP_PLAY_ALL MACRO
 8152  0000000                   .IF((WITH_MS .EQ. 0) && (WITH_SP .EQ. 0) && (WITH_EVO .EQ. 0))
 8153  0000000                   .ELSE
 8154  0000000                   	PSF_RESPONSE_LIMIT
 8155  0000000                   	STOP_ALL
 8156  0000000                   
 8157  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 8158  0000000                   .ENDIF
 8159  0000000                   	ENDM
 8160  0000000                   ;===============================================================================	
 8161  0000000                   MUTE_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 8162  0000000                   	JSR HWE_READY_PROC
 8163  0000000                   	PHP
 8164  0000000                   	SEI
 8165  0000000                   
 8166  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_MUTE
 8167  0000000                   
 8168  0000000                   	PLP
 8169  0000000                   	JSR CHK_HANDSHAKE_PROC
 8170  0000000                   	ENDM
 8171  0000000                   ;------------------------------------------------------------------------------	
 8172  0000000                   MUTE_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 8173  0000000                   	JSR HWE_READY_PROC
 8174  0000000                   	PHP
 8175  0000000                   	SEI
 8176  0000000                   
 8177  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_MUTE
 8178  0000000                   
 8179  0000000                   	PLP
 8180  0000000                   	JSR CHK_HANDSHAKE_PROC
 8181  0000000                   	ENDM
 8182  0000000                   ;------------------------------------------------------------------------------
 8183  0000000                   .IF (WITH_SP .EQ. 1)
 8184  0000000                   ;;	.IF (WITH_SP_NUM .GT. 0)
 8185  0000000                   MUTE_CH1 MACRO
 8186  0000000                   	MUTE_PLAY_SP_CHANNEL 00H
 8187  0000000                   	ENDM
 8188  0000000                   ;------------------------------------------------------------------------------	
 8189  0000000                   MUTE_CH2 MACRO
 8190  0000000                   	MUTE_PLAY_SP_CHANNEL 01H
 8191  0000000                   	ENDM
 8192  0000000                   .ENDIF ;WITH_SP
 8193  0000000                   ;------------------------------------------------------------------------------	
 8194  0000000                   MUTE_CH3 MACRO
 8195  0000000                   	MUTE_PLAY_SP_CHANNEL 02H
 8196  0000000                   	ENDM
 8197  0000000                   ;------------------------------------------------------------------------------	





 8198  0000000                   MUTE_MS MACRO
 8199  0000000                   	MUTE_PLAY_SP_CHANNEL 02H
 8200  0000000                   	ENDM
 8201  0000000                   ;===============================================================================	
 8202  0000000                   UNMUTE_PLAY_SP_CHANNEL MACRO CHANNEL_ID
 8203  0000000                   	JSR HWE_READY_PROC
 8204  0000000                   	PHP
 8205  0000000                   	SEI
 8206  0000000                   
 8207  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_UNMUTE
 8208  0000000                   
 8209  0000000                   	PLP
 8210  0000000                   	JSR CHK_HANDSHAKE_PROC
 8211  0000000                   	ENDM
 8212  0000000                   ;------------------------------------------------------------------------------
 8213  0000000                   UNMUTE_PLAY_SP_CHANNEL_RAM MACRO CHANNEL_ID_RAM
 8214  0000000                   	JSR HWE_READY_PROC
 8215  0000000                   	PHP
 8216  0000000                   	SEI
 8217  0000000                   
 8218  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_UNMUTE
 8219  0000000                   
 8220  0000000                   	PLP
 8221  0000000                   	JSR CHK_HANDSHAKE_PROC
 8222  0000000                   	ENDM
 8223  0000000                   ;------------------------------------------------------------------------------
 8224  0000000                   ;;.IF (WITH_SP .EQ. 1)
 8225  0000000                   ;;	.IF (WITH_SP_NUM .GT. 0)	
 8226  0000000                   UNMUTE_CH1 MACRO
 8227  0000000                   	UNMUTE_PLAY_SP_CHANNEL 00H
 8228  0000000                   
 8229  0000000                   	ENDM
 8230  0000000                   ;;	.ENDIF
 8231  0000000                   ;------------------------------------------------------------------------------	
 8232  0000000                   UNMUTE_CH2 MACRO
 8233  0000000                   	UNMUTE_PLAY_SP_CHANNEL 01H
 8234  0000000                   
 8235  0000000                   	ENDM
 8236  0000000                   ;------------------------------------------------------------------------------
 8237  0000000                   UNMUTE_CH3 MACRO
 8238  0000000                   	UNMUTE_PLAY_SP_CHANNEL 02H
 8239  0000000                   	ENDM
 8240  0000000                   ;------------------------------------------------------------------------------
 8241  0000000                   UNMUTE_MS MACRO
 8242  0000000                   	UNMUTE_PLAY_SP_CHANNEL 02H
 8243  0000000                   	ENDM
 8244  0000000                   ;;.ENDIF
 8245  0000000                   ;===============================================================================
 8246  0000000                   HWE_CTRL_GLOBAL_VOL_RAM MACRO ENABLE_RAM,CHANNEL_RAM
 8247  0000000                   	LDA ENABLE_RAM
 8248  0000000                   	CMP #01H
 8249  0000000                   	BEQ EN_GLOBAL_VOL#
 8250  0000000                   	EN_SP_EQU_VOL_RAM CHANNEL_RAM
 8251  0000000                   	JMP RETURN#
 8252  0000000                   EN_GLOBAL_VOL#:
 8253  0000000                   	DIS_SP_EQU_VOL_RAM CHANNEL_RAM
 8254  0000000                   RETURN#:





 8255  0000000                   	ENDM
 8256  0000000                   ;------------------------------------------------------------------------------
 8257  0000000                   HWE_CTRL_GLOBAL_VOLM_RAM MACRO ENABLE_RAM,CHANNEL_RAM
 8258  0000000                   	LDA ENABLE_RAM
 8259  0000000                   	CMP #01H
 8260  0000000                   	BEQ EN_GLOBAL_VOLM#
 8261  0000000                   	EN_GLOBALVOL_VOLMX_RAM CHANNEL_RAM
 8262  0000000                   	JMP RETURN#
 8263  0000000                   EN_GLOBAL_VOLM#:
 8264  0000000                   	DIS_GLOBALVOL_VOLMX_RAM CHANNEL_RAM
 8265  0000000                   RETURN#:
 8266  0000000                   	ENDM
 8267  0000000                   ;------------------------------------------------------------------------------
 8268  0000000                   DIS_SP_EQU_VOL MACRO CH_ID
 8269  0000000                   	JSR HWE_READY_PROC
 8270  0000000                   	PHP
 8271  0000000                   	SEI
 8272  0000000                   
 8273  0000000                   	HWE_SET_COMMAND CH_ID, CMD_EN_GLOBAL_VOL
 8274  0000000                   
 8275  0000000                   	PLP
 8276  0000000                   	JSR CHK_HANDSHAKE_PROC
 8277  0000000                   	ENDM
 8278  0000000                   ;------------------------------------------------------------------------------
 8279  0000000                   DIS_SP_EQU_VOL_RAM MACRO CH_ID_RAM
 8280  0000000                   	JSR HWE_READY_PROC
 8281  0000000                   	PHP
 8282  0000000                   	SEI
 8283  0000000                   
 8284  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_EN_GLOBAL_VOL
 8285  0000000                   
 8286  0000000                   	PLP
 8287  0000000                   	JSR CHK_HANDSHAKE_PROC
 8288  0000000                   	ENDM
 8289  0000000                   ;------------------------------------------------------------------------------
 8290  0000000                   EN_GLOBALVOL_VOL1 MACRO
 8291  0000000                   	DIS_SP_EQU_VOL 00H
 8292  0000000                   	ENDM
 8293  0000000                   ;------------------------------------------------------------------------------
 8294  0000000                   EN_GLOBALVOL_VOL2 MACRO
 8295  0000000                   	DIS_SP_EQU_VOL 01H
 8296  0000000                   	ENDM
 8297  0000000                   ;------------------------------------------------------------------------------
 8298  0000000                   EN_GLOBALVOL_VOL3 MACRO
 8299  0000000                   	DIS_SP_EQU_VOL 02H
 8300  0000000                   	ENDM
 8301  0000000                   ;------------------------------------------------------------------------------
 8302  0000000                   .IF (WITH_MS .EQ. 1)
 8303  0000000                   EN_GLOBALVOL_VOLM MACRO
 8304  0000000                   	DIS_SP_EQU_VOL 02H
 8305  0000000                   	ENDM
 8306  0000000                   ;------------------------------------------------------------------------------
 8307  0000000                   EN_GLOBAL_CHANNEL_VOLM MACRO CHANNEL
 8308  0000000                   	DIS_SP_EQU_VOL CHANNEL+10H
 8309  0000000                   	ENDM
 8310  0000000                   ;------------------------------------------------------------------------------
 8311  0000000                   EN_GLOBALVOL_VOLM1 MACRO





 8312  0000000                   	EN_GLOBALVOL_VOLMX 0001H
 8313  0000000                   	ENDM
 8314  0000000                   ;------------------------------------------------------------------------------
 8315  0000000                   EN_GLOBALVOL_VOLM2 MACRO
 8316  0000000                   	EN_GLOBALVOL_VOLMX 0002H
 8317  0000000                   	ENDM
 8318  0000000                   ;------------------------------------------------------------------------------
 8319  0000000                   EN_GLOBALVOL_VOLM3 MACRO
 8320  0000000                   	EN_GLOBALVOL_VOLMX 0004H
 8321  0000000                   	ENDM
 8322  0000000                   ;------------------------------------------------------------------------------	
 8323  0000000                   EN_GLOBALVOL_VOLM4 MACRO
 8324  0000000                   	EN_GLOBALVOL_VOLMX 0008H
 8325  0000000                   	ENDM
 8326  0000000                   ;------------------------------------------------------------------------------	
 8327  0000000                   EN_GLOBALVOL_VOLM5 MACRO
 8328  0000000                   	EN_GLOBALVOL_VOLMX 0010H
 8329  0000000                   	ENDM
 8330  0000000                   ;------------------------------------------------------------------------------	
 8331  0000000                   EN_GLOBALVOL_VOLM6 MACRO
 8332  0000000                   	EN_GLOBALVOL_VOLMX 0020H
 8333  0000000                   	ENDM
 8334  0000000                   ;------------------------------------------------------------------------------	
 8335  0000000                   EN_GLOBALVOL_VOLM7 MACRO
 8336  0000000                   	EN_GLOBALVOL_VOLMX 0040H
 8337  0000000                   	ENDM
 8338  0000000                   ;------------------------------------------------------------------------------	
 8339  0000000                   EN_GLOBALVOL_VOLM8 MACRO
 8340  0000000                   	EN_GLOBALVOL_VOLMX 0080H
 8341  0000000                   	ENDM
 8342  0000000                   ;------------------------------------------------------------------------------	
 8343  0000000                   EN_GLOBALVOL_VOLM9 MACRO
 8344  0000000                   	EN_GLOBALVOL_VOLMX 0100H
 8345  0000000                   	ENDM
 8346  0000000                   ;------------------------------------------------------------------------------	
 8347  0000000                   EN_GLOBALVOL_VOLM10 MACRO
 8348  0000000                   	EN_GLOBALVOL_VOLMX 0200H
 8349  0000000                   	ENDM
 8350  0000000                   ;------------------------------------------------------------------------------	
 8351  0000000                   EN_GLOBALVOL_VOLM11 MACRO
 8352  0000000                   	EN_GLOBALVOL_VOLMX 0400H
 8353  0000000                   	ENDM
 8354  0000000                   ;------------------------------------------------------------------------------	
 8355  0000000                   EN_GLOBALVOL_VOLM12 MACRO
 8356  0000000                   	EN_GLOBALVOL_VOLMX 0800H
 8357  0000000                   	ENDM
 8358  0000000                   ;------------------------------------------------------------------------------	
 8359  0000000                   EN_GLOBALVOL_VOLM13 MACRO
 8360  0000000                   	EN_GLOBALVOL_VOLMX 1000H
 8361  0000000                   	ENDM
 8362  0000000                   ;------------------------------------------------------------------------------	
 8363  0000000                   EN_GLOBALVOL_VOLM14 MACRO
 8364  0000000                   	EN_GLOBALVOL_VOLMX 2000H
 8365  0000000                   	ENDM
 8366  0000000                   ;------------------------------------------------------------------------------	
 8367  0000000                   EN_GLOBALVOL_VOLM15 MACRO
 8368  0000000                   	EN_GLOBALVOL_VOLMX 4000H





 8369  0000000                   	ENDM
 8370  0000000                   ;------------------------------------------------------------------------------	
 8371  0000000                   EN_GLOBALVOL_VOLM16 MACRO
 8372  0000000                   	EN_GLOBALVOL_VOLMX 8000H
 8373  0000000                   	ENDM
 8374  0000000                   ;------------------------------------------------------------------------------
 8375  0000000                   EN_GLOBALVOL_VOLMX MACRO MS_CH_FLAG
 8376  0000000                   
 8377  0000000                   	ENDM
 8378  0000000                   ;------------------------------------------------------------------------------
 8379  0000000                   EN_GLOBALVOL_VOLMX_RAM MACRO MS_CH_FLAG_RAM
 8380  0000000                   	JSR HWE_READY_PROC
 8381  0000000                   
 8382  0000000                   	PHP
 8383  0000000                   	SEI
 8384  0000000                   
 8385  0000000                   	LDA	MS_CH_FLAG_RAM
 8386  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8387  0000000                   	LDA	MS_CH_FLAG_RAM+1
 8388  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 8389  0000000                   
 8390  0000000                   	LDA #10H
 8391  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 8392  0000000                   	LDA #CMD_EN_GLOBAL_VOL
 8393  0000000                   	JSR SEND_CMD_PROC
 8394  0000000                   
 8395  0000000                   	PLP
 8396  0000000                   	JSR CHK_HANDSHAKE_PROC
 8397  0000000                   	ENDM
 8398  0000000                   .ENDIF ;WITH_MS
 8399  0000000                   ;===============================================================================		
 8400  0000000                   EN_SP_EQU_VOL MACRO CH_ID
 8401  0000000                   	JSR HWE_READY_PROC
 8402  0000000                   	PHP
 8403  0000000                   	SEI
 8404  0000000                   
 8405  0000000                   	HWE_SET_COMMAND CH_ID, CMD_DIS_GLOBAL_VOL
 8406  0000000                   
 8407  0000000                   	PLP
 8408  0000000                   	JSR CHK_HANDSHAKE_PROC
 8409  0000000                   	ENDM
 8410  0000000                   ;------------------------------------------------------------------------------
 8411  0000000                   EN_SP_EQU_VOL_RAM MACRO CH_ID_RAM
 8412  0000000                   	JSR HWE_READY_PROC
 8413  0000000                   	PHP
 8414  0000000                   	SEI
 8415  0000000                   
 8416  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_DIS_GLOBAL_VOL
 8417  0000000                   
 8418  0000000                   	PLP
 8419  0000000                   	JSR CHK_HANDSHAKE_PROC
 8420  0000000                   	ENDM
 8421  0000000                   ;------------------------------------------------------------------------------
 8422  0000000                   DIS_GLOBALVOL_VOL1 MACRO
 8423  0000000                   	EN_SP_EQU_VOL 00H
 8424  0000000                   	ENDM
 8425  0000000                   ;------------------------------------------------------------------------------





 8426  0000000                   DIS_GLOBALVOL_VOL2 MACRO
 8427  0000000                   	EN_SP_EQU_VOL 01H
 8428  0000000                   	ENDM
 8429  0000000                   ;------------------------------------------------------------------------------
 8430  0000000                   DIS_GLOBALVOL_VOL3 MACRO
 8431  0000000                   	EN_SP_EQU_VOL 02H
 8432  0000000                   	ENDM
 8433  0000000                   ;------------------------------------------------------------------------------
 8434  0000000                   .IF (WITH_MS .EQ. 1)
 8435  0000000                   DIS_GLOBALVOL_VOLM MACRO
 8436  0000000                   	EN_SP_EQU_VOL 02H
 8437  0000000                   	ENDM
 8438  0000000                   ;------------------------------------------------------------------------------
 8439  0000000                   DIS_GLOBAL_CHANNEL_VOLM MACRO CHANNEL
 8440  0000000                   	EN_SP_EQU_VOL CHANNEL+10H
 8441  0000000                   	ENDM
 8442  0000000                   ;------------------------------------------------------------------------------
 8443  0000000                   DIS_GLOBALVOL_VOLM1 MACRO
 8444  0000000                   	DIS_GLOBALVOL_VOLMX 0001H
 8445  0000000                   	ENDM
 8446  0000000                   ;------------------------------------------------------------------------------
 8447  0000000                   DIS_GLOBALVOL_VOLM2 MACRO
 8448  0000000                   	DIS_GLOBALVOL_VOLMX 0002H
 8449  0000000                   	ENDM
 8450  0000000                   ;------------------------------------------------------------------------------
 8451  0000000                   DIS_GLOBALVOL_VOLM3 MACRO
 8452  0000000                   	DIS_GLOBALVOL_VOLMX 0004H
 8453  0000000                   	ENDM
 8454  0000000                   ;------------------------------------------------------------------------------
 8455  0000000                   DIS_GLOBALVOL_VOLM4 MACRO
 8456  0000000                   	DIS_GLOBALVOL_VOLMX 0008H
 8457  0000000                   	ENDM
 8458  0000000                   ;------------------------------------------------------------------------------
 8459  0000000                   DIS_GLOBALVOL_VOLM5 MACRO
 8460  0000000                   	DIS_GLOBALVOL_VOLMX 0010H
 8461  0000000                   	ENDM
 8462  0000000                   ;------------------------------------------------------------------------------
 8463  0000000                   DIS_GLOBALVOL_VOLM6 MACRO
 8464  0000000                   	DIS_GLOBALVOL_VOLMX 0020H
 8465  0000000                   	ENDM
 8466  0000000                   ;------------------------------------------------------------------------------
 8467  0000000                   DIS_GLOBALVOL_VOLM7 MACRO
 8468  0000000                   	DIS_GLOBALVOL_VOLMX 0040H
 8469  0000000                   	ENDM
 8470  0000000                   ;------------------------------------------------------------------------------
 8471  0000000                   DIS_GLOBALVOL_VOLM8 MACRO
 8472  0000000                   	DIS_GLOBALVOL_VOLMX 0080H
 8473  0000000                   	ENDM
 8474  0000000                   ;------------------------------------------------------------------------------
 8475  0000000                   DIS_GLOBALVOL_VOLM9 MACRO
 8476  0000000                   	DIS_GLOBALVOL_VOLMX 0100H
 8477  0000000                   	ENDM
 8478  0000000                   ;------------------------------------------------------------------------------
 8479  0000000                   DIS_GLOBALVOL_VOLM10 MACRO
 8480  0000000                   	DIS_GLOBALVOL_VOLMX 0200H
 8481  0000000                   	ENDM
 8482  0000000                   ;------------------------------------------------------------------------------





 8483  0000000                   DIS_GLOBALVOL_VOLM11 MACRO
 8484  0000000                   	DIS_GLOBALVOL_VOLMX 0400H
 8485  0000000                   	ENDM
 8486  0000000                   ;------------------------------------------------------------------------------
 8487  0000000                   DIS_GLOBALVOL_VOLM12 MACRO
 8488  0000000                   	DIS_GLOBALVOL_VOLMX 0800H
 8489  0000000                   	ENDM
 8490  0000000                   ;------------------------------------------------------------------------------
 8491  0000000                   DIS_GLOBALVOL_VOLM13 MACRO
 8492  0000000                   	DIS_GLOBALVOL_VOLMX 1000H
 8493  0000000                   	ENDM
 8494  0000000                   ;------------------------------------------------------------------------------
 8495  0000000                   DIS_GLOBALVOL_VOLM14 MACRO
 8496  0000000                   	DIS_GLOBALVOL_VOLMX 2000H
 8497  0000000                   	ENDM
 8498  0000000                   ;------------------------------------------------------------------------------
 8499  0000000                   DIS_GLOBALVOL_VOLM15 MACRO
 8500  0000000                   	DIS_GLOBALVOL_VOLMX 4000H
 8501  0000000                   	ENDM
 8502  0000000                   ;------------------------------------------------------------------------------
 8503  0000000                   DIS_GLOBALVOL_VOLM16 MACRO
 8504  0000000                   	DIS_GLOBALVOL_VOLMX 8000H
 8505  0000000                   	ENDM
 8506  0000000                   ;------------------------------------------------------------------------------
 8507  0000000                   DIS_GLOBALVOL_VOLMX MACRO MS_CH_FLAG
 8508  0000000                   	JSR HWE_READY_PROC
 8509  0000000                   
 8510  0000000                   	PHP
 8511  0000000                   	SEI
 8512  0000000                   
 8513  0000000                   	LDA	#.LOW.MS_CH_FLAG
 8514  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8515  0000000                   	LDA	#.HIGH.MS_CH_FLAG
 8516  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 8517  0000000                   
 8518  0000000                   	LDA #10H
 8519  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 8520  0000000                   	LDA #CMD_DIS_GLOBAL_VOL
 8521  0000000                   	JSR SEND_CMD_PROC
 8522  0000000                   
 8523  0000000                   	PLP
 8524  0000000                   	JSR CHK_HANDSHAKE_PROC
 8525  0000000                   	ENDM
 8526  0000000                   ;------------------------------------------------------------------------------
 8527  0000000                   DIS_GLOBALVOL_VOLMX_RAM MACRO MS_CH_FLAG_RAM
 8528  0000000                   	JSR HWE_READY_PROC
 8529  0000000                   
 8530  0000000                   	PHP
 8531  0000000                   	SEI
 8532  0000000                   
 8533  0000000                   	LDA	MS_CH_FLAG_RAM
 8534  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8535  0000000                   	LDA	MS_CH_FLAG_RAM+1
 8536  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 8537  0000000                   
 8538  0000000                   	LDA #10H
 8539  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX





 8540  0000000                   	LDA #CMD_DIS_GLOBAL_VOL
 8541  0000000                   	JSR SEND_CMD_PROC
 8542  0000000                   
 8543  0000000                   	PLP
 8544  0000000                   	JSR CHK_HANDSHAKE_PROC
 8545  0000000                   	ENDM
 8546  0000000                   .ENDIF ;WITH MS
 8547  0000000                   ;===============================================================================
 8548  0000000                   HWE_CTRL_GLOBAL_SR_RAM MACRO ENABLE_RAM, CHANNEL_RAM
 8549  0000000                   	LDA ENABLE_RAM
 8550  0000000                   	CMP #01H
 8551  0000000                   	BNE 3
 8552  0000000                   	JMP EN_GLOBAL_SR#
 8553  0000000                   	DIS_GLOBALSR_SR_RAM CHANNEL_RAM
 8554  0000000                   	JMP RETURN#
 8555  0000000                   EN_GLOBAL_SR#:
 8556  0000000                   	EN_GLOBALSR_SR_RAM CHANNEL_RAM
 8557  0000000                   RETURN#:
 8558  0000000                   	ENDM
 8559  0000000                   ;------------------------------------------------------------------------------
 8560  0000000                   EN_GLOBALSR_SR MACRO CHANNEL_ID
 8561  0000000                   	JSR HWE_READY_PROC
 8562  0000000                   	PHP
 8563  0000000                   	SEI
 8564  0000000                   
 8565  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_EN_GLOBAL_SR
 8566  0000000                   
 8567  0000000                   	PLP
 8568  0000000                   	JSR CHK_HANDSHAKE_PROC
 8569  0000000                   	ENDM
 8570  0000000                   ;------------------------------------------------------------------------------
 8571  0000000                   EN_GLOBALSR_SR_RAM MACRO CHANNEL_ID_RAM
 8572  0000000                   	JSR HWE_READY_PROC
 8573  0000000                   	PHP
 8574  0000000                   	SEI
 8575  0000000                   
 8576  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_EN_GLOBAL_SR
 8577  0000000                   
 8578  0000000                   	PLP
 8579  0000000                   	JSR CHK_HANDSHAKE_PROC
 8580  0000000                   	ENDM
 8581  0000000                   ;------------------------------------------------------------------------------
 8582  0000000                   EN_GLOBALSR_SR1 MACRO
 8583  0000000                   	EN_GLOBALSR_SR 0H
 8584  0000000                   	ENDM
 8585  0000000                   ;------------------------------------------------------------------------------
 8586  0000000                   EN_GLOBALSR_SR2 MACRO
 8587  0000000                   	EN_GLOBALSR_SR 1H
 8588  0000000                   	ENDM
 8589  0000000                   ;------------------------------------------------------------------------------	
 8590  0000000                   EN_GLOBALSR_SR3 MACRO
 8591  0000000                   	EN_GLOBALSR_SR 2H
 8592  0000000                   	ENDM
 8593  0000000                   ;===============================================================================	
 8594  0000000                   DIS_GLOBALSR_SR MACRO CHANNEL_ID
 8595  0000000                   	JSR HWE_READY_PROC
 8596  0000000                   	PHP





 8597  0000000                   	SEI
 8598  0000000                   
 8599  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_DIS_GLOBAL_SR
 8600  0000000                   
 8601  0000000                   	PLP
 8602  0000000                   	JSR CHK_HANDSHAKE_PROC
 8603  0000000                   	ENDM
 8604  0000000                   ;------------------------------------------------------------------------------
 8605  0000000                   DIS_GLOBALSR_SR_RAM MACRO CHANNEL_ID_RAM
 8606  0000000                   	JSR HWE_READY_PROC
 8607  0000000                   	PHP
 8608  0000000                   	SEI
 8609  0000000                   
 8610  0000000                   	HWE_SET_COMMAND_RAM CHANNEL_ID_RAM, CMD_DIS_GLOBAL_SR
 8611  0000000                   
 8612  0000000                   	PLP
 8613  0000000                   	JSR CHK_HANDSHAKE_PROC
 8614  0000000                   	ENDM
 8615  0000000                   ;------------------------------------------------------------------------------
 8616  0000000                   DIS_GLOBALSR_SR1 MACRO
 8617  0000000                   	DIS_GLOBALSR_SR 00H
 8618  0000000                   	ENDM
 8619  0000000                   ;------------------------------------------------------------------------------
 8620  0000000                   DIS_GLOBALSR_SR2 MACRO
 8621  0000000                   	DIS_GLOBALSR_SR 01H
 8622  0000000                   	ENDM
 8623  0000000                   ;------------------------------------------------------------------------------	
 8624  0000000                   DIS_GLOBALSR_SR3 MACRO
 8625  0000000                   	DIS_GLOBALSR_SR 02H
 8626  0000000                   	ENDM
 8627  0000000                   ;==============================================================================
 8628  0000000                   ; Play In Reverse
 8629  0000000                   ;==============================================================================
 8630  0000000                   SET_PLAY_REVERSE MACRO CHANNEL_ID, ENABLE
 8631  0000000                   	JSR HWE_READY_PROC
 8632  0000000                   	PHP
 8633  0000000                   	SEI
 8634  0000000                   
 8635  0000000                   	LDA	#ENABLE
 8636  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 8637  0000000                   	HWE_SET_COMMAND (CHANNEL_ID-1), CMD_PLAY_IN_REVERSE_SP
 8638  0000000                   
 8639  0000000                   	PLP
 8640  0000000                   	JSR CHK_HANDSHAKE_PROC
 8641  0000000                   	ENDM
 8642  0000000                   ;------------------------------------------------------------------------------	
 8643  0000000                   EN_PLAY_REVERSE MACRO CHANNEL_ID
 8644  0000000                   	SET_PLAY_REVERSE CHANNEL_ID, 1
 8645  0000000                   	ENDM
 8646  0000000                   ;------------------------------------------------------------------------------	
 8647  0000000                   DIS_PLAY_REVERSE MACRO CHANNEL_ID
 8648  0000000                   	SET_PLAY_REVERSE CHANNEL_ID, 2
 8649  0000000                   	ENDM
 8650  0000000                   ;==============================================================================
 8651  0000000                   ; Set instrument of specific MIDI channel
 8652  0000000                   ;==============================================================================
 8653  0000000                   EN_GLOBALINS_M MACRO





 8654  0000000                   	JSR HWE_READY_PROC
 8655  0000000                   	PHP
 8656  0000000                   	SEI
 8657  0000000                   
 8658  0000000                   	HWE_SET_COMMAND 2, CMD_EN_GLOBAL_INS
 8659  0000000                   
 8660  0000000                   	PLP
 8661  0000000                   	JSR CHK_HANDSHAKE_PROC
 8662  0000000                   	ENDM
 8663  0000000                   ;------------------------------------------------------------------------------
 8664  0000000                   DIS_GLOBALINS_M MACRO
 8665  0000000                   	JSR HWE_READY_PROC
 8666  0000000                   	PHP
 8667  0000000                   	SEI
 8668  0000000                   
 8669  0000000                   	HWE_SET_COMMAND 2, CMD_DIS_GLOBAL_INS
 8670  0000000                   
 8671  0000000                   	PLP
 8672  0000000                   	JSR CHK_HANDSHAKE_PROC
 8673  0000000                   	ENDM
 8674  0000000                   ;------------------------------------------------------------------------------	
 8675  0000000                   EN_GLOBLA_INS MACRO
 8676  0000000                   	EN_GLOBALINS_M
 8677  0000000                   	ENDM
 8678  0000000                   ;------------------------------------------------------------------------------	
 8679  0000000                   DIS_GLOBLA_INS MACRO
 8680  0000000                   	DIS_GLOBALINS_M
 8681  0000000                   	ENDM
 8682  0000000                   ;------------------------------------------------------------------------------		
 8683  0000000                   SET_CHANNEL_INSTRUMENT MACRO MIDI_CH_ID, INS_ID
 8684  0000000                   	.IF (WITH_MS .EQ. 1H)
 8685  0000000                   	JSR HWE_READY_PROC
 8686  0000000                   	PHP
 8687  0000000                   	SEI
 8688  0000000                   
 8689  0000000                   ;HWE_SET_PARAMETER0 MIDI_CH_ID
 8690  0000000                   ;HWE_SET_PARAMETER1 INS_ID
 8691  0000000                   	HWE_SET_PARAMETER0 INS_ID
 8692  0000000                   
 8693  0000000                   	HWE_SET_COMMAND (MIDI_CH_ID-1), CMD_SET_EVP
 8694  0000000                   
 8695  0000000                   	PLP
 8696  0000000                   	JSR CHK_HANDSHAKE_PROC
 8697  0000000                   
 8698  0000000                   	.ENDIF
 8699  0000000                   	ENDM
 8700  0000000                   ;------------------------------------------------------------------------------		
 8701  0000000                   SET_CHANNEL_INSTRUMENT_BY_RAM MACRO MIDI_CH_ID, INS_ID_RAM
 8702  0000000                   	.IF (WITH_MS .EQ. 1H)
 8703  0000000                   	JSR HWE_READY_PROC
 8704  0000000                   	PHP
 8705  0000000                   	SEI
 8706  0000000                   
 8707  0000000                   ;HWE_SET_PARAMETER0 MIDI_CH_ID
 8708  0000000                   ;HWE_SET_PARAMETER1 INS_ID
 8709  0000000                   	HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8710  0000000                   





 8711  0000000                   	HWE_SET_COMMAND (MIDI_CH_ID-1), CMD_SET_EVP
 8712  0000000                   
 8713  0000000                   	PLP
 8714  0000000                   	JSR CHK_HANDSHAKE_PROC
 8715  0000000                   
 8716  0000000                   	.ENDIF
 8717  0000000                   	ENDM
 8718  0000000                   ;------------------------------------------------------------------------------
 8719  0000000                   SET_CHANNEL_INSTRUMENT_RAM MACRO MIDI_CH_ID_RAM, INS_ID_RAM
 8720  0000000                   	JSR HWE_READY_PROC
 8721  0000000                   	PHP
 8722  0000000                   	SEI
 8723  0000000                   
 8724  0000000                   ;HWE_SET_PARAMETER1_RAM INS_ID_RAM
 8725  0000000                   	HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8726  0000000                   
 8727  0000000                   ;HWE_SET_COMMAND_RAM MIDI_CH_ID_RAM, CMD_SET_EVP
 8728  0000000                   
 8729  0000000                   	LDA MIDI_CH_ID_RAM
 8730  0000000                   	DEC A
 8731  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 8732  0000000                   	LDA #CMD_SET_EVP
 8733  0000000                   	JSR SEND_CMD_PROC
 8734  0000000                   
 8735  0000000                   	PLP
 8736  0000000                   	JSR CHK_HANDSHAKE_PROC
 8737  0000000                   
 8738  0000000                   	ENDM
 8739  0000000                   ;------------------------------------------------------------------------------	
 8740  0000000                   SET_EVP1 MACRO NEW_EVP
 8741  0000000                   	SET_CHANNEL_INSTRUMENT 01H, NEW_EVP
 8742  0000000                   ENDM
 8743  0000000                   ;------------------------------------------------------------------------------	
 8744  0000000                   SET_EVP2 MACRO NEW_EVP
 8745  0000000                   	SET_CHANNEL_INSTRUMENT 02H, NEW_EVP
 8746  0000000                   ENDM
 8747  0000000                   ;------------------------------------------------------------------------------	
 8748  0000000                   SET_EVP3 MACRO NEW_EVP
 8749  0000000                   	SET_CHANNEL_INSTRUMENT 03H, NEW_EVP
 8750  0000000                   ENDM
 8751  0000000                   ;------------------------------------------------------------------------------	
 8752  0000000                   SET_EVP4 MACRO NEW_EVP
 8753  0000000                   	SET_CHANNEL_INSTRUMENT 04H, NEW_EVP
 8754  0000000                   ENDM
 8755  0000000                   ;------------------------------------------------------------------------------	
 8756  0000000                   SET_EVP5 MACRO NEW_EVP
 8757  0000000                   	SET_CHANNEL_INSTRUMENT 05H, NEW_EVP
 8758  0000000                   ENDM
 8759  0000000                   ;------------------------------------------------------------------------------	
 8760  0000000                   SET_EVP6 MACRO NEW_EVP
 8761  0000000                   	SET_CHANNEL_INSTRUMENT 06H, NEW_EVP
 8762  0000000                   ENDM
 8763  0000000                   ;------------------------------------------------------------------------------	
 8764  0000000                   SET_EVP7 MACRO NEW_EVP
 8765  0000000                   	SET_CHANNEL_INSTRUMENT 07H, NEW_EVP
 8766  0000000                   ENDM
 8767  0000000                   ;------------------------------------------------------------------------------	





 8768  0000000                   SET_EVP8 MACRO NEW_EVP
 8769  0000000                   	SET_CHANNEL_INSTRUMENT 08H, NEW_EVP
 8770  0000000                   ENDM
 8771  0000000                   ;------------------------------------------------------------------------------	
 8772  0000000                   SET_EVP9 MACRO NEW_EVP
 8773  0000000                   	SET_CHANNEL_INSTRUMENT 09H, NEW_EVP
 8774  0000000                   ENDM
 8775  0000000                   ;------------------------------------------------------------------------------	
 8776  0000000                   SET_EVP10 MACRO NEW_EVP
 8777  0000000                   	SET_CHANNEL_INSTRUMENT 0AH, NEW_EVP
 8778  0000000                   ENDM
 8779  0000000                   ;------------------------------------------------------------------------------	
 8780  0000000                   SET_EVP11 MACRO NEW_EVP
 8781  0000000                   	SET_CHANNEL_INSTRUMENT 0BH, NEW_EVP
 8782  0000000                   ENDM
 8783  0000000                   ;------------------------------------------------------------------------------	
 8784  0000000                   SET_EVP12 MACRO NEW_EVP
 8785  0000000                   	SET_CHANNEL_INSTRUMENT 0CH, NEW_EVP
 8786  0000000                   ENDM
 8787  0000000                   ;------------------------------------------------------------------------------	
 8788  0000000                   SET_EVP13 MACRO NEW_EVP
 8789  0000000                   	SET_CHANNEL_INSTRUMENT 0DH, NEW_EVP
 8790  0000000                   ENDM
 8791  0000000                   ;------------------------------------------------------------------------------	
 8792  0000000                   SET_EVP14 MACRO NEW_EVP
 8793  0000000                   	SET_CHANNEL_INSTRUMENT 0EH, NEW_EVP
 8794  0000000                   ENDM
 8795  0000000                   ;------------------------------------------------------------------------------	
 8796  0000000                   SET_EVP15 MACRO NEW_EVP
 8797  0000000                   	SET_CHANNEL_INSTRUMENT 0FH, NEW_EVP
 8798  0000000                   ENDM
 8799  0000000                   ;------------------------------------------------------------------------------	
 8800  0000000                   SET_EVP16 MACRO NEW_EVP
 8801  0000000                   	SET_CHANNEL_INSTRUMENT 10H, NEW_EVP
 8802  0000000                   ENDM
 8803  0000000                   ;------------------------------------------------------------------------------	
 8804  0000000                   SET_EVP1_RAM MACRO NEW_EVP_RAM
 8805  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 01H, NEW_EVP_RAM
 8806  0000000                   ENDM
 8807  0000000                   ;------------------------------------------------------------------------------	
 8808  0000000                   SET_EVP2_RAM MACRO NEW_EVP_RAM
 8809  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 02H, NEW_EVP_RAM
 8810  0000000                   ENDM
 8811  0000000                   ;------------------------------------------------------------------------------	
 8812  0000000                   SET_EVP3_RAM MACRO NEW_EVP_RAM
 8813  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 03H, NEW_EVP_RAM
 8814  0000000                   ENDM
 8815  0000000                   ;------------------------------------------------------------------------------	
 8816  0000000                   SET_EVP4_RAM MACRO NEW_EVP_RAM
 8817  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 04H, NEW_EVP_RAM
 8818  0000000                   ENDM
 8819  0000000                   ;------------------------------------------------------------------------------	
 8820  0000000                   SET_EVP5_RAM MACRO NEW_EVP_RAM
 8821  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 05H, NEW_EVP_RAM
 8822  0000000                   ENDM
 8823  0000000                   ;------------------------------------------------------------------------------	
 8824  0000000                   SET_EVP6_RAM MACRO NEW_EVP_RAM





 8825  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 06H, NEW_EVP_RAM
 8826  0000000                   ENDM
 8827  0000000                   ;------------------------------------------------------------------------------	
 8828  0000000                   SET_EVP7_RAM MACRO NEW_EVP_RAM
 8829  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 07H, NEW_EVP_RAM
 8830  0000000                   ENDM
 8831  0000000                   ;------------------------------------------------------------------------------	
 8832  0000000                   SET_EVP8_RAM MACRO NEW_EVP_RAM
 8833  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 08H, NEW_EVP_RAM
 8834  0000000                   ENDM
 8835  0000000                   ;------------------------------------------------------------------------------	
 8836  0000000                   SET_EVP9_RAM MACRO NEW_EVP_RAM
 8837  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 09H, NEW_EVP_RAM
 8838  0000000                   ENDM
 8839  0000000                   ;------------------------------------------------------------------------------	
 8840  0000000                   SET_EVP10_RAM MACRO NEW_EVP_RAM
 8841  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0AH, NEW_EVP_RAM
 8842  0000000                   ENDM
 8843  0000000                   ;------------------------------------------------------------------------------	
 8844  0000000                   SET_EVP11_RAM MACRO NEW_EVP_RAM
 8845  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0BH, NEW_EVP_RAM
 8846  0000000                   ENDM
 8847  0000000                   ;------------------------------------------------------------------------------	
 8848  0000000                   SET_EVP12_RAM MACRO NEW_EVP_RAM
 8849  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0CH, NEW_EVP_RAM
 8850  0000000                   ENDM
 8851  0000000                   ;------------------------------------------------------------------------------	
 8852  0000000                   SET_EVP13_RAM MACRO NEW_EVP_RAM
 8853  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0DH, NEW_EVP_RAM
 8854  0000000                   ENDM
 8855  0000000                   ;------------------------------------------------------------------------------	
 8856  0000000                   SET_EVP14_RAM MACRO NEW_EVP_RAM
 8857  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0EH, NEW_EVP_RAM
 8858  0000000                   ENDM
 8859  0000000                   ;------------------------------------------------------------------------------	
 8860  0000000                   SET_EVP15_RAM MACRO NEW_EVP_RAM
 8861  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 0FH, NEW_EVP_RAM
 8862  0000000                   ENDM
 8863  0000000                   ;------------------------------------------------------------------------------	
 8864  0000000                   SET_EVP16_RAM MACRO NEW_EVP_RAM
 8865  0000000                   	SET_CHANNEL_INSTRUMENT_BY_RAM 10H, NEW_EVP_RAM
 8866  0000000                   ENDM
 8867  0000000                   ;===============================================================================
 8868  0000000                   EXT_NOTE_ON MACRO CH_ID, MIDI_CH, NOTE, VELOCITY
 8869  0000000                   	JSR HWE_READY_PROC
 8870  0000000                   	PHP
 8871  0000000                   	SEI
 8872  0000000                   
 8873  0000000                   ;HWE_SET_PARAMETER0 INS_ID
 8874  0000000                   	HWE_SET_PARAMETER1 NOTE
 8875  0000000                   	HWE_SET_PARAMETER2 (MIDI_CH-1)
 8876  0000000                   	HWE_SET_PARAMETER3 VELOCITY
 8877  0000000                   
 8878  0000000                   	HWE_SET_COMMAND CH_ID, CMD_NOTE_ON
 8879  0000000                   
 8880  0000000                   	PLP
 8881  0000000                   	JSR CHK_HANDSHAKE_PROC





 8882  0000000                   	ENDM
 8883  0000000                   ;------------------------------------------------------------------------------
 8884  0000000                   EXT_NOTE_ON_RAM MACRO CH_ID_RAM, MIDI_CH_RAM, NOTE_RAM, VELOCITY_RAM
 8885  0000000                   	JSR HWE_READY_PROC
 8886  0000000                   	PHP
 8887  0000000                   	SEI
 8888  0000000                   
 8889  0000000                   ;HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8890  0000000                   	HWE_SET_PARAMETER1_RAM NOTE_RAM
 8891  0000000                   ;DEC MIDI_CH_RAM
 8892  0000000                   	HWE_SET_PARAMETER2_RAM MIDI_CH_RAM
 8893  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+2
 8894  0000000                   	HWE_SET_PARAMETER3_RAM VELOCITY_RAM
 8895  0000000                   
 8896  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_NOTE_ON
 8897  0000000                   
 8898  0000000                   	PLP
 8899  0000000                   	JSR CHK_HANDSHAKE_PROC
 8900  0000000                   	ENDM
 8901  0000000                   ;------------------------------------------------------------------------------
 8902  0000000                   EXT_NOTE_ON_WCF1 MACRO MIDI_CH, NOTE, VELOCITY
 8903  0000000                   	.IF (WITH_MS .EQ. 1H)
 8904  0000000                   	.IF (WITH_MS_EXT_MIDI .EQ. 1H)
 8905  0000000                   		PSF_RESPONSE_LIMIT
 8906  0000000                   		EXT_NOTE_ON 2, MIDI_CH, NOTE, VELOCITY
 8907  0000000                   
 8908  0000000                   		PSF_RESPONSE_LIMIT_RELEASE
 8909  0000000                   	.ENDIF
 8910  0000000                   	.ENDIF
 8911  0000000                   	ENDM
 8912  0000000                   ;------------------------------------------------------------------------------
 8913  0000000                   NOTE_ON MACRO MIDI_CH, NOTE, VELOCITY
 8914  0000000                   	EXT_NOTE_ON 2, MIDI_CH, NOTE, VELOCITY
 8915  0000000                   	ENDM
 8916  0000000                   ;===============================================================================
 8917  0000000                   EXT_NOTE_OFF MACRO CHANNEL_ID, MIDI_CH, NOTE
 8918  0000000                   	JSR HWE_READY_PROC
 8919  0000000                   	PHP
 8920  0000000                   	SEI
 8921  0000000                   
 8922  0000000                   ;HWE_SET_PARAMETER0 INS_ID
 8923  0000000                   	HWE_SET_PARAMETER1 NOTE
 8924  0000000                   	HWE_SET_PARAMETER2 (MIDI_CH-1)
 8925  0000000                   
 8926  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_NOTE_OFF
 8927  0000000                   
 8928  0000000                   	PLP
 8929  0000000                   	JSR CHK_HANDSHAKE_PROC
 8930  0000000                   	ENDM
 8931  0000000                   ;------------------------------------------------------------------------------
 8932  0000000                   EXT_NOTE_OFF_RAM MACRO CH_ID_RAM, MIDI_CH_RAM, NOTE_RAM
 8933  0000000                   	JSR HWE_READY_PROC
 8934  0000000                   	PHP
 8935  0000000                   	SEI
 8936  0000000                   
 8937  0000000                   ;HWE_SET_PARAMETER0_RAM INS_ID_RAM
 8938  0000000                   	HWE_SET_PARAMETER1_RAM NOTE_RAM





 8939  0000000                   	HWE_SET_PARAMETER2_RAM MIDI_CH_RAM
 8940  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+2
 8941  0000000                   	HWE_SET_COMMAND_RAM CH_ID_RAM, CMD_NOTE_OFF
 8942  0000000                   
 8943  0000000                   	PLP
 8944  0000000                   	JSR CHK_HANDSHAKE_PROC
 8945  0000000                   	ENDM
 8946  0000000                   ;------------------------------------------------------------------------------
 8947  0000000                   EXT_NOTE_OFF_WCF1 MACRO MIDI_CH,NOTE
 8948  0000000                   	.IF (WITH_MS .EQ. 1H)
 8949  0000000                   	.IF (WITH_MS_EXT_MIDI .EQ. 1H)
 8950  0000000                   		PSF_RESPONSE_LIMIT
 8951  0000000                   		EXT_NOTE_OFF 2, MIDI_CH, NOTE
 8952  0000000                   
 8953  0000000                   		PSF_RESPONSE_LIMIT_RELEASE
 8954  0000000                   	.ENDIF
 8955  0000000                   	.ENDIF
 8956  0000000                   	ENDM
 8957  0000000                   ;------------------------------------------------------------------------------
 8958  0000000                   NOTE_OFF MACRO MIDI_CH,NOTE
 8959  0000000                   	EXT_NOTE_OFF 2, MIDI_CH, NOTE
 8960  0000000                   	ENDM
 8961  0000000                   ;===============================================================================
 8962  0000000                   SET_EXT_NOTE_VOL MACRO MIDI_CH, VOLUME
 8963  0000000                   	JSR HWE_READY_PROC
 8964  0000000                   	PHP
 8965  0000000                   	SEI
 8966  0000000                   
 8967  0000000                   	HWE_SET_PARAMETER0 VOLUME
 8968  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_IMMEDIATELY
 8969  0000000                   
 8970  0000000                   	HWE_SET_COMMAND (MIDI_CH-1)+10H, CMD_EXT_NOTE_VOL
 8971  0000000                   
 8972  0000000                   	PLP
 8973  0000000                   	JSR CHK_HANDSHAKE_PROC
 8974  0000000                   	ENDM
 8975  0000000                   ;------------------------------------------------------------------------------
 8976  0000000                   SET_EXT_NOTE_VOL_RAM MACRO MIDI_CH, VOLUME_RAM
 8977  0000000                   	JSR HWE_READY_PROC
 8978  0000000                   	PHP
 8979  0000000                   	SEI
 8980  0000000                   
 8981  0000000                   	HWE_SET_PARAMETER0_RAM VOLUME_RAM
 8982  0000000                   	HWE_SET_PARAMETER1 VOL_CHANGE_IMMEDIATELY
 8983  0000000                   
 8984  0000000                   	HWE_SET_COMMAND (MIDI_CH-1)+10H, CMD_EXT_NOTE_VOL
 8985  0000000                   
 8986  0000000                   	PLP
 8987  0000000                   	JSR CHK_HANDSHAKE_PROC
 8988  0000000                   	ENDM
 8989  0000000                   ;===============================================================================
 8990  0000000                   CHK_EXT_NOTE_BUSY MACRO
 8991  0000000                   
 8992  0000000                   	JSR HWE_READY_PROC
 8993  0000000                   	PHP
 8994  0000000                   	SEI
 8995  0000000                   	HWE_SET_PARAMETER0 0		; clear var





 8996  0000000                   	HWE_SET_COMMAND 2H, CMD_CHK_EXT_NOTE_BUSY
 8997  0000000                   	PLP
 8998  0000000                   	JSR CHK_HANDSHAKE_PROC
 8999  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER 
 9000  0000000                   	ENDM
 9001  0000000                   ;------------------------------------------------------------------------------
 9002  0000000                   CHK_EXT_NOTE_BUSY_RAM MACRO NOTEBUSYNUM
 9003  0000000                   
 9004  0000000                   	JSR HWE_READY_PROC
 9005  0000000                   	PHP
 9006  0000000                   	SEI
 9007  0000000                   	HWE_SET_PARAMETER0 0		; clear var
 9008  0000000                   	HWE_SET_COMMAND 2H, CMD_CHK_EXT_NOTE_BUSY
 9009  0000000                   	PLP
 9010  0000000                   	JSR CHK_HANDSHAKE_PROC
 9011  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER 
 9012  0000000                   	STA NOTEBUSYNUM
 9013  0000000                   	ENDM
 9014  0000000                   ;===============================================================================
 9015  0000000                   SET_TEMPO MACRO DT_DEC_AMOUNT,DT_DEC_FRACTION
 9016  0000000                   	JSR HWE_READY_PROC
 9017  0000000                   	PHP
 9018  0000000                   	SEI
 9019  0000000                   
 9020  0000000                   	HWE_SET_PARAMETER0 DT_DEC_FRACTION
 9021  0000000                   	HWE_SET_PARAMETER1 DT_DEC_AMOUNT
 9022  0000000                   
 9023  0000000                   	HWE_SET_COMMAND 2, CMD_SET_TEMPO
 9024  0000000                   
 9025  0000000                   	PLP
 9026  0000000                   	JSR CHK_HANDSHAKE_PROC
 9027  0000000                   	ENDM
 9028  0000000                   ;------------------------------------------------------------------------------	
 9029  0000000                   SET_TEMPO_BY_RAM MACRO DT_DEC_AMOUNT_RAM, DT_DEC_FRACTION_RAM
 9030  0000000                   	JSR HWE_READY_PROC
 9031  0000000                   	PHP
 9032  0000000                   	SEI
 9033  0000000                   
 9034  0000000                   	HWE_SET_PARAMETER0_RAM DT_DEC_FRACTION_RAM
 9035  0000000                   	HWE_SET_PARAMETER1_RAM DT_DEC_AMOUNT_RAM
 9036  0000000                   
 9037  0000000                   	HWE_SET_COMMAND 2, CMD_SET_TEMPO
 9038  0000000                   
 9039  0000000                   	PLP
 9040  0000000                   	JSR CHK_HANDSHAKE_PROC
 9041  0000000                   	ENDM
 9042  0000000                   ;------------------------------------------------------------------------------	
 9043  0000000                   SET_TEMPO_RAM MACRO DT_DEC_AMOUNT_RAM
 9044  0000000                   ; RAM:YYYYYXXX(8-bits)  YYYYY³fraction  XXX³integer
 9045  0000000                   	JSR HWE_READY_PROC
 9046  0000000                   	PHP
 9047  0000000                   	SEI
 9048  0000000                   
 9049  0000000                   	LDA	DT_DEC_AMOUNT_RAM
 9050  0000000                   	LSR A
 9051  0000000                   	LSR A
 9052  0000000                   	LSR A





 9053  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9054  0000000                   
 9055  0000000                   	LDA	DT_DEC_AMOUNT_RAM
 9056  0000000                   	AND #7
 9057  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 9058  0000000                   
 9059  0000000                   	HWE_SET_COMMAND 2, CMD_SET_TEMPO
 9060  0000000                   
 9061  0000000                   	PLP
 9062  0000000                   	JSR CHK_HANDSHAKE_PROC
 9063  0000000                   	ENDM
 9064  0000000                   ;==============================================================================
 9065  0000000                   ; Set pitch offset
 9066  0000000                   ;==============================================================================
 9067  0000000                   SET_PITCH_OFFSET MACRO PITCH_OFFSET
 9068  0000000                   ; PITCH_OFFSET[7]: 	= 0 ¡÷ pitch shift up. = 1 ¡÷ pitch shift down
 9069  0000000                   	SET_PITCH_OFFSET_M1 PITCH_OFFSET
 9070  0000000                   	ENDM
 9071  0000000                   ;------------------------------------------------------------------------------
 9072  0000000                   SET_PITCH_OFFSET_RAM MACRO PITCH_OFFSET_RAM	
 9073  0000000                   	SET_PITCH_OFFSET_RAM_M1 PITCH_OFFSET_RAM	
 9074  0000000                   	ENDM
 9075  0000000                   ;------------------------------------------------------------------------------	
 9076  0000000                   SET_PITCH_OFFSET_M1 MACRO PITCH_OFFSET
 9077  0000000                   	JSR HWE_READY_PROC
 9078  0000000                   	PHP
 9079  0000000                   	SEI
 9080  0000000                   
 9081  0000000                   	HWE_SET_PARAMETER0 PITCH_OFFSET
 9082  0000000                   	HWE_SET_PARAMETER1 1				; Pitch offset value is MSB
 9083  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9084  0000000                   
 9085  0000000                   	PLP
 9086  0000000                   	JSR CHK_HANDSHAKE_PROC
 9087  0000000                   	ENDM
 9088  0000000                   ;------------------------------------------------------------------------------	
 9089  0000000                   SET_PITCH_OFFSET_RAM_M1 MACRO PITCH_OFFSET_RAM
 9090  0000000                   	JSR HWE_READY_PROC
 9091  0000000                   	PHP
 9092  0000000                   	SEI
 9093  0000000                   
 9094  0000000                   	HWE_SET_PARAMETER0_RAM PITCH_OFFSET_RAM
 9095  0000000                   	HWE_SET_PARAMETER1 1				; Pitch offset value is MSB
 9096  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9097  0000000                   
 9098  0000000                   	PLP
 9099  0000000                   	JSR CHK_HANDSHAKE_PROC
 9100  0000000                   	ENDM
 9101  0000000                   ;------------------------------------------------------------------------------	
 9102  0000000                   SET_PITCH_OFFSET_M2 MACRO PITCH_OFFSET
 9103  0000000                   	JSR HWE_READY_PROC
 9104  0000000                   	PHP
 9105  0000000                   	SEI
 9106  0000000                   
 9107  0000000                   	HWE_SET_PARAMETER0 PITCH_OFFSET
 9108  0000000                   	HWE_SET_PARAMETER1 0				; Pitch offset value is 2's complement
 9109  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS





 9110  0000000                   
 9111  0000000                   	PLP
 9112  0000000                   	JSR CHK_HANDSHAKE_PROC
 9113  0000000                   	ENDM
 9114  0000000                   ;------------------------------------------------------------------------------	
 9115  0000000                   SET_PITCH_OFFSET_RAM_M2 MACRO PITCH_OFFSET_RAM
 9116  0000000                   	JSR HWE_READY_PROC
 9117  0000000                   	PHP
 9118  0000000                   	SEI
 9119  0000000                   
 9120  0000000                   	HWE_SET_PARAMETER0_RAM PITCH_OFFSET_RAM
 9121  0000000                   	HWE_SET_PARAMETER1 0				; Pitch offset value is 2's complement
 9122  0000000                   	HWE_SET_COMMAND 2, CMD_SET_PITCH_MS
 9123  0000000                   
 9124  0000000                   	PLP
 9125  0000000                   	JSR CHK_HANDSHAKE_PROC
 9126  0000000                   	ENDM
 9127  0000000                   ;------------------------------------------------------------------------------	
 9128  0000000                   EN_GLOBLA_PITCH_OFFSET MACRO
 9129  0000000                   	JSR HWE_READY_PROC
 9130  0000000                   	PHP
 9131  0000000                   	SEI
 9132  0000000                   
 9133  0000000                   	HWE_SET_COMMAND 2, CMD_EN_GLOBAL_PITCH_OFFSET
 9134  0000000                   
 9135  0000000                   	PLP
 9136  0000000                   	JSR CHK_HANDSHAKE_PROC
 9137  0000000                   	ENDM
 9138  0000000                   ;------------------------------------------------------------------------------	
 9139  0000000                   DIS_GLOBLA_PITCH_OFFSET MACRO
 9140  0000000                   	JSR HWE_READY_PROC
 9141  0000000                   	PHP
 9142  0000000                   	SEI
 9143  0000000                   
 9144  0000000                   	HWE_SET_COMMAND 2, CMD_DIS_GLOBAL_PITCH_OFFSET
 9145  0000000                   
 9146  0000000                   	PLP
 9147  0000000                   	JSR CHK_HANDSHAKE_PROC
 9148  0000000                   	ENDM
 9149  0000000                   ;==============================================================================
 9150  0000000                   ; Enable/Disable vibrato
 9151  0000000                   ;==============================================================================
 9152  0000000                   HWE_CTRL_VIBRATO_RAM MACRO ENABLE_RAM
 9153  0000000                   	LDA ENABLE_RAM
 9154  0000000                   	CMP #01H
 9155  0000000                   	BNE 3
 9156  0000000                   	JMP EN_VIBRATO#
 9157  0000000                   	DIS_VIBRATO
 9158  0000000                   	JMP RETURN#
 9159  0000000                   EN_VIBRATO#:
 9160  0000000                   	EN_VIBRATO
 9161  0000000                   RETURN#:
 9162  0000000                   	ENDM
 9163  0000000                   ;------------------------------------------------------------------------------
 9164  0000000                   .IF (WITH_VIBRATO .EQ. 1)
 9165  0000000                   EN_VIBRATO MACRO
 9166  0000000                   	JSR HWE_READY_PROC





 9167  0000000                   	PHP
 9168  0000000                   	SEI
 9169  0000000                   
 9170  0000000                   	LDA #2
 9171  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9172  0000000                   	LDA #CMD_EN_VIBRATO
 9173  0000000                   	JSR SEND_CMD_PROC
 9174  0000000                   
 9175  0000000                   	PLP
 9176  0000000                   	JSR CHK_HANDSHAKE_PROC
 9177  0000000                   	ENDM
 9178  0000000                   ;------------------------------------------------------------------------------
 9179  0000000                   DIS_VIBRATO MACRO
 9180  0000000                   	JSR HWE_READY_PROC
 9181  0000000                   	PHP
 9182  0000000                   	SEI
 9183  0000000                   
 9184  0000000                   	LDA #2
 9185  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9186  0000000                   	LDA #CMD_DIS_VIBRATO
 9187  0000000                   	JSR SEND_CMD_PROC
 9188  0000000                   
 9189  0000000                   	PLP
 9190  0000000                   	JSR CHK_HANDSHAKE_PROC
 9191  0000000                   	ENDM
 9192  0000000                   .ENDIF
 9193  0000000                   ;===============================================================================	
 9194  0000000                   ; Enable/Disable Note On Modulation
 9195  0000000                   ;===============================================================================
 9196  0000000                   .IF (WITH_MS_EXT_MIDI .EQ. 1H)
 9197  0000000                   EN_NOTE_ON_MODULATION MACRO
 9198  0000000                   	JSR HWE_READY_PROC
 9199  0000000                   	PHP
 9200  0000000                   	SEI
 9201  0000000                   
 9202  0000000                   	LDA #2
 9203  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9204  0000000                   	LDA #CMD_EN_MODULATION
 9205  0000000                   	JSR SEND_CMD_PROC
 9206  0000000                   
 9207  0000000                   	PLP
 9208  0000000                   	JSR CHK_HANDSHAKE_PROC
 9209  0000000                   	ENDM
 9210  0000000                   ;------------------------------------------------------------------------------	
 9211  0000000                   DIS_NOTE_ON_MODULATION MACRO
 9212  0000000                   	JSR HWE_READY_PROC
 9213  0000000                   	PHP
 9214  0000000                   	SEI
 9215  0000000                   
 9216  0000000                   	LDA #2
 9217  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX
 9218  0000000                   	LDA #CMD_DIS_MODULATION
 9219  0000000                   	JSR SEND_CMD_PROC
 9220  0000000                   
 9221  0000000                   	PLP
 9222  0000000                   	JSR CHK_HANDSHAKE_PROC
 9223  0000000                   	ENDM





 9224  0000000                   .ENDIF
 9225  0000000                   ;===============================================================================	
 9226  0000000                   ; Note On Pitch Bend
 9227  0000000                   ;===============================================================================
 9228  0000000                   NOTE_ON_PITCH_BEND MACRO LEVEL
 9229  0000000                   	JSR HWE_READY_PROC
 9230  0000000                   	PHP
 9231  0000000                   	SEI
 9232  0000000                   
 9233  0000000                   	HWE_SET_PARAMETER0 LEVEL
 9234  0000000                   	HWE_SET_COMMAND 2, CMD_SET_NOTE_PITCH_BEND
 9235  0000000                   
 9236  0000000                   	PLP
 9237  0000000                   	JSR CHK_HANDSHAKE_PROC
 9238  0000000                   	ENDM
 9239  0000000                   ;------------------------------------------------------------------------------	
 9240  0000000                   NOTE_ON_PITCH_BEND_RAM MACRO LEVEL_RAM
 9241  0000000                   	JSR HWE_READY_PROC
 9242  0000000                   	PHP
 9243  0000000                   	SEI
 9244  0000000                   
 9245  0000000                   	HWE_SET_PARAMETER0_RAM LEVEL_RAM
 9246  0000000                   	HWE_SET_COMMAND 2, CMD_SET_NOTE_PITCH_BEND
 9247  0000000                   
 9248  0000000                   	PLP
 9249  0000000                   	JSR CHK_HANDSHAKE_PROC
 9250  0000000                   	ENDM
 9251  0000000                   ;===============================================================================
 9252  0000000                   ;;.IF (WITH_ONEKEYONENOTE .EQ. 1)
 9253  0000000                   EN_ONEKEYONENOTE MACRO CH_ID
 9254  0000000                   	JSR HWE_READY_PROC
 9255  0000000                   	PHP
 9256  0000000                   	SEI
 9257  0000000                   
 9258  0000000                   	HWE_SET_COMMAND 10H+(CH_ID-1), CMD_EN_ONEKEYONENOTE
 9259  0000000                   
 9260  0000000                   	PLP
 9261  0000000                   	JSR CHK_HANDSHAKE_PROC
 9262  0000000                   	ENDM
 9263  0000000                   ;------------------------------------------------------------------------------
 9264  0000000                   EN_ONEKEYONENOTE_RAM MACRO CH_ID_RAM
 9265  0000000                   	JSR HWE_READY_PROC
 9266  0000000                   	PHP
 9267  0000000                   	SEI
 9268  0000000                   
 9269  0000000                   	CLC
 9270  0000000                   	LDA CH_ID_RAM
 9271  0000000                   	ADC #(10H-1)
 9272  0000000                   	STA HWE_CMD_BA+CMD_CH_IDX 
 9273  0000000                   	LDA #CMD_EN_ONEKEYONENOTE
 9274  0000000                   	JSR SEND_CMD_PROC
 9275  0000000                   
 9276  0000000                   	PLP
 9277  0000000                   	JSR CHK_HANDSHAKE_PROC
 9278  0000000                   
 9279  0000000                   	ENDM
 9280  0000000                   ;------------------------------------------------------------------------------





 9281  0000000                   DIS_ONEKEYONENOTE MACRO
 9282  0000000                   	JSR HWE_READY_PROC
 9283  0000000                   	PHP
 9284  0000000                   	SEI
 9285  0000000                   
 9286  0000000                   	HWE_SET_COMMAND 2, CMD_DIS_ONEKEYONENOTE
 9287  0000000                   
 9288  0000000                   	PLP
 9289  0000000                   	JSR CHK_HANDSHAKE_PROC
 9290  0000000                   	ENDM
 9291  0000000                   ;------------------------------------------------------------------------------
 9292  0000000                   ONEKEYONENOTE_NEXT MACRO
 9293  0000000                   	JSR HWE_READY_PROC
 9294  0000000                   	PHP
 9295  0000000                   	SEI
 9296  0000000                   
 9297  0000000                   	HWE_SET_COMMAND 2, CMD_ONEKEYONENOTE_NEXT
 9298  0000000                   
 9299  0000000                   	PLP
 9300  0000000                   	JSR CHK_HANDSHAKE_PROC
 9301  0000000                   	ENDM
 9302  0000000                   ;;.ENDIF
 9303  0000000                   ;===============================================================================
 9304  0000000                   SET_START MACRO 
 9305  0000000                   
 9306  0000000                   	ENDM
 9307  0000000                   ;----------------------------------------------------------------
 9308  0000000                   GOTO_START MACRO 
 9309  0000000                   
 9310  0000000                   	ENDM
 9311  0000000                   ;===============================================================================
 9312  0000000                   .IF (WITH_SP_SKIP .EQ. 1)	
 9313  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL MACRO CHANNEL_ID,INDEX
 9314  0000000                   
 9315  0000000                   ; Index 0 is not currently supported
 9316  0000000                   	LDA #INDEX
 9317  0000000                   	BNE 3
 9318  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL#
 9319  0000000                   
 9320  0000000                   	PSF_RESPONSE_LIMIT
 9321  0000000                   	JSR HWE_READY_PROC
 9322  0000000                   	PHP
 9323  0000000                   	SEI
 9324  0000000                   
 9325  0000000                   	HWE_SET_PARAMETER0 (INDEX-1)
 9326  0000000                   	HWE_SET_PARAMETER1 0
 9327  0000000                   
 9328  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9329  0000000                   
 9330  0000000                   	PLP
 9331  0000000                   	JSR CHK_HANDSHAKE_PROC
 9332  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9333  0000000                   
 9334  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL#:
 9335  0000000                   	ENDM
 9336  0000000                   ;----------------------------------------------------------------
 9337  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_RAM MACRO CHANNEL_ID, INDEX_RAM





 9338  0000000                   
 9339  0000000                   ; Index 0 is not currently supported
 9340  0000000                   	LDA INDEX_RAM
 9341  0000000                   	BNE 3
 9342  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL_RAM#
 9343  0000000                   
 9344  0000000                   	PSF_RESPONSE_LIMIT
 9345  0000000                   	JSR HWE_READY_PROC
 9346  0000000                   	PHP
 9347  0000000                   	SEI
 9348  0000000                   
 9349  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9350  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+0
 9351  0000000                   	HWE_SET_PARAMETER1 0
 9352  0000000                   
 9353  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9354  0000000                   
 9355  0000000                   	PLP
 9356  0000000                   	JSR CHK_HANDSHAKE_PROC
 9357  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9358  0000000                   
 9359  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL_RAM#:
 9360  0000000                   	ENDM
 9361  0000000                   ;----------------------------------------------------------------
 9362  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX MACRO CHANNEL_ID,INDEX
 9363  0000000                   
 9364  0000000                   ; Index 0 is not currently supported
 9365  0000000                   	LDA #.LOW.INDEX
 9366  0000000                   	BEQ 3
 9367  0000000                   	JMP SET_PLAY_SEGMENT_SP_CHANNEL_EX_CONT#
 9368  0000000                   	LDA #.HIGH.INDEX
 9369  0000000                   	BNE 3
 9370  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL_EX#
 9371  0000000                   
 9372  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX_CONT#:
 9373  0000000                   
 9374  0000000                   	PSF_RESPONSE_LIMIT
 9375  0000000                   	JSR HWE_READY_PROC
 9376  0000000                   	PHP
 9377  0000000                   	SEI
 9378  0000000                   
 9379  0000000                   	HWE_SET_PARAMETER0 .LOW.(INDEX-1)
 9380  0000000                   	HWE_SET_PARAMETER1 .HIGH.(INDEX-1)
 9381  0000000                   
 9382  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9383  0000000                   
 9384  0000000                   	PLP
 9385  0000000                   	JSR CHK_HANDSHAKE_PROC
 9386  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9387  0000000                   
 9388  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL_EX#:
 9389  0000000                   	ENDM
 9390  0000000                   ;----------------------------------------------------------------
 9391  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM MACRO CHANNEL_ID, INDEX_RAM
 9392  0000000                   
 9393  0000000                   ; Index 0 is not currently supported
 9394  0000000                   	LDA INDEX_RAM





 9395  0000000                   	BEQ 3
 9396  0000000                   	JMP SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM_CONT#
 9397  0000000                   	LDA INDEX_RAM+1
 9398  0000000                   	BNE 3
 9399  0000000                   	JMP END_SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM#
 9400  0000000                   SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM_CONT#:
 9401  0000000                   
 9402  0000000                   	PSF_RESPONSE_LIMIT
 9403  0000000                   	JSR HWE_READY_PROC
 9404  0000000                   	PHP
 9405  0000000                   	SEI
 9406  0000000                   
 9407  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9408  0000000                   	HWE_SET_PARAMETER1_RAM INDEX_RAM+1
 9409  0000000                   
 9410  0000000                   	SEC
 9411  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER
 9412  0000000                   	SBC #1
 9413  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9414  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER+1
 9415  0000000                   	SBC #0
 9416  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 9417  0000000                   
 9418  0000000                   	HWE_SET_COMMAND CHANNEL_ID-1, CMD_SET_PLAY_SEGMENT
 9419  0000000                   
 9420  0000000                   	PLP
 9421  0000000                   	JSR CHK_HANDSHAKE_PROC
 9422  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9423  0000000                   
 9424  0000000                   END_SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM#:
 9425  0000000                   	ENDM
 9426  0000000                   ;----------------------------------------------------------------
 9427  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL MACRO CHANNEL_ID,INDEX
 9428  0000000                   
 9429  0000000                   ; Index 0 is not currently supported
 9430  0000000                   	LDA #INDEX
 9431  0000000                   	BNE 3
 9432  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL#
 9433  0000000                   
 9434  0000000                   	PSF_RESPONSE_LIMIT
 9435  0000000                   	JSR HWE_READY_PROC
 9436  0000000                   	PHP
 9437  0000000                   	SEI
 9438  0000000                   
 9439  0000000                   	HWE_SET_PARAMETER0 (INDEX-1)
 9440  0000000                   	HWE_SET_PARAMETER1 0
 9441  0000000                   
 9442  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9443  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9444  0000000                   .ENDIF
 9445  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9446  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9447  0000000                   .ENDIF
 9448  0000000                   .IF	(CHIPSERIES = 'N589D')
 9449  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9450  0000000                   .ENDIF
 9451  0000000                   	PLP





 9452  0000000                   	JSR CHK_HANDSHAKE_PROC
 9453  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9454  0000000                   
 9455  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL#:
 9456  0000000                   	ENDM
 9457  0000000                   ;----------------------------------------------------------------
 9458  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_RAM MACRO CHANNEL_ID, INDEX_RAM
 9459  0000000                   
 9460  0000000                   ; Index 0 is not currently supported
 9461  0000000                   	LDA INDEX_RAM
 9462  0000000                   	BNE 3
 9463  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL_RAM#
 9464  0000000                   
 9465  0000000                   	PSF_RESPONSE_LIMIT
 9466  0000000                   	JSR HWE_READY_PROC
 9467  0000000                   	PHP
 9468  0000000                   	SEI
 9469  0000000                   
 9470  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9471  0000000                   	DEC HWE_CMD_BA+CMD_PARAMETER+0
 9472  0000000                   	HWE_SET_PARAMETER1 0
 9473  0000000                   
 9474  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9475  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9476  0000000                   .ENDIF
 9477  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9478  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9479  0000000                   .ENDIF
 9480  0000000                   .IF	(CHIPSERIES = 'N589D')
 9481  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9482  0000000                   .ENDIF
 9483  0000000                   	PLP
 9484  0000000                   	JSR CHK_HANDSHAKE_PROC
 9485  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9486  0000000                   
 9487  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL_RAM#:
 9488  0000000                   	ENDM
 9489  0000000                   ;----------------------------------------------------------------
 9490  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX MACRO CHANNEL_ID,INDEX
 9491  0000000                   
 9492  0000000                   ; Index 0 is not currently supported
 9493  0000000                   	LDA #.LOW.INDEX
 9494  0000000                   	BEQ 3
 9495  0000000                   	JMP SET_PLAY_SEGMENT_EVO_CHANNEL_EX_CONT#
 9496  0000000                   	LDA #.HIGH.INDEX
 9497  0000000                   	BNE 3
 9498  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX#
 9499  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX_CONT#:
 9500  0000000                   
 9501  0000000                   	PSF_RESPONSE_LIMIT
 9502  0000000                   	JSR HWE_READY_PROC
 9503  0000000                   	PHP
 9504  0000000                   	SEI
 9505  0000000                   
 9506  0000000                   	HWE_SET_PARAMETER0 .LOW.(INDEX-1)
 9507  0000000                   	HWE_SET_PARAMETER1 .HIGH.(INDEX-1)
 9508  0000000                   





 9509  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9510  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9511  0000000                   .ENDIF
 9512  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9513  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9514  0000000                   .ENDIF
 9515  0000000                   .IF	(CHIPSERIES = 'N589D')
 9516  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9517  0000000                   .ENDIF
 9518  0000000                   	PLP
 9519  0000000                   	JSR CHK_HANDSHAKE_PROC
 9520  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9521  0000000                   
 9522  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX#:
 9523  0000000                   	ENDM
 9524  0000000                   ;----------------------------------------------------------------
 9525  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM MACRO CHANNEL_ID, INDEX_RAM
 9526  0000000                   
 9527  0000000                   ; Index 0 is not currently supported
 9528  0000000                   	LDA INDEX_RAM
 9529  0000000                   	BEQ 3
 9530  0000000                   	JMP SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM_CONT#
 9531  0000000                   	LDA INDEX_RAM+1
 9532  0000000                   	BNE 3
 9533  0000000                   	JMP END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM#
 9534  0000000                   SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM_CONT#:
 9535  0000000                   
 9536  0000000                   	PSF_RESPONSE_LIMIT
 9537  0000000                   	JSR HWE_READY_PROC
 9538  0000000                   	PHP
 9539  0000000                   	SEI
 9540  0000000                   
 9541  0000000                   	HWE_SET_PARAMETER0_RAM INDEX_RAM
 9542  0000000                   	HWE_SET_PARAMETER1_RAM INDEX_RAM+1
 9543  0000000                   
 9544  0000000                   	SEC
 9545  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER
 9546  0000000                   	SBC #1
 9547  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9548  0000000                   	LDA HWE_CMD_BA+CMD_PARAMETER+1
 9549  0000000                   	SBC #0
 9550  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER+1
 9551  0000000                   
 9552  0000000                   .IF	(CHIPSERIES = 'N589A')	
 9553  0000000                   	HWE_SET_COMMAND CHANNEL_ID+2, CMD_SET_PLAY_SEGMENT
 9554  0000000                   .ENDIF
 9555  0000000                   .IF	(CHIPSERIES = 'N589B').OR.(CHIPSERIES = 'N589C')
 9556  0000000                   	HWE_SET_COMMAND CHANNEL_ID+1, CMD_SET_PLAY_SEGMENT
 9557  0000000                   .ENDIF
 9558  0000000                   .IF	(CHIPSERIES = 'N589D')
 9559  0000000                   	HWE_SET_COMMAND CHANNEL_ID, CMD_SET_PLAY_SEGMENT
 9560  0000000                   .ENDIF
 9561  0000000                   	PLP
 9562  0000000                   	JSR CHK_HANDSHAKE_PROC
 9563  0000000                   	PSF_RESPONSE_LIMIT_RELEASE
 9564  0000000                   
 9565  0000000                   END_SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM#:





 9566  0000000                   	ENDM
 9567  0000000                   ;----------------------------------------------------------------
 9568  0000000                   SET_PLAY_SEGMENT_CH1 MACRO INDEX
 9569  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL 1, INDEX
 9570  0000000                   	ENDM
 9571  0000000                   ;----------------------------------------------------------------	
 9572  0000000                   SET_PLAY_SEGMENT_CH2 MACRO INDEX
 9573  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL 2, INDEX
 9574  0000000                   	ENDM
 9575  0000000                   ;----------------------------------------------------------------	
 9576  0000000                   SET_PLAY_SEGMENT_EVO1 MACRO INDEX
 9577  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL 1, INDEX
 9578  0000000                   	ENDM
 9579  0000000                   ;----------------------------------------------------------------	
 9580  0000000                   SET_PLAY_SEGMENT_EVO2 MACRO INDEX
 9581  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL 2, INDEX
 9582  0000000                   	ENDM
 9583  0000000                   ;----------------------------------------------------------------	
 9584  0000000                   SET_PLAY_SEGMENT_CH1_RAM MACRO INDEX_RAM
 9585  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_RAM 1, INDEX_RAM
 9586  0000000                   	ENDM
 9587  0000000                   ;----------------------------------------------------------------	
 9588  0000000                   SET_PLAY_SEGMENT_CH2_RAM MACRO INDEX_RAM
 9589  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_RAM 2, INDEX_RAM
 9590  0000000                   	ENDM
 9591  0000000                   ;----------------------------------------------------------------	
 9592  0000000                   SET_PLAY_SEGMENT_EVO1_RAM MACRO INDEX_RAM
 9593  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_RAM 1, INDEX_RAM
 9594  0000000                   	ENDM
 9595  0000000                   ;----------------------------------------------------------------	
 9596  0000000                   SET_PLAY_SEGMENT_EVO2_RAM MACRO INDEX_RAM
 9597  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_RAM 2, INDEX_RAM
 9598  0000000                   	ENDM
 9599  0000000                   ;----------------------------------------------------------------
 9600  0000000                   SET_PLAY_SEGMENT_CH1_EX MACRO INDEX
 9601  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX 1, INDEX
 9602  0000000                   	ENDM
 9603  0000000                   ;----------------------------------------------------------------	
 9604  0000000                   SET_PLAY_SEGMENT_CH2_EX MACRO INDEX
 9605  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX 2, INDEX
 9606  0000000                   	ENDM
 9607  0000000                   ;----------------------------------------------------------------	
 9608  0000000                   SET_PLAY_SEGMENT_EVO1_EX MACRO INDEX
 9609  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX 1, INDEX
 9610  0000000                   	ENDM
 9611  0000000                   ;----------------------------------------------------------------	
 9612  0000000                   SET_PLAY_SEGMENT_EVO2_EX MACRO INDEX
 9613  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX 2, INDEX
 9614  0000000                   	ENDM
 9615  0000000                   ;----------------------------------------------------------------	
 9616  0000000                   SET_PLAY_SEGMENT_CH1_EX_RAM MACRO INDEX_RAM
 9617  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM 1, INDEX_RAM
 9618  0000000                   	ENDM
 9619  0000000                   ;----------------------------------------------------------------	
 9620  0000000                   SET_PLAY_SEGMENT_CH2_EX_RAM MACRO INDEX_RAM
 9621  0000000                   	SET_PLAY_SEGMENT_SP_CHANNEL_EX_RAM 2, INDEX_RAM
 9622  0000000                   	ENDM





 9623  0000000                   ;----------------------------------------------------------------	
 9624  0000000                   SET_PLAY_SEGMENT_EVO1_EX_RAM MACRO INDEX_RAM
 9625  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM 1, INDEX_RAM
 9626  0000000                   	ENDM
 9627  0000000                   ;----------------------------------------------------------------	
 9628  0000000                   SET_PLAY_SEGMENT_EVO2_EX_RAM MACRO INDEX_RAM
 9629  0000000                   	SET_PLAY_SEGMENT_EVO_CHANNEL_EX_RAM 2, INDEX_RAM
 9630  0000000                   	ENDM
 9631  0000000                   ;----------------------------------------------------------------
 9632  0000000                   .ENDIF
 9633  0000000                   ;===============================================================================
 9634  0000000                   COLOR_FLY_INIT MACRO
 9635  0000000                   ;COLOR_FLY_EN MACRO
 9636  0000000                   	JSR HWE_READY_PROC
 9637  0000000                   	PHP
 9638  0000000                   	SEI
 9639  0000000                   
 9640  0000000                   	HWE_SET_COMMAND 0, CMD_EN_COLORFLY
 9641  0000000                   
 9642  0000000                   	PLP
 9643  0000000                   	JSR CHK_HANDSHAKE_PROC
 9644  0000000                   
 9645  0000000                   	ENDM
 9646  0000000                   ;----------------------------------------------------------------		
 9647  0000000                   COLOR_FLY_STOP MACRO
 9648  0000000                   ;COLOR_FLY_DIS MACRO	
 9649  0000000                   	JSR HWE_READY_PROC
 9650  0000000                   	PHP
 9651  0000000                   	SEI
 9652  0000000                   
 9653  0000000                   	HWE_SET_COMMAND 0, CMD_DIS_COLORFLY
 9654  0000000                   
 9655  0000000                   	PLP
 9656  0000000                   	JSR CHK_HANDSHAKE_PROC
 9657  0000000                   
 9658  0000000                   	ENDM
 9659  0000000                   ;----------------------------------------------------------------	
 9660  0000000                   COLOR_FLY_TARGET MACRO GROUP, COLOR_INDEX
 9661  0000000                   	JSR HWE_READY_PROC
 9662  0000000                   	PHP
 9663  0000000                   	SEI
 9664  0000000                   	HWE_SET_PARAMETER0 GROUP-1
 9665  0000000                   	HWE_SET_PARAMETER1 COLOR_INDEX
 9666  0000000                   
 9667  0000000                   	HWE_SET_COMMAND 10H, CMD_SET_COLORFLY_PARAM
 9668  0000000                   	PLP
 9669  0000000                   	JSR CHK_HANDSHAKE_PROC
 9670  0000000                   
 9671  0000000                   	ENDM
 9672  0000000                   ;----------------------------------------------------------------	
 9673  0000000                   COLOR_FLY_TARGET_RAM MACRO GROUP_RAM, COLOR_INDEX_RAM
 9674  0000000                   	JSR HWE_READY_PROC
 9675  0000000                   	PHP
 9676  0000000                   	SEI
 9677  0000000                   ;HWE_SET_PARAMETER0_RAM GROUP_RAM
 9678  0000000                   	LDA GROUP_RAM
 9679  0000000                   	DEC A





 9680  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9681  0000000                   	HWE_SET_PARAMETER1_RAM COLOR_INDEX_RAM
 9682  0000000                   
 9683  0000000                   	HWE_SET_COMMAND 10H, CMD_SET_COLORFLY_PARAM
 9684  0000000                   	PLP
 9685  0000000                   	JSR CHK_HANDSHAKE_PROC
 9686  0000000                   
 9687  0000000                   	ENDM
 9688  0000000                   ;----------------------------------------------------------------	
 9689  0000000                   COLOR_FLY_SPEED MACRO GROUP, MORPHING_TIME
 9690  0000000                   	JSR HWE_READY_PROC
 9691  0000000                   	PHP
 9692  0000000                   	SEI
 9693  0000000                   	HWE_SET_PARAMETER0 GROUP-1
 9694  0000000                   	HWE_SET_PARAMETER1 .LOW.MORPHING_TIME
 9695  0000000                   	HWE_SET_PARAMETER2 .HIGH.MORPHING_TIME
 9696  0000000                   
 9697  0000000                   	HWE_SET_COMMAND 20H, CMD_SET_COLORFLY_PARAM
 9698  0000000                   	PLP
 9699  0000000                   	JSR CHK_HANDSHAKE_PROC
 9700  0000000                   	ENDM
 9701  0000000                   ;----------------------------------------------------------------	
 9702  0000000                   COLOR_FLY_SPEED_RAM MACRO GROUP_RAM, MORPHING_TIME_RAM
 9703  0000000                   	JSR HWE_READY_PROC
 9704  0000000                   	PHP
 9705  0000000                   	SEI
 9706  0000000                   ;HWE_SET_PARAMETER0_RAM GROUP_RAM
 9707  0000000                   	LDA GROUP_RAM
 9708  0000000                   	DEC A
 9709  0000000                   	STA HWE_CMD_BA+CMD_PARAMETER
 9710  0000000                   	HWE_SET_PARAMETER1_RAM MORPHING_TIME_RAM
 9711  0000000                   	HWE_SET_PARAMETER2_RAM MORPHING_TIME_RAM+1
 9712  0000000                   
 9713  0000000                   	HWE_SET_COMMAND 20H, CMD_SET_COLORFLY_PARAM
 9714  0000000                   	PLP
 9715  0000000                   	JSR CHK_HANDSHAKE_PROC
 9716  0000000                   	ENDM
 9717  0000000                   ;----------------------------------------------------------------	
 9718  0000000                   COLORFLY_ACTION MACRO
 9719  0000000                   	LDA #04H
 9720  0000000                   	TSB !INTRF
 9721  0000000                   	ENDM
 9722  0000000                   ;===============================================================================
 9723  0000000                   EN_SPEECH_CHANGER MACRO
 9724  0000000                   	JSR HWE_READY_PROC
 9725  0000000                   	LDA #04H
 9726  0000000                   	TSB HWE_CTRL_BA
 9727  0000000                   	JSR HWE_TABLE_ALT1_BA_PROC
 9728  0000000                   	ENDM
 9729  0000000                   ;----------------------------------------------------------------
 9730  0000000                   DIS_SPEECH_CHANGER MACRO
 9731  0000000                   	JSR HWE_READY_PROC
 9732  0000000                   	LDA #04H
 9733  0000000                   	TRB HWE_CTRL_BA
 9734  0000000                   	JSR HWE_TABLE_BA_PROC
 9735  0000000                   	ENDM
 9736  0000000                   ;----------------------------------------------------------------





 9737  0000000                   CH1_CHANGER_SPEED MACRO RATIO
 9738  0000000                   	JSR HWE_READY_PROC
 9739  0000000                   	PHP
 9740  0000000                   	SEI
 9741  0000000                   	HWE_SET_PARAMETER0 .LOW.RATIO
 9742  0000000                   	HWE_SET_PARAMETER1 .HIGH.RATIO
 9743  0000000                   
 9744  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_SPEED_SP
 9745  0000000                   	PLP
 9746  0000000                   	JSR CHK_HANDSHAKE_PROC
 9747  0000000                   
 9748  0000000                   	ENDM
 9749  0000000                   ;----------------------------------------------------------------
 9750  0000000                   CH1_CHANGER_SPEED_RAM MACRO RATIO_RAM
 9751  0000000                   	JSR HWE_READY_PROC
 9752  0000000                   	PHP
 9753  0000000                   	SEI
 9754  0000000                   	HWE_SET_PARAMETER0_RAM RATIO_RAM
 9755  0000000                   	HWE_SET_PARAMETER1_RAM RATIO_RAM+1
 9756  0000000                   
 9757  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_SPEED_SP
 9758  0000000                   	PLP
 9759  0000000                   	JSR CHK_HANDSHAKE_PROC
 9760  0000000                   
 9761  0000000                   	ENDM
 9762  0000000                   ;----------------------------------------------------------------
 9763  0000000                   CH1_CHANGER_PITCH MACRO LEVEL
 9764  0000000                   	JSR HWE_READY_PROC
 9765  0000000                   	PHP
 9766  0000000                   	SEI
 9767  0000000                   	HWE_SET_PARAMETER0 LEVEL
 9768  0000000                   
 9769  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_PITCH_SP
 9770  0000000                   	PLP
 9771  0000000                   	JSR CHK_HANDSHAKE_PROC
 9772  0000000                   
 9773  0000000                   	ENDM
 9774  0000000                   ;----------------------------------------------------------------
 9775  0000000                   CH1_CHANGER_PITCH_RAM MACRO LEVEL_RAM
 9776  0000000                   	JSR HWE_READY_PROC
 9777  0000000                   	PHP
 9778  0000000                   	SEI
 9779  0000000                   	HWE_SET_PARAMETER0_RAM LEVEL_RAM
 9780  0000000                   
 9781  0000000                   	HWE_SET_COMMAND 00H, CMD_SET_PITCH_SP
 9782  0000000                   	PLP
 9783  0000000                   	JSR CHK_HANDSHAKE_PROC
 9784  0000000                   
 9785  0000000                   	ENDM
 9786  0000000                   
 9787  0000000                   
 9788  0000000                   
 9789  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\FLASH_MACROS.INI.APP"
 9790  0000000                   ;***********************************************************************
 9791  0000000                   ;* @file		FLASH_MACROS.ini
 9792  0000000                   ;* @versioin	2.1
 9793  0000000                   ;* @date		2020-01-20





 9794  0000000                   ;* brief 		The file provides all the ISP functions
 9795  0000000                   ;***********************************************************************
 9796  0000000                   
 9797  0000000                   	CHIP	65C02
 9798  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\ISP_MACROS.INI.APP"
 9799  0000000                   ;========================================================
 9800  0000000                   ;-----ISP------------------------------------------------
 9801  0000000                   IS_ILLEGAL_DATA_FORMAT MACRO SADDR
 9802  0000000                   	LDX #0
 9803  0000000                   ; mask sure the address is 4 bytes alignment.
 9804  0000000                   	LDA #.LOW.SADDR
 9805  0000000                   	AND #03H
 9806  0000000                   	BEQ IS_ILLEGAL_DATA_END#
 9807  0000000                   
 9808  0000000                   ERROR_DATA_FORMAT#:
 9809  0000000                   	LDX #E1H
 9810  0000000                   IS_ILLEGAL_DATA_END#:
 9811  0000000                   	TXA
 9812  0000000                   	ENDM
 9813  0000000                   ;----------------------------------------------------
 9814  0000000                   IS_ILLEGAL_PAGE_FORMAT MACRO SADDR
 9815  0000000                   	LDX #0
 9816  0000000                   ; mask sure the address is 512 bytes alignment.
 9817  0000000                   	LDA #.LOW.SADDR
 9818  0000000                   	AND #FFH
 9819  0000000                   	BNE ERROR_PAGE_FORMAT#
 9820  0000000                   	LDA #.HIGH.SADDR
 9821  0000000                   	AND #01H
 9822  0000000                   	BNE ERROR_PAGE_FORMAT#
 9823  0000000                   	JMP IS_ILLEGAL_PAGE_END#
 9824  0000000                   
 9825  0000000                   ERROR_PAGE_FORMAT#:
 9826  0000000                   	LDX #E2H
 9827  0000000                   IS_ILLEGAL_PAGE_END#:
 9828  0000000                   	TXA
 9829  0000000                   	ENDM
 9830  0000000                   ;----------------------------------------------------
 9831  0000000                   IS_ILLEGAL_DATA MACRO SADDR
 9832  0000000                   ; mask sure the address is 4 bytes alignment.
 9833  0000000                   	LDA #.LOW.SADDR
 9834  0000000                   	AND #03H
 9835  0000000                   	BEQ IS_ILLEGAL_DATA_END#
 9836  0000000                   	LDA #1
 9837  0000000                   IS_ILLEGAL_DATA_END#:
 9838  0000000                   	ENDM
 9839  0000000                   
 9840  0000000                   ;----------------------------------------------------
 9841  0000000                   IS_ILLEGAL_DATA_DP MACRO PADDR3
 9842  0000000                   ; mask sure the address is 4 bytes alignment.
 9843  0000000                   	LDA PADDR3
 9844  0000000                   	AND #03H
 9845  0000000                   	BEQ IS_ILLEGAL_DATA_END#
 9846  0000000                   	LDA #1
 9847  0000000                   IS_ILLEGAL_DATA_END#:
 9848  0000000                   	ENDM
 9849  0000000                   
 9850  0000000                   ;--------------------------------------------------------





 9851  0000000                   ; @beief	ISP unlock
 9852  0000000                   ;--------------------------------------------------------
 9853  0000000                   ISP_UNLOCK MACRO
 9854  0000000                   .IFDEF DATA_FLASH_SIZE_512
 9855  0000000                   	ISP_UNLOCK1
 9856  0000000                   .ELSE
 9857  0000000                   	.IFDEF DATA_FLASH_SIZE_1024
 9858  0000000                   		ISP_UNLOCK1
 9859  0000000                   	.ELSE
 9860  0000000                   		ISP_UNLOCK2
 9861  0000000                   	.ENDIF
 9862  0000000                   .ENDIF
 9863  0000000                   	ENDM
 9864  0000000                   
 9865  0000000                   ;----------------------------------------------------
 9866  0000000                   ISP_UNLOCK1 MACRO
 9867  0000000                   	LDA #59H
 9868  0000000                   	STA !ISPULK1
 9869  0000000                   	LDA #16H
 9870  0000000                   	STA !ISPULK1
 9871  0000000                   	LDA #88H
 9872  0000000                   	STA !ISPULK1
 9873  0000000                   	ENDM
 9874  0000000                   ;----------------------------------------------------
 9875  0000000                   ISP_UNLOCK2 MACRO
 9876  0000000                   	LDA #A6H
 9877  0000000                   	STA !ISPULK
 9878  0000000                   	LDA #E9H
 9879  0000000                   	STA !ISPULK
 9880  0000000                   	LDA #77H
 9881  0000000                   	STA !ISPULK
 9882  0000000                   	ENDM
 9883  0000000                   ;--------------------------------------------------------
 9884  0000000                   ; @beief	ISP lock
 9885  0000000                   ;--------------------------------------------------------
 9886  0000000                   ISP_LOCK MACRO
 9887  0000000                   .IFDEF DATA_FLASH_SIZE_512
 9888  0000000                   	ISP_LOCK1
 9889  0000000                   .ELSE
 9890  0000000                   	.IFDEF DATA_FLASH_SIZE_1024
 9891  0000000                   		ISP_LOCK1
 9892  0000000                   	.ELSE
 9893  0000000                   		ISP_LOCK2
 9894  0000000                   	.ENDIF
 9895  0000000                   .ENDIF
 9896  0000000                   	ENDM
 9897  0000000                   ;----------------------------------------------------
 9898  0000000                   ISP_LOCK1 MACRO
 9899  0000000                   	STZ !ISPULK1
 9900  0000000                   	ENDM
 9901  0000000                   ;----------------------------------------------------
 9902  0000000                   ISP_LOCK2 MACRO
 9903  0000000                   	STZ !ISPULK
 9904  0000000                   	ENDM	
 9905  0000000                   ;--------------------------------------------------------
 9906  0000000                   ; @brief	Set address
 9907  0000000                   ;--------------------------------------------------------





 9908  0000000                   ISP_SET_ADDR MACRO SENTENCE_ADDR
 9909  0000000                   	LDA	#.LOW.SENTENCE_ADDR
 9910  0000000                   	STA ISPADR0
 9911  0000000                   	LDA	#.HIGH.SENTENCE_ADDR
 9912  0000000                   	STA ISPADR1
 9913  0000000                   	LDA	#.HIGH8.SENTENCE_ADDR
 9914  0000000                   	STA ISPADR2
 9915  0000000                   	ENDM
 9916  0000000                   ;----------------------------------------------------	
 9917  0000000                   ISP_SET_ADDR_DP MACRO PDATA3
 9918  0000000                   	LDA PDATA3
 9919  0000000                   	STA ISPADR0
 9920  0000000                   	LDA PDATA3+1
 9921  0000000                   	STA ISPADR1
 9922  0000000                   	LDA PDATA3+2
 9923  0000000                   	STA ISPADR2
 9924  0000000                   	ENDM
 9925  0000000                   ;----------------------------------------------------
 9926  0000000                   ISP_SET_ADDR_DP_ILI MACRO PDATA
 9927  0000000                   	LDY #0
 9928  0000000                   	LDA (PDATA), Y
 9929  0000000                   	STA ISPADR0
 9930  0000000                   	LDY #1
 9931  0000000                   	LDA (PDATA), Y
 9932  0000000                   	STA ISPADR1
 9933  0000000                   	LDY #2
 9934  0000000                   	LDA (PDATA), Y
 9935  0000000                   	STA ISPADR2
 9936  0000000                   	ENDM	
 9937  0000000                   ;--------------------------------------------------------
 9938  0000000                   ; @brief	Set data
 9939  0000000                   ;--------------------------------------------------------	
 9940  0000000                   ISP_SET_DATA MACRO SENTENCE_DATA
 9941  0000000                   	LDA	#.LOW.SENTENCE_DATA
 9942  0000000                   	STA ISPDAT0
 9943  0000000                   	LDA	#.HIGH.SENTENCE_DATA
 9944  0000000                   	STA ISPDAT1
 9945  0000000                   	LDA	#.HIGH8.SENTENCE_DATA
 9946  0000000                   	STA ISPDAT2
 9947  0000000                   	LDA	#.SEGHIGH.SENTENCE_DATA
 9948  0000000                   	STA ISPDAT3
 9949  0000000                   	ENDM
 9950  0000000                   
 9951  0000000                   ;--------------------------------------------------
 9952  0000000                   ISP_SET_DATA_DP MACRO PDATA4
 9953  0000000                   	LDA PDATA4
 9954  0000000                   	STA ISPDAT0
 9955  0000000                   	LDA PDATA4+1
 9956  0000000                   	STA ISPDAT1
 9957  0000000                   	LDA PDATA4+2
 9958  0000000                   	STA ISPDAT2
 9959  0000000                   	LDA PDATA4+3
 9960  0000000                   	STA ISPDAT3
 9961  0000000                   	ENDM
 9962  0000000                   
 9963  0000000                   ;----------------------------------------------------	
 9964  0000000                   ISP_SET_DATA_DP_ILI MACRO PDATA





 9965  0000000                   	LDY #0
 9966  0000000                   	LDA (PDATA), Y
 9967  0000000                   	STA ISPDAT0
 9968  0000000                   	LDY #1
 9969  0000000                   	LDA (PDATA), Y
 9970  0000000                   	STA ISPDAT1
 9971  0000000                   	LDY #2
 9972  0000000                   	LDA (PDATA), Y
 9973  0000000                   	STA ISPDAT2
 9974  0000000                   	LDY #3
 9975  0000000                   	LDA (PDATA), Y
 9976  0000000                   	STA ISPDAT3
 9977  0000000                   	ENDM
 9978  0000000                   ;----------------------------------------------------	
 9979  0000000                   ISP_SET_DATA_DP_ILI_X MACRO PDATA, NUM
 9980  0000000                   
 9981  0000000                   	LDY #0
 9982  0000000                   ISP_SET_DATA_DP_ILI_X_LOOP#:
 9983  0000000                   	LDA (PDATA), Y
 9984  0000000                   	STA ISPDAT0, Y
 9985  0000000                   
 9986  0000000                   	INY
 9987  0000000                   	CPY NUM
 9988  0000000                   	BEQ ISP_SET_DATA_DP_ILI_X_LOOP_END#
 9989  0000000                   
 9990  0000000                   	JMP ISP_SET_DATA_DP_ILI_X_LOOP#
 9991  0000000                   
 9992  0000000                   ISP_SET_DATA_DP_ILI_X_LOOP_END#:
 9993  0000000                   
 9994  0000000                   	ENDM	
 9995  0000000                   ;--------------------------------------------------------
 9996  0000000                   ; @brief	Get data
 9997  0000000                   ;--------------------------------------------------------	
 9998  0000000                   ISP_GET_DATA_DP MACRO PDATA4
 9999  0000000                   	LDA ISPDAT0
10000  0000000                   	STA PDATA4
10001  0000000                   	LDA ISPDAT1
10002  0000000                   	STA PDATA4+1
10003  0000000                   	LDA ISPDAT2
10004  0000000                   	STA PDATA4+2
10005  0000000                   	LDA ISPDAT3
10006  0000000                   	STA PDATA4+3
10007  0000000                   
10008  0000000                   	ENDM
10009  0000000                   ;----------------------------------------------------	
10010  0000000                   ISP_GET_DATA_DP_X MACRO PDATA, NUM
10011  0000000                   
10012  0000000                   	LDY #0
10013  0000000                   ISP_GET_DATA_DP_X_LOOP#:
10014  0000000                   	LDA ISPDAT0,Y
10015  0000000                   	STA PDATA,Y
10016  0000000                   
10017  0000000                   	INY
10018  0000000                   	CPY NUM
10019  0000000                   	BEQ ISP_GET_DATA_DP_X_LOOP_END#
10020  0000000                   
10021  0000000                   	JMP ISP_GET_DATA_DP_X_LOOP#





10022  0000000                   
10023  0000000                   ISP_GET_DATA_DP_X_LOOP_END#:
10024  0000000                   	ENDM
10025  0000000                   ;----------------------------------------------------	
10026  0000000                   ISP_GET_DATA_DP_ILI MACRO PDATA
10027  0000000                   	LDY #0
10028  0000000                   	LDA ISPDAT0
10029  0000000                   	STA (PDATA),Y
10030  0000000                   	LDY #1
10031  0000000                   	LDA ISPDAT1
10032  0000000                   	STA (PDATA),Y
10033  0000000                   	LDY #2
10034  0000000                   	LDA ISPDAT2
10035  0000000                   	STA (PDATA),Y
10036  0000000                   	LDY #3
10037  0000000                   	LDA ISPDAT3
10038  0000000                   	STA (PDATA),Y
10039  0000000                   
10040  0000000                   	ENDM
10041  0000000                   ;----------------------------------------------------	
10042  0000000                   ISP_GET_DATA_DP_ILI_X MACRO PDATA, NUM
10043  0000000                   
10044  0000000                   	LDY #0
10045  0000000                   ISP_GET_DATA_DP_ILI_X_LOOP#:
10046  0000000                   	LDA ISPDAT0,Y
10047  0000000                   	STA (PDATA),Y
10048  0000000                   
10049  0000000                   	INY
10050  0000000                   	CPY NUM
10051  0000000                   	BEQ ISP_GET_DATA_DP_ILI_X_LOOP_END#
10052  0000000                   
10053  0000000                   	JMP ISP_GET_DATA_DP_ILI_X_LOOP#
10054  0000000                   
10055  0000000                   ISP_GET_DATA_DP_ILI_X_LOOP_END#:
10056  0000000                   	ENDM
10057  0000000                   ;--------------------------------------------------------
10058  0000000                   ; @brief	ISP read data
10059  0000000                   ;--------------------------------------------------------
10060  0000000                   ISP_READ_DATA MACRO SADDR, PDATA4
10061  0000000                   	ISP_UNLOCK
10062  0000000                   
10063  0000000                   	ISP_SET_ADDR SADDR
10064  0000000                   
10065  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10066  0000000                   	TSB !ISPCON
10067  0000000                   	LDA #ISP_CMD_READ
10068  0000000                   	STA !ISPCMD	
10069  0000000                   
10070  0000000                   	LDA #ISP_DONE
10071  0000000                   	TSB !ISPTRG
10072  0000000                   
10073  0000000                   	LDA !ISPCON
10074  0000000                   	AND #ISP_ERR_FLAG
10075  0000000                   	BEQ POLLING_ISP_READ_TRG#
10076  0000000                   	LDA #01H
10077  0000000                   	JMP	ISP_READ_DATA_END#
10078  0000000                   





10079  0000000                   POLLING_ISP_READ_TRG#:
10080  0000000                   	LDA !ISPTRG
10081  0000000                   	AND #ISP_DONE
10082  0000000                   	BNE POLLING_ISP_READ_TRG#
10083  0000000                   
10084  0000000                   	ISP_GET_DATA_DP PDATA4
10085  0000000                   
10086  0000000                   READ_OK#:
10087  0000000                   	LDA #00H
10088  0000000                   
10089  0000000                   ISP_READ_DATA_END#:
10090  0000000                   	PHA
10091  0000000                   	ISP_LOCK
10092  0000000                   	PLA
10093  0000000                   	ENDM
10094  0000000                   
10095  0000000                   ;----------------------------------------------------
10096  0000000                   ISP_READ_DATA_DP MACRO PADDR3, PDATA4
10097  0000000                   	ISP_UNLOCK
10098  0000000                   
10099  0000000                   	ISP_SET_ADDR_DP PADDR3
10100  0000000                   
10101  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10102  0000000                   	TSB !ISPCON
10103  0000000                   	LDA #ISP_CMD_READ
10104  0000000                   	STA !ISPCMD	
10105  0000000                   
10106  0000000                   	LDA #ISP_DONE
10107  0000000                   	TSB !ISPTRG
10108  0000000                   
10109  0000000                   	LDA !ISPCON
10110  0000000                   	AND #ISP_ERR_FLAG
10111  0000000                   	BEQ POLLING_ISP_READ_TRG#
10112  0000000                   	LDA #01H
10113  0000000                   	JMP	ISP_READ_DATA_END#
10114  0000000                   
10115  0000000                   POLLING_ISP_READ_TRG#:
10116  0000000                   	LDA !ISPTRG
10117  0000000                   	AND #ISP_DONE
10118  0000000                   	BNE POLLING_ISP_READ_TRG#
10119  0000000                   
10120  0000000                   	ISP_GET_DATA_DP PDATA4
10121  0000000                   
10122  0000000                   READ_OK#:
10123  0000000                   	LDA #00H
10124  0000000                   
10125  0000000                   ISP_READ_DATA_END#:
10126  0000000                   	PHA
10127  0000000                   	ISP_LOCK
10128  0000000                   	PLA
10129  0000000                   	ENDM
10130  0000000                   ;----------------------------------------------------
10131  0000000                   ISP_READ_DATA_DP_X MACRO PADDR3, PDATA, NUM
10132  0000000                   	ISP_UNLOCK
10133  0000000                   
10134  0000000                   	ISP_SET_ADDR_DP PADDR3
10135  0000000                   





10136  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10137  0000000                   	TSB !ISPCON
10138  0000000                   	LDA #ISP_CMD_READ
10139  0000000                   	STA !ISPCMD	
10140  0000000                   
10141  0000000                   	LDA #ISP_DONE
10142  0000000                   	TSB !ISPTRG
10143  0000000                   
10144  0000000                   	LDA !ISPCON
10145  0000000                   	AND #ISP_ERR_FLAG
10146  0000000                   	BEQ POLLING_ISP_READ_TRG#
10147  0000000                   	LDA #01H
10148  0000000                   	JMP	ISP_READ_DATA_END#
10149  0000000                   
10150  0000000                   POLLING_ISP_READ_TRG#:
10151  0000000                   	LDA !ISPTRG
10152  0000000                   	AND #ISP_DONE
10153  0000000                   	BNE POLLING_ISP_READ_TRG#
10154  0000000                   
10155  0000000                   	ISP_GET_DATA_DP_X PDATA, NUM
10156  0000000                   
10157  0000000                   READ_OK#:
10158  0000000                   	LDA #00H
10159  0000000                   
10160  0000000                   ISP_READ_DATA_END#:
10161  0000000                   	PHA
10162  0000000                   	ISP_LOCK
10163  0000000                   	PLA
10164  0000000                   
10165  0000000                   	ENDM
10166  0000000                   ;----------------------------------------------------
10167  0000000                   ISP_READ_DATA_DP_ILI MACRO PADDR3, PDATA
10168  0000000                   	ISP_UNLOCK
10169  0000000                   
10170  0000000                   	ISP_SET_ADDR_DP PADDR3
10171  0000000                   
10172  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10173  0000000                   	TSB !ISPCON
10174  0000000                   	LDA #ISP_CMD_READ
10175  0000000                   	STA !ISPCMD	
10176  0000000                   
10177  0000000                   	LDA #ISP_DONE
10178  0000000                   	TSB !ISPTRG
10179  0000000                   
10180  0000000                   	LDA !ISPCON
10181  0000000                   	AND #ISP_ERR_FLAG
10182  0000000                   	BEQ POLLING_ISP_READ_TRG#
10183  0000000                   	LDA #01H
10184  0000000                   	JMP	ISP_READ_DATA_END#
10185  0000000                   
10186  0000000                   POLLING_ISP_READ_TRG#:
10187  0000000                   	LDA !ISPTRG
10188  0000000                   	AND #ISP_DONE
10189  0000000                   	BNE POLLING_ISP_READ_TRG#
10190  0000000                   
10191  0000000                   	ISP_GET_DATA_DP_ILI .LOW.PDATA
10192  0000000                   





10193  0000000                   READ_OK#:
10194  0000000                   	LDA #00H
10195  0000000                   
10196  0000000                   ISP_READ_DATA_END#:
10197  0000000                   	PHA
10198  0000000                   	ISP_LOCK
10199  0000000                   	PLA
10200  0000000                   
10201  0000000                   	ENDM
10202  0000000                   ;----------------------------------------------------
10203  0000000                   ISP_READ_DATA_DP_ILI_X MACRO PADDR3, PDATA, NUM
10204  0000000                   	ISP_UNLOCK
10205  0000000                   
10206  0000000                   	ISP_SET_ADDR_DP PADDR3
10207  0000000                   
10208  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10209  0000000                   	TSB !ISPCON
10210  0000000                   	LDA #ISP_CMD_READ
10211  0000000                   	STA !ISPCMD	
10212  0000000                   
10213  0000000                   	LDA #ISP_DONE
10214  0000000                   	TSB !ISPTRG
10215  0000000                   
10216  0000000                   	LDA !ISPCON
10217  0000000                   	AND #ISP_ERR_FLAG
10218  0000000                   	BEQ POLLING_ISP_READ_TRG#
10219  0000000                   	LDA #01H
10220  0000000                   	JMP	ISP_READ_DATA_END#
10221  0000000                   
10222  0000000                   POLLING_ISP_READ_TRG#:
10223  0000000                   	LDA !ISPTRG
10224  0000000                   	AND #ISP_DONE
10225  0000000                   	BNE POLLING_ISP_READ_TRG#
10226  0000000                   
10227  0000000                   	ISP_GET_DATA_DP_ILI_X .LOW.PDATA, NUM
10228  0000000                   
10229  0000000                   READ_OK#:
10230  0000000                   	LDA #00H
10231  0000000                   
10232  0000000                   ISP_READ_DATA_END#:
10233  0000000                   	PHA
10234  0000000                   	ISP_LOCK
10235  0000000                   	PLA
10236  0000000                   
10237  0000000                   	ENDM
10238  0000000                   ;--------------------------------------------------------
10239  0000000                   ; @brief	ISP verify data
10240  0000000                   ;--------------------------------------------------------
10241  0000000                   ISP_VERIFY_DATA MACRO SADDR, PDATA4
10242  0000000                   	ISP_UNLOCK
10243  0000000                   
10244  0000000                   	ISP_SET_ADDR SADDR
10245  0000000                   
10246  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10247  0000000                   	TSB !ISPCON
10248  0000000                   	LDA #ISP_CMD_READ
10249  0000000                   	STA !ISPCMD	





10250  0000000                   
10251  0000000                   	LDA #ISP_DONE
10252  0000000                   	TSB !ISPTRG
10253  0000000                   
10254  0000000                   	LDA !ISPCON
10255  0000000                   	AND #ISP_ERR_FLAG
10256  0000000                   	BEQ POLLING_ISP_READ_TRG#
10257  0000000                   	LDA #01H
10258  0000000                   	JMP	ISP_VERIFY_DATA_END#
10259  0000000                   
10260  0000000                   POLLING_ISP_READ_TRG#:
10261  0000000                   	LDA !ISPTRG
10262  0000000                   	AND #ISP_DONE
10263  0000000                   	BNE POLLING_ISP_READ_TRG#
10264  0000000                   
10265  0000000                   ; VERIFY DATA
10266  0000000                   	PHX
10267  0000000                   	LDX #0
10268  0000000                   VERIFY_DAT_LOOP#:
10269  0000000                   	LDA ISPDAT0,X
10270  0000000                   	CMP PDATA4,X
10271  0000000                   	BEQ 3
10272  0000000                   	JMP VERIFY_NG#
10273  0000000                   
10274  0000000                   	INX
10275  0000000                   	CPX #4
10276  0000000                   	BEQ 3 
10277  0000000                   	JMP VERIFY_DAT_LOOP#
10278  0000000                   VERIFY_OK#:
10279  0000000                   	LDA #00H
10280  0000000                   	JMP VERIFY_DATA_END#
10281  0000000                   VERIFY_NG#:
10282  0000000                   	LDA #04H
10283  0000000                   VERIFY_DATA_END#
10284  0000000                   	PLX
10285  0000000                   
10286  0000000                   ISP_VERIFY_DATA_END#:
10287  0000000                   	PHA
10288  0000000                   	ISP_LOCK
10289  0000000                   	PLA
10290  0000000                   	ENDM
10291  0000000                   ;----------------------------------------------------
10292  0000000                   ISP_VERIFY_DATA_DP MACRO PADDR3, PDATA4
10293  0000000                   	ISP_UNLOCK
10294  0000000                   
10295  0000000                   	ISP_SET_ADDR_DP PADDR3
10296  0000000                   
10297  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10298  0000000                   	TSB !ISPCON
10299  0000000                   	LDA #ISP_CMD_READ
10300  0000000                   	STA !ISPCMD
10301  0000000                   
10302  0000000                   	LDA #ISP_DONE
10303  0000000                   	TSB !ISPTRG
10304  0000000                   
10305  0000000                   	LDA !ISPCON
10306  0000000                   	AND #ISP_ERR_FLAG





10307  0000000                   	BEQ POLLING_ISP_READ_TRG#
10308  0000000                   	LDA #01H
10309  0000000                   	JMP	ISP_VERIFY_DATA_DP_END#
10310  0000000                   
10311  0000000                   POLLING_ISP_READ_TRG#:
10312  0000000                   	LDA !ISPTRG
10313  0000000                   	AND #ISP_DONE
10314  0000000                   	BNE POLLING_ISP_READ_TRG#
10315  0000000                   
10316  0000000                   ; VERIFY DATA
10317  0000000                   	PHX
10318  0000000                   	LDX #0
10319  0000000                   VERIFY_DAT_LOOP#:
10320  0000000                   	LDA ISPDAT0,X
10321  0000000                   	CMP PDATA4,X
10322  0000000                   	BEQ 3
10323  0000000                   	JMP VERIFY_NG#
10324  0000000                   
10325  0000000                   	INX
10326  0000000                   	CPX #4
10327  0000000                   	BEQ 3 
10328  0000000                   	JMP VERIFY_DAT_LOOP#
10329  0000000                   VERIFY_OK#:
10330  0000000                   	LDA #00H
10331  0000000                   	JMP VERIFY_DATA_END#
10332  0000000                   VERIFY_NG#:
10333  0000000                   	LDA #04H
10334  0000000                   VERIFY_DATA_END#
10335  0000000                   	PLX
10336  0000000                   
10337  0000000                   ISP_VERIFY_DATA_DP_END#:
10338  0000000                   	PHA
10339  0000000                   	ISP_LOCK
10340  0000000                   	PLA
10341  0000000                   	ENDM
10342  0000000                   ;----------------------------------------------------
10343  0000000                   ISP_VERIFY_DATA_DP_ILI MACRO PADDR3, PDATA4
10344  0000000                   	ISP_UNLOCK
10345  0000000                   
10346  0000000                   	ISP_SET_ADDR_DP PADDR3
10347  0000000                   
10348  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10349  0000000                   	TSB !ISPCON
10350  0000000                   	LDA #ISP_CMD_READ
10351  0000000                   	STA !ISPCMD
10352  0000000                   
10353  0000000                   	LDA #ISP_DONE
10354  0000000                   	TSB !ISPTRG
10355  0000000                   
10356  0000000                   	LDA !ISPCON
10357  0000000                   	AND #ISP_ERR_FLAG
10358  0000000                   	BEQ POLLING_ISP_READ_TRG#
10359  0000000                   	LDA #01H
10360  0000000                   	JMP	ISP_VERIFY_DATA_DP_ILI_END#
10361  0000000                   
10362  0000000                   POLLING_ISP_READ_TRG#:
10363  0000000                   	LDA !ISPTRG





10364  0000000                   	AND #ISP_DONE
10365  0000000                   	BNE POLLING_ISP_READ_TRG#
10366  0000000                   
10367  0000000                   ; VERIFY DATA
10368  0000000                   	PHY
10369  0000000                   	LDY #0
10370  0000000                   VERIFY_DAT_LOOP#:
10371  0000000                   	LDA ISPDAT0,Y
10372  0000000                   	CMP (PDATA4),Y
10373  0000000                   	BEQ 3
10374  0000000                   	JMP VERIFY_NG#
10375  0000000                   
10376  0000000                   	INY
10377  0000000                   	CPY #4
10378  0000000                   	BEQ 3 
10379  0000000                   	JMP VERIFY_DAT_LOOP#
10380  0000000                   VERIFY_OK#:
10381  0000000                   	LDA #00H
10382  0000000                   	JMP VERIFY_DATA_END#
10383  0000000                   VERIFY_NG#:
10384  0000000                   	LDA #04H
10385  0000000                   VERIFY_DATA_END#
10386  0000000                   	PLY
10387  0000000                   
10388  0000000                   ISP_VERIFY_DATA_DP_ILI_END#:
10389  0000000                   	PHA
10390  0000000                   	ISP_LOCK
10391  0000000                   	PLA
10392  0000000                   	ENDM
10393  0000000                   ;----------------------------------------------------
10394  0000000                   ISP_VERIFY_DATA_DP_ILI_X MACRO PADDR3, PDATA4, NUM
10395  0000000                   	ISP_UNLOCK
10396  0000000                   
10397  0000000                   	ISP_SET_ADDR_DP PADDR3
10398  0000000                   
10399  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10400  0000000                   	TSB !ISPCON
10401  0000000                   	LDA #ISP_CMD_READ
10402  0000000                   	STA !ISPCMD
10403  0000000                   
10404  0000000                   	LDA #ISP_DONE
10405  0000000                   	TSB !ISPTRG
10406  0000000                   
10407  0000000                   	LDA !ISPCON
10408  0000000                   	AND #ISP_ERR_FLAG
10409  0000000                   	BEQ POLLING_ISP_READ_TRG#
10410  0000000                   	LDA #01H
10411  0000000                   	JMP	ISP_VERIFY_DATA_DP_ILI_X_END#
10412  0000000                   
10413  0000000                   POLLING_ISP_READ_TRG#:
10414  0000000                   	LDA !ISPTRG
10415  0000000                   	AND #ISP_DONE
10416  0000000                   	BNE POLLING_ISP_READ_TRG#
10417  0000000                   
10418  0000000                   ; VERIFY DATA
10419  0000000                   	PHY
10420  0000000                   	LDY #0





10421  0000000                   VERIFY_DAT_LOOP#:
10422  0000000                   	LDA ISPDAT0,Y
10423  0000000                   	CMP (PDATA4),Y
10424  0000000                   	BEQ 3
10425  0000000                   	JMP VERIFY_NG#
10426  0000000                   
10427  0000000                   	INY
10428  0000000                   	CPY NUM
10429  0000000                   	BEQ 3 
10430  0000000                   	JMP VERIFY_DAT_LOOP#
10431  0000000                   VERIFY_OK#:
10432  0000000                   	LDA #00H
10433  0000000                   	JMP VERIFY_DATA_END#
10434  0000000                   VERIFY_NG#:
10435  0000000                   	LDA #04H
10436  0000000                   VERIFY_DATA_END#
10437  0000000                   	PLY
10438  0000000                   
10439  0000000                   ISP_VERIFY_DATA_DP_ILI_X_END#:
10440  0000000                   	PHA
10441  0000000                   	ISP_LOCK
10442  0000000                   	PLA
10443  0000000                   	ENDM
10444  0000000                   ;--------------------------------------------------------
10445  0000000                   ; @brief	ISP write data
10446  0000000                   ;--------------------------------------------------------
10447  0000000                   ISP_WRITE_DATA MACRO SADDR, PDATA4
10448  0000000                   	ISP_UNLOCK
10449  0000000                   
10450  0000000                   	ISP_SET_DATA_DP PDATA4
10451  0000000                   	ISP_SET_ADDR SADDR
10452  0000000                   
10453  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10454  0000000                   	TSB !ISPCON
10455  0000000                   	LDA #ISP_CMD_PROGRAM
10456  0000000                   	STA !ISPCMD	
10457  0000000                   
10458  0000000                   	LDA #ISP_DONE
10459  0000000                   	TSB !ISPTRG
10460  0000000                   
10461  0000000                   	LDA !ISPCON
10462  0000000                   	AND #ISP_ERR_FLAG
10463  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10464  0000000                   	LDA #03H
10465  0000000                   	JMP	ISP_WRITE_DATA_END#
10466  0000000                   
10467  0000000                   POLLING_ISP_WRITE_TRG#:
10468  0000000                   	LDA !ISPTRG
10469  0000000                   	AND #ISP_DONE
10470  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10471  0000000                   
10472  0000000                   WRITE_OK#:
10473  0000000                   	LDA #00H
10474  0000000                   
10475  0000000                   ISP_WRITE_DATA_END#:
10476  0000000                   	PHA
10477  0000000                   	ISP_LOCK





10478  0000000                   	PLA
10479  0000000                   	ENDM
10480  0000000                   ;----------------------------------------------------
10481  0000000                   ISP_WRITE_DATA_DP MACRO PADDR3, PDATA4
10482  0000000                   	ISP_UNLOCK
10483  0000000                   
10484  0000000                   	ISP_SET_DATA_DP PDATA4
10485  0000000                   	ISP_SET_ADDR_DP PADDR3
10486  0000000                   
10487  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10488  0000000                   	TSB !ISPCON
10489  0000000                   	LDA #ISP_CMD_PROGRAM
10490  0000000                   	STA !ISPCMD	
10491  0000000                   
10492  0000000                   	LDA #ISP_DONE
10493  0000000                   	TSB !ISPTRG
10494  0000000                   
10495  0000000                   	LDA !ISPCON
10496  0000000                   	AND #ISP_ERR_FLAG
10497  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10498  0000000                   	LDA #03H
10499  0000000                   	JMP	ISP_WRITE_DATA_END#
10500  0000000                   
10501  0000000                   POLLING_ISP_WRITE_TRG#:
10502  0000000                   	LDA !ISPTRG
10503  0000000                   	AND #ISP_DONE
10504  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10505  0000000                   
10506  0000000                   WRITE_OK#:
10507  0000000                   	LDA #00H
10508  0000000                   
10509  0000000                   ISP_WRITE_DATA_END#:
10510  0000000                   	PHA
10511  0000000                   	ISP_LOCK
10512  0000000                   	PLA
10513  0000000                   	ENDM
10514  0000000                   
10515  0000000                   ;----------------------------------------------------
10516  0000000                   ISP_WRITE_DATA_DP_ILI MACRO PADDR3, PDATA
10517  0000000                   	ISP_UNLOCK
10518  0000000                   
10519  0000000                   	ISP_SET_DATA_DP_ILI .LOW.PDATA
10520  0000000                   	ISP_SET_ADDR_DP PADDR3
10521  0000000                   
10522  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10523  0000000                   	TSB !ISPCON
10524  0000000                   	LDA #ISP_CMD_PROGRAM
10525  0000000                   	STA !ISPCMD	
10526  0000000                   
10527  0000000                   	LDA #ISP_DONE
10528  0000000                   	TSB !ISPTRG
10529  0000000                   
10530  0000000                   	LDA !ISPCON
10531  0000000                   	AND #ISP_ERR_FLAG
10532  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10533  0000000                   	LDA #03H
10534  0000000                   	JMP	ISP_WRITE_DATA_END#





10535  0000000                   
10536  0000000                   POLLING_ISP_WRITE_TRG#:
10537  0000000                   	LDA !ISPTRG
10538  0000000                   	AND #ISP_DONE
10539  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10540  0000000                   
10541  0000000                   WRITE_OK#:
10542  0000000                   	LDA #00H
10543  0000000                   
10544  0000000                   ISP_WRITE_DATA_END#:
10545  0000000                   	PHA
10546  0000000                   	ISP_LOCK
10547  0000000                   	PLA
10548  0000000                   	ENDM
10549  0000000                   ;----------------------------------------------------
10550  0000000                   ISP_WRITE_DATA_DP_ILI_X MACRO PADDR3, PDATA, NUM
10551  0000000                   	ISP_UNLOCK
10552  0000000                   
10553  0000000                   	LDA #FFH
10554  0000000                   	STA !ISPDAT0
10555  0000000                   	STA !ISPDAT1
10556  0000000                   	STA !ISPDAT2
10557  0000000                   	STA !ISPDAT3
10558  0000000                   
10559  0000000                   	ISP_SET_DATA_DP_ILI_X .LOW.PDATA, NUM
10560  0000000                   	ISP_SET_ADDR_DP PADDR3
10561  0000000                   
10562  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10563  0000000                   	TSB !ISPCON
10564  0000000                   	LDA #ISP_CMD_PROGRAM
10565  0000000                   	STA !ISPCMD	
10566  0000000                   
10567  0000000                   	LDA #ISP_DONE
10568  0000000                   	TSB !ISPTRG
10569  0000000                   
10570  0000000                   	LDA !ISPCON
10571  0000000                   	AND #ISP_ERR_FLAG
10572  0000000                   	BEQ POLLING_ISP_WRITE_TRG#
10573  0000000                   	LDA #03H
10574  0000000                   	JMP	ISP_WRITE_DATA_END#
10575  0000000                   
10576  0000000                   POLLING_ISP_WRITE_TRG#:
10577  0000000                   	LDA !ISPTRG
10578  0000000                   	AND #ISP_DONE
10579  0000000                   	BNE POLLING_ISP_WRITE_TRG#
10580  0000000                   
10581  0000000                   WRITE_OK#:
10582  0000000                   	LDA #00H
10583  0000000                   
10584  0000000                   ISP_WRITE_DATA_END#:
10585  0000000                   	PHA
10586  0000000                   	ISP_LOCK
10587  0000000                   	PLA
10588  0000000                   	ENDM
10589  0000000                   ;--------------------------------------------------------
10590  0000000                   ; @brief	ISP erase page
10591  0000000                   ;--------------------------------------------------------





10592  0000000                   ISP_ERASE_PAGE MACRO SADDR
10593  0000000                   	ISP_UNLOCK
10594  0000000                   
10595  0000000                   	ISP_SET_ADDR SADDR
10596  0000000                   
10597  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10598  0000000                   	TSB !ISPCON
10599  0000000                   	LDA #ISP_CMD_ERASE_PAGE
10600  0000000                   	STA !ISPCMD	
10601  0000000                   
10602  0000000                   	LDA #ISP_DONE
10603  0000000                   	TSB !ISPTRG
10604  0000000                   
10605  0000000                   	LDA !ISPCON
10606  0000000                   	AND #ISP_ERR_FLAG
10607  0000000                   	BEQ POLLING_ISP_ERASE_TRG#
10608  0000000                   	LDA #05H
10609  0000000                   	JMP	ISP_ERASE_PAGE_END#
10610  0000000                   
10611  0000000                   POLLING_ISP_ERASE_TRG#:
10612  0000000                   	LDA !ISPTRG
10613  0000000                   	AND #ISP_DONE
10614  0000000                   	BNE POLLING_ISP_ERASE_TRG#
10615  0000000                   
10616  0000000                   ERASE_OK#:
10617  0000000                   	LDA #00H
10618  0000000                   
10619  0000000                   ISP_ERASE_PAGE_END#:
10620  0000000                   	PHA
10621  0000000                   	ISP_LOCK
10622  0000000                   	PLA
10623  0000000                   	ENDM
10624  0000000                   ;----------------------------------------------------
10625  0000000                   ISP_ERASE_PAGE_DP MACRO PADDR3
10626  0000000                   	ISP_UNLOCK
10627  0000000                   
10628  0000000                   	ISP_SET_ADDR_DP PADDR3
10629  0000000                   
10630  0000000                   	LDA	#(ISP_EN + ISP_EN_PP + ISP_ERR_FLAG)
10631  0000000                   	TSB !ISPCON
10632  0000000                   	LDA #ISP_CMD_ERASE_PAGE
10633  0000000                   	STA !ISPCMD	
10634  0000000                   
10635  0000000                   	LDA #ISP_DONE
10636  0000000                   	TSB !ISPTRG
10637  0000000                   
10638  0000000                   	LDA !ISPCON
10639  0000000                   	AND #ISP_ERR_FLAG
10640  0000000                   	BEQ POLLING_ISP_ERASE_TRG#
10641  0000000                   	LDA #05H
10642  0000000                   	JMP	ISP_ERASE_PAGE_END#
10643  0000000                   
10644  0000000                   POLLING_ISP_ERASE_TRG#:
10645  0000000                   	LDA !ISPTRG
10646  0000000                   	AND #ISP_DONE
10647  0000000                   	BNE POLLING_ISP_ERASE_TRG#
10648  0000000                   





10649  0000000                   ERASE_OK#:
10650  0000000                   	LDA #00H
10651  0000000                   
10652  0000000                   ISP_ERASE_PAGE_END#:
10653  0000000                   	PHA
10654  0000000                   	ISP_LOCK
10655  0000000                   	PLA
10656  0000000                   	ENDM
10657  0000000                   
10658  0000000                   ;--------------------------------------------------------
10659  0000000                   ; @brief	ISP read ID	
10660  0000000                   ;--------------------------------------------------------
10661  0000000                   ISP_READ_CID MACRO PDATA
10662  0000000                   	ISP_UNLOCK
10663  0000000                   
10664  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10665  0000000                   	TSB !ISPCON
10666  0000000                   	LDA #ISP_CMD_CID
10667  0000000                   	STA !ISPCMD	
10668  0000000                   
10669  0000000                   	LDA #ISP_DONE
10670  0000000                   	TSB !ISPTRG
10671  0000000                   
10672  0000000                   	LDA !ISPCON
10673  0000000                   	AND #ISP_ERR_FLAG
10674  0000000                   	BEQ POLLING_ISP_READ_CID_TRG#
10675  0000000                   	JMP	ISP_READ_CID_END#
10676  0000000                   
10677  0000000                   POLLING_ISP_READ_CID_TRG#:
10678  0000000                   	LDA !ISPTRG
10679  0000000                   	AND #ISP_DONE
10680  0000000                   	BNE POLLING_ISP_READ_TRG#
10681  0000000                   
10682  0000000                   	LDA !ISPDAT0
10683  0000000                   	STA PDATA
10684  0000000                   
10685  0000000                   ISP_READ_CID_END#:
10686  0000000                   	ISP_LOCK
10687  0000000                   	ENDM
10688  0000000                   ;----------------------------------------------------
10689  0000000                   ISP_READ_DID MACRO PDATA
10690  0000000                   	ISP_UNLOCK
10691  0000000                   
10692  0000000                   	LDA	#(ISP_EN + ISP_ERR_FLAG)
10693  0000000                   	TSB !ISPCON
10694  0000000                   	LDA #ISP_CMD_DID
10695  0000000                   	STA !ISPCMD	
10696  0000000                   
10697  0000000                   	LDA #ISP_DONE
10698  0000000                   	TSB !ISPTRG
10699  0000000                   
10700  0000000                   	LDA !ISPCON
10701  0000000                   	AND #ISP_ERR_FLAG
10702  0000000                   	BEQ POLLING_ISP_READ_DID_TRG#
10703  0000000                   	JMP	ISP_READ_DID_END#
10704  0000000                   
10705  0000000                   POLLING_ISP_READ_DID_TRG#:





10706  0000000                   	LDA !ISPTRG
10707  0000000                   	AND #ISP_DONE
10708  0000000                   	BNE POLLING_ISP_READ_TRG#
10709  0000000                   
10710  0000000                   	LDA !ISPDAT0
10711  0000000                   	STA PDATA
10712  0000000                   
10713  0000000                   ISP_READ_DID_END#:
10714  0000000                   	ISP_LOCK
10715  0000000                   
10716  0000000                   	ENDM
10717  0000000                   
10718  0000000                   
10719  0000000                   
10720  0000000                   	EXTERN FLASH_ERASE_PAGE_PROC
10721  0000000                   	EXTERN FLASH_READ_PAGE_PROC
10722  0000000                   	EXTERN FLASH_WRITE_PAGE_PROC
10723  0000000                   	EXTERN FLASH_COPY_PAGE_PROC
10724  0000000                   	EXTERN FLASH_BLANK_CHECK_PAGE_PROC
10725  0000000                   	EXTERN FLASH_BACKUP_REPLACE_PAGE_PROC
10726  0000000                   	EXTERN FLASH_PAGE_INJECT_ID_PROC
10727  0000000                   
10728  0000000                   	EXTERN PROTECTION_PAGE_READ_PROC
10729  0000000                   	EXTERN PROTECTION_PAGE_UPDATE_PROC
10730  0000000                   
10731  0000000                   	EXTERN FLASH_SECTION_UPDATE_PROC
10732  0000000                   	EXTERN FLASH_SECTION_READ_PROC
10733  0000000                   ;-------------------------------------------;
10734  0000000                   ; Defince                               	;
10735  0000000                   ;-------------------------------------------;
10736  0000000                   .IF (WITH_ISP_READ_WRITE .EQ. 1)
10737  0000000                   SRC_BUF4				EQU		ISP_TEMP
10738  0000000                   DST_PAGE_START_ADDR3	EQU		ISP_TEMP+4
10739  0000000                   SRC_LEN2				EQU		ISP_TEMP+7
10740  0000000                   .ENDIF
10741  0000000                   .IF (WITH_ISP_UPDATE .EQ. 1)
10742  0000000                   DST_BUF4				EQU		ISP_TEMP+9
10743  0000000                   SRC_PAGE_START_ADDR3	EQU		ISP_TEMP+13
10744  0000000                   OFFSET2					EQU		ISP_TEMP+16
10745  0000000                   COUNT2					EQU 	ISP_TEMP+18
10746  0000000                   .ENDIF
10747  0000000                   .IF (WITH_PROTECTION_PAGE_UPDATE .EQ. 1)
10748  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 1)	
10749  0000000                   OFFSET_TEMP				EQU		ISP_TEMP+20
10750  0000000                   LEN_TEMP				EQU		ISP_TEMP+22
10751  0000000                   PBUF_TEMP				EQU		ISP_TEMP+24
10752  0000000                   .ENDIF
10753  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 2)
10754  0000000                   NOW_SECTION_INDEX		EQU			ISP_TEMP+20
10755  0000000                   UPDATE_SECTION_STATUS	EQU			ISP_TEMP+21
10756  0000000                   NP_INDEX				EQU			ISP_TEMP+22
10757  0000000                   SP_INDEX				EQU			ISP_TEMP+23
10758  0000000                   PBUF_TEMP				EQU			ISP_TEMP+24
10759  0000000                   SECTION_OFFSET			EQU			OFFSET2
10760  0000000                   .ENDIF
10761  0000000                   .ENDIF
10762  0000000                   





10763  0000000                   NU_ID					EQU		19H
10764  0000000                   PAGE_SIZE				EQU 	512
10765  0000000                   
10766  0000000                   
10767  0000000                   ;--------------------------------------------------------
10768  0000000                   ; @brief	Read flash
10769  0000000                   ;--------------------------------------------------------
10770  0000000                   FLASH_READ MACRO DST_ADDR, LEN, SRC_PBUF
10771  0000000                   	FLASH_READ_PAGE_DP DST_ADDR, 0, LEN, SRC_PBUF
10772  0000000                   	ENDM
10773  0000000                   ;--------------------------------------------------------
10774  0000000                   ; @brief	Read flash
10775  0000000                   ;--------------------------------------------------------
10776  0000000                   FLASH_READ_RAM MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10777  0000000                   	FLASH_READ_DP_RAM DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10778  0000000                   	ENDM
10779  0000000                   ;--------------------------------------------------------
10780  0000000                   ; @brief	Read flash
10781  0000000                   ;--------------------------------------------------------
10782  0000000                   FLASH_READ_RAM_ILI MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10783  0000000                   	FLASH_READ_DP_RAM_ILI DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10784  0000000                   	ENDM
10785  0000000                   ;--------------------------------------------------------
10786  0000000                   ; @brief	Read flash page
10787  0000000                   ;--------------------------------------------------------
10788  0000000                   FLASH_READ_PAGE MACRO DST_ADDR, DST_OFFSET, LEN, SRC_PBUF
10789  0000000                   	FLASH_READ_PAGE_DP DST_ADDR, DST_OFFSET, LEN, SRC_PBUF
10790  0000000                   	ENDM
10791  0000000                   ;--------------------------------------------------------
10792  0000000                   ; @brief	Read flash page
10793  0000000                   ;--------------------------------------------------------
10794  0000000                   FLASH_READ_PAGE_RAM MACRO DST_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10795  0000000                   	FLASH_READ_PAGE_DP_RAM DST_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10796  0000000                   	ENDM
10797  0000000                   ;--------------------------------------------------------
10798  0000000                   ; @brief	Read flash page with ram buf
10799  0000000                   ; @param	Destination page address, count, offset, and 
10800  0000000                   ;			pointer to buffer
10801  0000000                   ;--------------------------------------------------------
10802  0000000                   FLASH_READ_PAGE_DP MACRO DST_ADDR, DST_OFFSET, LEN, SRC_PBUF
10803  0000000                   	MOV16_16 SRC_LEN2, LEN
10804  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_ADDR
10805  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, DST_OFFSET
10806  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10807  0000000                   
10808  0000000                   	JSR FLASH_READ_PAGE_PROC
10809  0000000                   
10810  0000000                   	ENDM
10811  0000000                   ;--------------------------------------------------------
10812  0000000                   ; @brief	Read flash page with ram buf
10813  0000000                   ; @param	Destination page address, count, offset, and 
10814  0000000                   ;			pointer to buffer
10815  0000000                   ;--------------------------------------------------------
10816  0000000                   FLASH_READ_PAGE_DP_RAM MACRO DST_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10817  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10818  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10819  0000000                   	ADD24_16_DP DST_PAGE_START_ADDR3, DST_OFFSET_RAM





10820  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10821  0000000                   
10822  0000000                   	JSR FLASH_READ_PAGE_PROC
10823  0000000                   	ENDM
10824  0000000                   ;--------------------------------------------------------
10825  0000000                   FLASH_READ_DP_RAM MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10826  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10827  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10828  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10829  0000000                   
10830  0000000                   	JSR FLASH_READ_PAGE_PROC
10831  0000000                   	ENDM
10832  0000000                   ;--------------------------------------------------------
10833  0000000                   FLASH_READ_DP_RAM_ILI MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10834  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10835  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10836  0000000                   	LDA .LOW.SRC_PBUF
10837  0000000                   	STA SRC_BUF4
10838  0000000                   	LDA .HIGH.SRC_PBUF
10839  0000000                   	STA SRC_BUF4+1
10840  0000000                   
10841  0000000                   	JSR FLASH_READ_PAGE_PROC
10842  0000000                   	ENDM
10843  0000000                   ;--------------------------------------------------------
10844  0000000                   ;FLASH_READ_PAGE_PROC MACRO
10845  0000000                   ;PHP
10846  0000000                   ;SEI
10847  0000000                   ;
10848  0000000                   ;READ_FLASH_LOOP#:
10849  0000000                   ;LDA SRC_LEN2+1;
10850  0000000                   ;CMP #00
10851  0000000                   ;BCC READ_FLASH_PROC_1#
10852  0000000                   ;BNE READ_FLASH_PROC_2#
10853  0000000                   ;LDA SRC_LEN2
10854  0000000                   ;CMP #04H
10855  0000000                   ;BCS READ_FLASH_PROC_2# ; if NUM1L >= NUM2L then NUM1 >= NUM2
10856  0000000                   ;
10857  0000000                   ;READ_FLASH_PROC_1#:
10858  0000000                   ;LDA SRC_LEN2
10859  0000000                   ;BNE 3
10860  0000000                   ;JMP END_FLAGH_READ_PAGE_DP_OK#
10861  0000000                   ;
10862  0000000                   ;;read data (<4B) 
10863  0000000                   ;ISP_READ_DATA_DP_ILI_X DST_PAGE_START_ADDR3, SRC_BUF4, SRC_LEN2
10864  0000000                   ;BEQ 3
10865  0000000                   ;JMP END_FLASH_READ_PAGE_DP#
10866  0000000                   ;
10867  0000000                   ;JMP END_FLAGH_READ_PAGE_DP_OK#
10868  0000000                   ;
10869  0000000                   ;READ_FLASH_PROC_2#:
10870  0000000                   ;;read data (4B) 
10871  0000000                   ;ISP_READ_DATA_DP_ILI DST_PAGE_START_ADDR3, SRC_BUF4
10872  0000000                   ;BEQ 3
10873  0000000                   ;JMP END_FLASH_READ_PAGE_DP#
10874  0000000                   ;
10875  0000000                   ;;accumulate address
10876  0000000                   ;DNLOAD_ADDR_INC#:





10877  0000000                   ;;accumulate destination address
10878  0000000                   ;ADD24_24 DST_PAGE_START_ADDR3, 4
10879  0000000                   ;
10880  0000000                   ;;accumlate pointer to buffer
10881  0000000                   ;ADD16_16 SRC_BUF4, 4
10882  0000000                   ;
10883  0000000                   ;;accumlate count
10884  0000000                   ;SBC16_16 SRC_LEN2, 4
10885  0000000                   ;JMP READ_FLASH_LOOP#
10886  0000000                   ;
10887  0000000                   ;END_FLAGH_READ_PAGE_DP_OK#:
10888  0000000                   ;LDA #00H
10889  0000000                   ;END_FLASH_READ_PAGE_DP#:
10890  0000000                   ;PLP
10891  0000000                   ;
10892  0000000                   ;ENDM
10893  0000000                   ;--------------------------------------------------------
10894  0000000                   ; @brief	Blank flash page
10895  0000000                   ;--------------------------------------------------------
10896  0000000                   FLASH_BLANK_PAGE MACRO DST_ADDR, LEN
10897  0000000                   	MOV16_16 SRC_LEN2, LEN
10898  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_ADDR
10899  0000000                   
10900  0000000                   	JSR FLASH_BLANK_CHECK_PAGE_PROC
10901  0000000                   
10902  0000000                   	ENDM
10903  0000000                   ;--------------------------------------------------------
10904  0000000                   ; @brief	Blank flash page
10905  0000000                   ;--------------------------------------------------------
10906  0000000                   FLASH_BLANK_PAGE_RAM MACRO DST_ADDR_RAM, LEN_RAM
10907  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10908  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_ADDR_RAM
10909  0000000                   
10910  0000000                   	JSR FLASH_BLANK_CHECK_PAGE_PROC
10911  0000000                   
10912  0000000                   	ENDM
10913  0000000                   ;--------------------------------------------------------
10914  0000000                   ; @brief	Erase flash page
10915  0000000                   ; @param	
10916  0000000                   ;--------------------------------------------------------
10917  0000000                   FLASH_ERASE_PAGE MACRO DST_PAGE_ADDR
10918  0000000                   
10919  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
10920  0000000                   	JSR FLASH_ERASE_PAGE_PROC
10921  0000000                   
10922  0000000                   	ENDM
10923  0000000                   ;--------------------------------------------------------
10924  0000000                   ; @brief	Erase flash page
10925  0000000                   ; @param	
10926  0000000                   ;--------------------------------------------------------
10927  0000000                   FLASH_ERASE_PAGE_RAM MACRO DST_PAGE_ADDR_RAM
10928  0000000                   
10929  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
10930  0000000                   	JSR FLASH_ERASE_PAGE_PROC
10931  0000000                   
10932  0000000                   	ENDM
10933  0000000                   ;--------------------------------------------------------





10934  0000000                   ; @brief	Write flash
10935  0000000                   ;--------------------------------------------------------
10936  0000000                   FLASH_WRITE MACRO DST_ADDR, LEN, SRC_PBUF
10937  0000000                   	FLASH_WRITE_PAGE_DP DST_ADDR, 0, LEN, SRC_PBUF
10938  0000000                   	ENDM
10939  0000000                   ;--------------------------------------------------------
10940  0000000                   ; @brief	Write flash
10941  0000000                   ;--------------------------------------------------------
10942  0000000                   FLASH_WRITE_RAM MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10943  0000000                   	FLASH_WRITE_DP_RAM DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10944  0000000                   	ENDM
10945  0000000                   ;--------------------------------------------------------
10946  0000000                   ; @brief	Write flash
10947  0000000                   ;--------------------------------------------------------
10948  0000000                   FLASH_WRITE_RAM_ILI MACRO DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10949  0000000                   	FLASH_WRITE_DP_RAM_ILI DST_ADDR_RAM, LEN_RAM, SRC_PBUF
10950  0000000                   	ENDM
10951  0000000                   ;--------------------------------------------------------
10952  0000000                   ; @brief	Write flash page
10953  0000000                   ; @param	
10954  0000000                   ;--------------------------------------------------------
10955  0000000                   FLASH_WRITE_PAGE MACRO DST_PAGE_ADDR, DST_OFFSET, LEN, SRC_PBUF
10956  0000000                   	FLASH_WRITE_PAGE_DP DST_PAGE_ADDR, DST_OFFSET, LEN, SRC_PBUF
10957  0000000                   	ENDM
10958  0000000                   ;--------------------------------------------------------
10959  0000000                   ; @brief	Write flash page
10960  0000000                   ; @param	
10961  0000000                   ;--------------------------------------------------------
10962  0000000                   FLASH_WRITE_PAGE_RAM MACRO DST_PAGE_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10963  0000000                   	FLASH_WRITE_PAGE_DP_RAM DST_PAGE_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10964  0000000                   	ENDM
10965  0000000                   ;--------------------------------------------------------
10966  0000000                   ; @brief	Write flash page with ram buf
10967  0000000                   ; @param	Destination page address, count, offset, and 
10968  0000000                   ;			pointer to buffer
10969  0000000                   ;--------------------------------------------------------
10970  0000000                   FLASH_WRITE_PAGE_DP MACRO DST_PAGE_ADDR, DST_OFFSET, LEN, SRC_PBUF
10971  0000000                   	MOV16_16 SRC_LEN2, LEN
10972  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
10973  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, DST_OFFSET
10974  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10975  0000000                   
10976  0000000                   	JSR FLASH_WRITE_PAGE_PROC
10977  0000000                   	ENDM
10978  0000000                   ;--------------------------------------------------------
10979  0000000                   ; @brief	Write flash page with ram buf
10980  0000000                   ; @param	Destination page address, count, offset, and 
10981  0000000                   ;			pointer to buffer
10982  0000000                   ;--------------------------------------------------------
10983  0000000                   FLASH_WRITE_PAGE_DP_RAM MACRO DST_PAGE_ADDR_RAM, DST_OFFSET_RAM, LEN_RAM, SRC_PBUF
10984  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10985  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
10986  0000000                   	ADD24_16_DP DST_PAGE_START_ADDR3, DST_OFFSET_RAM
10987  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
10988  0000000                   
10989  0000000                   	JSR FLASH_WRITE_PAGE_PROC
10990  0000000                   	ENDM





10991  0000000                   ;--------------------------------------------------------
10992  0000000                   ; @brief	Write flash page with ram buf
10993  0000000                   ; @param	Destination page address, count, offset, and 
10994  0000000                   ;			pointer to buffer
10995  0000000                   ;--------------------------------------------------------
10996  0000000                   FLASH_WRITE_DP_RAM MACRO DST_PAGE_ADDR_RAM, LEN_RAM, SRC_PBUF
10997  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
10998  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
10999  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11000  0000000                   
11001  0000000                   	JSR FLASH_WRITE_PAGE_PROC
11002  0000000                   	ENDM
11003  0000000                   
11004  0000000                   ;--------------------------------------------------------
11005  0000000                   ; @brief	Write flash page with ram buf
11006  0000000                   ; @param	Destination page address, count, offset, and 
11007  0000000                   ;			pointer to buffer
11008  0000000                   ;--------------------------------------------------------
11009  0000000                   FLASH_WRITE_DP_RAM_ILI MACRO DST_PAGE_ADDR_RAM, LEN_RAM, SRC_PBUF
11010  0000000                   	MOV16_16_DP SRC_LEN2, LEN_RAM
11011  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
11012  0000000                   
11013  0000000                   	LDA .LOW.SRC_PBUF
11014  0000000                   	STA SRC_BUF4
11015  0000000                   	LDA .HIGH.SRC_PBUF
11016  0000000                   	STA SRC_BUF4+1
11017  0000000                   
11018  0000000                   	JSR FLASH_WRITE_PAGE_PROC
11019  0000000                   	ENDM
11020  0000000                   
11021  0000000                   ;--------------------------------------------------------
11022  0000000                   ; @brief	Copy flash page
11023  0000000                   ;--------------------------------------------------------		
11024  0000000                   FLASH_COPY_PAGE MACRO DST_PAGE_ADDR, SRC_PAGE_ADDR
11025  0000000                   
11026  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
11027  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11028  0000000                   
11029  0000000                   	STZ16 COUNT2
11030  0000000                   
11031  0000000                   	JSR FLASH_COPY_PAGE_PROC
11032  0000000                   
11033  0000000                   	ENDM
11034  0000000                   ;--------------------------------------------------------
11035  0000000                   ; @brief	Copy flash page
11036  0000000                   ;--------------------------------------------------------		
11037  0000000                   FLASH_COPY_PAGE_RAM MACRO DST_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM
11038  0000000                   	PHP
11039  0000000                   	SEI
11040  0000000                   
11041  0000000                   ;IS_ILLEGAL_PAGE_FORMAT DST_PAGE_ADDR
11042  0000000                   ;BEQ 3
11043  0000000                   ;JMP FLASH_COPY_PAGE_ERROR#
11044  0000000                   
11045  0000000                   ;IS_ILLEGAL_PAGE_FORMAT SRC_PAGE_ADDR
11046  0000000                   ;BEQ 3
11047  0000000                   ;JMP FLASH_COPY_PAGE_ERROR#





11048  0000000                   
11049  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, DST_PAGE_ADDR_RAM
11050  0000000                   	MOV24_24_DP SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR_RAM
11051  0000000                   
11052  0000000                   	STZ16 COUNT2
11053  0000000                   
11054  0000000                   ;eraes flash page before program data
11055  0000000                   	ISP_ERASE_PAGE_DP DST_PAGE_START_ADDR3
11056  0000000                   	BEQ 3
11057  0000000                   	JMP END_COPY_FLASH_PAGE#
11058  0000000                   
11059  0000000                   COPY_LOOP#:
11060  0000000                   
11061  0000000                   ;read data (4B)
11062  0000000                   	ISP_READ_DATA_DP SRC_PAGE_START_ADDR3, SRC_BUF4
11063  0000000                   	BEQ 3
11064  0000000                   	JMP END_COPY_FLASH_PAGE#
11065  0000000                   
11066  0000000                   ;program data (4B)
11067  0000000                   	ISP_WRITE_DATA_DP DST_PAGE_START_ADDR3, SRC_BUF4
11068  0000000                   	BEQ 3
11069  0000000                   	JMP END_COPY_FLASH_PAGE#
11070  0000000                   
11071  0000000                   ;verify data (4B)
11072  0000000                   	ISP_VERIFY_DATA_DP DST_PAGE_START_ADDR3, SRC_BUF4
11073  0000000                   	BEQ 3
11074  0000000                   	JMP END_COPY_FLASH_PAGE#
11075  0000000                   
11076  0000000                   ;accumlate source address
11077  0000000                   	ADD24_24 SRC_PAGE_START_ADDR3, 4
11078  0000000                   
11079  0000000                   ;accumlate destination address
11080  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, 4
11081  0000000                   
11082  0000000                   ;accumlate count
11083  0000000                   	ADD16_16 COUNT2, 4
11084  0000000                   
11085  0000000                   LAST_CHECK#:
11086  0000000                   	LDA !COUNT2+1
11087  0000000                   	CMP #.HIGH.PAGE_SIZE
11088  0000000                   	BEQ 3
11089  0000000                   	JMP COPY_LOOP#
11090  0000000                   	LDA !COUNT2
11091  0000000                   	CMP #.LOW.PAGE_SIZE
11092  0000000                   	BEQ 3
11093  0000000                   	JMP COPY_LOOP#
11094  0000000                   	JMP END_COPY_FLASH_PAGE_OK#
11095  0000000                   
11096  0000000                   END_COPY_FLASH_PAGE_OK#:
11097  0000000                   	LDA #00H
11098  0000000                   END_COPY_FLASH_PAGE#:
11099  0000000                   	PLP
11100  0000000                   	ENDM
11101  0000000                   ;--------------------------------------------------------
11102  0000000                   ; @brief	MODIFY flash page
11103  0000000                   ;--------------------------------------------------------
11104  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF





11105  0000000                   
11106  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR
11107  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11108  0000000                   
11109  0000000                   	MOV16_16 OFFSET2, DST_OFFSET
11110  0000000                   	MOV16_16 SRC_LEN2, SRC_LEN
11111  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11112  0000000                   
11113  0000000                   	JSR FLASH_BACKUP_REPLACE_PAGE_PROC
11114  0000000                   
11115  0000000                   	ENDM
11116  0000000                   ;--------------------------------------------------------
11117  0000000                   ; @brief	MODIFY flash page
11118  0000000                   ;--------------------------------------------------------
11119  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP_RAM MACRO BACKUP_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11120  0000000                   
11121  0000000                   	MOV24_24_DP DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR_RAM
11122  0000000                   	MOV24_24_DP SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR_RAM
11123  0000000                   
11124  0000000                   	MOV16_16_DP OFFSET2, DST_OFFSET_RAM
11125  0000000                   	MOV16_16_DP SRC_LEN2, SRC_LEN_RAM
11126  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11127  0000000                   
11128  0000000                   
11129  0000000                   	JSR FLASH_BACKUP_REPLACE_PAGE_PROC
11130  0000000                   
11131  0000000                   	ENDM
11132  0000000                   ;--------------------------------------------------------
11133  0000000                   ; @brief	MODIFY flash page
11134  0000000                   ;--------------------------------------------------------
11135  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP_RAM2 MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11136  0000000                   
11137  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR
11138  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11139  0000000                   
11140  0000000                   	MOV16_16_DP OFFSET2, DST_OFFSET_RAM
11141  0000000                   	MOV16_16_DP SRC_LEN2, SRC_LEN_RAM
11142  0000000                   	MOV16_16 SRC_BUF4, SRC_PBUF
11143  0000000                   
11144  0000000                   	JSR FLASH_BACKUP_REPLACE_PAGE_PROC
11145  0000000                   
11146  0000000                   	ENDM
11147  0000000                   ;--------------------------------------------------------
11148  0000000                   ; @brief	MODIFY flash page
11149  0000000                   ;--------------------------------------------------------
11150  0000000                   FLASH_BACKUP_REPLACE_PAGE_DP_RAM2_ILI MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11151  0000000                   	PHP
11152  0000000                   	SEI
11153  0000000                   
11154  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, BACKUP_PAGE_ADDR
11155  0000000                   	MOV24_24 SRC_PAGE_START_ADDR3, SRC_PAGE_ADDR
11156  0000000                   
11157  0000000                   	MOV16_16_DP OFFSET2, DST_OFFSET_RAM
11158  0000000                   	MOV16_16_DP SRC_LEN2, SRC_LEN_RAM
11159  0000000                   ;MOV16_16 SRC_BUF4, SRC_PBUF
11160  0000000                   
11161  0000000                   	LDA .LOW.SRC_PBUF





11162  0000000                   	STA SRC_BUF4
11163  0000000                   	LDA .HIGH.SRC_PBUF
11164  0000000                   	STA SRC_BUF4+1
11165  0000000                   
11166  0000000                   	STZ16 COUNT2
11167  0000000                   
11168  0000000                   ;eraes flash page before program data
11169  0000000                   	ISP_ERASE_PAGE_DP DST_PAGE_START_ADDR3
11170  0000000                   	BEQ 3
11171  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11172  0000000                   
11173  0000000                   BACKUP_LOOP#:
11174  0000000                   ;read data (4B)
11175  0000000                   	ISP_READ_DATA_DP SRC_PAGE_START_ADDR3, DST_BUF4
11176  0000000                   	BEQ 3
11177  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11178  0000000                   
11179  0000000                   REPLACE#:
11180  0000000                   ;the current offset is the replacement offset?
11181  0000000                   	LDA OFFSET2+1
11182  0000000                   	CMP COUNT2+1
11183  0000000                   	BNE END_REPLACE#
11184  0000000                   	LDA OFFSET2
11185  0000000                   	CMP COUNT2
11186  0000000                   	BNE END_REPLACE#
11187  0000000                   
11188  0000000                   	LDA SRC_LEN2+1;
11189  0000000                       CMP #00
11190  0000000                       BCC REPLACE2_FLASH_PROC_1#
11191  0000000                       BNE REPLACE2_FLASH_PROC_2#
11192  0000000                       LDA SRC_LEN2
11193  0000000                       CMP #04H
11194  0000000                       BCS REPLACE2_FLASH_PROC_2#
11195  0000000                   
11196  0000000                   REPLACE2_FLASH_PROC_1#:
11197  0000000                   ;replace data (<4B)
11198  0000000                   	LDA SRC_LEN2
11199  0000000                   	BNE 3
11200  0000000                   	JMP END_REPLACE#
11201  0000000                   
11202  0000000                   	LDY SRC_LEN2
11203  0000000                   REPLACE_LOOP1#:
11204  0000000                   	DEY
11205  0000000                   	LDA (.LOW.SRC_BUF4),Y
11206  0000000                   	STA DST_BUF4,Y
11207  0000000                   	CPY #0
11208  0000000                   	BNE REPLACE_LOOP1#
11209  0000000                   
11210  0000000                   	JMP END_REPLACE#
11211  0000000                   
11212  0000000                   REPLACE2_FLASH_PROC_2#:
11213  0000000                   ;replace data (4B)
11214  0000000                   	LDY #4
11215  0000000                   REPLACE_LOOP#:
11216  0000000                   	DEY
11217  0000000                   	LDA (.LOW.SRC_BUF4),Y
11218  0000000                   	STA DST_BUF4,Y





11219  0000000                   	CPY #0
11220  0000000                   	BNE REPLACE_LOOP#
11221  0000000                   
11222  0000000                   ADD_REPLACE#:
11223  0000000                   ;SBC16_16 SRC_LEN2, 4
11224  0000000                   	ADD16_16 OFFSET2, 4
11225  0000000                   
11226  0000000                   ;accumlate replacement length
11227  0000000                   	SBC16_16 SRC_LEN2, 4
11228  0000000                   
11229  0000000                   ;accumlate pointer to buffer
11230  0000000                   	ADD16_16 SRC_BUF4, 4
11231  0000000                   
11232  0000000                   END_REPLACE#:		
11233  0000000                   
11234  0000000                   ;write data (4B)
11235  0000000                   	ISP_WRITE_DATA_DP DST_PAGE_START_ADDR3, DST_BUF4
11236  0000000                   	BEQ 3
11237  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11238  0000000                   
11239  0000000                   	ISP_VERIFY_DATA_DP DST_PAGE_START_ADDR3, DST_BUF4
11240  0000000                   	BEQ 3
11241  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP#
11242  0000000                   
11243  0000000                   ;accumlate source address
11244  0000000                   	ADD24_24 SRC_PAGE_START_ADDR3, 4
11245  0000000                   
11246  0000000                   ;accumlate destination address
11247  0000000                   	ADD24_24 DST_PAGE_START_ADDR3, 4
11248  0000000                   
11249  0000000                   ;accumlate count
11250  0000000                   	ADD16_16 COUNT2, 4
11251  0000000                   
11252  0000000                   	LDA !DST_PAGE_START_ADDR3+2
11253  0000000                   	CMP #.HIGH8.(BACKUP_PAGE_ADDR+PAGE_SIZE)
11254  0000000                   	BEQ 3
11255  0000000                   	JMP BACKUP_LOOP#
11256  0000000                   	LDA !DST_PAGE_START_ADDR3+1
11257  0000000                   	CMP #.HIGH.(BACKUP_PAGE_ADDR+PAGE_SIZE)
11258  0000000                   	BEQ 3
11259  0000000                   	JMP BACKUP_LOOP#
11260  0000000                   	LDA !DST_PAGE_START_ADDR3
11261  0000000                   	CMP #.LOW.(BACKUP_PAGE_ADDR+PAGE_SIZE)
11262  0000000                   	BEQ 3
11263  0000000                   	JMP BACKUP_LOOP#
11264  0000000                   	JMP END_FLASH_BACKUP_REPLACE_PAGE_DP_OK#
11265  0000000                   
11266  0000000                   END_FLASH_BACKUP_REPLACE_PAGE_DP_OK#:	
11267  0000000                   	LDA #00H		; SUCCESS!
11268  0000000                   END_FLASH_BACKUP_REPLACE_PAGE_DP#:
11269  0000000                   	PLP
11270  0000000                   	ENDM
11271  0000000                   ;--------------------------------------------------------
11272  0000000                   ; @brief	Update flash page
11273  0000000                   ; @param	
11274  0000000                   ;--------------------------------------------------------
11275  0000000                   FLASH_UPDATE_PAGE MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF





11276  0000000                   	FLASH_UPDATE_PAGE_DP BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11277  0000000                   	ENDM
11278  0000000                   ;--------------------------------------------------------
11279  0000000                   ; @brief	Update flash page with ram buf
11280  0000000                   ; @param	backup and source page address, target offset, 
11281  0000000                   ;			count, and pointer to buffer
11282  0000000                   ;--------------------------------------------------------
11283  0000000                   FLASH_UPDATE_PAGE_DP MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11284  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11285  0000000                   	CMP #0
11286  0000000                   	BEQ 3
11287  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP#
11288  0000000                   
11289  0000000                   	FLASH_COPY_PAGE SRC_PAGE_ADDR, BACKUP_PAGE_ADDR
11290  0000000                   	CMP #0
11291  0000000                   	BEQ 3
11292  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP#
11293  0000000                   
11294  0000000                   END_FLASH_UPDATE_PAGE_DP_OK#:
11295  0000000                   	LDA #00H
11296  0000000                   END_FLASH_UPDATE_PAGE_DP#:
11297  0000000                   	ENDM
11298  0000000                   ;--------------------------------------------------------
11299  0000000                   ; @brief	
11300  0000000                   ; @param	
11301  0000000                   ;--------------------------------------------------------
11302  0000000                   FLASH_UPDATE_PAGE_DP_RAM MACRO BACKUP_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11303  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP_RAM BACKUP_PAGE_ADDR_RAM, SRC_PAGE_ADDR_RAM, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11304  0000000                   	CMP #0
11305  0000000                   	BEQ 3
11306  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11307  0000000                   
11308  0000000                   	FLASH_COPY_PAGE_RAM SRC_PAGE_ADDR_RAM, BACKUP_PAGE_ADDR_RAM
11309  0000000                   	CMP #0
11310  0000000                   	BEQ 3
11311  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11312  0000000                   
11313  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_OK#
11314  0000000                   	LDA #00H
11315  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM#:
11316  0000000                   	ENDM
11317  0000000                   ;--------------------------------------------------------
11318  0000000                   ; @brief	
11319  0000000                   ; @param	
11320  0000000                   ;--------------------------------------------------------
11321  0000000                   FLASH_UPDATE_PAGE_DP_RAM2 MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11322  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP_RAM2 BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11323  0000000                   	CMP #0
11324  0000000                   	BEQ 3
11325  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11326  0000000                   
11327  0000000                   	FLASH_COPY_PAGE SRC_PAGE_ADDR, BACKUP_PAGE_ADDR
11328  0000000                   	CMP #0
11329  0000000                   	BEQ 3
11330  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM#
11331  0000000                   
11332  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_OK#:





11333  0000000                   	LDA #00H
11334  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM#:
11335  0000000                   	ENDM
11336  0000000                   ;--------------------------------------------------------
11337  0000000                   ; @brief	
11338  0000000                   ; @param	
11339  0000000                   ;--------------------------------------------------------
11340  0000000                   FLASH_UPDATE_PAGE_DP_RAM2_ILI MACRO BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11341  0000000                   	FLASH_BACKUP_REPLACE_PAGE_DP_RAM_ILI BACKUP_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11342  0000000                   	CMP #0
11343  0000000                   	BEQ 3
11344  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM_ILI#
11345  0000000                   
11346  0000000                   	FLASH_COPY_PAGE SRC_PAGE_ADDR, BACKUP_PAGE_ADDR
11347  0000000                   	CMP #0
11348  0000000                   	BEQ 3
11349  0000000                   	JMP END_FLASH_UPDATE_PAGE_DP_RAM_ILI#
11350  0000000                   
11351  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_ILI_OK#:
11352  0000000                   	LDA #00H
11353  0000000                   END_FLASH_UPDATE_PAGE_DP_RAM_ILI#:
11354  0000000                   	ENDM
11355  0000000                   ;--------------------------------------------------------
11356  0000000                   ; @brief Read protection page
11357  0000000                   ; @param
11358  0000000                   ;
11359  0000000                   ;--------------------------------------------------------
11360  0000000                   .IF (WITH_PROTECTION_PAGE_UPDATE .EQ. 1)
11361  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 1)
11362  0000000                   PROTECTION_PAGE_READ MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11363  0000000                   
11364  0000000                   	MOV16_16 OFFSET_TEMP, DST_OFFSET
11365  0000000                   	MOV16_16 LEN_TEMP, SRC_LEN
11366  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11367  0000000                   
11368  0000000                   	JSR PROTECTION_PAGE_READ_PROC
11369  0000000                   
11370  0000000                   	ENDM
11371  0000000                   
11372  0000000                   ;--------------------------------------------------------
11373  0000000                   ; @brief Update protection page
11374  0000000                   ; @param
11375  0000000                   ;
11376  0000000                   ;--------------------------------------------------------
11377  0000000                   PROTECTION_PAGE_UPDATE MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET, SRC_LEN, SRC_PBUF
11378  0000000                   
11379  0000000                   	MOV16_16 OFFSET_TEMP, DST_OFFSET
11380  0000000                   	MOV16_16 LEN_TEMP, SRC_LEN
11381  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11382  0000000                   
11383  0000000                   	JSR PROTECTION_PAGE_UPDATE_PROC
11384  0000000                   
11385  0000000                   	ENDM
11386  0000000                   ;--------------------------------------------------------
11387  0000000                   ; @brief Update protection page
11388  0000000                   ; @param
11389  0000000                   ;





11390  0000000                   ;--------------------------------------------------------
11391  0000000                   PROTECTION_PAGE_READ_RAM MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11392  0000000                   
11393  0000000                   	MOV16_16_DP OFFSET_TEMP, DST_OFFSET_RAM
11394  0000000                   	MOV16_16_DP LEN_TEMP, SRC_LEN_RAM
11395  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11396  0000000                   
11397  0000000                   	JSR PROTECTION_PAGE_READ_PROC
11398  0000000                   
11399  0000000                   	ENDM
11400  0000000                   ;--------------------------------------------------------	
11401  0000000                   PROTECTION_PAGE_UPDATE_RAM MACRO SWAPPING_PAGE_ADDR, SRC_PAGE_ADDR, DST_OFFSET_RAM, SRC_LEN_RAM, SRC_PBUF
11402  0000000                   
11403  0000000                   	MOV16_16_DP OFFSET_TEMP, DST_OFFSET_RAM
11404  0000000                   	MOV16_16_DP LEN_TEMP, SRC_LEN_RAM
11405  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11406  0000000                   
11407  0000000                   	JSR PROTECTION_PAGE_UPDATE_PROC
11408  0000000                   
11409  0000000                   	ENDM
11410  0000000                   ;--------------------------------------------------------
11411  0000000                   PROTECTION_PAGE_INJECT_ID MACRO DST_PAGE_ADDR
11412  0000000                   	MOV24_24 DST_PAGE_START_ADDR3, DST_PAGE_ADDR
11413  0000000                   	JSR FLASH_PAGE_INJECT_ID_PROC
11414  0000000                   	ENDM
11415  0000000                   
11416  0000000                   .ENDIF
11417  0000000                   .ENDIF
11418  0000000                   ;--------------------------------------------------------
11419  0000000                   ;--------------------------------------------------------
11420  0000000                   .IF (WITH_PROTECTION_PAGE_UPDATE .EQ. 1)
11421  0000000                   .IF (PROTECTION_PAGE_WORKING_MODE .EQ. 2)
11422  0000000                   ;--------------------------------------------------------
11423  0000000                   PROTECTION_PAGE_SECTION_UPDATE MACRO SRC_PBUF
11424  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11425  0000000                   	JSR FLASH_SECTION_UPDATE_PROC
11426  0000000                   
11427  0000000                   	ENDM
11428  0000000                   ;--------------------------------------------------------
11429  0000000                   PROTECTION_PAGE_SECTION_READ MACRO SRC_PBUF
11430  0000000                   	MOV16_16 PBUF_TEMP, SRC_PBUF
11431  0000000                   	JSR FLASH_SECTION_READ_PROC
11432  0000000                   
11433  0000000                   	ENDM
11434  0000000                   .ENDIF
11435  0000000                   .ENDIF
11436  0000000                   
11437  0000000                   
11438  0000000                   
11439  0000000                   
11440  0000000                   	.IF (WITH_FW_CAP_SENSOR_KEYS .GT. 0)
11441  0000000                       	.IF (WITH_PSF_PROJECT .EQ. 0)
11442  0000000                   ;---------------------------------
11443  0000000                   ; Cap Include File
11444  0000000                   ;---------------------------------
11445  0000000                   	INCLUDE	"C:\NUVOTON\NSPPLAYLISTEDITOR\V1.13.000\NSP_SDS\SDS_NSP\INCLUDE\CAP_SENSOR_MACRO.INI.APP"
11446  0000000                       	.ENDIF





11447  0000000                       .ENDIF
11448  0000000                   
11449  0000000                   ;----------------------------------------------------------------------------------------------
11450  0000000                   
11451  0000000                   ;==============================================================================
11452  0000000                   ; Constants
11453  0000000                   ;==============================================================================
11454  0000000                   RR0	EQU	00H
11455  0000000                   RR1	EQU	01H
11456  0000000                   
11457  0000000                   ;==============================================================================
11458  0000000                   ; Macros
11459  0000000                   ;==============================================================================
11460  0000000                   SPECIAL_REGISTERS_INIT MACRO
11461  0000000                   
11462  0000000                   ; init UIO
11463  0000000                   	EXTERN	UIO_INIT
11464  0000000                   	JSR 	UIO_INIT
11465  0000000                   
11466  0000000                   ; init SLD
11467  0000000                   .IF (WITH_SLD_ENABLE .EQ. 1)
11468  0000000                   	EXTERN	SLD_INIT
11469  0000000                   	JSR 	SLD_INIT
11470  0000000                   .ENDIF
11471  0000000                   
11472  0000000                   ; init N55P
11473  0000000                   ;.IF (WITH_PSF_PROJECT .EQ. 0H)
11474  0000000                   	.IF (N55P_DEVICE_NUM .GT. 0H)
11475  0000000                   	EXTERN	UIO_N55P_INIT
11476  0000000                   	JSR 	UIO_N55P_INIT
11477  0000000                   	.ENDIF
11478  0000000                   ;.ENDIF
11479  0000000                   
11480  0000000                   	ENDM
11481  0000000                   
11482  0000000                   
11483  0000000                   
11484  0000000                   	GLOBAL 		COMMAND_ADDR_TABLE
11485  0000000                   
11486  0000000                   
11487  0000000                   
11488  0000000                   ;==========================================================================
11489  0000000                   ;	DECLARE VARIABLES INSIDE THIS SECTION
11490  0000000                   ;	EXAMPLE => VAR1	DS	3
11491  0000000                   ;	           VAR2	DS	1
11492  0000000                   ;==========================================================================
11493  0000000                   	USER_RAM: SECTION
11494  0000000                   	ORG	0000H
11495  0000000                   
11496  0000000                   .IF	(WITH_RAM_OVER_STACK .EQ. 1)
11497  0000000                   	USER_RAM_AFTER_RESERVED: SECTION
11498  0000000                   
11499  0000000                   	ENDS
11500  0000000                   .ENDIF
11501  0000000                   
11502  0000000                   	ENDS
11503  0000000                   





11504  0000000                   ;==========================================================================
11505  0000000                   ;	WRITE COMMAND SUBROUTINE INSIDE THIS SECTION
11506  0000000                   ;	1.PLEASE REMOVE MARK AND ADD YOUR CODE AS NEEDED. INCLUDE 'CMDx:' 
11507  0000000                   ;	  AND 'DW CMDx' 
11508  0000000                   ;	2.EACH SUBOUTINE SHOULD BE ENDED BY 'RTS'
11509  0000000                   ;==========================================================================
11510  0000000                   	CODE: SECTION
11511  0000000                   
11512  0000000                   CMD00:
11513  0000000                   CMD01:
11514  0000000                   CMD02:
11515  0000000                   CMD03:
11516  0000000                   CMD04:
11517  0000000                   CMD05:
11518  0000000                   CMD06:
11519  0000000                   CMD07:
11520  0000000                   CMD08:
11521  0000000                   CMD09:
11522  0000000                   CMD10:
11523  0000000                   CMD11:
11524  0000000                   CMD12:
11525  0000000                   CMD13:
11526  0000000                   CMD14:
11527  0000000                   CMD15:
11528  0000000                   CMD16:
11529  0000000                   CMD17:
11530  0000000                   CMD18:
11531  0000000                   CMD19:
11532  0000000                   CMD20:
11533  0000000                   CMD21:
11534  0000000                   CMD22:
11535  0000000                   CMD23:
11536  0000000                   CMD24:
11537  0000000                   CMD25:
11538  0000000                   CMD26:
11539  0000000                   CMD27:
11540  0000000                   CMD28:
11541  0000000                   CMD29:
11542  0000000                   CMD30:
11543  0000000                   CMD31:
11544  0000000  60           	RTS
11545  0000001                   
11546  0000001                   
11547  0000001                   COMMAND_ADDR_TABLE:
11548  0000001  0000            	DW	CMD00
11549  0000003  0000            	DW	CMD01
11550  0000005  0000            	DW	CMD02
11551  0000007  0000            	DW	CMD03
11552  0000009  0000            	DW	CMD04
11553  000000B  0000            	DW	CMD05
11554  000000D  0000            	DW	CMD06
11555  000000F  0000            	DW	CMD07
11556  0000011  0000            	DW	CMD08
11557  0000013  0000            	DW	CMD09
11558  0000015  0000            	DW	CMD10
11559  0000017  0000            	DW	CMD11
11560  0000019  0000            	DW	CMD12





11561  000001B  0000            	DW  CMD13
11562  000001D  0000            	DW  CMD14
11563  000001F  0000            	DW  CMD15
11564  0000021  0000            	DW  CMD16
11565  0000023  0000            	DW  CMD17
11566  0000025  0000            	DW  CMD18
11567  0000027  0000            	DW  CMD19
11568  0000029  0000            	DW  CMD20
11569  000002B  0000            	DW  CMD21
11570  000002D  0000            	DW  CMD22
11571  000002F  0000            	DW  CMD23
11572  0000031  0000            	DW  CMD24
11573  0000033  0000            	DW  CMD25
11574  0000035  0000            	DW  CMD26
11575  0000037  0000            	DW  CMD27
11576  0000039  0000            	DW  CMD28
11577  000003B  0000            	DW  CMD29
11578  000003D  0000            	DW  CMD30
11579  000003F  0000            	DW  CMD31
11580  0000041                   
11581  0000041                   
11582  0000041                   
11583  0000041                   
11584  0000041                   
11585  0000041                   
11586  0000041                   	ENDS
11587  0000041                   ;**The following is audio external**
11588  0000041                   ;**The following is sentence label**
11589  0000041                   ;**The following is INIT_DECODE_SPEECH label**
11590  0000041                   	EXT_PROGRAM: SECTION
11591  0000000                   	ENDS
11592  0000041                   
		Line(s) Assembled : 11592
		Error(s): 0
		Warn(s) : 0
		Begin Assembling Time : Wed Sep 15 14:46:16 2021
		End   Assembling Time : Wed Sep 15 14:46:16 2021

